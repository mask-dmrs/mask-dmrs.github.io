{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"source/README.md","path":"README.md","modified":0,"renderable":0},{"_id":"source/dmrs_red_t.png","path":"dmrs_red_t.png","modified":0,"renderable":0},{"_id":"source/others.md","path":"others.md","modified":0,"renderable":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","path":"lib/velocity/velocity.ui.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/affix.js","path":"js/src/affix.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/algolia-search.js","path":"js/src/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/js.cookie.js","path":"js/src/js.cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/motion.js","path":"js/src/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/exturl.js","path":"js/src/exturl.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/post-details.js","path":"js/src/post-details.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scroll-cookie.js","path":"js/src/scroll-cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/utils.js","path":"js/src/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery/index.js","path":"lib/jquery/index.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","path":"lib/ua-parser-js/dist/ua-parser.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","path":"lib/ua-parser-js/dist/ua-parser.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.js","path":"lib/velocity/velocity.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1}],"Cache":[{"_id":"source/CNAME","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1521948662549},{"_id":"source/README.md","hash":"ead43b52e9eed78e6009549a0598a55c247a49f7","modified":1521948662550},{"_id":"source/dmrs_red_t.png","hash":"ca3bd2e3ba257ee62c1e3b910adee6ac54aae474","modified":1521948662588},{"_id":"source/others.md","hash":"e4887fe9a331f3947417d07f5f1ed6651bfbd72b","modified":1521948662588},{"_id":"themes/next/.bowerrc","hash":"334da94ca6f024d60d012cc26ea655681e724ad8","modified":1521977761998},{"_id":"themes/next/.editorconfig","hash":"211d2c92bfdddb3e81ea946f4ca7a539f150f4da","modified":1521977761999},{"_id":"themes/next/.gitattributes","hash":"8454b9313cb1a97b63fb87e2d29daee497ce6249","modified":1521977761999},{"_id":"themes/next/.hound.yml","hash":"289dcf5bfe92dbd680d54d6e0668f41c9c9c0c78","modified":1521977762002},{"_id":"themes/next/.javascript_ignore","hash":"cd250ad74ca22bd2c054476456a73d9687f05f87","modified":1521977762003},{"_id":"themes/next/.jshintrc","hash":"b7d23f2ce8d99fa073f22f9960605f318acd7710","modified":1521977762003},{"_id":"themes/next/.stylintrc","hash":"3b7f9785e9ad0dab764e1c535b40df02f4ff5fd6","modified":1521977762004},{"_id":"themes/next/.gitignore","hash":"0378adb9c2dc4855b3198184df4863cb30e4059c","modified":1521977762002},{"_id":"themes/next/.travis.yml","hash":"6674fbdfe0d0c03b8a04527ffb8ab66a94253acd","modified":1521977762004},{"_id":"themes/next/README.md","hash":"fa499750d9c83a1111db397879797293eb300d81","modified":1521977762005},{"_id":"themes/next/_config - 副本.yml","hash":"52a1ffbf7f2c95825e8f46ae71eedf3115ab30a0","modified":1521977762006},{"_id":"themes/next/LICENSE.md","hash":"f0190c7d83a98464549a6b3a51bb206148d88e1b","modified":1521977762004},{"_id":"themes/next/_config.yml","hash":"dbacbe81e9da85f4b705158edb66c6398a1c4c6a","modified":1521977762006},{"_id":"themes/next/_config_.yml","hash":"97b52d95036f296665dfd2853d351718dd923feb","modified":1521977762007},{"_id":"themes/next/bower.json","hash":"1a6516123c947cfca8b21f562565800e8768eb26","modified":1521977762007},{"_id":"themes/next/crowdin.yml","hash":"d8807bbc82be89d16bcaf08b1855008b3fe92cab","modified":1521977762008},{"_id":"themes/next/gulpfile.coffee","hash":"67eaf2515100971f6195b60eeebbfe5e8de895ab","modified":1521977762017},{"_id":"themes/next/package.json","hash":"de13bd178fe644c46ed1148fefaffb5f75811a06","modified":1521977762074},{"_id":"source/_posts/01_abstract-document.md","hash":"461ad387ab5f73ce7927b574505ceee30892a89b","modified":1521985263987},{"_id":"source/_posts/02_abstract-factory.md","hash":"21b9f72cc8f1f5aa4dfd1bf5d7261c09f95f9651","modified":1521985264255},{"_id":"source/_posts/03_adapter.md","hash":"e3bee70dc2d305363f5ac51cd719835b4996ac63","modified":1521985264540},{"_id":"source/_posts/05_balking.md","hash":"352448837a75cccec26bd8a10ef88534c43d20b5","modified":1521985265119},{"_id":"source/_posts/06_bridge.md","hash":"928c46721bc737482814c2305eea4bf66acccd1a","modified":1521985265433},{"_id":"source/_posts/04_Async-Method-Invocation.md","hash":"0c5f53bfe3439698153f4ce237652a2e5c8ba75f","modified":1521985264831},{"_id":"source/_posts/07_builder.md","hash":"4b88afd90fa553c9c0e9bf24967ec2d8d25f8c9e","modified":1521985265758},{"_id":"source/_posts/111.md","hash":"0243e698542d8067d71c68e681f3dbd8dd546f5c","modified":1521987620084},{"_id":"source/_posts/180307_提问的智慧.md","hash":"95ae6bc4743863c1ed1a7418e161842e091bfd2e","modified":1521988531797},{"_id":"source/_posts/APP扫描二维码登陆流程.md","hash":"acf09f698ee6a70edbff97497b094814b39472f1","modified":1521985266867},{"_id":"source/_posts/Hexo集成gitment异常处理.md","hash":"16d68bacc2a4e03c8ff81175a0ad2dfeaa3d1bc2","modified":1521985267196},{"_id":"source/_posts/InvalidClassException.md","hash":"24ca11cd8bb00f02326917ce516b8f7d2f7e0d0e","modified":1521985267463},{"_id":"source/_posts/180316_中文文案排版指南.md","hash":"83a2918917f8ad2399cccc2dac85be1b41d8d04a","modified":1521989063985},{"_id":"source/_posts/SpringCloud-config-client不能连接server.md","hash":"f1a18ccae4db3e50dfe647fd7d419f9b05f57950","modified":1521985268294},{"_id":"source/_posts/ali-api.md","hash":"9b933b801b5de453631946ebf7f93df25a8d4547","modified":1521985266601},{"_id":"source/_posts/java生成二维码.md","hash":"9b4ea9132ee9a8e637b1c1489e5bbd710416425f","modified":1521985268005},{"_id":"source/_posts/website.md","hash":"fbb4a62d42c657fd675e89e01688894b99a4fb60","modified":1521985268571},{"_id":"source/_posts/二进制位运算实例.md","hash":"b360b923a78e71202175fd1b00d6c248c9ea3ec4","modified":1521985268847},{"_id":"source/_posts/java-generate-md5.md","hash":"e420ca4ac52796d03a501885b74210b1f063fda8","modified":1521985267741},{"_id":"source/_posts/关于RedisTemplate能注入到ValueOperations对象的疑问解惑.md","hash":"1d8ff1890613161b1da9f5d0a9eb28651d443ffd","modified":1521985269118},{"_id":"source/_posts/拖动排序后台逻辑思考过程.md","hash":"83f67061963ce4c9c4bbd21dd99ead53cb4334a6","modified":1521989059452},{"_id":"source/_posts/程序员.md","hash":"408240c13ad5ba0f9026c6c6adef93a57ded0cc6","modified":1521985270292},{"_id":"source/_posts/错误的使用了时间戳.md","hash":"f303c2e78a57c9b50099e0407c561274f9254c66","modified":1521985270563},{"_id":"source/_posts/插件或主题修改记录.md","hash":"c3b09a682b7033729ae6c2d6b95f3ee989fca01f","modified":1521985269998},{"_id":"source/_posts/高房价背后的真实逻辑（深度长篇分析）.md","hash":"f0a91f0883272237fc4a7767acb7ecadd55fa41b","modified":1521985270852},{"_id":"source/about/index.md","hash":"9a9adc9564e383d0aec521fff2c69a24f11b856f","modified":1521948662585},{"_id":"source/categories/index.md","hash":"84dfb37b9581b7d2fe05024bb951f90ab82a8bfb","modified":1521948662586},{"_id":"source/tags/index.md","hash":"470027aaf29061d3a4a4edc2642f018c97f996a6","modified":1521948662589},{"_id":"themes/next/.git/HEAD","hash":"df28fb7e2f9c0b06bf7b78ce3b6e5f1cac2e754b","modified":1521977761961},{"_id":"themes/next/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1521977749947},{"_id":"themes/next/.git/config","hash":"a8b9298410e6d5592b42781b71968a22a8b7552e","modified":1521977761969},{"_id":"themes/next/.git/index","hash":"6d3a53e89429168d56ca5e35831e10d08151567c","modified":1521977762173},{"_id":"themes/next/.git/packed-refs","hash":"e15231dc19bc16411478dee8074a88e8c94f139a","modified":1521977761955},{"_id":"themes/next/.github/ISSUE_TEMPLATE.md","hash":"1e212fe229bd659726b4a3bcf4b5b14e0310ba3a","modified":1521977762000},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"e8400c762e5754baf439ab2b7c9e92acd2fc6fe9","modified":1521977762000},{"_id":"themes/next/.github/PULL_REQUEST_TEMPLATE.md","hash":"36201119490a04107c8179b10202548a9d0e5e60","modified":1521977762001},{"_id":"themes/next/.github/browserstack_logo.png","hash":"a6c43887f64a7f48a2814e3714eaa1215e542037","modified":1521977762001},{"_id":"themes/next/.github/stale.yml","hash":"b9f7b394c0f3c00ac36168aa5f88c04cbb335911","modified":1521977762001},{"_id":"themes/next/docs/AGPL3.md","hash":"f463f95b169d64983f59fa6f3e4b6760290a0e6b","modified":1521977762008},{"_id":"themes/next/docs/ALGOLIA-SEARCH.md","hash":"1dada3c3404445a00367882b8f97cdf092b7943d","modified":1521977762009},{"_id":"themes/next/docs/AUTHORS.md","hash":"51a0a13da55ff3d596970b2f9ab4531c6b2211f2","modified":1521977762009},{"_id":"themes/next/docs/DATA-FILES.md","hash":"9a1895c0a0db705c4c48f512e86917f9af1ec3fb","modified":1521977762010},{"_id":"themes/next/docs/INSTALLATION.md","hash":"b74ef6fedf76cdb156e2265759ee0a789ddd49cc","modified":1521977762010},{"_id":"themes/next/docs/LEANCLOUD-COUNTER-SECURITY.md","hash":"157491579fa631aca8850917df1fb95028ad663d","modified":1521977762011},{"_id":"themes/next/docs/LICENSE","hash":"5b702310012d480b40529fd10cf1872f687277a0","modified":1521977762011},{"_id":"themes/next/docs/UPDATE-FROM-5.1.X.md","hash":"c9f2ed8e15c137b1885d9ca8b7197d9f457971e9","modified":1521977762012},{"_id":"themes/next/docs/MATH.md","hash":"bdbbcaf88f86de3d762fd1459fd5a0893cf4bce6","modified":1521977762011},{"_id":"themes/next/layout/_layout.swig","hash":"354a81e1ad0257e15d1c2e90b3f1c7ed893cec3f","modified":1521977762037},{"_id":"themes/next/layout/archive.swig","hash":"678a6cab739b54da9dfb2d6634848cffdc7aab6a","modified":1521977762072},{"_id":"themes/next/layout/index.swig","hash":"555a357ecf17128db4e29346c92bb6298e66547a","modified":1521977762072},{"_id":"themes/next/layout/page.swig","hash":"fbf2c3d14c3e5730fad75d7d106bf7f070ccd69c","modified":1521977762073},{"_id":"themes/next/layout/category.swig","hash":"3cbb3f72429647411f9e85f2544bdf0e3ad2e6b2","modified":1521977762072},{"_id":"themes/next/layout/post.swig","hash":"ceba7287574c429a235aa7a62bf7a3dc1efb265a","modified":1521977762073},{"_id":"themes/next/layout/schedule.swig","hash":"87ad6055df01fa2e63e51887d34a2d8f0fbd2f5a","modified":1521977762074},{"_id":"themes/next/layout/tag.swig","hash":"34e1c016cbdf94a31f9c5d494854ff46b2a182e9","modified":1521977762074},{"_id":"themes/next/languages/_en.yml","hash":"577bc45b4766232bed2233fde6333b85510e8410","modified":1521977762018},{"_id":"themes/next/languages/ar.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762019},{"_id":"themes/next/languages/bg.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762019},{"_id":"themes/next/languages/da.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762020},{"_id":"themes/next/languages/cs.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762020},{"_id":"themes/next/languages/bn.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762019},{"_id":"themes/next/languages/de.yml","hash":"dc2f8be35fc9e57d2480302606e5dc51f6e66906","modified":1521977762021},{"_id":"themes/next/languages/el.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762021},{"_id":"themes/next/languages/es.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762022},{"_id":"themes/next/languages/fa.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762023},{"_id":"themes/next/languages/et.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762022},{"_id":"themes/next/languages/fi.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762023},{"_id":"themes/next/languages/fr.yml","hash":"d9bce7ee318c59487b2d031482e45e274d7c4079","modified":1521977762023},{"_id":"themes/next/languages/he.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762024},{"_id":"themes/next/languages/hr.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762025},{"_id":"themes/next/languages/hu.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762025},{"_id":"themes/next/languages/hi.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762024},{"_id":"themes/next/languages/id.yml","hash":"9f90dabf4bffcc50ec29ad8e86ca3f6fdc9e5d51","modified":1521977762025},{"_id":"themes/next/languages/it.yml","hash":"ac0e9f5163daa57a196c32f4b9a4a4bafb65983b","modified":1521977762026},{"_id":"themes/next/languages/ja.yml","hash":"40bc7e5c0cafbd02dcd37c293a68f18ae7ddfcd0","modified":1521977762026},{"_id":"themes/next/languages/ko.yml","hash":"3e406c01a73b09659f860da2c334a43127a1e443","modified":1521977762027},{"_id":"themes/next/languages/jv.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762026},{"_id":"themes/next/languages/lt.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762027},{"_id":"themes/next/languages/lv.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762028},{"_id":"themes/next/languages/ms.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762028},{"_id":"themes/next/languages/no.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762029},{"_id":"themes/next/languages/pa.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762029},{"_id":"themes/next/languages/nl.yml","hash":"4bca67d737d17eb9d34f1292b77e4dceed20c836","modified":1521977762028},{"_id":"themes/next/languages/pl.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762029},{"_id":"themes/next/languages/pt-BR.yml","hash":"eb70ed045b00c53a2901217aed46468681c9cdb5","modified":1521977762030},{"_id":"themes/next/languages/pt.yml","hash":"f7c3af0928008763b4991c79854f9924b0b4debd","modified":1521977762030},{"_id":"themes/next/languages/ru.yml","hash":"f65d3b1fa21030166d606dbb2ba60ac84e0dddb4","modified":1521977762031},{"_id":"themes/next/languages/sl.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762031},{"_id":"themes/next/languages/ro.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762031},{"_id":"themes/next/languages/sr.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762032},{"_id":"themes/next/languages/sv.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762032},{"_id":"themes/next/languages/th.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762033},{"_id":"themes/next/languages/uk.yml","hash":"3df1fdab6589c9e8e12fad114616cd64cbbc76bf","modified":1521977762033},{"_id":"themes/next/languages/vi.yml","hash":"113200ca4ac4acf11874fc22bbe9deffca59908a","modified":1521977762034},{"_id":"themes/next/languages/tr.yml","hash":"9fbe0813fd1302ff25f5f22e67a6e023c8f87e99","modified":1521977762033},{"_id":"themes/next/languages/zh-CN.yml","hash":"760c718af8399b27b48e0f835c1abf9b84c49a84","modified":1521977762034},{"_id":"themes/next/languages/zh-HK.yml","hash":"56d8448eaf9676b91ec3e921bdbf6ec70d458b4c","modified":1521977762035},{"_id":"themes/next/languages/zh-TW.yml","hash":"73354d9a7c15729e2f066a0098080dde5687a1ec","modified":1521977762035},{"_id":"themes/next/scripts/merge.js","hash":"39b84b937b2a9608b94e5872349a47200e1800ff","modified":1521977762076},{"_id":"themes/next/scripts/merge-configs.js","hash":"176952dfe3605c2ab57f3f7cdbac4f2487825c41","modified":1521977762075},{"_id":"themes/next/test/.jshintrc","hash":"c9fca43ae0d99718e45a6f5ce736a18ba5fc8fb6","modified":1521977762171},{"_id":"themes/next/test/helpers.js","hash":"f25e7f3265eb5a6e1ccbb5e5012fa9bebf134105","modified":1521977762171},{"_id":"themes/next/test/intern.js","hash":"db90b1063356727d72be0d77054fdc32fa882a66","modified":1521977762172},{"_id":"source/_posts/属性的行为.md","hash":"ea6dcfee1a1b26a6a1fcf2910c76931aea97148c","modified":1521985269442},{"_id":"themes/next/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1521977762143},{"_id":"themes/next/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1521977749948},{"_id":"themes/next/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1521977749949},{"_id":"themes/next/.git/hooks/fsmonitor-watchman.sample","hash":"f7c0aa40cb0d620ff0bca3efe3521ec79e5d7156","modified":1521977749950},{"_id":"themes/next/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1521977749951},{"_id":"themes/next/.git/hooks/pre-commit.sample","hash":"36aed8976dcc08b5076844f0ec645b18bc37758f","modified":1521977749952},{"_id":"themes/next/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1521977749952},{"_id":"themes/next/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1521977749950},{"_id":"themes/next/.git/hooks/pre-rebase.sample","hash":"288efdc0027db4cfd8b7c47c4aeddba09b6ded12","modified":1521977749953},{"_id":"themes/next/.git/hooks/pre-receive.sample","hash":"705a17d259e7896f0082fe2e9f2c0c3b127be5ac","modified":1521977749954},{"_id":"themes/next/.git/hooks/prepare-commit-msg.sample","hash":"2584806ba147152ae005cb675aa4f01d5d068456","modified":1521977749954},{"_id":"themes/next/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1521977749956},{"_id":"themes/next/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1521977749958},{"_id":"themes/next/.git/logs/HEAD","hash":"681185842ed7aca9a9e50bc22164b543c5d06895","modified":1521977761964},{"_id":"themes/next/docs/ru/DATA-FILES.md","hash":"a51de08657f5946f4028b11373280ddc04639525","modified":1521977762012},{"_id":"themes/next/docs/ru/README.md","hash":"58f92363e63c51a3e404f9cfaab0d34c0f5d91b0","modified":1521977762013},{"_id":"themes/next/docs/ru/INSTALLATION.md","hash":"7b2963daac19b0c14f98ebef375d5fbce8fc3f44","modified":1521977762013},{"_id":"themes/next/docs/ru/UPDATE-FROM-5.1.X.md","hash":"1a4e41adcf5831057f3f7b3025ed4a5ef7c442b4","modified":1521977762014},{"_id":"themes/next/docs/zh-CN/ALGOLIA-SEARCH.md","hash":"e771c5b745608c6fb5ae2fa1c06c61b3699627ec","modified":1521977762014},{"_id":"themes/next/docs/zh-CN/DATA-FILES.md","hash":"67f4a987e7db0ab1ce1ea4c311f2961df07b6681","modified":1521977762015},{"_id":"themes/next/docs/zh-CN/INSTALLATION.md","hash":"baca12cc24be082f1db28c7f283493569666321c","modified":1521977762015},{"_id":"themes/next/docs/zh-CN/MATH.md","hash":"08c630dc7bd479e49d7d5aa813df628e7726bd7f","modified":1521977762016},{"_id":"themes/next/docs/zh-CN/README.md","hash":"045fe04b0e00f51cbd3eabcd725b9266b43a0f7c","modified":1521977762017},{"_id":"themes/next/docs/zh-CN/LEANCLOUD-COUNTER-SECURITY.md","hash":"4e3f7b4d92ef3687480de67c9951aac235f33769","modified":1521977762016},{"_id":"themes/next/docs/zh-CN/UPDATE-FROM-5.1.X.md","hash":"1ec7a0e9ac64b2c84aa1fd7ba2c662be1dbcb407","modified":1521977762017},{"_id":"themes/next/layout/_custom/head.swig","hash":"a223919d2e1bf17ca4d6abb2c86f2efca9883dc1","modified":1521977762036},{"_id":"themes/next/layout/_custom/header.swig","hash":"ba8ab5a0280b953aa97435ff8946cbcbb2755a27","modified":1521977762036},{"_id":"themes/next/layout/_custom/sidebar.swig","hash":"ba8ab5a0280b953aa97435ff8946cbcbb2755a27","modified":1521977762037},{"_id":"themes/next/layout/_partials/breadcrumb.swig","hash":"4b48fdbfe3bf41ddeda4ff74c1ff17ab9f15c14e","modified":1521977762043},{"_id":"themes/next/layout/_partials/footer.swig","hash":"2132dd17e0f8269f1f1c8d66df6684f2a6d1b90b","modified":1521977762044},{"_id":"themes/next/layout/_partials/comments.swig","hash":"2e8c3df265e9ae38003d1321fb80fb3b12cb6a97","modified":1521977762043},{"_id":"themes/next/layout/_partials/header.swig","hash":"8d5e1fa07626c42593b46cd44918d0380c47f54d","modified":1521977762045},{"_id":"themes/next/layout/_partials/page-header.swig","hash":"206cbd6ac9ca6a219a8516f59beae25b3c770199","modified":1521977762046},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"914155d5d758306cff405beefd4a07973fd8fc77","modified":1521977762046},{"_id":"themes/next/layout/_partials/search.swig","hash":"b4ebe4a52a3b51efe549dd1cdee846103664f5eb","modified":1521977762046},{"_id":"themes/next/layout/_partials/sub-menu.swig","hash":"65d7158eac90867d0e4d8f6eeda7fb77e346b09c","modified":1521977762050},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"8c56dd26157cbc580ae41d97ac34b90ab48ced3f","modified":1521977762039},{"_id":"themes/next/layout/_macro/post-related.swig","hash":"e8dfb86eb62b9c2bc1435d6d1afa95d3b4c7b931","modified":1521977762040},{"_id":"themes/next/layout/_macro/post.swig","hash":"1c32cb5ec670e46f4e02cfebbae9ab79ce7d08cf","modified":1521977762041},{"_id":"themes/next/layout/_macro/post-copyright.swig","hash":"949bf640c011689e518ad480299ab19785df4b80","modified":1521977762040},{"_id":"themes/next/layout/_macro/reward.swig","hash":"8dc3b6ba76c389aaa0810cbd0df206f7096d76a0","modified":1521977762041},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"2d8e3b4a211d55f4861eb2375b6fdd786484bf71","modified":1521977762042},{"_id":"themes/next/layout/_macro/wechat-subscriber.swig","hash":"616ffee93e84958e72ee0f996808f866c4ccdbf7","modified":1521977762042},{"_id":"themes/next/layout/_scripts/boostrap.swig","hash":"c0f5a0955f69ca4ed9ee64a2d5f8aa75064935ad","modified":1521977762050},{"_id":"themes/next/layout/_scripts/commons.swig","hash":"931808ad9b8d8390c0dcf9bdeb0954eeb9185d68","modified":1521977762051},{"_id":"themes/next/layout/_scripts/noscript.swig","hash":"f8c7e729ad6e72b4c705a2c5d5041589c2b4cc52","modified":1521977762052},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"f134aeb8d5bee351e5277edb92ac694af314b75f","modified":1521977762054},{"_id":"themes/next/layout/_third-party/exturl.swig","hash":"8301c9600bb3e47f7fb98b0e0332ef3c51bb1688","modified":1521977762064},{"_id":"themes/next/layout/_third-party/github-banner.swig","hash":"736cb278fa09d3b4ed6f305b56353941ea918793","modified":1521977762065},{"_id":"themes/next/layout/_third-party/bookmark.swig","hash":"ed62ea83d3f2c9db2ea57bf23a7d765ed82504c2","modified":1521977762060},{"_id":"themes/next/layout/_third-party/needsharebutton.swig","hash":"debba9b7110f635204a15df148194d4c2fd2668b","modified":1521977762066},{"_id":"themes/next/layout/_third-party/pangu.swig","hash":"ccf0035086e14dcefa24c2907301edf4c37d5448","modified":1521977762067},{"_id":"themes/next/layout/_third-party/schedule.swig","hash":"db15d7e1552aa2d2386a6b8a33b3b3a40bf9e43d","modified":1521977762067},{"_id":"themes/next/layout/_third-party/scroll-cookie.swig","hash":"9a188938d46931d5f3882a140aa1c48b3a893f0c","modified":1521977762068},{"_id":"themes/next/layout/_third-party/rating.swig","hash":"554ec568e9d2c71e4a624a8de3cb5929050811d6","modified":1521977762067},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"5c87817385986748617fa87dee9cba654566adcd","modified":1521977762077},{"_id":"themes/next/scripts/tags/exturl.js","hash":"4f928ef9ad0ae8e3d766352b8861bc22f96de5d8","modified":1521977762077},{"_id":"themes/next/scripts/tags/button.js","hash":"496e3846f353d253dad944b2ed8fdc4e02dcc28a","modified":1521977762077},{"_id":"themes/next/scripts/tags/full-image.js","hash":"2118895d2d5e379240b27399a6c988a74f25a427","modified":1521977762078},{"_id":"themes/next/scripts/tags/include-raw.js","hash":"1f7bafba9cf3c94f5735873bd52e93ddcf37f8a2","modified":1521977762079},{"_id":"themes/next/scripts/tags/lazy-image.js","hash":"92c0ead5f503cfc4ee7c254ebfb00a2623fa1890","modified":1521977762080},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"696157d4e4382fdbe29c674b0f4b433d47db449b","modified":1521977762078},{"_id":"themes/next/scripts/tags/label.js","hash":"d8bfb2974c6afef2c085642857b70b6569b4a097","modified":1521977762079},{"_id":"themes/next/scripts/tags/note.js","hash":"1cec218c9fcaa8fb4144bf9d0b39babcaafac8d4","modified":1521977762080},{"_id":"themes/next/scripts/tags/tabs.js","hash":"aa7fc94a5ec27737458d9fe1a75c0db7593352fd","modified":1521977762080},{"_id":"themes/next/source/css/main.styl","hash":"2a62e2a11e9cdcc69e538d856d6f9ce228a07c93","modified":1521977762143},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1521977762144},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1521977762144},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1521977762145},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1521977762146},{"_id":"themes/next/source/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1521977762145},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1521977762145},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1521977762147},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1521977762147},{"_id":"themes/next/source/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1521977762148},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1521977762148},{"_id":"themes/next/source/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1521977762148},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1521977762149},{"_id":"themes/next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1521977762149},{"_id":"themes/next/source/images/logo.svg","hash":"169f56fd82941591dad3abd734a50ec7259be950","modified":1521977762149},{"_id":"themes/next/source/images/quote-l.svg","hash":"cd108d6f44351cadf8e6742565217f88818a0458","modified":1521977762150},{"_id":"themes/next/source/images/quote-r.svg","hash":"2a2a250b32a87c69dcc1b1976c74b747bedbfb41","modified":1521977762150},{"_id":"themes/next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1521977762150},{"_id":"themes/next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1521977762151},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1521977762053},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1521977762053},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1521977762127},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1521977762127},{"_id":"themes/next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1521977762128},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1521977762141},{"_id":"themes/next/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1521977762142},{"_id":"themes/next/.git/refs/heads/my","hash":"7af40e8a7a7047099e7e776f9b588b0564a47d5c","modified":1521977761964},{"_id":"themes/next/layout/_partials/head/external-fonts.swig","hash":"f5e487b0d213ca0bd94aa30bc23b240d65081627","modified":1521977762044},{"_id":"themes/next/layout/_partials/head/head-unique.swig","hash":"2048f9a47bfcc14b689d776028626f46d2865732","modified":1521977762045},{"_id":"themes/next/layout/_partials/head/head.swig","hash":"60555b19a3b4bf203baa9bc0ea6267674f95235c","modified":1521977762045},{"_id":"themes/next/layout/_partials/share/add-this.swig","hash":"9e3d133ac5bcc6cb51702c83b2611a49811abad1","modified":1521977762048},{"_id":"themes/next/layout/_partials/share/baidushare.swig","hash":"d9e2d9282f9be6e04eae105964abb81e512bffed","modified":1521977762049},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","hash":"d4fbffd7fa8f2090eb32a871872665d90a885fac","modified":1521977762049},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"b2f0d247b213e4cf8de47af6a304d98070cc7256","modified":1521977762047},{"_id":"themes/next/layout/_partials/share/jiathis.swig","hash":"0a9cdd6958395fcdffc80ab60f0c6301b63664a5","modified":1521977762049},{"_id":"themes/next/layout/_partials/search/swiftype.swig","hash":"a8c7f9ca7c605d039a1f3bf4e4d3183700a3dd62","modified":1521977762047},{"_id":"themes/next/layout/_partials/search/tinysou.swig","hash":"b25002a83cbd2ca0c4a5df87ad5bff26477c0457","modified":1521977762048},{"_id":"themes/next/layout/_macro/menu/menu-badge-1.swig","hash":"9508bf0d9adbc15fdeea415972a70e6216ea5235","modified":1521977762038},{"_id":"themes/next/layout/_macro/menu/menu-item.swig","hash":"fcba6931b2424118fecc6dfe4527c10147c50235","modified":1521977762039},{"_id":"themes/next/layout/_macro/menu/menu-badge-2.swig","hash":"138cc7ad34d82ef59c526f83205defdae4274722","modified":1521977762039},{"_id":"themes/next/layout/_scripts/schemes/gemini.swig","hash":"a9a3995b9615adfb8d6b127c78c6771627bee19a","modified":1521977762053},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","hash":"9b84ab576982b2c3bb0291da49143bc77fba3cc6","modified":1521977762052},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"a9a3995b9615adfb8d6b127c78c6771627bee19a","modified":1521977762054},{"_id":"themes/next/layout/_third-party/analytics/analytics-with-widget.swig","hash":"ff947f3561b229bc528cb1837d4ca19612219411","modified":1521977762055},{"_id":"themes/next/layout/_third-party/analytics/application-insights.swig","hash":"71397a5823e8ec8aad3b68aace13150623b3e19d","modified":1521977762056},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"753d262911c27baf663fcaf199267133528656af","modified":1521977762056},{"_id":"themes/next/layout/_third-party/analytics/cnzz-analytics.swig","hash":"a10b7f19d7b5725527514622899df413a34a89db","modified":1521977762057},{"_id":"themes/next/layout/_third-party/analytics/facebook-sdk.swig","hash":"7d94845f96197d9d84a405fa5d4ede75fb81b225","modified":1521977762057},{"_id":"themes/next/layout/_third-party/analytics/busuanzi-counter.swig","hash":"c43f41b7f3c0743d1e673af2e787ea34a67fc9cb","modified":1521977762057},{"_id":"themes/next/layout/_third-party/analytics/firestore.swig","hash":"d67d9a176a276cdab6f2bcb7eb3650fbca5459c4","modified":1521977762058},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"cfc932c5db04fef64cc56d3ba0b8ddf3a15a63bd","modified":1521977762058},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"45f3f629c2aacc381095750e1c8649041a71a84b","modified":1521977762058},{"_id":"themes/next/layout/_third-party/analytics/tencent-analytics.swig","hash":"8a399df90dadba5ad4e781445b58f4765aeb701e","modified":1521977762059},{"_id":"themes/next/layout/_third-party/analytics/tencent-mta.swig","hash":"5a8027328f060f965b3014060bebec1d7cf149c1","modified":1521977762060},{"_id":"themes/next/layout/_third-party/analytics/lean-analytics.swig","hash":"7973b4741863362cd9d023216de4a43eb23dc227","modified":1521977762059},{"_id":"themes/next/layout/_third-party/analytics/vkontakte-api.swig","hash":"f9a1647a8f1866deeb94052d1f87a5df99cb1e70","modified":1521977762060},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"4c501ea0b9c494181eb3c607c5526a5754e7fbd8","modified":1521977762061},{"_id":"themes/next/layout/_third-party/comments/gitment.swig","hash":"292cdd1059b76d3d10486b71c99d9afb3e59ea44","modified":1521977762062},{"_id":"themes/next/layout/_third-party/comments/hypercomments.swig","hash":"787d482d797c38e77d69629ebb88d45f972216b7","modified":1521977762062},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"a693a2c00497471d06113443f548b676ee2e527d","modified":1521977762061},{"_id":"themes/next/layout/_third-party/comments/index.swig","hash":"18a58db53f1eef50462ee0065d4445b7fbb04fb5","modified":1521977762063},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"7cf0c589d95a2d1848266ffe2357e91c95d2e7f8","modified":1521977762063},{"_id":"themes/next/layout/_third-party/comments/valine.swig","hash":"de1fac9bb3f0cab88b1ed1950f76c7eb0037aeda","modified":1521977762063},{"_id":"themes/next/layout/_third-party/comments/youyan.swig","hash":"ab181c036cda9656f87bb1a749e3e7cbc437f012","modified":1521977762064},{"_id":"themes/next/layout/_third-party/math/index.swig","hash":"30e9e55d9af2ced6e6b156a042026a8b480f0ab0","modified":1521977762065},{"_id":"themes/next/layout/_third-party/math/katex.swig","hash":"860de4ce6fccc516d2f779a4b600a4214d8c18e2","modified":1521977762066},{"_id":"themes/next/layout/_third-party/math/mathjax.swig","hash":"9a865d013b6d273bbbfc3999e8657844b0c48752","modified":1521977762066},{"_id":"themes/next/layout/_third-party/search/index.swig","hash":"34599633658f3b0ffb487728b7766e1c7b551f5a","modified":1521977762069},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"71c897f9b107dd0de1b7f649633cf583c206a9db","modified":1521977762070},{"_id":"themes/next/layout/_third-party/seo/baidu-push.swig","hash":"d8c98938719284fa06492c114d99a1904652a555","modified":1521977762071},{"_id":"themes/next/layout/_third-party/search/tinysou.swig","hash":"fe95dd3d166634c466e19aa756e65ad6e8254d3e","modified":1521977762070},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"3403fdd8efde1a0afd11ae8a5a97673f5903087f","modified":1521977762126},{"_id":"themes/next/source/css/_mixins/Gemini.styl","hash":"07f7da320689f828f6e36a6123807964a45157a0","modified":1521977762126},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"8aa98ae349908736ba43196c42498fd5bdeb780a","modified":1521977762127},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"4d6dd32dae6f0ea93d43c5cfa0106b6cb46c3b00","modified":1521977762128},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"b89e68789e6dac24e00250528f4fc9ae8aa3599b","modified":1521977762141},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"a25408534f8fe6e321db4bbf9dd03335d648fe17","modified":1521977762141},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"8b5fc9e6621a5de04ae7d9ef117683c69965fb00","modified":1521977762140},{"_id":"themes/next/source/css/_variables/base.styl","hash":"6498cb2366a31f6fa3ca25a2b04d3f180fc3a249","modified":1521977762142},{"_id":"themes/next/source/lib/font-awesome/.npmignore","hash":"c31ff06a740955e44edd4403902e653ccabfd4db","modified":1521977762157},{"_id":"themes/next/source/lib/font-awesome/.bower.json","hash":"b4aefc910578d76b267e86dfffdd5121c8db9aec","modified":1521977762157},{"_id":"themes/next/source/lib/font-awesome/.gitignore","hash":"03ddbf76c1dd1afb93eed0b670d2eee747472ef1","modified":1521977762157},{"_id":"themes/next/source/lib/font-awesome/bower.json","hash":"71e7183634dc1b9449f590f15ebd7201add22ca7","modified":1521977762158},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","hash":"ee33b2798b1e714b904d663436c6b3521011d1fa","modified":1521977762158},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","hash":"dbbfb50f6502f6b81dcc9fee7b31f1e812da3464","modified":1521977762170},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"bf172816a9c57f9040e3d19c24e181a142daf92b","modified":1521977762169},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"dde584994ac13dc601836e86f4cf490e418d9723","modified":1521977762170},{"_id":"themes/next/source/js/src/affix.js","hash":"1b509c3b5b290a6f4607f0f06461a0c33acb69b1","modified":1521977762152},{"_id":"themes/next/source/js/src/algolia-search.js","hash":"cb431b54ba9c692165a1f5a12e4c564a560f8058","modified":1521977762152},{"_id":"themes/next/source/js/src/bootstrap.js","hash":"6c30aab4822b189d1fe9b20ca5272fd8d3ebe998","modified":1521977762152},{"_id":"themes/next/source/js/src/js.cookie.js","hash":"1512c751d219577d338ac0780fb2bbd9075d5298","modified":1521977762153},{"_id":"themes/next/source/js/src/motion.js","hash":"bea49fc6392bd38fb6f80d041d95d23051423aa2","modified":1521977762153},{"_id":"themes/next/source/js/src/exturl.js","hash":"a2a0f0de07e46211f74942a468f42ee270aa555c","modified":1521977762153},{"_id":"themes/next/source/js/src/post-details.js","hash":"02acfa1862d5e4345d6a7cee08841cc9e2fb0259","modified":1521977762154},{"_id":"themes/next/source/js/src/scroll-cookie.js","hash":"02cf91514e41200bc9df5d8bdbeb58575ec06074","modified":1521977762155},{"_id":"themes/next/source/js/src/utils.js","hash":"d626e9c4d91c5308db11b7bae6e0c20f703d38c2","modified":1521977762156},{"_id":"themes/next/source/js/src/scrollspy.js","hash":"b7657be25fc52ec67c75ab5481bdcb483573338b","modified":1521977762155},{"_id":"themes/next/.git/objects/pack/pack-8e6b1e9969c07343b32b936f4dff69160f20841c.idx","hash":"07da76c28054af94074955921e58a067c59d5bff","modified":1521977761886},{"_id":"themes/next/source/lib/jquery/index.js","hash":"17a740d68a1c330876c198b6a4d9319f379f3af2","modified":1521977762165},{"_id":"themes/next/.git/logs/refs/heads/my","hash":"681185842ed7aca9a9e50bc22164b543c5d06895","modified":1521977761966},{"_id":"themes/next/.git/refs/remotes/origin/HEAD","hash":"5c26277c19a21c6307da889061ce274913fbadc5","modified":1521977761960},{"_id":"themes/next/layout/_third-party/search/algolia-search/assets.swig","hash":"218cc936ba3518a3591b2c9eda46bc701edf7710","modified":1521977762069},{"_id":"themes/next/layout/_third-party/search/algolia-search/dom.swig","hash":"2530de0f3125a912756f6c0e9090cd012134a4c5","modified":1521977762069},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"12662536c7a07fff548abe94171f34b768dd610f","modified":1521977762123},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"8f86f694c0749a18ab3ad6f6df75466ca137a4bc","modified":1521977762093},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"ff4489cd582f518bba6909a301ac1292a38b4e96","modified":1521977762094},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"237d185ac62ec9877e300947fa0109c44fb8db19","modified":1521977762093},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"8b32928686c327151e13d3ab100157f9a03cd59f","modified":1521977762094},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"7ad4081466b397e2a6204141bb7768b7c01bd93c","modified":1521977762094},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"4f2801fc4cf3f31bf2069f41db8c6ce0e3da9e39","modified":1521977762102},{"_id":"themes/next/source/css/_common/components/tag-cloud.styl","hash":"6eb4bcc3056bd279d000607e8b4dad50d368ca69","modified":1521977762114},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"97bb39756e85f5b27bba7f43270105ad01d736c9","modified":1521977762123},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"3f40e8a9fe8e7bd5cfc4cf4cbbbcb9539462e973","modified":1521977762124},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"1da5c800d025345f212a3bf1be035060f4e5e6ed","modified":1521977762124},{"_id":"themes/next/source/css/_common/scaffolding/mobile.styl","hash":"91ca75492cd51f2553f4d294ed2f48239fcd55eb","modified":1521977762124},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"a17e2b871a335f290afb392a08f94fd35f59c715","modified":1521977762125},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"52bc8ba71b91d954530b35dfc63b402a02b1321d","modified":1521977762125},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"c08eb379718fa5af267fd8c5fe9b926003c0c7c7","modified":1521977762129},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"d0bfd1bef988c76f7d7dd72d88af6f0908a8b0db","modified":1521977762130},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"f3aa863adf972569b72f2df6bc6a914e7daace99","modified":1521977762131},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"b1025c421406d2c24cc92a02ae28c1915b01e240","modified":1521977762130},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"d0e9065b0dbbc01811259f0597d1790268b4881b","modified":1521977762130},{"_id":"themes/next/source/css/_schemes/Mist/_search.styl","hash":"09c965022c13b84ed8a661fee8ac2a6d550495ae","modified":1521977762131},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"9c99034f8e00d47e978b3959f51eb4a9ded0fcc8","modified":1521977762131},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"2ccb9bdc309b7c1ef183a3dbb0a4621bec54a328","modified":1521977762132},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"31127dcbf4c7b4ada53ffbf1638b5fe325b7cbc0","modified":1521977762134},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"748dbfbf9c08e719ddc775958003c64b00d39dab","modified":1521977762135},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"3cc7646583218d16925ced7b70865e63a901d4a7","modified":1521977762135},{"_id":"themes/next/source/css/_schemes/Muse/_search.styl","hash":"09c965022c13b84ed8a661fee8ac2a6d550495ae","modified":1521977762135},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"b26f8a3394d8357a5bfd24d9f8bf62d7b4063ebb","modified":1521977762136},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"bce344d3a665b4c55230d2a91eac2ad16d6f32fd","modified":1521977762137},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"ab7eb1d66e300264a225feb6f8bed55683c96cdf","modified":1521977762138},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"cc961108b12ab97d9216606ceb1cd1cd31ab20f0","modified":1521977762138},{"_id":"themes/next/source/css/_schemes/Pisces/_posts.styl","hash":"1f6e2ce674735269599acc6d77b3ea18d31967fc","modified":1521977762138},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"df16dc995eb9ad498df2edcfc3e20528fc9aa133","modified":1521977762139},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"a558803ca81cceae2bdc22c18ef638fcc023681b","modified":1521977762140},{"_id":"themes/next/source/css/_schemes/Pisces/_sub-menu.styl","hash":"0518b982e73308ba3fba6d511cc6cc1a84930c21","modified":1521977762139},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","hash":"41ea797c68dbcff2f6fb3aba1d1043a22e7cc0f6","modified":1521977762166},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"a817b6c158cbc5bab3582713de9fe18a18a80552","modified":1521977762166},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","hash":"3655f1fdf1e584c4d8e8d39026093ca306a5a341","modified":1521977762159},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","hash":"1573904b82807abbb32c97a3632c6c6808eaac50","modified":1521977762159},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","hash":"88af80502c44cd52ca81ffe7dc7276b7eccb06cf","modified":1521977762160},{"_id":"themes/next/source/js/src/schemes/pisces.js","hash":"f1d0b5d7af32c423eaa8bb93ab6a0b45655645dc","modified":1521977762155},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1521977762164},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1521977762163},{"_id":"themes/next/source/lib/velocity/velocity.js","hash":"4237c6e9d59da349639de20e559e87c2c0218cfd","modified":1521977762168},{"_id":"themes/next/.git/logs/refs/remotes/origin/HEAD","hash":"681185842ed7aca9a9e50bc22164b543c5d06895","modified":1521977761960},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"9f73c4696f0907aa451a855444f88fc0698fa472","modified":1521977762095},{"_id":"themes/next/source/css/_common/components/pages/archive.styl","hash":"b6f3a06a94a6ee5470c956663164d58eda818a64","modified":1521977762100},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"ad4cae23c8e383f4fabc9a2a95bca6055020d22e","modified":1521977762101},{"_id":"themes/next/source/css/_common/components/pages/breadcrumb.styl","hash":"630be616447a982413030e561bbd3a80ac14b120","modified":1521977762100},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"7fb593f90d74a99c21840679933b9ef6fdc16a61","modified":1521977762101},{"_id":"themes/next/source/css/_common/components/pages/post-detail.styl","hash":"4e3838d7ac81d9ad133960f0f7ed58a44a015285","modified":1521977762101},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"34f5ac3c1ed2dd31e9297cc4c0733e71bc2e252f","modified":1521977762096},{"_id":"themes/next/source/css/_common/components/header/github-banner.styl","hash":"3f3d2a43d1a326bad25b633c8ec9ddd87867224c","modified":1521977762096},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"d63e0cacc53dd375fcc113465a4328c59ff5f2c1","modified":1521977762096},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"8cf318644acc8b4978537c263290363e21c7f5af","modified":1521977762102},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"1a0d059799a298fe17c49a44298d32cebde93785","modified":1521977762097},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"1727702eac5d326b5c81a667944a245016668231","modified":1521977762097},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"0656e753f182c9f47fef7304c847b7587a85ef0d","modified":1521977762097},{"_id":"themes/next/source/css/_common/components/highlight/diff.styl","hash":"167986d0f649516671ddf7193eebba7b421cd115","modified":1521977762098},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"50450d9fdc8a2b2be8cfca51e3e1a01ffd636c0b","modified":1521977762099},{"_id":"themes/next/source/css/_common/components/post/post-button.styl","hash":"62fbbd32cf5a99ae550c45c763a2c4813a138d01","modified":1521977762103},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"7fe4d4d656e86276c17cb4e48a560cb6a4def703","modified":1521977762099},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"875cbe88d5c7f6248990e2beb97c9828920e7e24","modified":1521977762103},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"caf263d1928496688c0e1419801eafd7e6919ce5","modified":1521977762104},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"317c9ceda655e9dc373ce8e7b71d20b794fce9a4","modified":1521977762104},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"a200c0a1c5a895ac9dc41e0641a5dfcd766be99b","modified":1521977762104},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"cd9e214e502697f2f2db84eb721bac57a49b0fce","modified":1521977762105},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"27deb3d3a243d30022055dac7dad851024099a8b","modified":1521977762106},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"78d4d664b71cd1c8360f6dfb158457b03b8b0608","modified":1521977762105},{"_id":"themes/next/source/css/_common/components/post/post-rtl.styl","hash":"b2495ae5e04dcca610aacadc47881d9e716cd440","modified":1521977762107},{"_id":"themes/next/source/css/_common/components/post/post-reading_progress.styl","hash":"82bc7fa5d38d98e98cc25f9a73189024fda25e63","modified":1521977762106},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"ca88ea6999a61fb905eb6e72eba5f92d4ee31e6e","modified":1521977762107},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"5a982d8ef3b3623ea5f59e63728990f5623c1b57","modified":1521977762107},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"ccb34c52be8adba5996c6b94f9e723bd07d34c16","modified":1521977762108},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"2fe76476432b31993338cb45cdb3b29a518b6379","modified":1521977762114},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"7968343e41f8b94b318c36289dff1196c3eb1791","modified":1521977762108},{"_id":"themes/next/source/css/_common/components/post/post-type.styl","hash":"01567edaea6978628aa5521a122a85434c418bfd","modified":1521977762108},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"1faeb3fca899df9d033e4e6ad9a4867cdce7ef9d","modified":1521977762109},{"_id":"themes/next/source/css/_common/components/tags/exturl.styl","hash":"a3bdd71237afc112b2aa255f278cab6baeb25351","modified":1521977762115},{"_id":"themes/next/source/css/_common/components/tags/full-image.styl","hash":"d79c051abb8ab7b5ee5da29a28587704fd5108f5","modified":1521977762115},{"_id":"themes/next/source/css/_common/components/tags/label.styl","hash":"2ab1322fe52ab5aafd49e68f5bd890e8380ee927","modified":1521977762116},{"_id":"themes/next/source/css/_common/components/tags/note-modern.styl","hash":"b7076e58d647265ee0ad2b461fe8ce72c9373bc5","modified":1521977762117},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"2ad1a2a9bbf6742d1b0762c4c623b68113d1e0fe","modified":1521977762115},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"b80604868e4f5cf20fccafd7ee415c20c804f700","modified":1521977762118},{"_id":"themes/next/source/css/_common/components/tags/note.styl","hash":"9a409b798decdefdaf7a23f0b11004a8c27e82f3","modified":1521977762117},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"fa57ec9a6f1943c0558856dfba2d6b8faca0cd4d","modified":1521977762110},{"_id":"themes/next/source/css/_common/components/tags/tabs.styl","hash":"154a87a32d2fead480d5e909c37f6c476671c5e6","modified":1521977762117},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"761eba9811b050b25d548cc0854de4824b41eb08","modified":1521977762110},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"8dd9a1c6f4f6baa00c2cf01837e7617120cf9660","modified":1521977762110},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-dimmer.styl","hash":"11c22f0fb3f6beb13e5a425ec064a4ff974c13b7","modified":1521977762111},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"9e05a2232faabb41bcebb51d545d897a76f077da","modified":1521977762112},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"1153bb71edf253765145559674390e16dd67c633","modified":1521977762112},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"61f8cea3c01acd600e90e1bc2a07def405503748","modified":1521977762111},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"94d76e6da600a36d80e2470326ebb6b3be447ccb","modified":1521977762113},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"a1521d48bb06d8d703753f52a198baa197af7da2","modified":1521977762112},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"e71652d3216e289c8548b1ea2357822c1476a425","modified":1521977762113},{"_id":"themes/next/source/css/_common/components/third-party/algolia-search.styl","hash":"f4d8144c22544bdb89787c14ab9d39578dae4b7c","modified":1521977762118},{"_id":"themes/next/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"a6e7d698702c2e383dde3fde2abde27951679084","modified":1521977762119},{"_id":"themes/next/source/css/_common/components/third-party/baidushare.styl","hash":"5dbeed535d63a50265d96b396a5440f9bb31e4ba","modified":1521977762119},{"_id":"themes/next/source/css/_common/components/third-party/gitment.styl","hash":"874278147115601d2abf15987f5f7a84ada1ac6b","modified":1521977762120},{"_id":"themes/next/source/css/_common/components/third-party/han.styl","hash":"10599e16414a8b7a76c4e79e6617b5fe3d4d1adf","modified":1521977762120},{"_id":"themes/next/source/css/_common/components/third-party/jiathis.styl","hash":"15975ba7456b96916b1dbac448a1a0d2c38b8f3d","modified":1521977762120},{"_id":"themes/next/source/css/_common/components/third-party/localsearch.styl","hash":"16087276945fa038f199692e3eabb1c52b8ea633","modified":1521977762121},{"_id":"themes/next/source/css/_common/components/third-party/needsharebutton.styl","hash":"28825ae15fa20ae3942cdaa7bcc1f3523ce59acc","modified":1521977762121},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"0b9c4140d7bc526553553552c3ed92da7c81e0b6","modified":1521977762122},{"_id":"themes/next/source/css/_common/components/third-party/related-posts.styl","hash":"acfdd76b1c90d2e384affb3d0006a39b524609d2","modified":1521977762122},{"_id":"themes/next/source/css/_schemes/Mist/sidebar/sidebar-blogroll.styl","hash":"1f09be9bb38411f0629b58c3b23873589a6dbcaa","modified":1521977762133},{"_id":"themes/next/source/css/_schemes/Mist/outline/outline.styl","hash":"a07aa12cc36ac5c819670c2a3c17d07ed7a08986","modified":1521977762133},{"_id":"themes/next/source/css/_schemes/Muse/sidebar/sidebar-blogroll.styl","hash":"1f09be9bb38411f0629b58c3b23873589a6dbcaa","modified":1521977762136},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1521977762162},{"_id":"themes/next/.git/objects/pack/pack-8e6b1e9969c07343b32b936f4dff69160f20841c.pack","hash":"8e45916540bc827a389d5807be249b9ec2621bf2","modified":1521977761887},{"_id":"public/categories/Hexo/index.html","hash":"5e2dec4549a72615439d29f038ae3ad31c833e93","modified":1521989131792},{"_id":"public/categories/Gists/index.html","hash":"4e255090649e659224c78f663f369d5b45254fa3","modified":1521989131793},{"_id":"public/categories/other/index.html","hash":"d427926f1c645fb24cd99780b9cd1380c5cdffd3","modified":1521989131798},{"_id":"public/categories/QA/index.html","hash":"3bdcc743c022acc444744456e341c7b641eb81f2","modified":1521989131793},{"_id":"public/categories/translate/index.html","hash":"8879e5c5141aba49faecd8ef6cef9e5e5c11c46c","modified":1521989131793},{"_id":"public/tags/difficulty-beginner/index.html","hash":"25e452fa932d923ef7e1cb249b1863ddecd4e364","modified":1521989131793},{"_id":"public/tags/qr-code/index.html","hash":"d4e570dab9bab0fa0b8f2b5636ed04108f6580a2","modified":1521989131793},{"_id":"public/tags/login/index.html","hash":"9b4e0e1e7b4f4f91b2267af466073758cd79b6f1","modified":1521989131793},{"_id":"public/tags/APP/index.html","hash":"26cc97975d9e608d32ddcc772be2da419553a369","modified":1521989131794},{"_id":"public/tags/flow/index.html","hash":"4855e1a27d43286a04a936effd43b038f6eddd44","modified":1521989131794},{"_id":"public/tags/plugin/index.html","hash":"eee5a15b5041c9c90757958536b50249c554fd9e","modified":1521989131794},{"_id":"public/tags/gitment/index.html","hash":"69117ea1e6d062ab18671ba898b3cdeae18f6b35","modified":1521989131794},{"_id":"public/tags/Hexo/index.html","hash":"489e5831233a8df2c4435fe61e9c2c8871723164","modified":1521989131794},{"_id":"public/tags/standard/index.html","hash":"b33bf94328acaf211ff860296803b6d458f9c58e","modified":1521989131794},{"_id":"public/tags/Spring-Boot/index.html","hash":"941cab2cd79ba49c99676ea7e5faf531918c93d3","modified":1521989131794},{"_id":"public/tags/Exception/index.html","hash":"b64a1ec413a36ad4e12851610d926b76cf5969ad","modified":1521989131794},{"_id":"public/tags/Spring-Cloud/index.html","hash":"91482fd59094d4a9001d8d254e1e63972a9a6361","modified":1521989131794},{"_id":"public/tags/java/index.html","hash":"c429914fcaee79899d7298b53bf9b34a18776708","modified":1521989131794},{"_id":"public/tags/java-basic/index.html","hash":"e22404239205fd92bc3466d7890db42b60dcb68d","modified":1521989131794},{"_id":"public/tags/binary/index.html","hash":"b89abd2db9b2329d0184dfe80ff683fd9c2d5106","modified":1521989131794},{"_id":"public/tags/bit-operation/index.html","hash":"d67c84612838e68119d39a6eda877eb40ae266da","modified":1521989131794},{"_id":"public/tags/other/index.html","hash":"6a739c91c09871acc2b867e2578d21e3f7a911f8","modified":1521989131794},{"_id":"public/tags/redis/index.html","hash":"10bc7800924ce69b6df862a1f02ae9255e50c927","modified":1521989131795},{"_id":"public/tags/Resource/index.html","hash":"61465006b14689428e9fc6d0c2e58f0b87f614a0","modified":1521989131794},{"_id":"public/tags/Autowired/index.html","hash":"e120fdc97d848538725689cb2093590bc03c8710","modified":1521989131795},{"_id":"public/tags/Spring/index.html","hash":"5ec504c92fbaa93d0d2b6df793fd284b029167bd","modified":1521989131795},{"_id":"public/tags/sort/index.html","hash":"17a68f3d2933db242e76fb5effb831a026441f27","modified":1521989131800},{"_id":"public/tags/programmer/index.html","hash":"998009dc0203b9b955e78811d1c0d8e0c2ac1dd1","modified":1521989131795},{"_id":"public/tags/reprint/index.html","hash":"b38d90db9d217c7db4b383423e0418d8e16d7f35","modified":1521989131799},{"_id":"public/tags/timestamp/index.html","hash":"e07597397a3c89063a36faf119120c0cc96edd6b","modified":1521989131795},{"_id":"public/tags/theme/index.html","hash":"08e92a4fc1666d2b56ea3e505ffcb196ab8574b1","modified":1521989131795},{"_id":"public/tags/live/index.html","hash":"f30e383835e083d9c41b31ec52b686e1c55eb680","modified":1521989131795},{"_id":"public/tags/house/index.html","hash":"14b31c4468aa3b44d0712ca47e946fd41d3b1c75","modified":1521989131795},{"_id":"public/tags/properties/index.html","hash":"802aca7b99671aad9864087ac26ba221adf63431","modified":1521989131795},{"_id":"public/tags/design/index.html","hash":"b241b8847d86b3307a1c03e616262970b3a838f1","modified":1521989131795},{"_id":"public/about/index.html","hash":"a21bd9f03f78db6ec41542a4809cabe60a46ebe5","modified":1521989131795},{"_id":"public/tags/index.html","hash":"ab16b350ab53d6f96779b5222d0f75bf4c77b918","modified":1521989131795},{"_id":"public/categories/index.html","hash":"6793bc89e591d9507807111ccfeeb777da5824dd","modified":1521989131795},{"_id":"public/03252018/111/index.html","hash":"b48040c9691bb04abcb84ebfe20f21c3b4a90597","modified":1521988543988},{"_id":"public/03252018/180316_中文文案排版指南/index.html","hash":"e6f9111467a8a4455067038c85133e83cbdea9bf","modified":1521989023153},{"_id":"public/03252018/180307_提问的智慧/index.html","hash":"c17320ade6a70eebce5c64ae0a9c0531c4a41cf5","modified":1521988391024},{"_id":"public/03252018//adapter/index.html","hash":"811288912c7f6be9ef0567c7a1a0b02109c34b8e","modified":1521989131795},{"_id":"public/03252018/abstract-factory/index.html","hash":"c35a614476833c7d34796804ade80c2b958023c1","modified":1521989131796},{"_id":"public/03252018/abstract-document/index.html","hash":"3f2c214d4b39a838cab6f00eeb1d5fba2382951d","modified":1521989131796},{"_id":"public/01272018/wrong-timestamp-used/index.html","hash":"319c2165a2bd5db14d9c2603911c22971723e64a","modified":1521989131796},{"_id":"public/01272018/drag-order-thinking/index.html","hash":"5388dddcdda11bfd34894bc71021e0fd492dc859","modified":1521989131800},{"_id":"public/01042018/why-ValueOperations-can-inject-RedisTemplate/index.html","hash":"e75b874eea577e91eacf494be06d2c9a062dc242","modified":1521989131796},{"_id":"public/12092017/builder/index.html","hash":"35e66e6f517c07c993a2ce1185f30ee73e542e5e","modified":1521989131796},{"_id":"public/12092017/bridge/index.html","hash":"c403892a8d4313d568b8fedc7e135f896af83616","modified":1521989131796},{"_id":"public/12092017/balking/index.html","hash":"ebab52a820654fec5af313fed8013281a78e2e62","modified":1521989131796},{"_id":"public/12072017/async-method-invocation/index.html","hash":"ae5df0a56817f150675f915e012db44a71778c33","modified":1521989131796},{"_id":"public/12072017/java-generate-qr-code/index.html","hash":"e37110f6512c9f14e1215fe521f694fda1f1f778","modified":1521989131796},{"_id":"public/12062017/java-generate-md5/index.html","hash":"5b8909137dc4812e88bec965263627da04d54c64","modified":1521989131796},{"_id":"public/12062017/ali-api-util/index.html","hash":"19acaaca50588f2c482b3bfeb6f841d7eccb4717","modified":1521989131796},{"_id":"public/12062017/website/index.html","hash":"5bd619b5ffae0e60f3945b63549f220b47f6a9b0","modified":1521989131796},{"_id":"public/11302017/dealing-with-properties/index.html","hash":"c20afc6df02700c25f05a97c345436120860d4e7","modified":1521989131796},{"_id":"public/11142017/ap-scan-two-dimensional-code-landing-proces/index.html","hash":"050158fc7590fc84b8558384d3ddb18a543c6fc6","modified":1521989131797},{"_id":"public/11092017/hexo-integrated-gitment-exception-handling/index.html","hash":"209d42f9ae666d97f60ca8c376667d027ae586d5","modified":1521989131797},{"_id":"public/11062017/plug-in-or-topic-modification-records/index.html","hash":"c12bc75471c0b2483412aec836a939008ca6de96","modified":1521989131797},{"_id":"public/11052017/the-real-logic-behind-the-high-house-price-(a-long-analysis-of-the-depth)/index.html","hash":"f7f6d3c674e417552e5723e9d11afc3a37b64440","modified":1521989131797},{"_id":"public/10312017/binary-bit-operation-example/index.html","hash":"2772bb1adf61dccfa8885f279d2fca38877aa4c9","modified":1521989131797},{"_id":"public/10312017/invalidclasexception/index.html","hash":"5d3df61e6f300741be5a8bfdb760ec769e3beeed","modified":1521989131797},{"_id":"public/10302017/springcloud-config-client-canot-conect-to-server/index.html","hash":"c64115bf919d08691b888d3f5b3c56323847a71c","modified":1521989131797},{"_id":"public/10222017/programer/index.html","hash":"5c14f86e05765078151349d539c88670fb67be9f","modified":1521989131797},{"_id":"public/archives/index.html","hash":"05da73c2cffe77ef676aaedddf43ad6eef923ca6","modified":1521989131797},{"_id":"public/archives/2017/index.html","hash":"a79877e801bb36f5588fb916d94829766b8577ad","modified":1521989131797},{"_id":"public/archives/2017/10/index.html","hash":"d358cacfdd0a8c767ac7c716e2da50d5f0c14eb5","modified":1521989131797},{"_id":"public/archives/2017/11/index.html","hash":"48d3eeb6bd09f2c7abaa720fd06de149b86e9c2b","modified":1521989131797},{"_id":"public/archives/2017/12/index.html","hash":"1195ef0f16f44d47abc5a3e0c65e6886dd013f2e","modified":1521989131797},{"_id":"public/archives/2018/index.html","hash":"b2e226743702367a711fba0c4c511888e0833fd2","modified":1521989131798},{"_id":"public/archives/2018/01/index.html","hash":"2d67f1b378c6dbca92e8fb8cdbe4963177db88cc","modified":1521989131798},{"_id":"public/archives/2018/03/index.html","hash":"4fcb4ceef56c9f570dba4ee42a597d65773332fd","modified":1521989131798},{"_id":"public/categories/design-patterns/index.html","hash":"82b00dbf4d6b07d36a652570389791e95237f802","modified":1521989131798},{"_id":"public/categories/java/index.html","hash":"8d6e62261ab3e679985e98ca97c00f7a3a9b74cb","modified":1521989131798},{"_id":"public/page/2/index.html","hash":"92ba220a6a4f0eb3eaa0221e6f5ab49906c89c23","modified":1521989131798},{"_id":"public/index.html","hash":"39d39a6103ab9e94359524cef3451e010ea1eb16","modified":1521989131798},{"_id":"public/page/3/index.html","hash":"98c0d3ae4cbf8ef9a519602b19df0274543481f8","modified":1521989131798},{"_id":"public/page/4/index.html","hash":"ddc53e2a1eaf9902a8cd964c69d0cfb4f40b3b1c","modified":1521989131798},{"_id":"public/page/5/index.html","hash":"4c9fc2664f2e719d91cf912ca50bc80c38794a35","modified":1521989131798},{"_id":"public/page/6/index.html","hash":"ac1bdb51b1bc0eebaac04feb2441d520d2ce3595","modified":1521988391027},{"_id":"public/tags/Java/index.html","hash":"4548b3708ab56040b790cc736ed36c25101acbc3","modified":1521989131798},{"_id":"public/tags/difficulty-intermediate/index.html","hash":"b943d1fda7df377e06324d69484dd50e1332632d","modified":1521989131798},{"_id":"public/tags/translate/index.html","hash":"c2878bdc3a483f3b67028a7bf79741f403f2ea5d","modified":1521989131798},{"_id":"public/CNAME","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1521988391031},{"_id":"public/README.md","hash":"ead43b52e9eed78e6009549a0598a55c247a49f7","modified":1521988391034},{"_id":"public/dmrs_red_t.png","hash":"ca3bd2e3ba257ee62c1e3b910adee6ac54aae474","modified":1521988391034},{"_id":"public/images/algolia_logo.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1521988391035},{"_id":"public/others.md","hash":"e4887fe9a331f3947417d07f5f1ed6651bfbd72b","modified":1521988391035},{"_id":"public/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1521988391035},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1521988391035},{"_id":"public/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1521988391035},{"_id":"public/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1521988391035},{"_id":"public/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1521988391035},{"_id":"public/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1521988391035},{"_id":"public/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1521988391035},{"_id":"public/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1521988391035},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1521988391035},{"_id":"public/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1521988391035},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1521988391035},{"_id":"public/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1521988391035},{"_id":"public/images/logo.svg","hash":"169f56fd82941591dad3abd734a50ec7259be950","modified":1521988391035},{"_id":"public/images/quote-l.svg","hash":"cd108d6f44351cadf8e6742565217f88818a0458","modified":1521988391036},{"_id":"public/images/quote-r.svg","hash":"2a2a250b32a87c69dcc1b1976c74b747bedbfb41","modified":1521988391036},{"_id":"public/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1521988391036},{"_id":"public/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1521988391036},{"_id":"public/lib/font-awesome/HELP-US-OUT.txt","hash":"ee33b2798b1e714b904d663436c6b3521011d1fa","modified":1521988391036},{"_id":"public/lib/font-awesome/css/font-awesome.css.map","hash":"1573904b82807abbb32c97a3632c6c6808eaac50","modified":1521988391036},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1521988391632},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1521988391635},{"_id":"public/lib/font-awesome/bower.json","hash":"64394a2a9aa00f8e321d8daa5e51a420f0e96dad","modified":1521988391643},{"_id":"public/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1521988391643},{"_id":"public/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1521988391643},{"_id":"public/js/src/bootstrap.js","hash":"531cdedd7fbe8cb1dab2e4328774a9f6b15b59da","modified":1521988391643},{"_id":"public/js/src/algolia-search.js","hash":"b172f697ed339a24b1e80261075232978d164c35","modified":1521988391643},{"_id":"public/js/src/js.cookie.js","hash":"9b37973a90fd50e71ea91682265715e45ae82c75","modified":1521988391643},{"_id":"public/js/src/post-details.js","hash":"d1333fb588d4521b4d1e9c69aef06e0ad1bf0b12","modified":1521988391643},{"_id":"public/js/src/exturl.js","hash":"e42e2aaab7bf4c19a0c8e779140e079c6aa5c0b1","modified":1521988391643},{"_id":"public/js/src/motion.js","hash":"50e57f8acb6924c6999cdcc664ddd3f0730d2061","modified":1521988391643},{"_id":"public/js/src/utils.js","hash":"bb67eb5b5f301a92503c81b1f8edd2a4d1fcc879","modified":1521988391644},{"_id":"public/js/src/scroll-cookie.js","hash":"09dc828cbf5f31158ff6250d2bf7c3cde6365c67","modified":1521988391644},{"_id":"public/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1521988391644},{"_id":"public/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1521988391644},{"_id":"public/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1521988391644},{"_id":"public/js/src/schemes/pisces.js","hash":"8050a5b2683d1d77238c5762b6bd89c543daed6e","modified":1521988391644},{"_id":"public/css/main.css","hash":"8b36b66b6700fbc706fe14329fcb9e5bc127f10e","modified":1521988391644},{"_id":"public/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1521988391644},{"_id":"public/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1521988391644},{"_id":"public/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1521988391644},{"_id":"public/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1521988391644},{"_id":"public/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1521988391644},{"_id":"public/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1521988391644},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1521988391644},{"_id":"public/03252018/how-to-ask-questions-the-smart-way/index.html","hash":"52fc4df25a803b00d32cabc5ae97052e8b8a6fa2","modified":1521989131795},{"_id":"public/tags/composing/index.html","hash":"9a778d1c5f249dcacfadce88f7b1e6502658ef49","modified":1521989131800},{"_id":"public/03252018/chinese-copywriting-guide/index.html","hash":"723165d77e3245e8b8d8d40941ba5c7d2bb2469b","modified":1521989131800},{"_id":"public/03252018/拖动排序后台逻辑思考过程/index.html","hash":"1ed21cc03cb9431f76825b2786763be9e675bc7e","modified":1521989023153}],"Category":[{"name":"设计模式","_id":"cjf6wl6oo00042gtp70h2zk7g"},{"name":"Java相关","_id":"cjf6wl6p8000n2gtpkisslxh2"},{"name":"Hexo","_id":"cjf6wl6pe000w2gtpho6qzz3z"},{"name":"Gists","_id":"cjf6wl6pr001e2gtp27vakexs"},{"name":"其他","_id":"cjf6wl6q6001r2gtprw3h08ip"},{"name":"QA","_id":"cjf6wl6qd001z2gtpnfh7fl0u"},{"name":"译文","_id":"cjf6wl6s7004g2gtpda7kwt5l"}],"Data":[],"Page":[{"title":"","date":"2017-10-22T03:57:52.000Z","_content":"#### 关于本站\n- [码市](https://coding.net/?from=dmrs.me)提供免费空间(Pages服务)\n- [阿里云](https://www.aliyun.com/?from=dmrs.me)提供域名.\n- [Hexo](https://hexo.io/zh-cn/?from=dmrs.me)提供博客模板以及插件集成.\n- [gitter](https://gitter.im?from=dmrs.me)提供留言功能(需要Github/Twitter账户)\n- [不蒜子](http://ibruce.info/2015/04/04/busuanzi/?from=dmrs.me)提供网站统计功能.\n- [flashlab](https://github.com/flashlab/hexo-generator-search/?from=dmrs.me)提供本地搜索功能.\n\n\n---\n\n#### 关于本人\n- Email：3081927676@qq.com\n- QQ：81927676\n- 微信号：81927676 \n- 原创内容均亲自实践过,若有疏漏或者不恰当之处欢迎[指正](https://gitter.im/maskspace/Lobby?from=dmrs.me).\n- 欢迎给我**[<font color=\"red\">留言</font>](https://gitter.im/maskspace/Lobby?from=dmrs.me)**.\n\n\n---\n\n#### 本站申明\n本站所有内容本着共享原则,转载请在显著位置标明来源和原作者(非原创内容遵循原有协议发布,著作权归属原作者或是团队),除特别声明外任何商业用途请联系作者,若侵犯到了您的合法权益,请联系邮件。\n   \n---\n\n#### 更新记录\n- 2017年11月13日将七牛云存储文件新建了一个工厂,独立了一个pages服务,分离出一些原来`github`上的文件,加速网页打开速度.\n- 2017年11月08日留言功能(Gitter)插件放在右下角,添加了[gitment](https://imsun.net/posts/gitment-introduction/#more)支持(Github的Issue做的留言插件).\n- 2017年11月06日修改了文章路径`/YYYY/MM/DD/title`改为`MMDDYY/title`.\n- 2017年11月05日添加了留言功能.\n- 2017年10月31日修改了代码样式,添加作者头像,添加了标签以及分类.\n- 2017年10月22日网站上线.","source":"about/index.md","raw":"---\ntitle: \ndate: 2017-10-22 11:57:52\n---\n#### 关于本站\n- [码市](https://coding.net/?from=dmrs.me)提供免费空间(Pages服务)\n- [阿里云](https://www.aliyun.com/?from=dmrs.me)提供域名.\n- [Hexo](https://hexo.io/zh-cn/?from=dmrs.me)提供博客模板以及插件集成.\n- [gitter](https://gitter.im?from=dmrs.me)提供留言功能(需要Github/Twitter账户)\n- [不蒜子](http://ibruce.info/2015/04/04/busuanzi/?from=dmrs.me)提供网站统计功能.\n- [flashlab](https://github.com/flashlab/hexo-generator-search/?from=dmrs.me)提供本地搜索功能.\n\n\n---\n\n#### 关于本人\n- Email：3081927676@qq.com\n- QQ：81927676\n- 微信号：81927676 \n- 原创内容均亲自实践过,若有疏漏或者不恰当之处欢迎[指正](https://gitter.im/maskspace/Lobby?from=dmrs.me).\n- 欢迎给我**[<font color=\"red\">留言</font>](https://gitter.im/maskspace/Lobby?from=dmrs.me)**.\n\n\n---\n\n#### 本站申明\n本站所有内容本着共享原则,转载请在显著位置标明来源和原作者(非原创内容遵循原有协议发布,著作权归属原作者或是团队),除特别声明外任何商业用途请联系作者,若侵犯到了您的合法权益,请联系邮件。\n   \n---\n\n#### 更新记录\n- 2017年11月13日将七牛云存储文件新建了一个工厂,独立了一个pages服务,分离出一些原来`github`上的文件,加速网页打开速度.\n- 2017年11月08日留言功能(Gitter)插件放在右下角,添加了[gitment](https://imsun.net/posts/gitment-introduction/#more)支持(Github的Issue做的留言插件).\n- 2017年11月06日修改了文章路径`/YYYY/MM/DD/title`改为`MMDDYY/title`.\n- 2017年11月05日添加了留言功能.\n- 2017年10月31日修改了代码样式,添加作者头像,添加了标签以及分类.\n- 2017年10月22日网站上线.","updated":"2018-03-25T03:31:02.585Z","path":"about/index.html","comments":1,"layout":"page","_id":"cjf6wl6oi00012gtpiydbms6d","content":"<h4 id=\"关于本站\"><a href=\"#关于本站\" class=\"headerlink\" title=\"关于本站\"></a>关于本站</h4><ul>\n<li><a href=\"https://coding.net/?from=dmrs.me\" target=\"_blank\" rel=\"noopener\">码市</a>提供免费空间(Pages服务)</li>\n<li><a href=\"https://www.aliyun.com/?from=dmrs.me\" target=\"_blank\" rel=\"noopener\">阿里云</a>提供域名.</li>\n<li><a href=\"https://hexo.io/zh-cn/?from=dmrs.me\" target=\"_blank\" rel=\"noopener\">Hexo</a>提供博客模板以及插件集成.</li>\n<li><a href=\"https://gitter.im?from=dmrs.me\" target=\"_blank\" rel=\"noopener\">gitter</a>提供留言功能(需要Github/Twitter账户)</li>\n<li><a href=\"http://ibruce.info/2015/04/04/busuanzi/?from=dmrs.me\" target=\"_blank\" rel=\"noopener\">不蒜子</a>提供网站统计功能.</li>\n<li><a href=\"https://github.com/flashlab/hexo-generator-search/?from=dmrs.me\" target=\"_blank\" rel=\"noopener\">flashlab</a>提供本地搜索功能.</li>\n</ul>\n<hr>\n<h4 id=\"关于本人\"><a href=\"#关于本人\" class=\"headerlink\" title=\"关于本人\"></a>关于本人</h4><ul>\n<li>Email：<a href=\"mailto:3081927676@qq.com\" target=\"_blank\" rel=\"noopener\">3081927676@qq.com</a></li>\n<li>QQ：81927676</li>\n<li>微信号：81927676 </li>\n<li>原创内容均亲自实践过,若有疏漏或者不恰当之处欢迎<a href=\"https://gitter.im/maskspace/Lobby?from=dmrs.me\" target=\"_blank\" rel=\"noopener\">指正</a>.</li>\n<li>欢迎给我<strong><a href=\"https://gitter.im/maskspace/Lobby?from=dmrs.me\" target=\"_blank\" rel=\"noopener\"><font color=\"red\">留言</font></a></strong>.</li>\n</ul>\n<hr>\n<h4 id=\"本站申明\"><a href=\"#本站申明\" class=\"headerlink\" title=\"本站申明\"></a>本站申明</h4><p>本站所有内容本着共享原则,转载请在显著位置标明来源和原作者(非原创内容遵循原有协议发布,著作权归属原作者或是团队),除特别声明外任何商业用途请联系作者,若侵犯到了您的合法权益,请联系邮件。</p>\n<hr>\n<h4 id=\"更新记录\"><a href=\"#更新记录\" class=\"headerlink\" title=\"更新记录\"></a>更新记录</h4><ul>\n<li>2017年11月13日将七牛云存储文件新建了一个工厂,独立了一个pages服务,分离出一些原来<code>github</code>上的文件,加速网页打开速度.</li>\n<li>2017年11月08日留言功能(Gitter)插件放在右下角,添加了<a href=\"https://imsun.net/posts/gitment-introduction/#more\" target=\"_blank\" rel=\"noopener\">gitment</a>支持(Github的Issue做的留言插件).</li>\n<li>2017年11月06日修改了文章路径<code>/YYYY/MM/DD/title</code>改为<code>MMDDYY/title</code>.</li>\n<li>2017年11月05日添加了留言功能.</li>\n<li>2017年10月31日修改了代码样式,添加作者头像,添加了标签以及分类.</li>\n<li>2017年10月22日网站上线.</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"关于本站\"><a href=\"#关于本站\" class=\"headerlink\" title=\"关于本站\"></a>关于本站</h4><ul>\n<li><a href=\"https://coding.net/?from=dmrs.me\" target=\"_blank\" rel=\"noopener\">码市</a>提供免费空间(Pages服务)</li>\n<li><a href=\"https://www.aliyun.com/?from=dmrs.me\" target=\"_blank\" rel=\"noopener\">阿里云</a>提供域名.</li>\n<li><a href=\"https://hexo.io/zh-cn/?from=dmrs.me\" target=\"_blank\" rel=\"noopener\">Hexo</a>提供博客模板以及插件集成.</li>\n<li><a href=\"https://gitter.im?from=dmrs.me\" target=\"_blank\" rel=\"noopener\">gitter</a>提供留言功能(需要Github/Twitter账户)</li>\n<li><a href=\"http://ibruce.info/2015/04/04/busuanzi/?from=dmrs.me\" target=\"_blank\" rel=\"noopener\">不蒜子</a>提供网站统计功能.</li>\n<li><a href=\"https://github.com/flashlab/hexo-generator-search/?from=dmrs.me\" target=\"_blank\" rel=\"noopener\">flashlab</a>提供本地搜索功能.</li>\n</ul>\n<hr>\n<h4 id=\"关于本人\"><a href=\"#关于本人\" class=\"headerlink\" title=\"关于本人\"></a>关于本人</h4><ul>\n<li>Email：<a href=\"mailto:3081927676@qq.com\" target=\"_blank\" rel=\"noopener\">3081927676@qq.com</a></li>\n<li>QQ：81927676</li>\n<li>微信号：81927676 </li>\n<li>原创内容均亲自实践过,若有疏漏或者不恰当之处欢迎<a href=\"https://gitter.im/maskspace/Lobby?from=dmrs.me\" target=\"_blank\" rel=\"noopener\">指正</a>.</li>\n<li>欢迎给我<strong><a href=\"https://gitter.im/maskspace/Lobby?from=dmrs.me\" target=\"_blank\" rel=\"noopener\"><font color=\"red\">留言</font></a></strong>.</li>\n</ul>\n<hr>\n<h4 id=\"本站申明\"><a href=\"#本站申明\" class=\"headerlink\" title=\"本站申明\"></a>本站申明</h4><p>本站所有内容本着共享原则,转载请在显著位置标明来源和原作者(非原创内容遵循原有协议发布,著作权归属原作者或是团队),除特别声明外任何商业用途请联系作者,若侵犯到了您的合法权益,请联系邮件。</p>\n<hr>\n<h4 id=\"更新记录\"><a href=\"#更新记录\" class=\"headerlink\" title=\"更新记录\"></a>更新记录</h4><ul>\n<li>2017年11月13日将七牛云存储文件新建了一个工厂,独立了一个pages服务,分离出一些原来<code>github</code>上的文件,加速网页打开速度.</li>\n<li>2017年11月08日留言功能(Gitter)插件放在右下角,添加了<a href=\"https://imsun.net/posts/gitment-introduction/#more\" target=\"_blank\" rel=\"noopener\">gitment</a>支持(Github的Issue做的留言插件).</li>\n<li>2017年11月06日修改了文章路径<code>/YYYY/MM/DD/title</code>改为<code>MMDDYY/title</code>.</li>\n<li>2017年11月05日添加了留言功能.</li>\n<li>2017年10月31日修改了代码样式,添加作者头像,添加了标签以及分类.</li>\n<li>2017年10月22日网站上线.</li>\n</ul>\n"},{"title":"tags","date":"2017-11-03T14:47:03.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2017-11-03 22:47:03\ntype: \"tags\"\n---\n","updated":"2018-03-25T03:31:02.589Z","path":"tags/index.html","comments":1,"layout":"page","_id":"cjf6wl6ol00032gtpdtn9192l","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"categories","date":"2017-11-03T14:47:19.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2017-11-03 22:47:19\ntype: \"categories\"\n---\n","updated":"2018-03-25T03:31:02.586Z","path":"categories/index.html","comments":1,"layout":"page","_id":"cjf6wl6os00072gtptttmxt2l","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"Abstract Document","photos":["https://static.zuul.top/java-design-patterns-doc-cn/01_abstract-document.png"],"_content":"\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/01_abstract-document\n\n## 意图\n实现无类型语言的灵活性并保持类型安全 \n\n## 适用性\n使用抽象文档模式时\n\n* 有需要动态添加新的属性\n* 你想要一个灵活的方式来组织树状结构域\n* 你想要更松散的耦合系统\n\n\n## 参考\n\n* [Wikipedia: Abstract Document Pattern](https://en.wikipedia.org/wiki/Abstract_Document_Pattern)\n* [Martin Fowler: Dealing with properties](http://martinfowler.com/apsupp/properties.pdf)\n\n## 原项目地址:https://github.com/iluwatar/java-design-patterns ","source":"_posts/01_abstract-document.md","raw":"---\ntitle: Abstract Document\npermalink: abstract-document\ncategories: 设计模式\ntags: \n - Java\n - 中级难度\n - 译文\nphotos:\n - https://static.zuul.top/java-design-patterns-doc-cn/01_abstract-document.png\n---\n\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/01_abstract-document\n\n## 意图\n实现无类型语言的灵活性并保持类型安全 \n\n## 适用性\n使用抽象文档模式时\n\n* 有需要动态添加新的属性\n* 你想要一个灵活的方式来组织树状结构域\n* 你想要更松散的耦合系统\n\n\n## 参考\n\n* [Wikipedia: Abstract Document Pattern](https://en.wikipedia.org/wiki/Abstract_Document_Pattern)\n* [Martin Fowler: Dealing with properties](http://martinfowler.com/apsupp/properties.pdf)\n\n## 原项目地址:https://github.com/iluwatar/java-design-patterns ","slug":"abstract-document","published":1,"date":"2018-03-25T13:41:03.987Z","updated":"2018-03-25T13:41:03.987Z","comments":1,"layout":"post","link":"","_id":"cjf6wl6od00002gtp24o50xhh","content":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/01_abstract-document\" target=\"_blank\" rel=\"noopener\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/01_abstract-document</a></p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>实现无类型语言的灵活性并保持类型安全 </p>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用抽象文档模式时</p>\n<ul>\n<li>有需要动态添加新的属性</li>\n<li>你想要一个灵活的方式来组织树状结构域</li>\n<li>你想要更松散的耦合系统</li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Abstract_Document_Pattern\" target=\"_blank\" rel=\"noopener\">Wikipedia: Abstract Document Pattern</a></li>\n<li><a href=\"http://martinfowler.com/apsupp/properties.pdf\" target=\"_blank\" rel=\"noopener\">Martin Fowler: Dealing with properties</a></li>\n</ul>\n<h2 id=\"原项目地址-https-github-com-iluwatar-java-design-patterns\"><a href=\"#原项目地址-https-github-com-iluwatar-java-design-patterns\" class=\"headerlink\" title=\"原项目地址:https://github.com/iluwatar/java-design-patterns\"></a>原项目地址:<a href=\"https://github.com/iluwatar/java-design-patterns\" target=\"_blank\" rel=\"noopener\">https://github.com/iluwatar/java-design-patterns</a></h2>","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/01_abstract-document\" target=\"_blank\" rel=\"noopener\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/01_abstract-document</a></p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>实现无类型语言的灵活性并保持类型安全 </p>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用抽象文档模式时</p>\n<ul>\n<li>有需要动态添加新的属性</li>\n<li>你想要一个灵活的方式来组织树状结构域</li>\n<li>你想要更松散的耦合系统</li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Abstract_Document_Pattern\" target=\"_blank\" rel=\"noopener\">Wikipedia: Abstract Document Pattern</a></li>\n<li><a href=\"http://martinfowler.com/apsupp/properties.pdf\" target=\"_blank\" rel=\"noopener\">Martin Fowler: Dealing with properties</a></li>\n</ul>\n<h2 id=\"原项目地址-https-github-com-iluwatar-java-design-patterns\"><a href=\"#原项目地址-https-github-com-iluwatar-java-design-patterns\" class=\"headerlink\" title=\"原项目地址:https://github.com/iluwatar/java-design-patterns\"></a>原项目地址:<a href=\"https://github.com/iluwatar/java-design-patterns\" target=\"_blank\" rel=\"noopener\">https://github.com/iluwatar/java-design-patterns</a></h2>"},{"title":"Abstract Factory","photos":["https://static.zuul.top/java-design-patterns-doc-cn/02_abstract-factory.png"],"_content":"\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/02_abstract-factory\n\n## 也被称为\n套件\n\n## 意图\n提供一个用于创建相关或相关系列的界面\n对象，而不指定具体的类。\n\n## 说明\n真实世界的例子\n\n>要创造一个王国，我们需要有共同主题的物体。 精灵王国需要一个精灵王，精灵城堡和精灵军，而兽人王国需要一个兽人王，兽人城堡和兽人军。 王国中的物体之间有依赖关系。\n\n用简单的话来说\n\n>工厂工厂; 一个工厂，将个别但相关/依赖的工厂分组在一起，而不指定具体的类别。\n\n维基百科说\n\n>抽象工厂模式提供了一种方法来封装一组具有共同主题的单个工厂，而不指定具体的类\n\n**编程示例**\n\n翻译上面的王国的例子。 首先，我们有一些界面和实施的王国对象\n\n```java\npublic interface Castle {\n  String getDescription();\n}\npublic interface King {\n  String getDescription();\n}\npublic interface Army {\n  String getDescription();\n}\n\n// Elven implementations ->\npublic class ElfCastle implements Castle {\n  static final String DESCRIPTION = \"This is the Elven castle!\";\n  @Override\n  public String getDescription() {\n    return DESCRIPTION;\n  }\n}\npublic class ElfKing implements King {\n  static final String DESCRIPTION = \"This is the Elven king!\";\n  @Override\n  public String getDescription() {\n    return DESCRIPTION;\n  }\n}\npublic class ElfArmy implements Army {\n  static final String DESCRIPTION = \"This is the Elven Army!\";\n  @Override\n  public String getDescription() {\n    return DESCRIPTION;\n  }\n}\n\n// Orcish implementations similarly...\n\n```\n\n然后我们有王国工厂的抽象和实现\n\n```java\npublic interface KingdomFactory {\n  Castle createCastle();\n  King createKing();\n  Army createArmy();\n}\n\npublic class ElfKingdomFactory implements KingdomFactory {\n  public Castle createCastle() {\n    return new ElfCastle();\n  }\n  public King createKing() {\n    return new ElfKing();\n  }\n  public Army createArmy() {\n    return new ElfArmy();\n  }\n}\n\npublic class OrcKingdomFactory implements KingdomFactory {\n  public Castle createCastle() {\n    return new OrcCastle();\n  }\n  public King createKing() {\n    return new OrcKing();\n  }\n  public Army createArmy() {\n    return new OrcArmy();\n  }\n}\n```\n\n现在我们有我们的抽象工厂，让我们做相关对象的家庭，即精灵王国工厂创造精灵城堡，国王和军队等。\n\n```java\nKingdomFactory factory = new ElfKingdomFactory();\nCastle castle = factory.createCastle();\nKing king = factory.createKing();\nArmy army = factory.createArmy();\n\ncastle.getDescription();  // Output: This is the Elven castle!\nking.getDescription(); // Output: This is the Elven king!\narmy.getDescription(); // Output: This is the Elven Army!\n\n```\n\n现在，我们可以为我们不同的王国工厂设计一个工厂。 在这个例子中，我们创建了`FactoryMaker`，负责返回`ElfKingdomFactory`或`OrcKingdomFactory`的一个实例。\n客户端可以使用`FactoryMaker`创建所需的哪一个具体的工厂，反过来，他们将生产不同的具体对象（军队，国王，城堡）。\n在这个例子中，我们也使用了一个枚举来参数化客户端要求的王国工厂的类型。\n\n```java\npublic static class FactoryMaker {\n\n  public enum KingdomType {\n    ELF, ORC\n  }\n\n  public static KingdomFactory makeFactory(KingdomType type) {\n    switch (type) {\n      case ELF:\n        return new ElfKingdomFactory();\n      case ORC:\n        return new OrcKingdomFactory();\n      default:\n        throw new IllegalArgumentException(\"KingdomType not supported.\");\n    }\n  }\n}\n\npublic static void main(String[] args) {\n  App app = new App();\n\n  LOGGER.info(\"Elf Kingdom\");\n  app.createKingdom(FactoryMaker.makeFactory(KingdomType.ELF));\n  LOGGER.info(app.getArmy().getDescription());\n  LOGGER.info(app.getCastle().getDescription());\n  LOGGER.info(app.getKing().getDescription());\n\n  LOGGER.info(\"Orc Kingdom\");\n  app.createKingdom(FactoryMaker.makeFactory(KingdomType.ORC));\n  -- similar use of the orc factory\n}\n```\n\n\n## 适用性\n使用抽象工厂模式时\n\n* 一个系统应该独立于产品的创建，组成和代表\n* 系统应配置多个产品系列中的一个\n* 一系列相关产品对象被设计为一起使用，并且您需要强制执行此限制\n* 你想提供一个产品类库，你只想揭示他们的接口，而不是他们的实现\n* 依赖的生命周期在概念上比消费者的生命周期短。\n* 您需要运行时值来构建特定的依赖关系\n* 您想在运行时决定从家庭中调用哪个产品。\n* 您需要提供一个或多个只在运行时已知的参数，然后才能解析相关性。\n\n## 用例：\n\n* 选择在运行时调用适当的`FileSystemAcmeService`或`DatabaseAcmeService`或`NetworkAcmeService`实现。\n* 单元测试用例写作变得更容易\n\n## 后果：\n\njava中的依赖注入隐藏了可能导致运行时错误的服务类依赖，这些错误在编译时会被捕获。\n\n## 示例\n\n* [javax.xml.parsers.DocumentBuilderFactory](http://docs.oracle.com/javase/8/docs/api/javax/xml/parsers/DocumentBuilderFactory.html)\n* [javax.xml.transform.TransformerFactory](http://docs.oracle.com/javase/8/docs/api/javax/xml/transform/TransformerFactory.html#newInstance--)\n* [javax.xml.xpath.XPathFactory](http://docs.oracle.com/javase/8/docs/api/javax/xml/xpath/XPathFactory.html#newInstance--)\n\n## 参考\n\n* [Design Patterns: Elements of Reusable Object-Oriented Software](http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612)\n\n## 原项目地址:https://github.com/iluwatar/java-design-patterns\n","source":"_posts/02_abstract-factory.md","raw":"---\ntitle: Abstract Factory\npermalink: abstract-factory\ncategories: 设计模式\ntags:\n - Java\n - 中级难度\n - 译文\nphotos:\n - https://static.zuul.top/java-design-patterns-doc-cn/02_abstract-factory.png\n---\n\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/02_abstract-factory\n\n## 也被称为\n套件\n\n## 意图\n提供一个用于创建相关或相关系列的界面\n对象，而不指定具体的类。\n\n## 说明\n真实世界的例子\n\n>要创造一个王国，我们需要有共同主题的物体。 精灵王国需要一个精灵王，精灵城堡和精灵军，而兽人王国需要一个兽人王，兽人城堡和兽人军。 王国中的物体之间有依赖关系。\n\n用简单的话来说\n\n>工厂工厂; 一个工厂，将个别但相关/依赖的工厂分组在一起，而不指定具体的类别。\n\n维基百科说\n\n>抽象工厂模式提供了一种方法来封装一组具有共同主题的单个工厂，而不指定具体的类\n\n**编程示例**\n\n翻译上面的王国的例子。 首先，我们有一些界面和实施的王国对象\n\n```java\npublic interface Castle {\n  String getDescription();\n}\npublic interface King {\n  String getDescription();\n}\npublic interface Army {\n  String getDescription();\n}\n\n// Elven implementations ->\npublic class ElfCastle implements Castle {\n  static final String DESCRIPTION = \"This is the Elven castle!\";\n  @Override\n  public String getDescription() {\n    return DESCRIPTION;\n  }\n}\npublic class ElfKing implements King {\n  static final String DESCRIPTION = \"This is the Elven king!\";\n  @Override\n  public String getDescription() {\n    return DESCRIPTION;\n  }\n}\npublic class ElfArmy implements Army {\n  static final String DESCRIPTION = \"This is the Elven Army!\";\n  @Override\n  public String getDescription() {\n    return DESCRIPTION;\n  }\n}\n\n// Orcish implementations similarly...\n\n```\n\n然后我们有王国工厂的抽象和实现\n\n```java\npublic interface KingdomFactory {\n  Castle createCastle();\n  King createKing();\n  Army createArmy();\n}\n\npublic class ElfKingdomFactory implements KingdomFactory {\n  public Castle createCastle() {\n    return new ElfCastle();\n  }\n  public King createKing() {\n    return new ElfKing();\n  }\n  public Army createArmy() {\n    return new ElfArmy();\n  }\n}\n\npublic class OrcKingdomFactory implements KingdomFactory {\n  public Castle createCastle() {\n    return new OrcCastle();\n  }\n  public King createKing() {\n    return new OrcKing();\n  }\n  public Army createArmy() {\n    return new OrcArmy();\n  }\n}\n```\n\n现在我们有我们的抽象工厂，让我们做相关对象的家庭，即精灵王国工厂创造精灵城堡，国王和军队等。\n\n```java\nKingdomFactory factory = new ElfKingdomFactory();\nCastle castle = factory.createCastle();\nKing king = factory.createKing();\nArmy army = factory.createArmy();\n\ncastle.getDescription();  // Output: This is the Elven castle!\nking.getDescription(); // Output: This is the Elven king!\narmy.getDescription(); // Output: This is the Elven Army!\n\n```\n\n现在，我们可以为我们不同的王国工厂设计一个工厂。 在这个例子中，我们创建了`FactoryMaker`，负责返回`ElfKingdomFactory`或`OrcKingdomFactory`的一个实例。\n客户端可以使用`FactoryMaker`创建所需的哪一个具体的工厂，反过来，他们将生产不同的具体对象（军队，国王，城堡）。\n在这个例子中，我们也使用了一个枚举来参数化客户端要求的王国工厂的类型。\n\n```java\npublic static class FactoryMaker {\n\n  public enum KingdomType {\n    ELF, ORC\n  }\n\n  public static KingdomFactory makeFactory(KingdomType type) {\n    switch (type) {\n      case ELF:\n        return new ElfKingdomFactory();\n      case ORC:\n        return new OrcKingdomFactory();\n      default:\n        throw new IllegalArgumentException(\"KingdomType not supported.\");\n    }\n  }\n}\n\npublic static void main(String[] args) {\n  App app = new App();\n\n  LOGGER.info(\"Elf Kingdom\");\n  app.createKingdom(FactoryMaker.makeFactory(KingdomType.ELF));\n  LOGGER.info(app.getArmy().getDescription());\n  LOGGER.info(app.getCastle().getDescription());\n  LOGGER.info(app.getKing().getDescription());\n\n  LOGGER.info(\"Orc Kingdom\");\n  app.createKingdom(FactoryMaker.makeFactory(KingdomType.ORC));\n  -- similar use of the orc factory\n}\n```\n\n\n## 适用性\n使用抽象工厂模式时\n\n* 一个系统应该独立于产品的创建，组成和代表\n* 系统应配置多个产品系列中的一个\n* 一系列相关产品对象被设计为一起使用，并且您需要强制执行此限制\n* 你想提供一个产品类库，你只想揭示他们的接口，而不是他们的实现\n* 依赖的生命周期在概念上比消费者的生命周期短。\n* 您需要运行时值来构建特定的依赖关系\n* 您想在运行时决定从家庭中调用哪个产品。\n* 您需要提供一个或多个只在运行时已知的参数，然后才能解析相关性。\n\n## 用例：\n\n* 选择在运行时调用适当的`FileSystemAcmeService`或`DatabaseAcmeService`或`NetworkAcmeService`实现。\n* 单元测试用例写作变得更容易\n\n## 后果：\n\njava中的依赖注入隐藏了可能导致运行时错误的服务类依赖，这些错误在编译时会被捕获。\n\n## 示例\n\n* [javax.xml.parsers.DocumentBuilderFactory](http://docs.oracle.com/javase/8/docs/api/javax/xml/parsers/DocumentBuilderFactory.html)\n* [javax.xml.transform.TransformerFactory](http://docs.oracle.com/javase/8/docs/api/javax/xml/transform/TransformerFactory.html#newInstance--)\n* [javax.xml.xpath.XPathFactory](http://docs.oracle.com/javase/8/docs/api/javax/xml/xpath/XPathFactory.html#newInstance--)\n\n## 参考\n\n* [Design Patterns: Elements of Reusable Object-Oriented Software](http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612)\n\n## 原项目地址:https://github.com/iluwatar/java-design-patterns\n","slug":"abstract-factory","published":1,"date":"2018-03-25T13:41:04.255Z","updated":"2018-03-25T13:41:04.255Z","comments":1,"layout":"post","link":"","_id":"cjf6wl6ok00022gtpid2q3k5v","content":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/02_abstract-factory\" target=\"_blank\" rel=\"noopener\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/02_abstract-factory</a></p>\n<h2 id=\"也被称为\"><a href=\"#也被称为\" class=\"headerlink\" title=\"也被称为\"></a>也被称为</h2><p>套件</p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>提供一个用于创建相关或相关系列的界面<br>对象，而不指定具体的类。</p>\n<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><p>真实世界的例子</p>\n<blockquote>\n<p>要创造一个王国，我们需要有共同主题的物体。 精灵王国需要一个精灵王，精灵城堡和精灵军，而兽人王国需要一个兽人王，兽人城堡和兽人军。 王国中的物体之间有依赖关系。</p>\n</blockquote>\n<p>用简单的话来说</p>\n<blockquote>\n<p>工厂工厂; 一个工厂，将个别但相关/依赖的工厂分组在一起，而不指定具体的类别。</p>\n</blockquote>\n<p>维基百科说</p>\n<blockquote>\n<p>抽象工厂模式提供了一种方法来封装一组具有共同主题的单个工厂，而不指定具体的类</p>\n</blockquote>\n<p><strong>编程示例</strong></p>\n<p>翻译上面的王国的例子。 首先，我们有一些界面和实施的王国对象</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Castle</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\">String <span class=\"title\">getDescription</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">King</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\">String <span class=\"title\">getDescription</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Army</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\">String <span class=\"title\">getDescription</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Elven implementations -&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ElfCastle</span> <span class=\"keyword\">implements</span> <span class=\"title\">Castle</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String DESCRIPTION = <span class=\"string\">\"This is the Elven castle!\"</span>;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> DESCRIPTION;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ElfKing</span> <span class=\"keyword\">implements</span> <span class=\"title\">King</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String DESCRIPTION = <span class=\"string\">\"This is the Elven king!\"</span>;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> DESCRIPTION;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ElfArmy</span> <span class=\"keyword\">implements</span> <span class=\"title\">Army</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String DESCRIPTION = <span class=\"string\">\"This is the Elven Army!\"</span>;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> DESCRIPTION;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Orcish implementations similarly...</span></span><br></pre></td></tr></table></figure>\n<p>然后我们有王国工厂的抽象和实现</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">KingdomFactory</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\">Castle <span class=\"title\">createCastle</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">  <span class=\"function\">King <span class=\"title\">createKing</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">  <span class=\"function\">Army <span class=\"title\">createArmy</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ElfKingdomFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">KingdomFactory</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Castle <span class=\"title\">createCastle</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ElfCastle();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> King <span class=\"title\">createKing</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ElfKing();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Army <span class=\"title\">createArmy</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ElfArmy();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OrcKingdomFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">KingdomFactory</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Castle <span class=\"title\">createCastle</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> OrcCastle();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> King <span class=\"title\">createKing</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> OrcKing();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Army <span class=\"title\">createArmy</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> OrcArmy();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>现在我们有我们的抽象工厂，让我们做相关对象的家庭，即精灵王国工厂创造精灵城堡，国王和军队等。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">KingdomFactory factory = <span class=\"keyword\">new</span> ElfKingdomFactory();</span><br><span class=\"line\">Castle castle = factory.createCastle();</span><br><span class=\"line\">King king = factory.createKing();</span><br><span class=\"line\">Army army = factory.createArmy();</span><br><span class=\"line\"></span><br><span class=\"line\">castle.getDescription();  <span class=\"comment\">// Output: This is the Elven castle!</span></span><br><span class=\"line\">king.getDescription(); <span class=\"comment\">// Output: This is the Elven king!</span></span><br><span class=\"line\">army.getDescription(); <span class=\"comment\">// Output: This is the Elven Army!</span></span><br></pre></td></tr></table></figure>\n<p>现在，我们可以为我们不同的王国工厂设计一个工厂。 在这个例子中，我们创建了<code>FactoryMaker</code>，负责返回<code>ElfKingdomFactory</code>或<code>OrcKingdomFactory</code>的一个实例。<br>客户端可以使用<code>FactoryMaker</code>创建所需的哪一个具体的工厂，反过来，他们将生产不同的具体对象（军队，国王，城堡）。<br>在这个例子中，我们也使用了一个枚举来参数化客户端要求的王国工厂的类型。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FactoryMaker</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> KingdomType &#123;</span><br><span class=\"line\">    ELF, ORC</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> KingdomFactory <span class=\"title\">makeFactory</span><span class=\"params\">(KingdomType type)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (type) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> ELF:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ElfKingdomFactory();</span><br><span class=\"line\">      <span class=\"keyword\">case</span> ORC:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> OrcKingdomFactory();</span><br><span class=\"line\">      <span class=\"keyword\">default</span>:</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"KingdomType not supported.\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">  App app = <span class=\"keyword\">new</span> App();</span><br><span class=\"line\"></span><br><span class=\"line\">  LOGGER.info(<span class=\"string\">\"Elf Kingdom\"</span>);</span><br><span class=\"line\">  app.createKingdom(FactoryMaker.makeFactory(KingdomType.ELF));</span><br><span class=\"line\">  LOGGER.info(app.getArmy().getDescription());</span><br><span class=\"line\">  LOGGER.info(app.getCastle().getDescription());</span><br><span class=\"line\">  LOGGER.info(app.getKing().getDescription());</span><br><span class=\"line\"></span><br><span class=\"line\">  LOGGER.info(<span class=\"string\">\"Orc Kingdom\"</span>);</span><br><span class=\"line\">  app.createKingdom(FactoryMaker.makeFactory(KingdomType.ORC));</span><br><span class=\"line\">  -- similar use of the orc factory</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用抽象工厂模式时</p>\n<ul>\n<li>一个系统应该独立于产品的创建，组成和代表</li>\n<li>系统应配置多个产品系列中的一个</li>\n<li>一系列相关产品对象被设计为一起使用，并且您需要强制执行此限制</li>\n<li>你想提供一个产品类库，你只想揭示他们的接口，而不是他们的实现</li>\n<li>依赖的生命周期在概念上比消费者的生命周期短。</li>\n<li>您需要运行时值来构建特定的依赖关系</li>\n<li>您想在运行时决定从家庭中调用哪个产品。</li>\n<li>您需要提供一个或多个只在运行时已知的参数，然后才能解析相关性。</li>\n</ul>\n<h2 id=\"用例：\"><a href=\"#用例：\" class=\"headerlink\" title=\"用例：\"></a>用例：</h2><ul>\n<li>选择在运行时调用适当的<code>FileSystemAcmeService</code>或<code>DatabaseAcmeService</code>或<code>NetworkAcmeService</code>实现。</li>\n<li>单元测试用例写作变得更容易</li>\n</ul>\n<h2 id=\"后果：\"><a href=\"#后果：\" class=\"headerlink\" title=\"后果：\"></a>后果：</h2><p>java中的依赖注入隐藏了可能导致运行时错误的服务类依赖，这些错误在编译时会被捕获。</p>\n<h2 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h2><ul>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/javax/xml/parsers/DocumentBuilderFactory.html\" target=\"_blank\" rel=\"noopener\">javax.xml.parsers.DocumentBuilderFactory</a></li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/javax/xml/transform/TransformerFactory.html#newInstance--\" target=\"_blank\" rel=\"noopener\">javax.xml.transform.TransformerFactory</a></li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/javax/xml/xpath/XPathFactory.html#newInstance--\" target=\"_blank\" rel=\"noopener\">javax.xml.xpath.XPathFactory</a></li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612\" target=\"_blank\" rel=\"noopener\">Design Patterns: Elements of Reusable Object-Oriented Software</a></li>\n</ul>\n<h2 id=\"原项目地址-https-github-com-iluwatar-java-design-patterns\"><a href=\"#原项目地址-https-github-com-iluwatar-java-design-patterns\" class=\"headerlink\" title=\"原项目地址:https://github.com/iluwatar/java-design-patterns\"></a>原项目地址:<a href=\"https://github.com/iluwatar/java-design-patterns\" target=\"_blank\" rel=\"noopener\">https://github.com/iluwatar/java-design-patterns</a></h2>","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/02_abstract-factory\" target=\"_blank\" rel=\"noopener\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/02_abstract-factory</a></p>\n<h2 id=\"也被称为\"><a href=\"#也被称为\" class=\"headerlink\" title=\"也被称为\"></a>也被称为</h2><p>套件</p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>提供一个用于创建相关或相关系列的界面<br>对象，而不指定具体的类。</p>\n<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><p>真实世界的例子</p>\n<blockquote>\n<p>要创造一个王国，我们需要有共同主题的物体。 精灵王国需要一个精灵王，精灵城堡和精灵军，而兽人王国需要一个兽人王，兽人城堡和兽人军。 王国中的物体之间有依赖关系。</p>\n</blockquote>\n<p>用简单的话来说</p>\n<blockquote>\n<p>工厂工厂; 一个工厂，将个别但相关/依赖的工厂分组在一起，而不指定具体的类别。</p>\n</blockquote>\n<p>维基百科说</p>\n<blockquote>\n<p>抽象工厂模式提供了一种方法来封装一组具有共同主题的单个工厂，而不指定具体的类</p>\n</blockquote>\n<p><strong>编程示例</strong></p>\n<p>翻译上面的王国的例子。 首先，我们有一些界面和实施的王国对象</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Castle</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\">String <span class=\"title\">getDescription</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">King</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\">String <span class=\"title\">getDescription</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Army</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\">String <span class=\"title\">getDescription</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Elven implementations -&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ElfCastle</span> <span class=\"keyword\">implements</span> <span class=\"title\">Castle</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String DESCRIPTION = <span class=\"string\">\"This is the Elven castle!\"</span>;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> DESCRIPTION;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ElfKing</span> <span class=\"keyword\">implements</span> <span class=\"title\">King</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String DESCRIPTION = <span class=\"string\">\"This is the Elven king!\"</span>;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> DESCRIPTION;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ElfArmy</span> <span class=\"keyword\">implements</span> <span class=\"title\">Army</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String DESCRIPTION = <span class=\"string\">\"This is the Elven Army!\"</span>;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> DESCRIPTION;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Orcish implementations similarly...</span></span><br></pre></td></tr></table></figure>\n<p>然后我们有王国工厂的抽象和实现</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">KingdomFactory</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\">Castle <span class=\"title\">createCastle</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">  <span class=\"function\">King <span class=\"title\">createKing</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">  <span class=\"function\">Army <span class=\"title\">createArmy</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ElfKingdomFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">KingdomFactory</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Castle <span class=\"title\">createCastle</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ElfCastle();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> King <span class=\"title\">createKing</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ElfKing();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Army <span class=\"title\">createArmy</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ElfArmy();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OrcKingdomFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">KingdomFactory</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Castle <span class=\"title\">createCastle</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> OrcCastle();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> King <span class=\"title\">createKing</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> OrcKing();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Army <span class=\"title\">createArmy</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> OrcArmy();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>现在我们有我们的抽象工厂，让我们做相关对象的家庭，即精灵王国工厂创造精灵城堡，国王和军队等。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">KingdomFactory factory = <span class=\"keyword\">new</span> ElfKingdomFactory();</span><br><span class=\"line\">Castle castle = factory.createCastle();</span><br><span class=\"line\">King king = factory.createKing();</span><br><span class=\"line\">Army army = factory.createArmy();</span><br><span class=\"line\"></span><br><span class=\"line\">castle.getDescription();  <span class=\"comment\">// Output: This is the Elven castle!</span></span><br><span class=\"line\">king.getDescription(); <span class=\"comment\">// Output: This is the Elven king!</span></span><br><span class=\"line\">army.getDescription(); <span class=\"comment\">// Output: This is the Elven Army!</span></span><br></pre></td></tr></table></figure>\n<p>现在，我们可以为我们不同的王国工厂设计一个工厂。 在这个例子中，我们创建了<code>FactoryMaker</code>，负责返回<code>ElfKingdomFactory</code>或<code>OrcKingdomFactory</code>的一个实例。<br>客户端可以使用<code>FactoryMaker</code>创建所需的哪一个具体的工厂，反过来，他们将生产不同的具体对象（军队，国王，城堡）。<br>在这个例子中，我们也使用了一个枚举来参数化客户端要求的王国工厂的类型。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FactoryMaker</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> KingdomType &#123;</span><br><span class=\"line\">    ELF, ORC</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> KingdomFactory <span class=\"title\">makeFactory</span><span class=\"params\">(KingdomType type)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (type) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> ELF:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ElfKingdomFactory();</span><br><span class=\"line\">      <span class=\"keyword\">case</span> ORC:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> OrcKingdomFactory();</span><br><span class=\"line\">      <span class=\"keyword\">default</span>:</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"KingdomType not supported.\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">  App app = <span class=\"keyword\">new</span> App();</span><br><span class=\"line\"></span><br><span class=\"line\">  LOGGER.info(<span class=\"string\">\"Elf Kingdom\"</span>);</span><br><span class=\"line\">  app.createKingdom(FactoryMaker.makeFactory(KingdomType.ELF));</span><br><span class=\"line\">  LOGGER.info(app.getArmy().getDescription());</span><br><span class=\"line\">  LOGGER.info(app.getCastle().getDescription());</span><br><span class=\"line\">  LOGGER.info(app.getKing().getDescription());</span><br><span class=\"line\"></span><br><span class=\"line\">  LOGGER.info(<span class=\"string\">\"Orc Kingdom\"</span>);</span><br><span class=\"line\">  app.createKingdom(FactoryMaker.makeFactory(KingdomType.ORC));</span><br><span class=\"line\">  -- similar use of the orc factory</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用抽象工厂模式时</p>\n<ul>\n<li>一个系统应该独立于产品的创建，组成和代表</li>\n<li>系统应配置多个产品系列中的一个</li>\n<li>一系列相关产品对象被设计为一起使用，并且您需要强制执行此限制</li>\n<li>你想提供一个产品类库，你只想揭示他们的接口，而不是他们的实现</li>\n<li>依赖的生命周期在概念上比消费者的生命周期短。</li>\n<li>您需要运行时值来构建特定的依赖关系</li>\n<li>您想在运行时决定从家庭中调用哪个产品。</li>\n<li>您需要提供一个或多个只在运行时已知的参数，然后才能解析相关性。</li>\n</ul>\n<h2 id=\"用例：\"><a href=\"#用例：\" class=\"headerlink\" title=\"用例：\"></a>用例：</h2><ul>\n<li>选择在运行时调用适当的<code>FileSystemAcmeService</code>或<code>DatabaseAcmeService</code>或<code>NetworkAcmeService</code>实现。</li>\n<li>单元测试用例写作变得更容易</li>\n</ul>\n<h2 id=\"后果：\"><a href=\"#后果：\" class=\"headerlink\" title=\"后果：\"></a>后果：</h2><p>java中的依赖注入隐藏了可能导致运行时错误的服务类依赖，这些错误在编译时会被捕获。</p>\n<h2 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h2><ul>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/javax/xml/parsers/DocumentBuilderFactory.html\" target=\"_blank\" rel=\"noopener\">javax.xml.parsers.DocumentBuilderFactory</a></li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/javax/xml/transform/TransformerFactory.html#newInstance--\" target=\"_blank\" rel=\"noopener\">javax.xml.transform.TransformerFactory</a></li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/javax/xml/xpath/XPathFactory.html#newInstance--\" target=\"_blank\" rel=\"noopener\">javax.xml.xpath.XPathFactory</a></li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612\" target=\"_blank\" rel=\"noopener\">Design Patterns: Elements of Reusable Object-Oriented Software</a></li>\n</ul>\n<h2 id=\"原项目地址-https-github-com-iluwatar-java-design-patterns\"><a href=\"#原项目地址-https-github-com-iluwatar-java-design-patterns\" class=\"headerlink\" title=\"原项目地址:https://github.com/iluwatar/java-design-patterns\"></a>原项目地址:<a href=\"https://github.com/iluwatar/java-design-patterns\" target=\"_blank\" rel=\"noopener\">https://github.com/iluwatar/java-design-patterns</a></h2>"},{"title":"Adapter","photos":["https://static.zuul.top/java-design-patterns-doc-cn/03_adapter.png"],"_content":"\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/03_adapter\n\n## 也被称为\n包装纸\n\n## 意图\n将类的接口转换为客户端的另一个接口\n期望。适配器让班级一起工作，否则不能因为\n不兼容的接口。\n\n## 说明\n\n真实世界的例子\n\n>请考虑您的存储卡中有一些照片，并且需要将它们传输到您的计算机上。为了传输它们，您需要一些与计算机端口兼容的适配器，以便您可以将存储卡连接到计算机。在这种情况下，读卡器是一个适配器。\n>另一个例子是着名的电源适配器;一个三脚插头不能连接到双叉插座上，需要使用一个电源适配器，使其与双叉插座兼容。\n>又一个例子是翻译者将一个人所说的话翻译成另一个人\n\n用简单的话来说\n\n>适配器模式可让您将适配器中另外的不兼容对象包装在一起，以使其与另一个类兼容。\n\n维基百科说\n\n>在软件工程中，适配器模式是一种软件设计模式，它允许将现有类的接口用作另一个接口。它通常用于使现有类与其他类一起工作而不修改其源代码。\n\n**编程示例**\n\n考虑一个只能使用划艇的船长，根本不能航行。\n\n首先我们有界面`RowingBoat`和`FishingBoat`\n\n```java\npublic interface RowingBoat {\n  void row();\n}\n\npublic class FishingBoat {\n  private static final Logger LOGGER = LoggerFactory.getLogger(FishingBoat.class);\n  public void sail() {\n    LOGGER.info(\"The fishing boat is sailing\");\n  }\n}\n```\n\nAnd captain expects an implementation of `RowingBoat` interface to be able to move\n\n```java\npublic class Captain implements RowingBoat {\n\n  private RowingBoat rowingBoat;\n\n  public Captain(RowingBoat rowingBoat) {\n    this.rowingBoat = rowingBoat;\n  }\n\n  @Override\n  public void row() {\n    rowingBoat.row();\n  }\n}\n```\n\n现在让我们说，海盗来了，我们的船长需要逃跑，但只有渔船可用。 我们需要创建一个适配器，允许船长用他的划船技能来操作渔船。\n\n```java\npublic class FishingBoatAdapter implements RowingBoat {\n\n  private static final Logger LOGGER = LoggerFactory.getLogger(FishingBoatAdapter.class);\n\n  private FishingBoat boat;\n\n  public FishingBoatAdapter() {\n    boat = new FishingBoat();\n  }\n\n  @Override\n  public void row() {\n    boat.sail();\n  }\n}\n```\n\n现在“船长”可以用“渔船”逃出海盗。\n\n```java\nCaptain captain = new Captain(new FishingBoatAdapter());\ncaptain.row();\n```\n\n## 适用性\n使用适配器模式时\n\n* 你想使用一个现有的类，它的接口不符合你所需要的\n* 你想创建一个可重用的类，与不相关或不可预见的类进行合作，也就是说，不需要兼容接口的类\n* 您需要使用几个现有的子类，但是通过继承每个子类来调整它们的接口是不切实际的。对象适配器可以调整其父类的接口。\n* 大多数使用第三方库的应用程序使用适配器作为应用程序和第三方库之间的中间层，以将应用程序与库分离。如果必须使用另一个库，则只需要用于新库的适配器而不必更改应用程序代码。\n\n## 后果：\n类和对象适配器有不同的权衡。类适配器\n\n* 通过承诺一个具体的适应类来适应目标。因此，当我们想调整一个类及其所有子类时，类适配器将不起作用。\n* 让我们的Adapter重写一些Adaptee的行为，因为Adapter是Adaptee的一个子类。\n* 只引入一个对象，并且不需要额外的指针间接寻找适配器。\n\n一个对象适配器\n\n让我们一个适配器与许多适配器一起工作 - 即适配器本身及其所有子类（如果有的话）。适配器也可以一次为所有的适配器添加功能。\n* 使覆盖`Adaptee`行为变得更加困难。这将需要子类`Adaptee`和使适配器指的是子类而不是适配器本身。\n\n\n## 示例\n\n* [java.util.Arrays#asList()](http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#asList%28T...%29)\n* [java.util.Collections#list()](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#list-java.util.Enumeration-)\n* [java.util.Collections#enumeration()](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#enumeration-java.util.Collection-)\n* [javax.xml.bind.annotation.adapters.XMLAdapter](http://docs.oracle.com/javase/8/docs/api/javax/xml/bind/annotation/adapters/XmlAdapter.html#marshal-BoundType-)\n\n\n## 参考\n\n* [Design Patterns: Elements of Reusable Object-Oriented Software](http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612)\n* [J2EE Design Patterns](http://www.amazon.com/J2EE-Design-Patterns-William-Crawford/dp/0596004273/ref=sr_1_2)\n\n## 原项目地址:https://github.com/iluwatar/java-design-patterns","source":"_posts/03_adapter.md","raw":"---\ntitle: Adapter\npermalink: /adapter\ncategories: 设计模式\ntags:\n - Java\n - 中级难度\n - 译文\nphotos:\n - https://static.zuul.top/java-design-patterns-doc-cn/03_adapter.png\n---\n\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/03_adapter\n\n## 也被称为\n包装纸\n\n## 意图\n将类的接口转换为客户端的另一个接口\n期望。适配器让班级一起工作，否则不能因为\n不兼容的接口。\n\n## 说明\n\n真实世界的例子\n\n>请考虑您的存储卡中有一些照片，并且需要将它们传输到您的计算机上。为了传输它们，您需要一些与计算机端口兼容的适配器，以便您可以将存储卡连接到计算机。在这种情况下，读卡器是一个适配器。\n>另一个例子是着名的电源适配器;一个三脚插头不能连接到双叉插座上，需要使用一个电源适配器，使其与双叉插座兼容。\n>又一个例子是翻译者将一个人所说的话翻译成另一个人\n\n用简单的话来说\n\n>适配器模式可让您将适配器中另外的不兼容对象包装在一起，以使其与另一个类兼容。\n\n维基百科说\n\n>在软件工程中，适配器模式是一种软件设计模式，它允许将现有类的接口用作另一个接口。它通常用于使现有类与其他类一起工作而不修改其源代码。\n\n**编程示例**\n\n考虑一个只能使用划艇的船长，根本不能航行。\n\n首先我们有界面`RowingBoat`和`FishingBoat`\n\n```java\npublic interface RowingBoat {\n  void row();\n}\n\npublic class FishingBoat {\n  private static final Logger LOGGER = LoggerFactory.getLogger(FishingBoat.class);\n  public void sail() {\n    LOGGER.info(\"The fishing boat is sailing\");\n  }\n}\n```\n\nAnd captain expects an implementation of `RowingBoat` interface to be able to move\n\n```java\npublic class Captain implements RowingBoat {\n\n  private RowingBoat rowingBoat;\n\n  public Captain(RowingBoat rowingBoat) {\n    this.rowingBoat = rowingBoat;\n  }\n\n  @Override\n  public void row() {\n    rowingBoat.row();\n  }\n}\n```\n\n现在让我们说，海盗来了，我们的船长需要逃跑，但只有渔船可用。 我们需要创建一个适配器，允许船长用他的划船技能来操作渔船。\n\n```java\npublic class FishingBoatAdapter implements RowingBoat {\n\n  private static final Logger LOGGER = LoggerFactory.getLogger(FishingBoatAdapter.class);\n\n  private FishingBoat boat;\n\n  public FishingBoatAdapter() {\n    boat = new FishingBoat();\n  }\n\n  @Override\n  public void row() {\n    boat.sail();\n  }\n}\n```\n\n现在“船长”可以用“渔船”逃出海盗。\n\n```java\nCaptain captain = new Captain(new FishingBoatAdapter());\ncaptain.row();\n```\n\n## 适用性\n使用适配器模式时\n\n* 你想使用一个现有的类，它的接口不符合你所需要的\n* 你想创建一个可重用的类，与不相关或不可预见的类进行合作，也就是说，不需要兼容接口的类\n* 您需要使用几个现有的子类，但是通过继承每个子类来调整它们的接口是不切实际的。对象适配器可以调整其父类的接口。\n* 大多数使用第三方库的应用程序使用适配器作为应用程序和第三方库之间的中间层，以将应用程序与库分离。如果必须使用另一个库，则只需要用于新库的适配器而不必更改应用程序代码。\n\n## 后果：\n类和对象适配器有不同的权衡。类适配器\n\n* 通过承诺一个具体的适应类来适应目标。因此，当我们想调整一个类及其所有子类时，类适配器将不起作用。\n* 让我们的Adapter重写一些Adaptee的行为，因为Adapter是Adaptee的一个子类。\n* 只引入一个对象，并且不需要额外的指针间接寻找适配器。\n\n一个对象适配器\n\n让我们一个适配器与许多适配器一起工作 - 即适配器本身及其所有子类（如果有的话）。适配器也可以一次为所有的适配器添加功能。\n* 使覆盖`Adaptee`行为变得更加困难。这将需要子类`Adaptee`和使适配器指的是子类而不是适配器本身。\n\n\n## 示例\n\n* [java.util.Arrays#asList()](http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#asList%28T...%29)\n* [java.util.Collections#list()](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#list-java.util.Enumeration-)\n* [java.util.Collections#enumeration()](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#enumeration-java.util.Collection-)\n* [javax.xml.bind.annotation.adapters.XMLAdapter](http://docs.oracle.com/javase/8/docs/api/javax/xml/bind/annotation/adapters/XmlAdapter.html#marshal-BoundType-)\n\n\n## 参考\n\n* [Design Patterns: Elements of Reusable Object-Oriented Software](http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612)\n* [J2EE Design Patterns](http://www.amazon.com/J2EE-Design-Patterns-William-Crawford/dp/0596004273/ref=sr_1_2)\n\n## 原项目地址:https://github.com/iluwatar/java-design-patterns","slug":"/adapter","published":1,"date":"2018-03-25T13:41:04.540Z","updated":"2018-03-25T13:41:04.540Z","comments":1,"layout":"post","link":"","_id":"cjf6wl6or00062gtpq36sc2zp","content":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/03_adapter\" target=\"_blank\" rel=\"noopener\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/03_adapter</a></p>\n<h2 id=\"也被称为\"><a href=\"#也被称为\" class=\"headerlink\" title=\"也被称为\"></a>也被称为</h2><p>包装纸</p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>将类的接口转换为客户端的另一个接口<br>期望。适配器让班级一起工作，否则不能因为<br>不兼容的接口。</p>\n<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><p>真实世界的例子</p>\n<blockquote>\n<p>请考虑您的存储卡中有一些照片，并且需要将它们传输到您的计算机上。为了传输它们，您需要一些与计算机端口兼容的适配器，以便您可以将存储卡连接到计算机。在这种情况下，读卡器是一个适配器。<br>另一个例子是着名的电源适配器;一个三脚插头不能连接到双叉插座上，需要使用一个电源适配器，使其与双叉插座兼容。<br>又一个例子是翻译者将一个人所说的话翻译成另一个人</p>\n</blockquote>\n<p>用简单的话来说</p>\n<blockquote>\n<p>适配器模式可让您将适配器中另外的不兼容对象包装在一起，以使其与另一个类兼容。</p>\n</blockquote>\n<p>维基百科说</p>\n<blockquote>\n<p>在软件工程中，适配器模式是一种软件设计模式，它允许将现有类的接口用作另一个接口。它通常用于使现有类与其他类一起工作而不修改其源代码。</p>\n</blockquote>\n<p><strong>编程示例</strong></p>\n<p>考虑一个只能使用划艇的船长，根本不能航行。</p>\n<p>首先我们有界面<code>RowingBoat</code>和<code>FishingBoat</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">RowingBoat</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">row</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FishingBoat</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger LOGGER = LoggerFactory.getLogger(FishingBoat.class);</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">sail</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The fishing boat is sailing\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>And captain expects an implementation of <code>RowingBoat</code> interface to be able to move</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Captain</span> <span class=\"keyword\">implements</span> <span class=\"title\">RowingBoat</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> RowingBoat rowingBoat;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Captain</span><span class=\"params\">(RowingBoat rowingBoat)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.rowingBoat = rowingBoat;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">row</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    rowingBoat.row();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>现在让我们说，海盗来了，我们的船长需要逃跑，但只有渔船可用。 我们需要创建一个适配器，允许船长用他的划船技能来操作渔船。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FishingBoatAdapter</span> <span class=\"keyword\">implements</span> <span class=\"title\">RowingBoat</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger LOGGER = LoggerFactory.getLogger(FishingBoatAdapter.class);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> FishingBoat boat;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">FishingBoatAdapter</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    boat = <span class=\"keyword\">new</span> FishingBoat();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">row</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    boat.sail();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>现在“船长”可以用“渔船”逃出海盗。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Captain captain = <span class=\"keyword\">new</span> Captain(<span class=\"keyword\">new</span> FishingBoatAdapter());</span><br><span class=\"line\">captain.row();</span><br></pre></td></tr></table></figure>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用适配器模式时</p>\n<ul>\n<li>你想使用一个现有的类，它的接口不符合你所需要的</li>\n<li>你想创建一个可重用的类，与不相关或不可预见的类进行合作，也就是说，不需要兼容接口的类</li>\n<li>您需要使用几个现有的子类，但是通过继承每个子类来调整它们的接口是不切实际的。对象适配器可以调整其父类的接口。</li>\n<li>大多数使用第三方库的应用程序使用适配器作为应用程序和第三方库之间的中间层，以将应用程序与库分离。如果必须使用另一个库，则只需要用于新库的适配器而不必更改应用程序代码。</li>\n</ul>\n<h2 id=\"后果：\"><a href=\"#后果：\" class=\"headerlink\" title=\"后果：\"></a>后果：</h2><p>类和对象适配器有不同的权衡。类适配器</p>\n<ul>\n<li>通过承诺一个具体的适应类来适应目标。因此，当我们想调整一个类及其所有子类时，类适配器将不起作用。</li>\n<li>让我们的Adapter重写一些Adaptee的行为，因为Adapter是Adaptee的一个子类。</li>\n<li>只引入一个对象，并且不需要额外的指针间接寻找适配器。</li>\n</ul>\n<p>一个对象适配器</p>\n<p>让我们一个适配器与许多适配器一起工作 - 即适配器本身及其所有子类（如果有的话）。适配器也可以一次为所有的适配器添加功能。</p>\n<ul>\n<li>使覆盖<code>Adaptee</code>行为变得更加困难。这将需要子类<code>Adaptee</code>和使适配器指的是子类而不是适配器本身。</li>\n</ul>\n<h2 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h2><ul>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#asList%28T...%29\" target=\"_blank\" rel=\"noopener\">java.util.Arrays#asList()</a></li>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#list-java.util.Enumeration-\" target=\"_blank\" rel=\"noopener\">java.util.Collections#list()</a></li>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#enumeration-java.util.Collection-\" target=\"_blank\" rel=\"noopener\">java.util.Collections#enumeration()</a></li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/javax/xml/bind/annotation/adapters/XmlAdapter.html#marshal-BoundType-\" target=\"_blank\" rel=\"noopener\">javax.xml.bind.annotation.adapters.XMLAdapter</a></li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612\" target=\"_blank\" rel=\"noopener\">Design Patterns: Elements of Reusable Object-Oriented Software</a></li>\n<li><a href=\"http://www.amazon.com/J2EE-Design-Patterns-William-Crawford/dp/0596004273/ref=sr_1_2\" target=\"_blank\" rel=\"noopener\">J2EE Design Patterns</a></li>\n</ul>\n<h2 id=\"原项目地址-https-github-com-iluwatar-java-design-patterns\"><a href=\"#原项目地址-https-github-com-iluwatar-java-design-patterns\" class=\"headerlink\" title=\"原项目地址:https://github.com/iluwatar/java-design-patterns\"></a>原项目地址:<a href=\"https://github.com/iluwatar/java-design-patterns\" target=\"_blank\" rel=\"noopener\">https://github.com/iluwatar/java-design-patterns</a></h2>","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/03_adapter\" target=\"_blank\" rel=\"noopener\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/03_adapter</a></p>\n<h2 id=\"也被称为\"><a href=\"#也被称为\" class=\"headerlink\" title=\"也被称为\"></a>也被称为</h2><p>包装纸</p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>将类的接口转换为客户端的另一个接口<br>期望。适配器让班级一起工作，否则不能因为<br>不兼容的接口。</p>\n<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><p>真实世界的例子</p>\n<blockquote>\n<p>请考虑您的存储卡中有一些照片，并且需要将它们传输到您的计算机上。为了传输它们，您需要一些与计算机端口兼容的适配器，以便您可以将存储卡连接到计算机。在这种情况下，读卡器是一个适配器。<br>另一个例子是着名的电源适配器;一个三脚插头不能连接到双叉插座上，需要使用一个电源适配器，使其与双叉插座兼容。<br>又一个例子是翻译者将一个人所说的话翻译成另一个人</p>\n</blockquote>\n<p>用简单的话来说</p>\n<blockquote>\n<p>适配器模式可让您将适配器中另外的不兼容对象包装在一起，以使其与另一个类兼容。</p>\n</blockquote>\n<p>维基百科说</p>\n<blockquote>\n<p>在软件工程中，适配器模式是一种软件设计模式，它允许将现有类的接口用作另一个接口。它通常用于使现有类与其他类一起工作而不修改其源代码。</p>\n</blockquote>\n<p><strong>编程示例</strong></p>\n<p>考虑一个只能使用划艇的船长，根本不能航行。</p>\n<p>首先我们有界面<code>RowingBoat</code>和<code>FishingBoat</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">RowingBoat</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">row</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FishingBoat</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger LOGGER = LoggerFactory.getLogger(FishingBoat.class);</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">sail</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The fishing boat is sailing\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>And captain expects an implementation of <code>RowingBoat</code> interface to be able to move</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Captain</span> <span class=\"keyword\">implements</span> <span class=\"title\">RowingBoat</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> RowingBoat rowingBoat;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Captain</span><span class=\"params\">(RowingBoat rowingBoat)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.rowingBoat = rowingBoat;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">row</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    rowingBoat.row();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>现在让我们说，海盗来了，我们的船长需要逃跑，但只有渔船可用。 我们需要创建一个适配器，允许船长用他的划船技能来操作渔船。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FishingBoatAdapter</span> <span class=\"keyword\">implements</span> <span class=\"title\">RowingBoat</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger LOGGER = LoggerFactory.getLogger(FishingBoatAdapter.class);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> FishingBoat boat;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">FishingBoatAdapter</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    boat = <span class=\"keyword\">new</span> FishingBoat();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">row</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    boat.sail();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>现在“船长”可以用“渔船”逃出海盗。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Captain captain = <span class=\"keyword\">new</span> Captain(<span class=\"keyword\">new</span> FishingBoatAdapter());</span><br><span class=\"line\">captain.row();</span><br></pre></td></tr></table></figure>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用适配器模式时</p>\n<ul>\n<li>你想使用一个现有的类，它的接口不符合你所需要的</li>\n<li>你想创建一个可重用的类，与不相关或不可预见的类进行合作，也就是说，不需要兼容接口的类</li>\n<li>您需要使用几个现有的子类，但是通过继承每个子类来调整它们的接口是不切实际的。对象适配器可以调整其父类的接口。</li>\n<li>大多数使用第三方库的应用程序使用适配器作为应用程序和第三方库之间的中间层，以将应用程序与库分离。如果必须使用另一个库，则只需要用于新库的适配器而不必更改应用程序代码。</li>\n</ul>\n<h2 id=\"后果：\"><a href=\"#后果：\" class=\"headerlink\" title=\"后果：\"></a>后果：</h2><p>类和对象适配器有不同的权衡。类适配器</p>\n<ul>\n<li>通过承诺一个具体的适应类来适应目标。因此，当我们想调整一个类及其所有子类时，类适配器将不起作用。</li>\n<li>让我们的Adapter重写一些Adaptee的行为，因为Adapter是Adaptee的一个子类。</li>\n<li>只引入一个对象，并且不需要额外的指针间接寻找适配器。</li>\n</ul>\n<p>一个对象适配器</p>\n<p>让我们一个适配器与许多适配器一起工作 - 即适配器本身及其所有子类（如果有的话）。适配器也可以一次为所有的适配器添加功能。</p>\n<ul>\n<li>使覆盖<code>Adaptee</code>行为变得更加困难。这将需要子类<code>Adaptee</code>和使适配器指的是子类而不是适配器本身。</li>\n</ul>\n<h2 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h2><ul>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#asList%28T...%29\" target=\"_blank\" rel=\"noopener\">java.util.Arrays#asList()</a></li>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#list-java.util.Enumeration-\" target=\"_blank\" rel=\"noopener\">java.util.Collections#list()</a></li>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#enumeration-java.util.Collection-\" target=\"_blank\" rel=\"noopener\">java.util.Collections#enumeration()</a></li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/javax/xml/bind/annotation/adapters/XmlAdapter.html#marshal-BoundType-\" target=\"_blank\" rel=\"noopener\">javax.xml.bind.annotation.adapters.XMLAdapter</a></li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612\" target=\"_blank\" rel=\"noopener\">Design Patterns: Elements of Reusable Object-Oriented Software</a></li>\n<li><a href=\"http://www.amazon.com/J2EE-Design-Patterns-William-Crawford/dp/0596004273/ref=sr_1_2\" target=\"_blank\" rel=\"noopener\">J2EE Design Patterns</a></li>\n</ul>\n<h2 id=\"原项目地址-https-github-com-iluwatar-java-design-patterns\"><a href=\"#原项目地址-https-github-com-iluwatar-java-design-patterns\" class=\"headerlink\" title=\"原项目地址:https://github.com/iluwatar/java-design-patterns\"></a>原项目地址:<a href=\"https://github.com/iluwatar/java-design-patterns\" target=\"_blank\" rel=\"noopener\">https://github.com/iluwatar/java-design-patterns</a></h2>"},{"title":"balking","date":"2017-12-09T04:59:09.000Z","photos":["https://static.zuul.top/java-design-patterns-doc-cn/05_balking.png"],"_content":"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/05_balking\n\n## 意图\nBalking Pattern用于防止对象执行某些代码，如果它是不完整或不适当的状态\n\n\n## 适用性\n使用Balking模式\n\n* 只有在某个对象处于某个特定状态时才想调用这个对象\n* 对象通常只处于暂时喘息的状态，但时间不确定\n\n## 相关模式\n* 防护悬挂模式\n* 双重锁定锁定模式\n","source":"_posts/05_balking.md","raw":"---\ntitle: balking\ndate: 2017-12-09 12:59:09\npermalink: balking\ncategories: 设计模式\ntags:\n - Java\n - 初级难度\nphotos:\n - https://static.zuul.top/java-design-patterns-doc-cn/05_balking.png\n---\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/05_balking\n\n## 意图\nBalking Pattern用于防止对象执行某些代码，如果它是不完整或不适当的状态\n\n\n## 适用性\n使用Balking模式\n\n* 只有在某个对象处于某个特定状态时才想调用这个对象\n* 对象通常只处于暂时喘息的状态，但时间不确定\n\n## 相关模式\n* 防护悬挂模式\n* 双重锁定锁定模式\n","slug":"balking","published":1,"updated":"2018-03-25T13:41:05.119Z","comments":1,"layout":"post","link":"","_id":"cjf6wl6ot00082gtpj2tpy7ln","content":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/05_balking\" target=\"_blank\" rel=\"noopener\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/05_balking</a></p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>Balking Pattern用于防止对象执行某些代码，如果它是不完整或不适当的状态</p>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用Balking模式</p>\n<ul>\n<li>只有在某个对象处于某个特定状态时才想调用这个对象</li>\n<li>对象通常只处于暂时喘息的状态，但时间不确定</li>\n</ul>\n<h2 id=\"相关模式\"><a href=\"#相关模式\" class=\"headerlink\" title=\"相关模式\"></a>相关模式</h2><ul>\n<li>防护悬挂模式</li>\n<li>双重锁定锁定模式</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/05_balking\" target=\"_blank\" rel=\"noopener\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/05_balking</a></p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>Balking Pattern用于防止对象执行某些代码，如果它是不完整或不适当的状态</p>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用Balking模式</p>\n<ul>\n<li>只有在某个对象处于某个特定状态时才想调用这个对象</li>\n<li>对象通常只处于暂时喘息的状态，但时间不确定</li>\n</ul>\n<h2 id=\"相关模式\"><a href=\"#相关模式\" class=\"headerlink\" title=\"相关模式\"></a>相关模式</h2><ul>\n<li>防护悬挂模式</li>\n<li>双重锁定锁定模式</li>\n</ul>\n"},{"title":"bridge","date":"2017-12-09T04:59:24.000Z","photos":["https://static.zuul.top/java-design-patterns-doc-cn/06_bridge.png"],"_content":"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/06_bridge\n## 也被称为\n手柄/身体\n\n## 意图\n将一个抽象与其实现分离开来，以使两者可以独立地变化。\n\n## 说明\n\n真实世界的例子\n\n> 考虑你有一个不同的附魔武器，你应该允许混合不同的武器和不同的附魔。你会怎么做？为每个附魔创建每个武器的多个副本，或者你会创建单独的附魔，并根据需要将其设置为武器？桥梁模式可以让你做第二个。\n\n用普通话说\n\n桥梁模式是关于比继承更喜欢构图。实现细节从一个层次结构推送到另一个具有单独层次结构的对象。\n\n维基百科说\n\n> 桥梁模式是软件工程中使用的一种设计模式，旨在“将抽象与其实现分离开，以便二者可以独立地变化”\n\n**编程示例**\n\n从上面翻译我们的武器示例。这里我们有`Weapon`层次结构\n\n```java\npublic interface Weapon {\n  void wield();\n  void swing();\n  void unwield();\n  Enchantment getEnchantment();\n}\n\npublic class Sword implements Weapon {\n\n  private final Enchantment enchantment;\n\n  public Sword(Enchantment enchantment) {\n    this.enchantment = enchantment;\n  }\n\n  @Override\n  public void wield() {\n    LOGGER.info(\"The sword is wielded.\");\n    enchantment.onActivate();\n  }\n\n  @Override\n  public void swing() {\n    LOGGER.info(\"The sword is swinged.\");\n    enchantment.apply();\n  }\n\n  @Override\n  public void unwield() {\n    LOGGER.info(\"The sword is unwielded.\");\n    enchantment.onDeactivate();\n  }\n\n  @Override\n  public Enchantment getEnchantment() {\n    return enchantment;\n  }\n}\n\npublic class Hammer implements Weapon {\n\n  private final Enchantment enchantment;\n\n  public Hammer(Enchantment enchantment) {\n    this.enchantment = enchantment;\n  }\n\n  @Override\n  public void wield() {\n    LOGGER.info(\"The hammer is wielded.\");\n    enchantment.onActivate();\n  }\n\n  @Override\n  public void swing() {\n    LOGGER.info(\"The hammer is swinged.\");\n    enchantment.apply();\n  }\n\n  @Override\n  public void unwield() {\n    LOGGER.info(\"The hammer is unwielded.\");\n    enchantment.onDeactivate();\n  }\n\n  @Override\n  public Enchantment getEnchantment() {\n    return enchantment;\n  }\n}\n```\n\n和单独的结界层次\n\n```java\npublic interface Enchantment {\n  void onActivate();\n  void apply();\n  void onDeactivate();\n}\n\npublic class FlyingEnchantment implements Enchantment {\n\n  @Override\n  public void onActivate() {\n    LOGGER.info(\"The item begins to glow faintly.\");\n  }\n\n  @Override\n  public void apply() {\n    LOGGER.info(\"The item flies and strikes the enemies finally returning to owner's hand.\");\n  }\n\n  @Override\n  public void onDeactivate() {\n    LOGGER.info(\"The item's glow fades.\");\n  }\n}\n\npublic class SoulEatingEnchantment implements Enchantment {\n\n  @Override\n  public void onActivate() {\n    LOGGER.info(\"The item spreads bloodlust.\");\n  }\n\n  @Override\n  public void apply() {\n    LOGGER.info(\"The item eats the soul of enemies.\");\n  }\n\n  @Override\n  public void onDeactivate() {\n    LOGGER.info(\"Bloodlust slowly disappears.\");\n  }\n}\n```\n\n而且这两个行动层次\n\n```java\nSword enchantedSword = new Sword(new SoulEatingEnchantment());\nenchantedSword.wield();\nenchantedSword.swing();\nenchantedSword.unwield();\n// The sword is wielded.\n// The item spreads bloodlust.\n// The sword is swinged.\n// The item eats the soul of enemies.\n// The sword is unwielded.\n// Bloodlust slowly disappears.\n\nHammer hammer = new Hammer(new FlyingEnchantment());\nhammer.wield();\nhammer.swing();\nhammer.unwield();\n// The hammer is wielded.\n// The item begins to glow faintly.\n// The hammer is swinged.\n// The item flies and strikes the enemies finally returning to owner's hand.\n// The hammer is unwielded.\n// The item's glow fades.\n```\n\n## 适用性\n使用桥梁模式时\n\n* 您想避免抽象与其实现之间的永久绑定。例如，当实现必须在运行时被选择或切换时，情况可能如此。\n* 抽象和它们的实现都应该通过子类来扩展。在这种情况下，Bridge模式可以让您将不同的抽象和实现组合起来，并将其独立扩展\n* 抽象的实施变化不应该对客户产生影响;也就是说，他们的代码不应该被重新编译。\n* 你有一个类扩散。这样的类层次结构表示需要将对象分成两部分。 Rumbaugh使用术语“嵌套概括”来指代这样的类层次结构\n* 您想要在多个对象之间共享一个实现（可能使用引用计数），这个事实应该隐藏在客户端。一个简单的例子是Coplien的String类，其中多个对象可以共享相同的字符串表示。\n\n## 参考\n\n* [Design Patterns: Elements of Reusable Object-Oriented Software](http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612)\n","source":"_posts/06_bridge.md","raw":"---\ntitle: bridge\npermalink: bridge\ndate: 2017-12-09 12:59:24\ncategories: 设计模式\ntags:\n - Java\n - 中级难度\nphotos:\n - https://static.zuul.top/java-design-patterns-doc-cn/06_bridge.png\n---\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/06_bridge\n## 也被称为\n手柄/身体\n\n## 意图\n将一个抽象与其实现分离开来，以使两者可以独立地变化。\n\n## 说明\n\n真实世界的例子\n\n> 考虑你有一个不同的附魔武器，你应该允许混合不同的武器和不同的附魔。你会怎么做？为每个附魔创建每个武器的多个副本，或者你会创建单独的附魔，并根据需要将其设置为武器？桥梁模式可以让你做第二个。\n\n用普通话说\n\n桥梁模式是关于比继承更喜欢构图。实现细节从一个层次结构推送到另一个具有单独层次结构的对象。\n\n维基百科说\n\n> 桥梁模式是软件工程中使用的一种设计模式，旨在“将抽象与其实现分离开，以便二者可以独立地变化”\n\n**编程示例**\n\n从上面翻译我们的武器示例。这里我们有`Weapon`层次结构\n\n```java\npublic interface Weapon {\n  void wield();\n  void swing();\n  void unwield();\n  Enchantment getEnchantment();\n}\n\npublic class Sword implements Weapon {\n\n  private final Enchantment enchantment;\n\n  public Sword(Enchantment enchantment) {\n    this.enchantment = enchantment;\n  }\n\n  @Override\n  public void wield() {\n    LOGGER.info(\"The sword is wielded.\");\n    enchantment.onActivate();\n  }\n\n  @Override\n  public void swing() {\n    LOGGER.info(\"The sword is swinged.\");\n    enchantment.apply();\n  }\n\n  @Override\n  public void unwield() {\n    LOGGER.info(\"The sword is unwielded.\");\n    enchantment.onDeactivate();\n  }\n\n  @Override\n  public Enchantment getEnchantment() {\n    return enchantment;\n  }\n}\n\npublic class Hammer implements Weapon {\n\n  private final Enchantment enchantment;\n\n  public Hammer(Enchantment enchantment) {\n    this.enchantment = enchantment;\n  }\n\n  @Override\n  public void wield() {\n    LOGGER.info(\"The hammer is wielded.\");\n    enchantment.onActivate();\n  }\n\n  @Override\n  public void swing() {\n    LOGGER.info(\"The hammer is swinged.\");\n    enchantment.apply();\n  }\n\n  @Override\n  public void unwield() {\n    LOGGER.info(\"The hammer is unwielded.\");\n    enchantment.onDeactivate();\n  }\n\n  @Override\n  public Enchantment getEnchantment() {\n    return enchantment;\n  }\n}\n```\n\n和单独的结界层次\n\n```java\npublic interface Enchantment {\n  void onActivate();\n  void apply();\n  void onDeactivate();\n}\n\npublic class FlyingEnchantment implements Enchantment {\n\n  @Override\n  public void onActivate() {\n    LOGGER.info(\"The item begins to glow faintly.\");\n  }\n\n  @Override\n  public void apply() {\n    LOGGER.info(\"The item flies and strikes the enemies finally returning to owner's hand.\");\n  }\n\n  @Override\n  public void onDeactivate() {\n    LOGGER.info(\"The item's glow fades.\");\n  }\n}\n\npublic class SoulEatingEnchantment implements Enchantment {\n\n  @Override\n  public void onActivate() {\n    LOGGER.info(\"The item spreads bloodlust.\");\n  }\n\n  @Override\n  public void apply() {\n    LOGGER.info(\"The item eats the soul of enemies.\");\n  }\n\n  @Override\n  public void onDeactivate() {\n    LOGGER.info(\"Bloodlust slowly disappears.\");\n  }\n}\n```\n\n而且这两个行动层次\n\n```java\nSword enchantedSword = new Sword(new SoulEatingEnchantment());\nenchantedSword.wield();\nenchantedSword.swing();\nenchantedSword.unwield();\n// The sword is wielded.\n// The item spreads bloodlust.\n// The sword is swinged.\n// The item eats the soul of enemies.\n// The sword is unwielded.\n// Bloodlust slowly disappears.\n\nHammer hammer = new Hammer(new FlyingEnchantment());\nhammer.wield();\nhammer.swing();\nhammer.unwield();\n// The hammer is wielded.\n// The item begins to glow faintly.\n// The hammer is swinged.\n// The item flies and strikes the enemies finally returning to owner's hand.\n// The hammer is unwielded.\n// The item's glow fades.\n```\n\n## 适用性\n使用桥梁模式时\n\n* 您想避免抽象与其实现之间的永久绑定。例如，当实现必须在运行时被选择或切换时，情况可能如此。\n* 抽象和它们的实现都应该通过子类来扩展。在这种情况下，Bridge模式可以让您将不同的抽象和实现组合起来，并将其独立扩展\n* 抽象的实施变化不应该对客户产生影响;也就是说，他们的代码不应该被重新编译。\n* 你有一个类扩散。这样的类层次结构表示需要将对象分成两部分。 Rumbaugh使用术语“嵌套概括”来指代这样的类层次结构\n* 您想要在多个对象之间共享一个实现（可能使用引用计数），这个事实应该隐藏在客户端。一个简单的例子是Coplien的String类，其中多个对象可以共享相同的字符串表示。\n\n## 参考\n\n* [Design Patterns: Elements of Reusable Object-Oriented Software](http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612)\n","slug":"bridge","published":1,"updated":"2018-03-25T13:41:05.433Z","comments":1,"layout":"post","link":"","_id":"cjf6wl6ou00092gtp91gzdtb7","content":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/06_bridge\" target=\"_blank\" rel=\"noopener\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/06_bridge</a></p>\n<h2 id=\"也被称为\"><a href=\"#也被称为\" class=\"headerlink\" title=\"也被称为\"></a>也被称为</h2><p>手柄/身体</p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>将一个抽象与其实现分离开来，以使两者可以独立地变化。</p>\n<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><p>真实世界的例子</p>\n<blockquote>\n<p>考虑你有一个不同的附魔武器，你应该允许混合不同的武器和不同的附魔。你会怎么做？为每个附魔创建每个武器的多个副本，或者你会创建单独的附魔，并根据需要将其设置为武器？桥梁模式可以让你做第二个。</p>\n</blockquote>\n<p>用普通话说</p>\n<p>桥梁模式是关于比继承更喜欢构图。实现细节从一个层次结构推送到另一个具有单独层次结构的对象。</p>\n<p>维基百科说</p>\n<blockquote>\n<p>桥梁模式是软件工程中使用的一种设计模式，旨在“将抽象与其实现分离开，以便二者可以独立地变化”</p>\n</blockquote>\n<p><strong>编程示例</strong></p>\n<p>从上面翻译我们的武器示例。这里我们有<code>Weapon</code>层次结构</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Weapon</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">wield</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">swing</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">unwield</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">  <span class=\"function\">Enchantment <span class=\"title\">getEnchantment</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sword</span> <span class=\"keyword\">implements</span> <span class=\"title\">Weapon</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Enchantment enchantment;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Sword</span><span class=\"params\">(Enchantment enchantment)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.enchantment = enchantment;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">wield</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The sword is wielded.\"</span>);</span><br><span class=\"line\">    enchantment.onActivate();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">swing</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The sword is swinged.\"</span>);</span><br><span class=\"line\">    enchantment.apply();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">unwield</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The sword is unwielded.\"</span>);</span><br><span class=\"line\">    enchantment.onDeactivate();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Enchantment <span class=\"title\">getEnchantment</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> enchantment;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Hammer</span> <span class=\"keyword\">implements</span> <span class=\"title\">Weapon</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Enchantment enchantment;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Hammer</span><span class=\"params\">(Enchantment enchantment)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.enchantment = enchantment;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">wield</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The hammer is wielded.\"</span>);</span><br><span class=\"line\">    enchantment.onActivate();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">swing</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The hammer is swinged.\"</span>);</span><br><span class=\"line\">    enchantment.apply();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">unwield</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The hammer is unwielded.\"</span>);</span><br><span class=\"line\">    enchantment.onDeactivate();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Enchantment <span class=\"title\">getEnchantment</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> enchantment;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>和单独的结界层次</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Enchantment</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onActivate</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">apply</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onDeactivate</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FlyingEnchantment</span> <span class=\"keyword\">implements</span> <span class=\"title\">Enchantment</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onActivate</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The item begins to glow faintly.\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">apply</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The item flies and strikes the enemies finally returning to owner's hand.\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDeactivate</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The item's glow fades.\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoulEatingEnchantment</span> <span class=\"keyword\">implements</span> <span class=\"title\">Enchantment</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onActivate</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The item spreads bloodlust.\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">apply</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The item eats the soul of enemies.\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDeactivate</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"Bloodlust slowly disappears.\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>而且这两个行动层次</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sword enchantedSword = <span class=\"keyword\">new</span> Sword(<span class=\"keyword\">new</span> SoulEatingEnchantment());</span><br><span class=\"line\">enchantedSword.wield();</span><br><span class=\"line\">enchantedSword.swing();</span><br><span class=\"line\">enchantedSword.unwield();</span><br><span class=\"line\"><span class=\"comment\">// The sword is wielded.</span></span><br><span class=\"line\"><span class=\"comment\">// The item spreads bloodlust.</span></span><br><span class=\"line\"><span class=\"comment\">// The sword is swinged.</span></span><br><span class=\"line\"><span class=\"comment\">// The item eats the soul of enemies.</span></span><br><span class=\"line\"><span class=\"comment\">// The sword is unwielded.</span></span><br><span class=\"line\"><span class=\"comment\">// Bloodlust slowly disappears.</span></span><br><span class=\"line\"></span><br><span class=\"line\">Hammer hammer = <span class=\"keyword\">new</span> Hammer(<span class=\"keyword\">new</span> FlyingEnchantment());</span><br><span class=\"line\">hammer.wield();</span><br><span class=\"line\">hammer.swing();</span><br><span class=\"line\">hammer.unwield();</span><br><span class=\"line\"><span class=\"comment\">// The hammer is wielded.</span></span><br><span class=\"line\"><span class=\"comment\">// The item begins to glow faintly.</span></span><br><span class=\"line\"><span class=\"comment\">// The hammer is swinged.</span></span><br><span class=\"line\"><span class=\"comment\">// The item flies and strikes the enemies finally returning to owner's hand.</span></span><br><span class=\"line\"><span class=\"comment\">// The hammer is unwielded.</span></span><br><span class=\"line\"><span class=\"comment\">// The item's glow fades.</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用桥梁模式时</p>\n<ul>\n<li>您想避免抽象与其实现之间的永久绑定。例如，当实现必须在运行时被选择或切换时，情况可能如此。</li>\n<li>抽象和它们的实现都应该通过子类来扩展。在这种情况下，Bridge模式可以让您将不同的抽象和实现组合起来，并将其独立扩展</li>\n<li>抽象的实施变化不应该对客户产生影响;也就是说，他们的代码不应该被重新编译。</li>\n<li>你有一个类扩散。这样的类层次结构表示需要将对象分成两部分。 Rumbaugh使用术语“嵌套概括”来指代这样的类层次结构</li>\n<li>您想要在多个对象之间共享一个实现（可能使用引用计数），这个事实应该隐藏在客户端。一个简单的例子是Coplien的String类，其中多个对象可以共享相同的字符串表示。</li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612\" target=\"_blank\" rel=\"noopener\">Design Patterns: Elements of Reusable Object-Oriented Software</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/06_bridge\" target=\"_blank\" rel=\"noopener\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/06_bridge</a></p>\n<h2 id=\"也被称为\"><a href=\"#也被称为\" class=\"headerlink\" title=\"也被称为\"></a>也被称为</h2><p>手柄/身体</p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>将一个抽象与其实现分离开来，以使两者可以独立地变化。</p>\n<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><p>真实世界的例子</p>\n<blockquote>\n<p>考虑你有一个不同的附魔武器，你应该允许混合不同的武器和不同的附魔。你会怎么做？为每个附魔创建每个武器的多个副本，或者你会创建单独的附魔，并根据需要将其设置为武器？桥梁模式可以让你做第二个。</p>\n</blockquote>\n<p>用普通话说</p>\n<p>桥梁模式是关于比继承更喜欢构图。实现细节从一个层次结构推送到另一个具有单独层次结构的对象。</p>\n<p>维基百科说</p>\n<blockquote>\n<p>桥梁模式是软件工程中使用的一种设计模式，旨在“将抽象与其实现分离开，以便二者可以独立地变化”</p>\n</blockquote>\n<p><strong>编程示例</strong></p>\n<p>从上面翻译我们的武器示例。这里我们有<code>Weapon</code>层次结构</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Weapon</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">wield</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">swing</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">unwield</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">  <span class=\"function\">Enchantment <span class=\"title\">getEnchantment</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sword</span> <span class=\"keyword\">implements</span> <span class=\"title\">Weapon</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Enchantment enchantment;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Sword</span><span class=\"params\">(Enchantment enchantment)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.enchantment = enchantment;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">wield</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The sword is wielded.\"</span>);</span><br><span class=\"line\">    enchantment.onActivate();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">swing</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The sword is swinged.\"</span>);</span><br><span class=\"line\">    enchantment.apply();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">unwield</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The sword is unwielded.\"</span>);</span><br><span class=\"line\">    enchantment.onDeactivate();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Enchantment <span class=\"title\">getEnchantment</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> enchantment;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Hammer</span> <span class=\"keyword\">implements</span> <span class=\"title\">Weapon</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Enchantment enchantment;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Hammer</span><span class=\"params\">(Enchantment enchantment)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.enchantment = enchantment;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">wield</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The hammer is wielded.\"</span>);</span><br><span class=\"line\">    enchantment.onActivate();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">swing</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The hammer is swinged.\"</span>);</span><br><span class=\"line\">    enchantment.apply();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">unwield</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The hammer is unwielded.\"</span>);</span><br><span class=\"line\">    enchantment.onDeactivate();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Enchantment <span class=\"title\">getEnchantment</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> enchantment;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>和单独的结界层次</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Enchantment</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onActivate</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">apply</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onDeactivate</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FlyingEnchantment</span> <span class=\"keyword\">implements</span> <span class=\"title\">Enchantment</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onActivate</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The item begins to glow faintly.\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">apply</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The item flies and strikes the enemies finally returning to owner's hand.\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDeactivate</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The item's glow fades.\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoulEatingEnchantment</span> <span class=\"keyword\">implements</span> <span class=\"title\">Enchantment</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onActivate</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The item spreads bloodlust.\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">apply</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"The item eats the soul of enemies.\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDeactivate</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    LOGGER.info(<span class=\"string\">\"Bloodlust slowly disappears.\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>而且这两个行动层次</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sword enchantedSword = <span class=\"keyword\">new</span> Sword(<span class=\"keyword\">new</span> SoulEatingEnchantment());</span><br><span class=\"line\">enchantedSword.wield();</span><br><span class=\"line\">enchantedSword.swing();</span><br><span class=\"line\">enchantedSword.unwield();</span><br><span class=\"line\"><span class=\"comment\">// The sword is wielded.</span></span><br><span class=\"line\"><span class=\"comment\">// The item spreads bloodlust.</span></span><br><span class=\"line\"><span class=\"comment\">// The sword is swinged.</span></span><br><span class=\"line\"><span class=\"comment\">// The item eats the soul of enemies.</span></span><br><span class=\"line\"><span class=\"comment\">// The sword is unwielded.</span></span><br><span class=\"line\"><span class=\"comment\">// Bloodlust slowly disappears.</span></span><br><span class=\"line\"></span><br><span class=\"line\">Hammer hammer = <span class=\"keyword\">new</span> Hammer(<span class=\"keyword\">new</span> FlyingEnchantment());</span><br><span class=\"line\">hammer.wield();</span><br><span class=\"line\">hammer.swing();</span><br><span class=\"line\">hammer.unwield();</span><br><span class=\"line\"><span class=\"comment\">// The hammer is wielded.</span></span><br><span class=\"line\"><span class=\"comment\">// The item begins to glow faintly.</span></span><br><span class=\"line\"><span class=\"comment\">// The hammer is swinged.</span></span><br><span class=\"line\"><span class=\"comment\">// The item flies and strikes the enemies finally returning to owner's hand.</span></span><br><span class=\"line\"><span class=\"comment\">// The hammer is unwielded.</span></span><br><span class=\"line\"><span class=\"comment\">// The item's glow fades.</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用桥梁模式时</p>\n<ul>\n<li>您想避免抽象与其实现之间的永久绑定。例如，当实现必须在运行时被选择或切换时，情况可能如此。</li>\n<li>抽象和它们的实现都应该通过子类来扩展。在这种情况下，Bridge模式可以让您将不同的抽象和实现组合起来，并将其独立扩展</li>\n<li>抽象的实施变化不应该对客户产生影响;也就是说，他们的代码不应该被重新编译。</li>\n<li>你有一个类扩散。这样的类层次结构表示需要将对象分成两部分。 Rumbaugh使用术语“嵌套概括”来指代这样的类层次结构</li>\n<li>您想要在多个对象之间共享一个实现（可能使用引用计数），这个事实应该隐藏在客户端。一个简单的例子是Coplien的String类，其中多个对象可以共享相同的字符串表示。</li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612\" target=\"_blank\" rel=\"noopener\">Design Patterns: Elements of Reusable Object-Oriented Software</a></li>\n</ul>\n"},{"title":"builder","date":"2017-12-09T04:59:38.000Z","photos":["https://static.zuul.top/java-design-patterns-doc-cn/07_builder.png"],"_content":"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/07_builder\n\n## 意图\n分离复杂的对象从它的结构\n代表性，使相同的施工过程可以创造不同的\n表示。\n\n## 说明\n\n真实世界的例子\n\n> 想象一下角色扮演游戏的角色生成器。最简单的选择是让电脑为你创造角色。但是如果你想选择职业，性别，发色等字符细节，字符的生成就成了一个循序渐进的过程，当所有的选择都准备好的时候就完成了。\n\n用简单的话来说\n\n> 允许您创建不同的对象风格，同时避免构造器污染。当可能有几种风格的对象时很有用。或者当创建对象时涉及很多步骤。\n\n维基百科说\n\n> 构建器模式是一种对象创建软件设计模式，旨在寻找伸缩构造器反模式的解决方案。\n\n话虽如此，让我加一些关于什么伸缩构造反模式。在某一点或其他我们都看到了如下构造函数：\n```java\npublic Hero(Profession profession, String name, HairType hairType, HairColor hairColor, Armor armor, Weapon weapon) {\n}\n```\n\n正如你所看到的，构造函数参数的数量可能会很快失去控制，并且可能很难理解参数的排列。 再加上这个参数列表可以继续增长，如果你想在将来添加更多的选项。 这被称为伸缩构造反模式。\n\n**编程示例**\n\n理智的选择是使用Builder模式。 首先我们有我们想要创造的英雄\n\n```java\npublic final class Hero {\n  private final Profession profession;\n  private final String name;\n  private final HairType hairType;\n  private final HairColor hairColor;\n  private final Armor armor;\n  private final Weapon weapon;\n\n  private Hero(Builder builder) {\n    this.profession = builder.profession;\n    this.name = builder.name;\n    this.hairColor = builder.hairColor;\n    this.hairType = builder.hairType;\n    this.weapon = builder.weapon;\n    this.armor = builder.armor;\n  }\n}\n```\n\n然后我们有建设者\n\n```java\n  public static class Builder {\n    private final Profession profession;\n    private final String name;\n    private HairType hairType;\n    private HairColor hairColor;\n    private Armor armor;\n    private Weapon weapon;\n\n    public Builder(Profession profession, String name) {\n      if (profession == null || name == null) {\n        throw new IllegalArgumentException(\"profession and name can not be null\");\n      }\n      this.profession = profession;\n      this.name = name;\n    }\n\n    public Builder withHairType(HairType hairType) {\n      this.hairType = hairType;\n      return this;\n    }\n\n    public Builder withHairColor(HairColor hairColor) {\n      this.hairColor = hairColor;\n      return this;\n    }\n\n    public Builder withArmor(Armor armor) {\n      this.armor = armor;\n      return this;\n    }\n\n    public Builder withWeapon(Weapon weapon) {\n      this.weapon = weapon;\n      return this;\n    }\n\n    public Hero build() {\n      return new Hero(this);\n    }\n  }\n```\n\n然后它可以用作：\n\n```java\nHero mage = new Hero.Builder(Profession.MAGE, \"Riobard\").withHairColor(HairColor.BLACK).withWeapon(Weapon.DAGGER).build();\n```\n## 适用性\n使用Builder模式时\n\n* 创建复杂对象的算法应该独立于组成对象的部分以及如何组装\n* 施工过程必须允许对构建的对象进行不同的表示\n\n## 示例\n\n* [java.lang.StringBuilder](http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html)\n* [java.nio.ByteBuffer](http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html#put-byte-) as well as similar buffers such as FloatBuffer, IntBuffer and so on.\n* [java.lang.StringBuffer](http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuffer.html#append-boolean-)\n* All implementations of [java.lang.Appendable](http://docs.oracle.com/javase/8/docs/api/java/lang/Appendable.html)\n* [Apache Camel builders](https://github.com/apache/camel/tree/0e195428ee04531be27a0b659005e3aa8d159d23/camel-core/src/main/java/org/apache/camel/builder)\n\n## 参考\n\n* [Design Patterns: Elements of Reusable Object-Oriented Software](http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612)\n* [Effective Java (2nd Edition)](http://www.amazon.com/Effective-Java-Edition-Joshua-Bloch/dp/0321356683)\n","source":"_posts/07_builder.md","raw":"---\ntitle: builder\npermalink: builder\ndate: 2017-12-09 12:59:38\ncategories: 设计模式\ntags:\n - Java\n - 中级难度\nphotos:\n - https://static.zuul.top/java-design-patterns-doc-cn/07_builder.png\n---\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/07_builder\n\n## 意图\n分离复杂的对象从它的结构\n代表性，使相同的施工过程可以创造不同的\n表示。\n\n## 说明\n\n真实世界的例子\n\n> 想象一下角色扮演游戏的角色生成器。最简单的选择是让电脑为你创造角色。但是如果你想选择职业，性别，发色等字符细节，字符的生成就成了一个循序渐进的过程，当所有的选择都准备好的时候就完成了。\n\n用简单的话来说\n\n> 允许您创建不同的对象风格，同时避免构造器污染。当可能有几种风格的对象时很有用。或者当创建对象时涉及很多步骤。\n\n维基百科说\n\n> 构建器模式是一种对象创建软件设计模式，旨在寻找伸缩构造器反模式的解决方案。\n\n话虽如此，让我加一些关于什么伸缩构造反模式。在某一点或其他我们都看到了如下构造函数：\n```java\npublic Hero(Profession profession, String name, HairType hairType, HairColor hairColor, Armor armor, Weapon weapon) {\n}\n```\n\n正如你所看到的，构造函数参数的数量可能会很快失去控制，并且可能很难理解参数的排列。 再加上这个参数列表可以继续增长，如果你想在将来添加更多的选项。 这被称为伸缩构造反模式。\n\n**编程示例**\n\n理智的选择是使用Builder模式。 首先我们有我们想要创造的英雄\n\n```java\npublic final class Hero {\n  private final Profession profession;\n  private final String name;\n  private final HairType hairType;\n  private final HairColor hairColor;\n  private final Armor armor;\n  private final Weapon weapon;\n\n  private Hero(Builder builder) {\n    this.profession = builder.profession;\n    this.name = builder.name;\n    this.hairColor = builder.hairColor;\n    this.hairType = builder.hairType;\n    this.weapon = builder.weapon;\n    this.armor = builder.armor;\n  }\n}\n```\n\n然后我们有建设者\n\n```java\n  public static class Builder {\n    private final Profession profession;\n    private final String name;\n    private HairType hairType;\n    private HairColor hairColor;\n    private Armor armor;\n    private Weapon weapon;\n\n    public Builder(Profession profession, String name) {\n      if (profession == null || name == null) {\n        throw new IllegalArgumentException(\"profession and name can not be null\");\n      }\n      this.profession = profession;\n      this.name = name;\n    }\n\n    public Builder withHairType(HairType hairType) {\n      this.hairType = hairType;\n      return this;\n    }\n\n    public Builder withHairColor(HairColor hairColor) {\n      this.hairColor = hairColor;\n      return this;\n    }\n\n    public Builder withArmor(Armor armor) {\n      this.armor = armor;\n      return this;\n    }\n\n    public Builder withWeapon(Weapon weapon) {\n      this.weapon = weapon;\n      return this;\n    }\n\n    public Hero build() {\n      return new Hero(this);\n    }\n  }\n```\n\n然后它可以用作：\n\n```java\nHero mage = new Hero.Builder(Profession.MAGE, \"Riobard\").withHairColor(HairColor.BLACK).withWeapon(Weapon.DAGGER).build();\n```\n## 适用性\n使用Builder模式时\n\n* 创建复杂对象的算法应该独立于组成对象的部分以及如何组装\n* 施工过程必须允许对构建的对象进行不同的表示\n\n## 示例\n\n* [java.lang.StringBuilder](http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html)\n* [java.nio.ByteBuffer](http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html#put-byte-) as well as similar buffers such as FloatBuffer, IntBuffer and so on.\n* [java.lang.StringBuffer](http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuffer.html#append-boolean-)\n* All implementations of [java.lang.Appendable](http://docs.oracle.com/javase/8/docs/api/java/lang/Appendable.html)\n* [Apache Camel builders](https://github.com/apache/camel/tree/0e195428ee04531be27a0b659005e3aa8d159d23/camel-core/src/main/java/org/apache/camel/builder)\n\n## 参考\n\n* [Design Patterns: Elements of Reusable Object-Oriented Software](http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612)\n* [Effective Java (2nd Edition)](http://www.amazon.com/Effective-Java-Edition-Joshua-Bloch/dp/0321356683)\n","slug":"builder","published":1,"updated":"2018-03-25T13:41:05.758Z","comments":1,"layout":"post","link":"","_id":"cjf6wl6oz000c2gtpokpx1yjk","content":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/07_builder\" target=\"_blank\" rel=\"noopener\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/07_builder</a></p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>分离复杂的对象从它的结构<br>代表性，使相同的施工过程可以创造不同的<br>表示。</p>\n<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><p>真实世界的例子</p>\n<blockquote>\n<p>想象一下角色扮演游戏的角色生成器。最简单的选择是让电脑为你创造角色。但是如果你想选择职业，性别，发色等字符细节，字符的生成就成了一个循序渐进的过程，当所有的选择都准备好的时候就完成了。</p>\n</blockquote>\n<p>用简单的话来说</p>\n<blockquote>\n<p>允许您创建不同的对象风格，同时避免构造器污染。当可能有几种风格的对象时很有用。或者当创建对象时涉及很多步骤。</p>\n</blockquote>\n<p>维基百科说</p>\n<blockquote>\n<p>构建器模式是一种对象创建软件设计模式，旨在寻找伸缩构造器反模式的解决方案。</p>\n</blockquote>\n<p>话虽如此，让我加一些关于什么伸缩构造反模式。在某一点或其他我们都看到了如下构造函数：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Hero</span><span class=\"params\">(Profession profession, String name, HairType hairType, HairColor hairColor, Armor armor, Weapon weapon)</span> </span>&#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>正如你所看到的，构造函数参数的数量可能会很快失去控制，并且可能很难理解参数的排列。 再加上这个参数列表可以继续增长，如果你想在将来添加更多的选项。 这被称为伸缩构造反模式。</p>\n<p><strong>编程示例</strong></p>\n<p>理智的选择是使用Builder模式。 首先我们有我们想要创造的英雄</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Hero</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Profession profession;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> String name;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> HairType hairType;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> HairColor hairColor;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Armor armor;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Weapon weapon;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Hero</span><span class=\"params\">(Builder builder)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.profession = builder.profession;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = builder.name;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.hairColor = builder.hairColor;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.hairType = builder.hairType;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.weapon = builder.weapon;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.armor = builder.armor;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>然后我们有建设者</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Builder</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Profession profession;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> String name;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> HairType hairType;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> HairColor hairColor;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> Armor armor;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> Weapon weapon;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Builder</span><span class=\"params\">(Profession profession, String name)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (profession == <span class=\"keyword\">null</span> || name == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"profession and name can not be null\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.profession = profession;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">withHairType</span><span class=\"params\">(HairType hairType)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.hairType = hairType;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">withHairColor</span><span class=\"params\">(HairColor hairColor)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.hairColor = hairColor;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">withArmor</span><span class=\"params\">(Armor armor)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.armor = armor;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">withWeapon</span><span class=\"params\">(Weapon weapon)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.weapon = weapon;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Hero <span class=\"title\">build</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Hero(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>然后它可以用作：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Hero mage = <span class=\"keyword\">new</span> Hero.Builder(Profession.MAGE, <span class=\"string\">\"Riobard\"</span>).withHairColor(HairColor.BLACK).withWeapon(Weapon.DAGGER).build();</span><br></pre></td></tr></table></figure>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用Builder模式时</p>\n<ul>\n<li>创建复杂对象的算法应该独立于组成对象的部分以及如何组装</li>\n<li>施工过程必须允许对构建的对象进行不同的表示</li>\n</ul>\n<h2 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h2><ul>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html\" target=\"_blank\" rel=\"noopener\">java.lang.StringBuilder</a></li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html#put-byte-\" target=\"_blank\" rel=\"noopener\">java.nio.ByteBuffer</a> as well as similar buffers such as FloatBuffer, IntBuffer and so on.</li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuffer.html#append-boolean-\" target=\"_blank\" rel=\"noopener\">java.lang.StringBuffer</a></li>\n<li>All implementations of <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Appendable.html\" target=\"_blank\" rel=\"noopener\">java.lang.Appendable</a></li>\n<li><a href=\"https://github.com/apache/camel/tree/0e195428ee04531be27a0b659005e3aa8d159d23/camel-core/src/main/java/org/apache/camel/builder\" target=\"_blank\" rel=\"noopener\">Apache Camel builders</a></li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612\" target=\"_blank\" rel=\"noopener\">Design Patterns: Elements of Reusable Object-Oriented Software</a></li>\n<li><a href=\"http://www.amazon.com/Effective-Java-Edition-Joshua-Bloch/dp/0321356683\" target=\"_blank\" rel=\"noopener\">Effective Java (2nd Edition)</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/07_builder\" target=\"_blank\" rel=\"noopener\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/07_builder</a></p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>分离复杂的对象从它的结构<br>代表性，使相同的施工过程可以创造不同的<br>表示。</p>\n<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><p>真实世界的例子</p>\n<blockquote>\n<p>想象一下角色扮演游戏的角色生成器。最简单的选择是让电脑为你创造角色。但是如果你想选择职业，性别，发色等字符细节，字符的生成就成了一个循序渐进的过程，当所有的选择都准备好的时候就完成了。</p>\n</blockquote>\n<p>用简单的话来说</p>\n<blockquote>\n<p>允许您创建不同的对象风格，同时避免构造器污染。当可能有几种风格的对象时很有用。或者当创建对象时涉及很多步骤。</p>\n</blockquote>\n<p>维基百科说</p>\n<blockquote>\n<p>构建器模式是一种对象创建软件设计模式，旨在寻找伸缩构造器反模式的解决方案。</p>\n</blockquote>\n<p>话虽如此，让我加一些关于什么伸缩构造反模式。在某一点或其他我们都看到了如下构造函数：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Hero</span><span class=\"params\">(Profession profession, String name, HairType hairType, HairColor hairColor, Armor armor, Weapon weapon)</span> </span>&#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>正如你所看到的，构造函数参数的数量可能会很快失去控制，并且可能很难理解参数的排列。 再加上这个参数列表可以继续增长，如果你想在将来添加更多的选项。 这被称为伸缩构造反模式。</p>\n<p><strong>编程示例</strong></p>\n<p>理智的选择是使用Builder模式。 首先我们有我们想要创造的英雄</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Hero</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Profession profession;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> String name;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> HairType hairType;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> HairColor hairColor;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Armor armor;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Weapon weapon;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Hero</span><span class=\"params\">(Builder builder)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.profession = builder.profession;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = builder.name;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.hairColor = builder.hairColor;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.hairType = builder.hairType;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.weapon = builder.weapon;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.armor = builder.armor;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>然后我们有建设者</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Builder</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Profession profession;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> String name;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> HairType hairType;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> HairColor hairColor;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> Armor armor;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> Weapon weapon;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Builder</span><span class=\"params\">(Profession profession, String name)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (profession == <span class=\"keyword\">null</span> || name == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"profession and name can not be null\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.profession = profession;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">withHairType</span><span class=\"params\">(HairType hairType)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.hairType = hairType;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">withHairColor</span><span class=\"params\">(HairColor hairColor)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.hairColor = hairColor;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">withArmor</span><span class=\"params\">(Armor armor)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.armor = armor;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">withWeapon</span><span class=\"params\">(Weapon weapon)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.weapon = weapon;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Hero <span class=\"title\">build</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Hero(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>然后它可以用作：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Hero mage = <span class=\"keyword\">new</span> Hero.Builder(Profession.MAGE, <span class=\"string\">\"Riobard\"</span>).withHairColor(HairColor.BLACK).withWeapon(Weapon.DAGGER).build();</span><br></pre></td></tr></table></figure>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用Builder模式时</p>\n<ul>\n<li>创建复杂对象的算法应该独立于组成对象的部分以及如何组装</li>\n<li>施工过程必须允许对构建的对象进行不同的表示</li>\n</ul>\n<h2 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h2><ul>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html\" target=\"_blank\" rel=\"noopener\">java.lang.StringBuilder</a></li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html#put-byte-\" target=\"_blank\" rel=\"noopener\">java.nio.ByteBuffer</a> as well as similar buffers such as FloatBuffer, IntBuffer and so on.</li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuffer.html#append-boolean-\" target=\"_blank\" rel=\"noopener\">java.lang.StringBuffer</a></li>\n<li>All implementations of <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Appendable.html\" target=\"_blank\" rel=\"noopener\">java.lang.Appendable</a></li>\n<li><a href=\"https://github.com/apache/camel/tree/0e195428ee04531be27a0b659005e3aa8d159d23/camel-core/src/main/java/org/apache/camel/builder\" target=\"_blank\" rel=\"noopener\">Apache Camel builders</a></li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612\" target=\"_blank\" rel=\"noopener\">Design Patterns: Elements of Reusable Object-Oriented Software</a></li>\n<li><a href=\"http://www.amazon.com/Effective-Java-Edition-Joshua-Bloch/dp/0321356683\" target=\"_blank\" rel=\"noopener\">Effective Java (2nd Edition)</a></li>\n</ul>\n"},{"title":"APP扫描二维码登陆流程","date":"2017-11-14T12:27:57.000Z","_content":"![image](https://static.zuul.top/dmrs-me/20171114/APP-scanning-two-dimensional-code-login.png)\n#### 流程\n1. 客户端页面请求二维码(带有客户端标识和操作标识),这个二维码实际上来自安全中心的后台生成.(二维码状态:`待扫描`),此时信息需要放在`redis`里面保存起来\n2. 客户端页面获取到二维码之后,轮询客户端后台,查看这个标识的状态.\n3. 安全中心APP(已登录)扫描客户端前台生成的二维码,然后将识别出来的信息获取后访问安全中心后台,安全中心后台将当前APP用户的唯一标示和当前的二维码信息绑定,回调客户端后台.(二维码状态:`已扫描`)\n4. 安全中心APP上操作是否确认,然后改变当前二维码标示(二维码状态:`已同意`或`已拒绝`)\n5. 客户端前台轮询到`已扫描`可以提示用户确认,轮询到`已同意`可直接系统自动登录(通过绑定的用户唯一标识获取到用户加密的密码,走正常的登录流程,).成功之后注意`清空密码信息`.\n\n\n#### 二维码生成工具\n```xml\n<dependency>\n    <groupId>com.google.zxing</groupId>\n    <artifactId>core</artifactId>\n    <version>3.0.0</version>\n</dependency>\n<dependency>\n    <groupId>com.google.zxing</groupId>\n    <artifactId>javase</artifactId>\n    <version>3.0.0</version>\n</dependency>\n```\n\n#### 图片由[ProcessOn](https://www.processon.com/)生成\n\n","source":"_posts/APP扫描二维码登陆流程.md","raw":"---\ntitle: APP扫描二维码登陆流程\ntags:\n  - 二维码\n  - 登陆\n  - APP\n  - 流程\ncategories: Java相关\npermalink: ap-scan-two-dimensional-code-landing-proces\ndate: 2017-11-14 20:27:57\n---\n![image](https://static.zuul.top/dmrs-me/20171114/APP-scanning-two-dimensional-code-login.png)\n#### 流程\n1. 客户端页面请求二维码(带有客户端标识和操作标识),这个二维码实际上来自安全中心的后台生成.(二维码状态:`待扫描`),此时信息需要放在`redis`里面保存起来\n2. 客户端页面获取到二维码之后,轮询客户端后台,查看这个标识的状态.\n3. 安全中心APP(已登录)扫描客户端前台生成的二维码,然后将识别出来的信息获取后访问安全中心后台,安全中心后台将当前APP用户的唯一标示和当前的二维码信息绑定,回调客户端后台.(二维码状态:`已扫描`)\n4. 安全中心APP上操作是否确认,然后改变当前二维码标示(二维码状态:`已同意`或`已拒绝`)\n5. 客户端前台轮询到`已扫描`可以提示用户确认,轮询到`已同意`可直接系统自动登录(通过绑定的用户唯一标识获取到用户加密的密码,走正常的登录流程,).成功之后注意`清空密码信息`.\n\n\n#### 二维码生成工具\n```xml\n<dependency>\n    <groupId>com.google.zxing</groupId>\n    <artifactId>core</artifactId>\n    <version>3.0.0</version>\n</dependency>\n<dependency>\n    <groupId>com.google.zxing</groupId>\n    <artifactId>javase</artifactId>\n    <version>3.0.0</version>\n</dependency>\n```\n\n#### 图片由[ProcessOn](https://www.processon.com/)生成\n\n","slug":"ap-scan-two-dimensional-code-landing-proces","published":1,"updated":"2018-03-25T13:41:06.867Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjf6wl6p0000d2gtp9lcvzvkt","content":"<p><img src=\"https://static.zuul.top/dmrs-me/20171114/APP-scanning-two-dimensional-code-login.png\" alt=\"image\"></p>\n<h4 id=\"流程\"><a href=\"#流程\" class=\"headerlink\" title=\"流程\"></a>流程</h4><ol>\n<li>客户端页面请求二维码(带有客户端标识和操作标识),这个二维码实际上来自安全中心的后台生成.(二维码状态:<code>待扫描</code>),此时信息需要放在<code>redis</code>里面保存起来</li>\n<li>客户端页面获取到二维码之后,轮询客户端后台,查看这个标识的状态.</li>\n<li>安全中心APP(已登录)扫描客户端前台生成的二维码,然后将识别出来的信息获取后访问安全中心后台,安全中心后台将当前APP用户的唯一标示和当前的二维码信息绑定,回调客户端后台.(二维码状态:<code>已扫描</code>)</li>\n<li>安全中心APP上操作是否确认,然后改变当前二维码标示(二维码状态:<code>已同意</code>或<code>已拒绝</code>)</li>\n<li>客户端前台轮询到<code>已扫描</code>可以提示用户确认,轮询到<code>已同意</code>可直接系统自动登录(通过绑定的用户唯一标识获取到用户加密的密码,走正常的登录流程,).成功之后注意<code>清空密码信息</code>.</li>\n</ol>\n<h4 id=\"二维码生成工具\"><a href=\"#二维码生成工具\" class=\"headerlink\" title=\"二维码生成工具\"></a>二维码生成工具</h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.google.zxing<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.google.zxing<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javase<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"图片由ProcessOn生成\"><a href=\"#图片由ProcessOn生成\" class=\"headerlink\" title=\"图片由ProcessOn生成\"></a>图片由<a href=\"https://www.processon.com/\" target=\"_blank\" rel=\"noopener\">ProcessOn</a>生成</h4>","site":{"data":{}},"excerpt":"","more":"<p><img src=\"https://static.zuul.top/dmrs-me/20171114/APP-scanning-two-dimensional-code-login.png\" alt=\"image\"></p>\n<h4 id=\"流程\"><a href=\"#流程\" class=\"headerlink\" title=\"流程\"></a>流程</h4><ol>\n<li>客户端页面请求二维码(带有客户端标识和操作标识),这个二维码实际上来自安全中心的后台生成.(二维码状态:<code>待扫描</code>),此时信息需要放在<code>redis</code>里面保存起来</li>\n<li>客户端页面获取到二维码之后,轮询客户端后台,查看这个标识的状态.</li>\n<li>安全中心APP(已登录)扫描客户端前台生成的二维码,然后将识别出来的信息获取后访问安全中心后台,安全中心后台将当前APP用户的唯一标示和当前的二维码信息绑定,回调客户端后台.(二维码状态:<code>已扫描</code>)</li>\n<li>安全中心APP上操作是否确认,然后改变当前二维码标示(二维码状态:<code>已同意</code>或<code>已拒绝</code>)</li>\n<li>客户端前台轮询到<code>已扫描</code>可以提示用户确认,轮询到<code>已同意</code>可直接系统自动登录(通过绑定的用户唯一标识获取到用户加密的密码,走正常的登录流程,).成功之后注意<code>清空密码信息</code>.</li>\n</ol>\n<h4 id=\"二维码生成工具\"><a href=\"#二维码生成工具\" class=\"headerlink\" title=\"二维码生成工具\"></a>二维码生成工具</h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.google.zxing<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.google.zxing<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javase<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"图片由ProcessOn生成\"><a href=\"#图片由ProcessOn生成\" class=\"headerlink\" title=\"图片由ProcessOn生成\"></a>图片由<a href=\"https://www.processon.com/\" target=\"_blank\" rel=\"noopener\">ProcessOn</a>生成</h4>"},{"title":"Async Method Invocation","date":"2017-12-07T14:07:23.000Z","photos":["https://static.zuul.top/java-design-patterns-doc-cn/04_async-method-invocation.png"],"_content":"\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/04_async-method-invocation\n\n## 意图\n异步方法调用是在等待任务结果时调用线程未被阻塞的模式。 \n该模式提供多个独立任务的并行处理，并通过回调检索结果，或等待一切完成。 \n\n## 适用性\n使用异步方法调用模式时\n\n* 您有多个可以并行运行的独立任务\n* 您需要改善一组连续任务的性能\n* 您的处理能力或长时间运行的任务数量有限，主任务不应该等待所有的任务完成\n\n## 示例\n\n* [FutureTask](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/FutureTask.html), [CompletableFuture](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html) and [ExecutorService](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html) (Java)\n* [Task-based Asynchronous Pattern](https://msdn.microsoft.com/en-us/library/hh873175.aspx) (.NET)\n","source":"_posts/04_Async-Method-Invocation.md","raw":"---\ntitle: Async Method Invocation\npermalink: async-method-invocation\ncategories: 设计模式\ndate: 2017-12-07 22:07:23\ntags:\n - Java\n - 中级难度\n -  译文\nphotos:\n - https://static.zuul.top/java-design-patterns-doc-cn/04_async-method-invocation.png\n---\n\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/04_async-method-invocation\n\n## 意图\n异步方法调用是在等待任务结果时调用线程未被阻塞的模式。 \n该模式提供多个独立任务的并行处理，并通过回调检索结果，或等待一切完成。 \n\n## 适用性\n使用异步方法调用模式时\n\n* 您有多个可以并行运行的独立任务\n* 您需要改善一组连续任务的性能\n* 您的处理能力或长时间运行的任务数量有限，主任务不应该等待所有的任务完成\n\n## 示例\n\n* [FutureTask](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/FutureTask.html), [CompletableFuture](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html) and [ExecutorService](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html) (Java)\n* [Task-based Asynchronous Pattern](https://msdn.microsoft.com/en-us/library/hh873175.aspx) (.NET)\n","slug":"async-method-invocation","published":1,"updated":"2018-03-25T13:41:04.831Z","comments":1,"layout":"post","link":"","_id":"cjf6wl6p3000i2gtppybb6pcn","content":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/04_async-method-invocation\" target=\"_blank\" rel=\"noopener\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/04_async-method-invocation</a></p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>异步方法调用是在等待任务结果时调用线程未被阻塞的模式。<br>该模式提供多个独立任务的并行处理，并通过回调检索结果，或等待一切完成。 </p>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用异步方法调用模式时</p>\n<ul>\n<li>您有多个可以并行运行的独立任务</li>\n<li>您需要改善一组连续任务的性能</li>\n<li>您的处理能力或长时间运行的任务数量有限，主任务不应该等待所有的任务完成</li>\n</ul>\n<h2 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h2><ul>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/FutureTask.html\" target=\"_blank\" rel=\"noopener\">FutureTask</a>, <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" target=\"_blank\" rel=\"noopener\">CompletableFuture</a> and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html\" target=\"_blank\" rel=\"noopener\">ExecutorService</a> (Java)</li>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/hh873175.aspx\" target=\"_blank\" rel=\"noopener\">Task-based Asynchronous Pattern</a> (.NET)</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/04_async-method-invocation\" target=\"_blank\" rel=\"noopener\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/04_async-method-invocation</a></p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>异步方法调用是在等待任务结果时调用线程未被阻塞的模式。<br>该模式提供多个独立任务的并行处理，并通过回调检索结果，或等待一切完成。 </p>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用异步方法调用模式时</p>\n<ul>\n<li>您有多个可以并行运行的独立任务</li>\n<li>您需要改善一组连续任务的性能</li>\n<li>您的处理能力或长时间运行的任务数量有限，主任务不应该等待所有的任务完成</li>\n</ul>\n<h2 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h2><ul>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/FutureTask.html\" target=\"_blank\" rel=\"noopener\">FutureTask</a>, <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" target=\"_blank\" rel=\"noopener\">CompletableFuture</a> and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html\" target=\"_blank\" rel=\"noopener\">ExecutorService</a> (Java)</li>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/hh873175.aspx\" target=\"_blank\" rel=\"noopener\">Task-based Asynchronous Pattern</a> (.NET)</li>\n</ul>\n"},{"title":"Hexo集成gitment异常处理","date":"2017-11-08T16:27:57.000Z","_content":"#### 问题\n集成`Gitment`按照官方的文档配置报错`Cannot read property 'firstChild' of null`\n#### 查找\n-  通过页面的异常进入js发现是获取某个对象为空`gitment-container`\n-  讲这个关键词在插件里面搜索发现,这个一个装载留言内容的div,于是在异常的页面查看源码搜索,没有找到这个div.\n-  通过查看源码发现`themes\\next\\layout\\_third-party\\comments`是一个留言的插件集合,包含多种留言插件`js`文件\n```javascript\n{% include 'duoshuo.swig' %}\n{% include 'disqus.swig' %}\n{% include 'hypercomments.swig' %}\n{% include 'youyan.swig' %}\n{% include 'livere.swig' %}\n{% include 'changyan.swig' %}\n{% include 'gitment.swig' %}\n{% include 'valine.swig' %}\n```\n`themes\\next\\layout\\_partials`是留言插件`html`文件`comments.swig`\n有一段代码引起我的注意\n```javascript\n{% elseif theme.changyan.appid and theme.changyan.appkey %}\n    <div class=\"comments\" id=\"comments\">\n      <div id=\"SOHUCS\"></div>\n    </div>\n\n  {% elseif theme.gitment.enable %}\n    <div class=\"comments\" id=\"comments\">\n      {% if theme.gitment.lazy %}\n        <div onclick=\"showGitment()\" id=\"gitment-display-button\">{{ __('gitmentbutton') }}</div>\n        <div id=\"gitment-container\" style=\"display:none\"></div>\n      {% else %}\n        <div id=\"gitment-container\"></div>\n      {% endif %}\n    </div>\n```\n对照`themes\\next\\_config.yml`文件\n```yml\nchangyan:\n  enable: false\n  appid: XX\n  appkey: XX\ngitment:\n  enable: true\n  # RECOMMEND, A mint on Gitment, to support count, language and proxy_gateway\n  mint: false \n```\n要命的是之前是用畅言测试过,但是这里不是根据`changyan.enable`去判断,于是导致`ifelse`进入了畅言这个留言插件的div判断.\n#### 解决\n>清空`themes\\next\\_config.yml`文件中的`changyan.appid`和`changyan.appkey`,\n>`themes\\next\\layout\\_partials\\comments.swig`文中,`theme.changyan.appid and theme.changyan.appkey`修改为`theme.changyan.enable`\n\n#### 总结\n- 规范开发\n- 善于关键词查找分析解决问题\n","source":"_posts/Hexo集成gitment异常处理.md","raw":"---\ntitle: Hexo集成gitment异常处理\ntags:\n  - 插件\n  - gitment\n  - Hexo\n  - 规范\ncategories: Hexo\npermalink: hexo-integrated-gitment-exception-handling\ndate: 2017-11-09 00:27:57\n---\n#### 问题\n集成`Gitment`按照官方的文档配置报错`Cannot read property 'firstChild' of null`\n#### 查找\n-  通过页面的异常进入js发现是获取某个对象为空`gitment-container`\n-  讲这个关键词在插件里面搜索发现,这个一个装载留言内容的div,于是在异常的页面查看源码搜索,没有找到这个div.\n-  通过查看源码发现`themes\\next\\layout\\_third-party\\comments`是一个留言的插件集合,包含多种留言插件`js`文件\n```javascript\n{% include 'duoshuo.swig' %}\n{% include 'disqus.swig' %}\n{% include 'hypercomments.swig' %}\n{% include 'youyan.swig' %}\n{% include 'livere.swig' %}\n{% include 'changyan.swig' %}\n{% include 'gitment.swig' %}\n{% include 'valine.swig' %}\n```\n`themes\\next\\layout\\_partials`是留言插件`html`文件`comments.swig`\n有一段代码引起我的注意\n```javascript\n{% elseif theme.changyan.appid and theme.changyan.appkey %}\n    <div class=\"comments\" id=\"comments\">\n      <div id=\"SOHUCS\"></div>\n    </div>\n\n  {% elseif theme.gitment.enable %}\n    <div class=\"comments\" id=\"comments\">\n      {% if theme.gitment.lazy %}\n        <div onclick=\"showGitment()\" id=\"gitment-display-button\">{{ __('gitmentbutton') }}</div>\n        <div id=\"gitment-container\" style=\"display:none\"></div>\n      {% else %}\n        <div id=\"gitment-container\"></div>\n      {% endif %}\n    </div>\n```\n对照`themes\\next\\_config.yml`文件\n```yml\nchangyan:\n  enable: false\n  appid: XX\n  appkey: XX\ngitment:\n  enable: true\n  # RECOMMEND, A mint on Gitment, to support count, language and proxy_gateway\n  mint: false \n```\n要命的是之前是用畅言测试过,但是这里不是根据`changyan.enable`去判断,于是导致`ifelse`进入了畅言这个留言插件的div判断.\n#### 解决\n>清空`themes\\next\\_config.yml`文件中的`changyan.appid`和`changyan.appkey`,\n>`themes\\next\\layout\\_partials\\comments.swig`文中,`theme.changyan.appid and theme.changyan.appkey`修改为`theme.changyan.enable`\n\n#### 总结\n- 规范开发\n- 善于关键词查找分析解决问题\n","slug":"hexo-integrated-gitment-exception-handling","published":1,"updated":"2018-03-25T13:41:07.196Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjf6wl6p9000q2gtpsw4m2kt1","content":"<h4 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h4><p>集成<code>Gitment</code>按照官方的文档配置报错<code>Cannot read property &#39;firstChild&#39; of null</code></p>\n<h4 id=\"查找\"><a href=\"#查找\" class=\"headerlink\" title=\"查找\"></a>查找</h4><ul>\n<li>通过页面的异常进入js发现是获取某个对象为空<code>gitment-container</code></li>\n<li>讲这个关键词在插件里面搜索发现,这个一个装载留言内容的div,于是在异常的页面查看源码搜索,没有找到这个div.</li>\n<li>通过查看源码发现<code>themes\\next\\layout\\_third-party\\comments</code>是一个留言的插件集合,包含多种留言插件<code>js</code>文件<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% include <span class=\"string\">'duoshuo.swig'</span> %&#125;</span><br><span class=\"line\">&#123;% include <span class=\"string\">'disqus.swig'</span> %&#125;</span><br><span class=\"line\">&#123;% include <span class=\"string\">'hypercomments.swig'</span> %&#125;</span><br><span class=\"line\">&#123;% include <span class=\"string\">'youyan.swig'</span> %&#125;</span><br><span class=\"line\">&#123;% include <span class=\"string\">'livere.swig'</span> %&#125;</span><br><span class=\"line\">&#123;% include <span class=\"string\">'changyan.swig'</span> %&#125;</span><br><span class=\"line\">&#123;% include <span class=\"string\">'gitment.swig'</span> %&#125;</span><br><span class=\"line\">&#123;% include <span class=\"string\">'valine.swig'</span> %&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><code>themes\\next\\layout\\_partials</code>是留言插件<code>html</code>文件<code>comments.swig</code><br>有一段代码引起我的注意<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% elseif theme.changyan.appid and theme.changyan.appkey %&#125;</span><br><span class=\"line\">    &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"comments\"</span> id=<span class=\"string\">\"comments\"</span>&gt;</span><br><span class=\"line\">      &lt;div id=<span class=\"string\">\"SOHUCS\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">  &#123;% elseif theme.gitment.enable %&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;div class=\"comments\" id=\"comments\"&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &#123;% if theme.gitment.lazy %&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;div onclick=\"showGitment()\" id=\"gitment-display-button\"&gt;&#123;&#123; __('gitmentbutton') &#125;&#125;&lt;/</span>div&gt;</span><br><span class=\"line\">        &lt;div id=<span class=\"string\">\"gitment-container\"</span> style=<span class=\"string\">\"display:none\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">      &#123;% <span class=\"keyword\">else</span> %&#125;</span><br><span class=\"line\">        &lt;div id=<span class=\"string\">\"gitment-container\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">      &#123;% endif %&#125;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>对照<code>themes\\next\\_config.yml</code>文件<br><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">changyan:</span></span><br><span class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">  appid:</span> <span class=\"string\">XX</span></span><br><span class=\"line\"><span class=\"attr\">  appkey:</span> <span class=\"string\">XX</span></span><br><span class=\"line\"><span class=\"attr\">gitment:</span></span><br><span class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"comment\"># RECOMMEND, A mint on Gitment, to support count, language and proxy_gateway</span></span><br><span class=\"line\"><span class=\"attr\">  mint:</span> <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure></p>\n<p>要命的是之前是用畅言测试过,但是这里不是根据<code>changyan.enable</code>去判断,于是导致<code>ifelse</code>进入了畅言这个留言插件的div判断.</p>\n<h4 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h4><blockquote>\n<p>清空<code>themes\\next\\_config.yml</code>文件中的<code>changyan.appid</code>和<code>changyan.appkey</code>,<br><code>themes\\next\\layout\\_partials\\comments.swig</code>文中,<code>theme.changyan.appid and theme.changyan.appkey</code>修改为<code>theme.changyan.enable</code></p>\n</blockquote>\n<h4 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h4><ul>\n<li>规范开发</li>\n<li>善于关键词查找分析解决问题</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h4><p>集成<code>Gitment</code>按照官方的文档配置报错<code>Cannot read property &#39;firstChild&#39; of null</code></p>\n<h4 id=\"查找\"><a href=\"#查找\" class=\"headerlink\" title=\"查找\"></a>查找</h4><ul>\n<li>通过页面的异常进入js发现是获取某个对象为空<code>gitment-container</code></li>\n<li>讲这个关键词在插件里面搜索发现,这个一个装载留言内容的div,于是在异常的页面查看源码搜索,没有找到这个div.</li>\n<li>通过查看源码发现<code>themes\\next\\layout\\_third-party\\comments</code>是一个留言的插件集合,包含多种留言插件<code>js</code>文件<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% include <span class=\"string\">'duoshuo.swig'</span> %&#125;</span><br><span class=\"line\">&#123;% include <span class=\"string\">'disqus.swig'</span> %&#125;</span><br><span class=\"line\">&#123;% include <span class=\"string\">'hypercomments.swig'</span> %&#125;</span><br><span class=\"line\">&#123;% include <span class=\"string\">'youyan.swig'</span> %&#125;</span><br><span class=\"line\">&#123;% include <span class=\"string\">'livere.swig'</span> %&#125;</span><br><span class=\"line\">&#123;% include <span class=\"string\">'changyan.swig'</span> %&#125;</span><br><span class=\"line\">&#123;% include <span class=\"string\">'gitment.swig'</span> %&#125;</span><br><span class=\"line\">&#123;% include <span class=\"string\">'valine.swig'</span> %&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><code>themes\\next\\layout\\_partials</code>是留言插件<code>html</code>文件<code>comments.swig</code><br>有一段代码引起我的注意<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% elseif theme.changyan.appid and theme.changyan.appkey %&#125;</span><br><span class=\"line\">    &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"comments\"</span> id=<span class=\"string\">\"comments\"</span>&gt;</span><br><span class=\"line\">      &lt;div id=<span class=\"string\">\"SOHUCS\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\"></span></span><br><span class=\"line\"><span class=\"regexp\">  &#123;% elseif theme.gitment.enable %&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;div class=\"comments\" id=\"comments\"&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &#123;% if theme.gitment.lazy %&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;div onclick=\"showGitment()\" id=\"gitment-display-button\"&gt;&#123;&#123; __('gitmentbutton') &#125;&#125;&lt;/</span>div&gt;</span><br><span class=\"line\">        &lt;div id=<span class=\"string\">\"gitment-container\"</span> style=<span class=\"string\">\"display:none\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">      &#123;% <span class=\"keyword\">else</span> %&#125;</span><br><span class=\"line\">        &lt;div id=<span class=\"string\">\"gitment-container\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">      &#123;% endif %&#125;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>对照<code>themes\\next\\_config.yml</code>文件<br><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">changyan:</span></span><br><span class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">  appid:</span> <span class=\"string\">XX</span></span><br><span class=\"line\"><span class=\"attr\">  appkey:</span> <span class=\"string\">XX</span></span><br><span class=\"line\"><span class=\"attr\">gitment:</span></span><br><span class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"comment\"># RECOMMEND, A mint on Gitment, to support count, language and proxy_gateway</span></span><br><span class=\"line\"><span class=\"attr\">  mint:</span> <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure></p>\n<p>要命的是之前是用畅言测试过,但是这里不是根据<code>changyan.enable</code>去判断,于是导致<code>ifelse</code>进入了畅言这个留言插件的div判断.</p>\n<h4 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h4><blockquote>\n<p>清空<code>themes\\next\\_config.yml</code>文件中的<code>changyan.appid</code>和<code>changyan.appkey</code>,<br><code>themes\\next\\layout\\_partials\\comments.swig</code>文中,<code>theme.changyan.appid and theme.changyan.appkey</code>修改为<code>theme.changyan.enable</code></p>\n</blockquote>\n<h4 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h4><ul>\n<li>规范开发</li>\n<li>善于关键词查找分析解决问题</li>\n</ul>\n"},{"title":"InvalidClassException","date":"2017-10-31T13:53:44.000Z","_content":"### InvalidClassException\n#### 背景\n项目使用的`SpringBoot`架构,使用的是默认的`Redis`存储登陆信息\n#### 过程\n添加了一个有关于`UsUser`的接口,需要把当前登录信息返回给前端。\n#### 结果\n访问时`InvalidClassException`异常\n```java\norg.springframework.data.redis.serializer.SerializationException: Cannot deserialize; nested exception is org.springframework.core.serializer.support.SerializationFailedException: Failed to deserialize payload. Is the byte array a result of corresponding serialization for DefaultDeserializer?; nested exception is java.io.InvalidClassException: com.usc.core.model.UsUser; local class incompatible: stream classdesc serialVersionUID = -4391106051528831723, local class serialVersionUID = -3047559744731102659\n\tat org.springframework.data.redis.serializer.JdkSerializationRedisSerializer.deserialize(JdkSerializationRedisSerializer.java:82)\n```\n#### 思考&总结\n看到这个的第一反应是有人修改了`serialVersionUID`,然后发现这个类并没有这个字段.然后联想到这个信息是从`redis`获取的然后清理了`redis`中的登陆信息,异常不再出现.最后注意到这个\n`org.springframework.data.redis.serializer.JdkSerializationRedisSerializer.deserialize`,已证明联想正确,出现问题到解决5分钟不到.\n#### 相关知识\n`serialVersionUID`适用于`Java`的序列化机制。简单来说，`Java`的序列化机制是通过判断类的`serialVersionUID`来验证版本一致性的。在进行反序列化时，JVM会把传来的字节流中的`serialVersionUID`与本地相应实体类的`serialVersionUID`进行比较，如果相同就认为是一致的，可以进行反序列化，否则就会出现序列化版本不一致的异常，即是`InvalidCastException。`","source":"_posts/InvalidClassException.md","raw":"---\ntitle: InvalidClassException\npermalink: invalidclasexception\ntags:\n  - Java\n  - Spring Boot\n  - Exception\ncategories:\n  - Java相关\ndate: 2017-10-31 21:53:44\n---\n### InvalidClassException\n#### 背景\n项目使用的`SpringBoot`架构,使用的是默认的`Redis`存储登陆信息\n#### 过程\n添加了一个有关于`UsUser`的接口,需要把当前登录信息返回给前端。\n#### 结果\n访问时`InvalidClassException`异常\n```java\norg.springframework.data.redis.serializer.SerializationException: Cannot deserialize; nested exception is org.springframework.core.serializer.support.SerializationFailedException: Failed to deserialize payload. Is the byte array a result of corresponding serialization for DefaultDeserializer?; nested exception is java.io.InvalidClassException: com.usc.core.model.UsUser; local class incompatible: stream classdesc serialVersionUID = -4391106051528831723, local class serialVersionUID = -3047559744731102659\n\tat org.springframework.data.redis.serializer.JdkSerializationRedisSerializer.deserialize(JdkSerializationRedisSerializer.java:82)\n```\n#### 思考&总结\n看到这个的第一反应是有人修改了`serialVersionUID`,然后发现这个类并没有这个字段.然后联想到这个信息是从`redis`获取的然后清理了`redis`中的登陆信息,异常不再出现.最后注意到这个\n`org.springframework.data.redis.serializer.JdkSerializationRedisSerializer.deserialize`,已证明联想正确,出现问题到解决5分钟不到.\n#### 相关知识\n`serialVersionUID`适用于`Java`的序列化机制。简单来说，`Java`的序列化机制是通过判断类的`serialVersionUID`来验证版本一致性的。在进行反序列化时，JVM会把传来的字节流中的`serialVersionUID`与本地相应实体类的`serialVersionUID`进行比较，如果相同就认为是一致的，可以进行反序列化，否则就会出现序列化版本不一致的异常，即是`InvalidCastException。`","slug":"invalidclasexception","published":1,"updated":"2018-03-25T13:41:07.463Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjf6wl6pb000t2gtp2svpi2x8","content":"<h3 id=\"InvalidClassException\"><a href=\"#InvalidClassException\" class=\"headerlink\" title=\"InvalidClassException\"></a>InvalidClassException</h3><h4 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h4><p>项目使用的<code>SpringBoot</code>架构,使用的是默认的<code>Redis</code>存储登陆信息</p>\n<h4 id=\"过程\"><a href=\"#过程\" class=\"headerlink\" title=\"过程\"></a>过程</h4><p>添加了一个有关于<code>UsUser</code>的接口,需要把当前登录信息返回给前端。</p>\n<h4 id=\"结果\"><a href=\"#结果\" class=\"headerlink\" title=\"结果\"></a>结果</h4><p>访问时<code>InvalidClassException</code>异常<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">org.springframework.data.redis.serializer.SerializationException: Cannot deserialize; nested exception is org.springframework.core.serializer.support.SerializationFailedException: Failed to deserialize payload. Is the byte array a result of corresponding serialization for DefaultDeserializer?; nested exception is java.io.InvalidClassException: com.usc.core.model.UsUser; local class incompatible: stream classdesc serialVersionUID = -4391106051528831723, local class serialVersionUID = -3047559744731102659</span><br><span class=\"line\">\tat org.springframework.data.redis.serializer.JdkSerializationRedisSerializer.deserialize(JdkSerializationRedisSerializer.java:<span class=\"number\">82</span>)</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"思考-amp-总结\"><a href=\"#思考-amp-总结\" class=\"headerlink\" title=\"思考&amp;总结\"></a>思考&amp;总结</h4><p>看到这个的第一反应是有人修改了<code>serialVersionUID</code>,然后发现这个类并没有这个字段.然后联想到这个信息是从<code>redis</code>获取的然后清理了<code>redis</code>中的登陆信息,异常不再出现.最后注意到这个<br><code>org.springframework.data.redis.serializer.JdkSerializationRedisSerializer.deserialize</code>,已证明联想正确,出现问题到解决5分钟不到.</p>\n<h4 id=\"相关知识\"><a href=\"#相关知识\" class=\"headerlink\" title=\"相关知识\"></a>相关知识</h4><p><code>serialVersionUID</code>适用于<code>Java</code>的序列化机制。简单来说，<code>Java</code>的序列化机制是通过判断类的<code>serialVersionUID</code>来验证版本一致性的。在进行反序列化时，JVM会把传来的字节流中的<code>serialVersionUID</code>与本地相应实体类的<code>serialVersionUID</code>进行比较，如果相同就认为是一致的，可以进行反序列化，否则就会出现序列化版本不一致的异常，即是<code>InvalidCastException。</code></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"InvalidClassException\"><a href=\"#InvalidClassException\" class=\"headerlink\" title=\"InvalidClassException\"></a>InvalidClassException</h3><h4 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h4><p>项目使用的<code>SpringBoot</code>架构,使用的是默认的<code>Redis</code>存储登陆信息</p>\n<h4 id=\"过程\"><a href=\"#过程\" class=\"headerlink\" title=\"过程\"></a>过程</h4><p>添加了一个有关于<code>UsUser</code>的接口,需要把当前登录信息返回给前端。</p>\n<h4 id=\"结果\"><a href=\"#结果\" class=\"headerlink\" title=\"结果\"></a>结果</h4><p>访问时<code>InvalidClassException</code>异常<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">org.springframework.data.redis.serializer.SerializationException: Cannot deserialize; nested exception is org.springframework.core.serializer.support.SerializationFailedException: Failed to deserialize payload. Is the byte array a result of corresponding serialization for DefaultDeserializer?; nested exception is java.io.InvalidClassException: com.usc.core.model.UsUser; local class incompatible: stream classdesc serialVersionUID = -4391106051528831723, local class serialVersionUID = -3047559744731102659</span><br><span class=\"line\">\tat org.springframework.data.redis.serializer.JdkSerializationRedisSerializer.deserialize(JdkSerializationRedisSerializer.java:<span class=\"number\">82</span>)</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"思考-amp-总结\"><a href=\"#思考-amp-总结\" class=\"headerlink\" title=\"思考&amp;总结\"></a>思考&amp;总结</h4><p>看到这个的第一反应是有人修改了<code>serialVersionUID</code>,然后发现这个类并没有这个字段.然后联想到这个信息是从<code>redis</code>获取的然后清理了<code>redis</code>中的登陆信息,异常不再出现.最后注意到这个<br><code>org.springframework.data.redis.serializer.JdkSerializationRedisSerializer.deserialize</code>,已证明联想正确,出现问题到解决5分钟不到.</p>\n<h4 id=\"相关知识\"><a href=\"#相关知识\" class=\"headerlink\" title=\"相关知识\"></a>相关知识</h4><p><code>serialVersionUID</code>适用于<code>Java</code>的序列化机制。简单来说，<code>Java</code>的序列化机制是通过判断类的<code>serialVersionUID</code>来验证版本一致性的。在进行反序列化时，JVM会把传来的字节流中的<code>serialVersionUID</code>与本地相应实体类的<code>serialVersionUID</code>进行比较，如果相同就认为是一致的，可以进行反序列化，否则就会出现序列化版本不一致的异常，即是<code>InvalidCastException。</code></p>\n"},{"title":"中文文案排版指北","date":"2018-03-25T14:20:20.000Z","_content":"\n\n\n# 中文文案排版指北\n\n统一中文文案、排版的相关用法，降低团队成员之间的沟通成本，增强网站气质。\n\nOther languages:\n\n- [English](README.en.md)\n- [Chinese Traditional](https://github.com/sparanoid/chinese-copywriting-guidelines)\n- [Chinese Simplified](README.md)\n\n-----\n\n## 目录\n\n<!-- vim-markdown-toc GFM -->\n* [空格](#空格)\n    * [中英文之间需要增加空格](#中英文之间需要增加空格)\n    * [中文与数字之间需要增加空格](#中文与数字之间需要增加空格)\n    * [数字与单位之间需要增加空格](#数字与单位之间需要增加空格)\n    * [全角标点与其他字符之间不加空格](#全角标点与其他字符之间不加空格)\n    * [`-ms-text-autospace` to the rescue?](#-ms-text-autospace-to-the-rescue)\n* [标点符号](#标点符号)\n    * [不重复使用标点符号](#不重复使用标点符号)\n* [全角和半角](#全角和半角)\n    * [使用全角中文标点](#使用全角中文标点)\n    * [数字使用半角字符](#数字使用半角字符)\n    * [遇到完整的英文整句、特殊名词，其內容使用半角标点](#遇到完整的英文整句特殊名词其內容使用半角标点)\n* [名词](#名词)\n    * [专有名词使用正确的大小写](#专有名词使用正确的大小写)\n    * [不要使用不地道的缩写](#不要使用不地道的缩写)\n* [争议](#争议)\n    * [链接之间增加空格](#链接之间增加空格)\n    * [简体中文使用直角引号](#简体中文使用直角引号)\n* [工具](#工具)\n* [谁在这样做？](#谁在这样做)\n* [参考文献](#参考文献)\n\n<!-- vim-markdown-toc -->\n\n## 空格\n\n「有研究显示，打字的时候不喜欢在中文和英文之间加空格的人，感情路都走得很辛苦，有七成的比例会在 34 岁的时候跟自己不爱的人结婚，而其余三成的人最后只能把遗产留给自己的猫。毕竟爱情跟书写都需要适时地留白。\n\n与大家共勉之。」——[vinta/paranoid-auto-spacing](https://github.com/vinta/pangu.js)\n\n### 中英文之间需要增加空格\n\n正确：\n\n> 在 LeanCloud 上，数据存储是围绕 `AVObject` 进行的。\n\n错误：\n\n> 在LeanCloud上，数据存储是围绕`AVObject`进行的。\n\n> 在 LeanCloud上，数据存储是围绕`AVObject` 进行的。\n\n完整的正确用法：\n\n> 在 LeanCloud 上，数据存储是围绕 `AVObject` 进行的。每个 `AVObject` 都包含了与 JSON 兼容的 key-value 对应的数据。数据是 schema-free 的，你不需要在每个 `AVObject` 上提前指定存在哪些键，只要直接设定对应的 key-value 即可。\n\n例外：「豆瓣FM」等产品名词，按照官方所定义的格式书写。\n\n### 中文与数字之间需要增加空格\n\n正确：\n\n> 今天出去买菜花了 5000 元。\n\n错误：\n\n> 今天出去买菜花了 5000元。\n\n> 今天出去买菜花了5000元。\n\n### 数字与单位之间需要增加空格\n\n正确：\n\n> 我家的光纤入户宽带有 10 Gbps，SSD 一共有 20 TB。\n\n错误：\n\n> 我家的光纤入户宽带有 10Gbps，SSD 一共有 10TB。\n\n例外：度／百分比与数字之间不需要增加空格：\n\n正确：\n\n> 今天是 233° 的高温。\n\n> 新 MacBook Pro 有 15% 的 CPU 性能提升。\n\n错误：\n\n> 今天是 233 ° 的高温。\n\n> 新 MacBook Pro 有 15 % 的 CPU 性能提升。\n\n### 全角标点与其他字符之间不加空格\n\n正确：\n\n> 刚刚买了一部 iPhone，好开心！\n\n错误：\n\n> 刚刚买了一部 iPhone ，好开心！\n\n### `-ms-text-autospace` to the rescue?\n\nMicrosoft 有个 [`-ms-text-autospace`](http://msdn.microsoft.com/en-us/library/ie/ms531164(v=vs.85).aspx) 的 CSS 属性可以实现自动为中英文之间增加空白。不过目前并未普及，另外在其他应用场景，例如 OS X、iOS 的用户界面目前并不存在这个特性，所以请继续保持随手加空格的习惯。\n\n## 标点符号\n\n### 不重复使用标点符号\n\n正确：\n\n> 德国队竟然战胜了巴西队！\n\n> 她竟然对你说「喵」？！\n\n错误：\n\n> 德国队竟然战胜了巴西队！！\n\n> 德国队竟然战胜了巴西队！！！！！！！！\n\n> 她竟然对你说「喵」？？！！\n\n> 她竟然对你说「喵」？！？！？？！！\n\n## 全角和半角\n\n不明白什么是全角（全形）与半角（半形）符号？请查看维基百科词条『[全角和半角](http://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2)』。\n\n### 使用全角中文标点\n\n正确：\n\n> 嗨！你知道嘛？今天前台的小妹跟我说「喵」了哎！\n\n> 核磁共振成像（NMRI）是什么原理都不知道？JFGI！\n\n错误：\n\n> 嗨! 你知道嘛? 今天前台的小妹跟我说 \"喵\" 了哎!\n\n> 嗨!你知道嘛?今天前台的小妹跟我说\"喵\"了哎!\n\n> 核磁共振成像 (NMRI) 是什么原理都不知道? JFGI!\n\n> 核磁共振成像(NMRI)是什么原理都不知道?JFGI!\n\n### 数字使用半角字符\n\n正确：\n\n> 这件蛋糕只卖 1000 元。\n\n错误：\n\n> 这件蛋糕只卖 １０００ 元。\n\n例外：在设计稿、宣传海报中如出现极少量数字的情形时，为方便文字对齐，是可以使用全角数字的。\n\n### 遇到完整的英文整句、特殊名词，其內容使用半角标点\n\n正确：\n\n> 乔布斯那句话是怎么说的？「Stay hungry, stay foolish.」\n\n> 推荐你阅读《Hackers & Painters: Big Ideas from the Computer Age》，非常的有趣。\n\n错误：\n\n> 乔布斯那句话是怎么说的？「Stay hungry，stay foolish。」\n\n> 推荐你阅读《Hackers＆Painters：Big Ideas from the Computer Age》，非常的有趣。\n\n## 名词\n\n### 专有名词使用正确的大小写\n\n大小写相关用法原属于英文书写范畴，不属于本 wiki 讨论內容，在这里只对部分易错用法进行简述。\n\n正确：\n\n> 使用 GitHub 登录\n\n> 我们的客户有 GitHub、Foursquare、Microsoft Corporation、Google、Facebook, Inc.。\n\n错误：\n\n> 使用 github 登录\n\n> 使用 GITHUB 登录\n\n> 使用 Github 登录\n\n> 使用 gitHub 登录\n\n> 使用 gｲんĤЦ8 登录\n\n> 我们的客户有 github、foursquare、microsoft corporation、google、facebook, inc.。\n\n> 我们的客户有 GITHUB、FOURSQUARE、MICROSOFT CORPORATION、GOOGLE、FACEBOOK, INC.。\n\n> 我们的客户有 Github、FourSquare、MicroSoft Corporation、Google、FaceBook, Inc.。\n\n> 我们的客户有 gitHub、fourSquare、microSoft Corporation、google、faceBook, Inc.。\n\n> 我们的客户有 gｲんĤЦ8、ｷouЯƧquﾑгє、๓เςг๏ร๏Ŧt ς๏гק๏гคtเ๏ภn、900913、ƒ4ᄃëв๏๏к, IПᄃ.。\n\n注意：当网页中需要配合整体视觉风格而出现全部大写／小写的情形，HTML 中请使用标准的大小写规范进行书写；并通过 `text-transform: uppercase;`／`text-transform: lowercase;` 对表现形式进行定义。\n\n### 不要使用不地道的缩写\n\n正确：\n\n> 我们需要一位熟悉 JavaScript、HTML5，至少理解一种框架（如 Backbone.js、AngularJS、React 等）的前端开发者。\n\n错误：\n\n> 我们需要一位熟悉 Js、h5，至少理解一种框架（如 backbone、angular、RJS 等）的 FED。\n\n## 争议\n\n以下用法略带有个人色彩，即：无论是否遵循下述规则，从语法的角度来讲都是**正确**的。\n\n### 链接之间增加空格\n\n用法：\n\n> 请 [提交一个 issue](#) 并分配给相关同事。\n\n> 访问我们网站的最新动态，请 [点击这里](#) 进行订阅！\n\n对比用法：\n\n> 请[提交一个 issue](#) 并分配给相关同事。\n\n> 访问我们网站的最新动态，请[点击这里](#)进行订阅！\n\n### 简体中文使用直角引号\n\n用法：\n\n> 「老师，『有条不紊』的『紊』是什么意思？」\n\n对比用法：\n\n> “老师，‘有条不紊’的‘紊’是什么意思？”\n\n## 工具\n\n| 仓库                                                                                                                            | 语言            |\n|---------------------------------------------------------------------------------------------------------------------------------|-----------------|\n| [vinta/paranoid-auto-spacing](https://github.com/vinta/paranoid-auto-spacing)                                                   | JavaScript      |\n| [huei90/pangu.node](https://github.com/huei90/pangu.node)                                                                       | Node.js         |\n| [huacnlee/auto-correct](https://github.com/huacnlee/auto-correct)                                                               | Ruby            |\n| [sparanoid/space-lover](https://github.com/sparanoid/space-lover)                                                               | PHP (WordPress) |\n| [nauxliu/auto-correct](https://github.com/NauxLiu/auto-correct)                                                                 | PHP             |\n| [ricoa/copywriting-correct](https://github.com/ricoa/copywriting-correct)                                                       | PHP             |\n| [hotoo/pangu.vim](https://github.com/hotoo/pangu.vim)                                                                           | Vim             |\n| [sparanoid/grunt-auto-spacing](https://github.com/sparanoid/grunt-auto-spacing)                                                 | Node.js (Grunt) |\n| [hjiang/scripts/add-space-between-latin-and-cjk](https://github.com/hjiang/scripts/blob/master/add-space-between-latin-and-cjk) | Python          |\n\n## 谁在这样做？\n\n网站 | 文案 | UGC\n--- | --- | ---\n[Apple 中国](http://www.apple.com/cn/) | Yes | N/A\n[Apple 香港](http://www.apple.com/hk/) | Yes | N/A\n[Apple 台湾](http://www.apple.com/tw/) | Yes | N/A\n[Microsoft 中国](http://www.microsoft.com/zh-cn/) | Yes | N/A\n[Microsoft 香港](http://www.microsoft.com/zh-hk/) | Yes | N/A\n[Microsoft 台湾](http://www.microsoft.com/zh-tw/) | Yes | N/A\n[LeanCloud](https://leancloud.cn/) | Yes | N/A\n[知乎](https://www.zhihu.com/) | Yes | 部分用户达成\n[V2EX](https://www.v2ex.com/) | Yes | Yes\n[SegmentFault](https://segmentfault.com/) | Yes | 部分用户达成\n[Apple4us](http://apple4us.com/) | Yes | N/A\n[豌豆荚](https://www.wandoujia.com/) | Yes | N/A\n[Ruby China](https://ruby-china.org/) | Yes | 标题达成\n[PHPHub](https://phphub.org/) | Yes | 标题达成\n[少数派](http://sspai.com/) | Yes | N/A\n\n## 参考文献\n\n- [Guidelines for Using Capital Letters](http://grammar.about.com/od/punctuationandmechanics/a/Guidelines-For-Using-Capital-Letters.htm)\n- [Letter case - Wikipedia](http://en.wikipedia.org/wiki/Letter_case)\n- [Punctuation - Oxford Dictionaries](http://www.oxforddictionaries.com/words/punctuation)\n- [Punctuation - The Purdue OWL](https://owl.english.purdue.edu/owl/section/1/6/)\n- [How to Use English Punctuation Corrently - wikiHow](http://www.wikihow.com/Use-English-Punctuation-Correctly)\n- [格式 - openSUSE](https://zh.opensuse.org/index.php?title=Help:%E6%A0%BC%E5%BC%8F)\n- [全角和半角 - 维基百科](http://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2)\n- [引号 - 维基百科](http://zh.wikipedia.org/wiki/%E5%BC%95%E8%99%9F)\n- [疑问惊叹号 - 维基百科](http://zh.wikipedia.org/wiki/%E7%96%91%E5%95%8F%E9%A9%9A%E5%98%86%E8%99%9F)\n\n\n### [Markdown 语法说明 (简体中文版)](https://www.appinn.com/markdown/)\n\n### 源项目地址： https://github.com/sparanoid/chinese-copywriting-guidelines\n","source":"_posts/180316_中文文案排版指南.md","raw":"---\ntitle: 中文文案排版指北\ndate: 2018-03-25 22:20:20\npermalink: chinese-copywriting-guide\ncategories: 其他\ntags:\n - 转载\n - 排版\n---\n\n\n\n# 中文文案排版指北\n\n统一中文文案、排版的相关用法，降低团队成员之间的沟通成本，增强网站气质。\n\nOther languages:\n\n- [English](README.en.md)\n- [Chinese Traditional](https://github.com/sparanoid/chinese-copywriting-guidelines)\n- [Chinese Simplified](README.md)\n\n-----\n\n## 目录\n\n<!-- vim-markdown-toc GFM -->\n* [空格](#空格)\n    * [中英文之间需要增加空格](#中英文之间需要增加空格)\n    * [中文与数字之间需要增加空格](#中文与数字之间需要增加空格)\n    * [数字与单位之间需要增加空格](#数字与单位之间需要增加空格)\n    * [全角标点与其他字符之间不加空格](#全角标点与其他字符之间不加空格)\n    * [`-ms-text-autospace` to the rescue?](#-ms-text-autospace-to-the-rescue)\n* [标点符号](#标点符号)\n    * [不重复使用标点符号](#不重复使用标点符号)\n* [全角和半角](#全角和半角)\n    * [使用全角中文标点](#使用全角中文标点)\n    * [数字使用半角字符](#数字使用半角字符)\n    * [遇到完整的英文整句、特殊名词，其內容使用半角标点](#遇到完整的英文整句特殊名词其內容使用半角标点)\n* [名词](#名词)\n    * [专有名词使用正确的大小写](#专有名词使用正确的大小写)\n    * [不要使用不地道的缩写](#不要使用不地道的缩写)\n* [争议](#争议)\n    * [链接之间增加空格](#链接之间增加空格)\n    * [简体中文使用直角引号](#简体中文使用直角引号)\n* [工具](#工具)\n* [谁在这样做？](#谁在这样做)\n* [参考文献](#参考文献)\n\n<!-- vim-markdown-toc -->\n\n## 空格\n\n「有研究显示，打字的时候不喜欢在中文和英文之间加空格的人，感情路都走得很辛苦，有七成的比例会在 34 岁的时候跟自己不爱的人结婚，而其余三成的人最后只能把遗产留给自己的猫。毕竟爱情跟书写都需要适时地留白。\n\n与大家共勉之。」——[vinta/paranoid-auto-spacing](https://github.com/vinta/pangu.js)\n\n### 中英文之间需要增加空格\n\n正确：\n\n> 在 LeanCloud 上，数据存储是围绕 `AVObject` 进行的。\n\n错误：\n\n> 在LeanCloud上，数据存储是围绕`AVObject`进行的。\n\n> 在 LeanCloud上，数据存储是围绕`AVObject` 进行的。\n\n完整的正确用法：\n\n> 在 LeanCloud 上，数据存储是围绕 `AVObject` 进行的。每个 `AVObject` 都包含了与 JSON 兼容的 key-value 对应的数据。数据是 schema-free 的，你不需要在每个 `AVObject` 上提前指定存在哪些键，只要直接设定对应的 key-value 即可。\n\n例外：「豆瓣FM」等产品名词，按照官方所定义的格式书写。\n\n### 中文与数字之间需要增加空格\n\n正确：\n\n> 今天出去买菜花了 5000 元。\n\n错误：\n\n> 今天出去买菜花了 5000元。\n\n> 今天出去买菜花了5000元。\n\n### 数字与单位之间需要增加空格\n\n正确：\n\n> 我家的光纤入户宽带有 10 Gbps，SSD 一共有 20 TB。\n\n错误：\n\n> 我家的光纤入户宽带有 10Gbps，SSD 一共有 10TB。\n\n例外：度／百分比与数字之间不需要增加空格：\n\n正确：\n\n> 今天是 233° 的高温。\n\n> 新 MacBook Pro 有 15% 的 CPU 性能提升。\n\n错误：\n\n> 今天是 233 ° 的高温。\n\n> 新 MacBook Pro 有 15 % 的 CPU 性能提升。\n\n### 全角标点与其他字符之间不加空格\n\n正确：\n\n> 刚刚买了一部 iPhone，好开心！\n\n错误：\n\n> 刚刚买了一部 iPhone ，好开心！\n\n### `-ms-text-autospace` to the rescue?\n\nMicrosoft 有个 [`-ms-text-autospace`](http://msdn.microsoft.com/en-us/library/ie/ms531164(v=vs.85).aspx) 的 CSS 属性可以实现自动为中英文之间增加空白。不过目前并未普及，另外在其他应用场景，例如 OS X、iOS 的用户界面目前并不存在这个特性，所以请继续保持随手加空格的习惯。\n\n## 标点符号\n\n### 不重复使用标点符号\n\n正确：\n\n> 德国队竟然战胜了巴西队！\n\n> 她竟然对你说「喵」？！\n\n错误：\n\n> 德国队竟然战胜了巴西队！！\n\n> 德国队竟然战胜了巴西队！！！！！！！！\n\n> 她竟然对你说「喵」？？！！\n\n> 她竟然对你说「喵」？！？！？？！！\n\n## 全角和半角\n\n不明白什么是全角（全形）与半角（半形）符号？请查看维基百科词条『[全角和半角](http://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2)』。\n\n### 使用全角中文标点\n\n正确：\n\n> 嗨！你知道嘛？今天前台的小妹跟我说「喵」了哎！\n\n> 核磁共振成像（NMRI）是什么原理都不知道？JFGI！\n\n错误：\n\n> 嗨! 你知道嘛? 今天前台的小妹跟我说 \"喵\" 了哎!\n\n> 嗨!你知道嘛?今天前台的小妹跟我说\"喵\"了哎!\n\n> 核磁共振成像 (NMRI) 是什么原理都不知道? JFGI!\n\n> 核磁共振成像(NMRI)是什么原理都不知道?JFGI!\n\n### 数字使用半角字符\n\n正确：\n\n> 这件蛋糕只卖 1000 元。\n\n错误：\n\n> 这件蛋糕只卖 １０００ 元。\n\n例外：在设计稿、宣传海报中如出现极少量数字的情形时，为方便文字对齐，是可以使用全角数字的。\n\n### 遇到完整的英文整句、特殊名词，其內容使用半角标点\n\n正确：\n\n> 乔布斯那句话是怎么说的？「Stay hungry, stay foolish.」\n\n> 推荐你阅读《Hackers & Painters: Big Ideas from the Computer Age》，非常的有趣。\n\n错误：\n\n> 乔布斯那句话是怎么说的？「Stay hungry，stay foolish。」\n\n> 推荐你阅读《Hackers＆Painters：Big Ideas from the Computer Age》，非常的有趣。\n\n## 名词\n\n### 专有名词使用正确的大小写\n\n大小写相关用法原属于英文书写范畴，不属于本 wiki 讨论內容，在这里只对部分易错用法进行简述。\n\n正确：\n\n> 使用 GitHub 登录\n\n> 我们的客户有 GitHub、Foursquare、Microsoft Corporation、Google、Facebook, Inc.。\n\n错误：\n\n> 使用 github 登录\n\n> 使用 GITHUB 登录\n\n> 使用 Github 登录\n\n> 使用 gitHub 登录\n\n> 使用 gｲんĤЦ8 登录\n\n> 我们的客户有 github、foursquare、microsoft corporation、google、facebook, inc.。\n\n> 我们的客户有 GITHUB、FOURSQUARE、MICROSOFT CORPORATION、GOOGLE、FACEBOOK, INC.。\n\n> 我们的客户有 Github、FourSquare、MicroSoft Corporation、Google、FaceBook, Inc.。\n\n> 我们的客户有 gitHub、fourSquare、microSoft Corporation、google、faceBook, Inc.。\n\n> 我们的客户有 gｲんĤЦ8、ｷouЯƧquﾑгє、๓เςг๏ร๏Ŧt ς๏гק๏гคtเ๏ภn、900913、ƒ4ᄃëв๏๏к, IПᄃ.。\n\n注意：当网页中需要配合整体视觉风格而出现全部大写／小写的情形，HTML 中请使用标准的大小写规范进行书写；并通过 `text-transform: uppercase;`／`text-transform: lowercase;` 对表现形式进行定义。\n\n### 不要使用不地道的缩写\n\n正确：\n\n> 我们需要一位熟悉 JavaScript、HTML5，至少理解一种框架（如 Backbone.js、AngularJS、React 等）的前端开发者。\n\n错误：\n\n> 我们需要一位熟悉 Js、h5，至少理解一种框架（如 backbone、angular、RJS 等）的 FED。\n\n## 争议\n\n以下用法略带有个人色彩，即：无论是否遵循下述规则，从语法的角度来讲都是**正确**的。\n\n### 链接之间增加空格\n\n用法：\n\n> 请 [提交一个 issue](#) 并分配给相关同事。\n\n> 访问我们网站的最新动态，请 [点击这里](#) 进行订阅！\n\n对比用法：\n\n> 请[提交一个 issue](#) 并分配给相关同事。\n\n> 访问我们网站的最新动态，请[点击这里](#)进行订阅！\n\n### 简体中文使用直角引号\n\n用法：\n\n> 「老师，『有条不紊』的『紊』是什么意思？」\n\n对比用法：\n\n> “老师，‘有条不紊’的‘紊’是什么意思？”\n\n## 工具\n\n| 仓库                                                                                                                            | 语言            |\n|---------------------------------------------------------------------------------------------------------------------------------|-----------------|\n| [vinta/paranoid-auto-spacing](https://github.com/vinta/paranoid-auto-spacing)                                                   | JavaScript      |\n| [huei90/pangu.node](https://github.com/huei90/pangu.node)                                                                       | Node.js         |\n| [huacnlee/auto-correct](https://github.com/huacnlee/auto-correct)                                                               | Ruby            |\n| [sparanoid/space-lover](https://github.com/sparanoid/space-lover)                                                               | PHP (WordPress) |\n| [nauxliu/auto-correct](https://github.com/NauxLiu/auto-correct)                                                                 | PHP             |\n| [ricoa/copywriting-correct](https://github.com/ricoa/copywriting-correct)                                                       | PHP             |\n| [hotoo/pangu.vim](https://github.com/hotoo/pangu.vim)                                                                           | Vim             |\n| [sparanoid/grunt-auto-spacing](https://github.com/sparanoid/grunt-auto-spacing)                                                 | Node.js (Grunt) |\n| [hjiang/scripts/add-space-between-latin-and-cjk](https://github.com/hjiang/scripts/blob/master/add-space-between-latin-and-cjk) | Python          |\n\n## 谁在这样做？\n\n网站 | 文案 | UGC\n--- | --- | ---\n[Apple 中国](http://www.apple.com/cn/) | Yes | N/A\n[Apple 香港](http://www.apple.com/hk/) | Yes | N/A\n[Apple 台湾](http://www.apple.com/tw/) | Yes | N/A\n[Microsoft 中国](http://www.microsoft.com/zh-cn/) | Yes | N/A\n[Microsoft 香港](http://www.microsoft.com/zh-hk/) | Yes | N/A\n[Microsoft 台湾](http://www.microsoft.com/zh-tw/) | Yes | N/A\n[LeanCloud](https://leancloud.cn/) | Yes | N/A\n[知乎](https://www.zhihu.com/) | Yes | 部分用户达成\n[V2EX](https://www.v2ex.com/) | Yes | Yes\n[SegmentFault](https://segmentfault.com/) | Yes | 部分用户达成\n[Apple4us](http://apple4us.com/) | Yes | N/A\n[豌豆荚](https://www.wandoujia.com/) | Yes | N/A\n[Ruby China](https://ruby-china.org/) | Yes | 标题达成\n[PHPHub](https://phphub.org/) | Yes | 标题达成\n[少数派](http://sspai.com/) | Yes | N/A\n\n## 参考文献\n\n- [Guidelines for Using Capital Letters](http://grammar.about.com/od/punctuationandmechanics/a/Guidelines-For-Using-Capital-Letters.htm)\n- [Letter case - Wikipedia](http://en.wikipedia.org/wiki/Letter_case)\n- [Punctuation - Oxford Dictionaries](http://www.oxforddictionaries.com/words/punctuation)\n- [Punctuation - The Purdue OWL](https://owl.english.purdue.edu/owl/section/1/6/)\n- [How to Use English Punctuation Corrently - wikiHow](http://www.wikihow.com/Use-English-Punctuation-Correctly)\n- [格式 - openSUSE](https://zh.opensuse.org/index.php?title=Help:%E6%A0%BC%E5%BC%8F)\n- [全角和半角 - 维基百科](http://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2)\n- [引号 - 维基百科](http://zh.wikipedia.org/wiki/%E5%BC%95%E8%99%9F)\n- [疑问惊叹号 - 维基百科](http://zh.wikipedia.org/wiki/%E7%96%91%E5%95%8F%E9%A9%9A%E5%98%86%E8%99%9F)\n\n\n### [Markdown 语法说明 (简体中文版)](https://www.appinn.com/markdown/)\n\n### 源项目地址： https://github.com/sparanoid/chinese-copywriting-guidelines\n","slug":"chinese-copywriting-guide","published":1,"updated":"2018-03-25T14:44:23.985Z","_id":"cjf6wl6pf000y2gtpqbamuyj9","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"中文文案排版指北\"><a href=\"#中文文案排版指北\" class=\"headerlink\" title=\"中文文案排版指北\"></a>中文文案排版指北</h1><p>统一中文文案、排版的相关用法，降低团队成员之间的沟通成本，增强网站气质。</p>\n<p>Other languages:</p>\n<ul>\n<li><a href=\"README.en.md\">English</a></li>\n<li><a href=\"https://github.com/sparanoid/chinese-copywriting-guidelines\" target=\"_blank\" rel=\"noopener\">Chinese Traditional</a></li>\n<li><a href=\"README.md\">Chinese Simplified</a></li>\n</ul>\n<hr>\n<h2 id=\"目录\"><a href=\"#目录\" class=\"headerlink\" title=\"目录\"></a>目录</h2><!-- vim-markdown-toc GFM -->\n<ul>\n<li><a href=\"#空格\">空格</a><ul>\n<li><a href=\"#中英文之间需要增加空格\">中英文之间需要增加空格</a></li>\n<li><a href=\"#中文与数字之间需要增加空格\">中文与数字之间需要增加空格</a></li>\n<li><a href=\"#数字与单位之间需要增加空格\">数字与单位之间需要增加空格</a></li>\n<li><a href=\"#全角标点与其他字符之间不加空格\">全角标点与其他字符之间不加空格</a></li>\n<li><a href=\"#-ms-text-autospace-to-the-rescue\"><code>-ms-text-autospace</code> to the rescue?</a></li>\n</ul>\n</li>\n<li><a href=\"#标点符号\">标点符号</a><ul>\n<li><a href=\"#不重复使用标点符号\">不重复使用标点符号</a></li>\n</ul>\n</li>\n<li><a href=\"#全角和半角\">全角和半角</a><ul>\n<li><a href=\"#使用全角中文标点\">使用全角中文标点</a></li>\n<li><a href=\"#数字使用半角字符\">数字使用半角字符</a></li>\n<li><a href=\"#遇到完整的英文整句特殊名词其內容使用半角标点\">遇到完整的英文整句、特殊名词，其內容使用半角标点</a></li>\n</ul>\n</li>\n<li><a href=\"#名词\">名词</a><ul>\n<li><a href=\"#专有名词使用正确的大小写\">专有名词使用正确的大小写</a></li>\n<li><a href=\"#不要使用不地道的缩写\">不要使用不地道的缩写</a></li>\n</ul>\n</li>\n<li><a href=\"#争议\">争议</a><ul>\n<li><a href=\"#链接之间增加空格\">链接之间增加空格</a></li>\n<li><a href=\"#简体中文使用直角引号\">简体中文使用直角引号</a></li>\n</ul>\n</li>\n<li><a href=\"#工具\">工具</a></li>\n<li><a href=\"#谁在这样做\">谁在这样做？</a></li>\n<li><a href=\"#参考文献\">参考文献</a></li>\n</ul>\n<!-- vim-markdown-toc -->\n<h2 id=\"空格\"><a href=\"#空格\" class=\"headerlink\" title=\"空格\"></a>空格</h2><p>「有研究显示，打字的时候不喜欢在中文和英文之间加空格的人，感情路都走得很辛苦，有七成的比例会在 34 岁的时候跟自己不爱的人结婚，而其余三成的人最后只能把遗产留给自己的猫。毕竟爱情跟书写都需要适时地留白。</p>\n<p>与大家共勉之。」——<a href=\"https://github.com/vinta/pangu.js\" target=\"_blank\" rel=\"noopener\">vinta/paranoid-auto-spacing</a></p>\n<h3 id=\"中英文之间需要增加空格\"><a href=\"#中英文之间需要增加空格\" class=\"headerlink\" title=\"中英文之间需要增加空格\"></a>中英文之间需要增加空格</h3><p>正确：</p>\n<blockquote>\n<p>在 LeanCloud 上，数据存储是围绕 <code>AVObject</code> 进行的。</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>在LeanCloud上，数据存储是围绕<code>AVObject</code>进行的。</p>\n</blockquote>\n<blockquote>\n<p>在 LeanCloud上，数据存储是围绕<code>AVObject</code> 进行的。</p>\n</blockquote>\n<p>完整的正确用法：</p>\n<blockquote>\n<p>在 LeanCloud 上，数据存储是围绕 <code>AVObject</code> 进行的。每个 <code>AVObject</code> 都包含了与 JSON 兼容的 key-value 对应的数据。数据是 schema-free 的，你不需要在每个 <code>AVObject</code> 上提前指定存在哪些键，只要直接设定对应的 key-value 即可。</p>\n</blockquote>\n<p>例外：「豆瓣FM」等产品名词，按照官方所定义的格式书写。</p>\n<h3 id=\"中文与数字之间需要增加空格\"><a href=\"#中文与数字之间需要增加空格\" class=\"headerlink\" title=\"中文与数字之间需要增加空格\"></a>中文与数字之间需要增加空格</h3><p>正确：</p>\n<blockquote>\n<p>今天出去买菜花了 5000 元。</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>今天出去买菜花了 5000元。</p>\n</blockquote>\n<blockquote>\n<p>今天出去买菜花了5000元。</p>\n</blockquote>\n<h3 id=\"数字与单位之间需要增加空格\"><a href=\"#数字与单位之间需要增加空格\" class=\"headerlink\" title=\"数字与单位之间需要增加空格\"></a>数字与单位之间需要增加空格</h3><p>正确：</p>\n<blockquote>\n<p>我家的光纤入户宽带有 10 Gbps，SSD 一共有 20 TB。</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>我家的光纤入户宽带有 10Gbps，SSD 一共有 10TB。</p>\n</blockquote>\n<p>例外：度／百分比与数字之间不需要增加空格：</p>\n<p>正确：</p>\n<blockquote>\n<p>今天是 233° 的高温。</p>\n</blockquote>\n<blockquote>\n<p>新 MacBook Pro 有 15% 的 CPU 性能提升。</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>今天是 233 ° 的高温。</p>\n</blockquote>\n<blockquote>\n<p>新 MacBook Pro 有 15 % 的 CPU 性能提升。</p>\n</blockquote>\n<h3 id=\"全角标点与其他字符之间不加空格\"><a href=\"#全角标点与其他字符之间不加空格\" class=\"headerlink\" title=\"全角标点与其他字符之间不加空格\"></a>全角标点与其他字符之间不加空格</h3><p>正确：</p>\n<blockquote>\n<p>刚刚买了一部 iPhone，好开心！</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>刚刚买了一部 iPhone ，好开心！</p>\n</blockquote>\n<h3 id=\"ms-text-autospace-to-the-rescue\"><a href=\"#ms-text-autospace-to-the-rescue\" class=\"headerlink\" title=\"-ms-text-autospace to the rescue?\"></a><code>-ms-text-autospace</code> to the rescue?</h3><p>Microsoft 有个 <a href=\"http://msdn.microsoft.com/en-us/library/ie/ms531164(v=vs.85\" target=\"_blank\" rel=\"noopener\"><code>-ms-text-autospace</code></a>.aspx) 的 CSS 属性可以实现自动为中英文之间增加空白。不过目前并未普及，另外在其他应用场景，例如 OS X、iOS 的用户界面目前并不存在这个特性，所以请继续保持随手加空格的习惯。</p>\n<h2 id=\"标点符号\"><a href=\"#标点符号\" class=\"headerlink\" title=\"标点符号\"></a>标点符号</h2><h3 id=\"不重复使用标点符号\"><a href=\"#不重复使用标点符号\" class=\"headerlink\" title=\"不重复使用标点符号\"></a>不重复使用标点符号</h3><p>正确：</p>\n<blockquote>\n<p>德国队竟然战胜了巴西队！</p>\n</blockquote>\n<blockquote>\n<p>她竟然对你说「喵」？！</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>德国队竟然战胜了巴西队！！</p>\n</blockquote>\n<blockquote>\n<p>德国队竟然战胜了巴西队！！！！！！！！</p>\n</blockquote>\n<blockquote>\n<p>她竟然对你说「喵」？？！！</p>\n</blockquote>\n<blockquote>\n<p>她竟然对你说「喵」？！？！？？！！</p>\n</blockquote>\n<h2 id=\"全角和半角\"><a href=\"#全角和半角\" class=\"headerlink\" title=\"全角和半角\"></a>全角和半角</h2><p>不明白什么是全角（全形）与半角（半形）符号？请查看维基百科词条『<a href=\"http://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2\" target=\"_blank\" rel=\"noopener\">全角和半角</a>』。</p>\n<h3 id=\"使用全角中文标点\"><a href=\"#使用全角中文标点\" class=\"headerlink\" title=\"使用全角中文标点\"></a>使用全角中文标点</h3><p>正确：</p>\n<blockquote>\n<p>嗨！你知道嘛？今天前台的小妹跟我说「喵」了哎！</p>\n</blockquote>\n<blockquote>\n<p>核磁共振成像（NMRI）是什么原理都不知道？JFGI！</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>嗨! 你知道嘛? 今天前台的小妹跟我说 “喵” 了哎!</p>\n</blockquote>\n<blockquote>\n<p>嗨!你知道嘛?今天前台的小妹跟我说”喵”了哎!</p>\n</blockquote>\n<blockquote>\n<p>核磁共振成像 (NMRI) 是什么原理都不知道? JFGI!</p>\n</blockquote>\n<blockquote>\n<p>核磁共振成像(NMRI)是什么原理都不知道?JFGI!</p>\n</blockquote>\n<h3 id=\"数字使用半角字符\"><a href=\"#数字使用半角字符\" class=\"headerlink\" title=\"数字使用半角字符\"></a>数字使用半角字符</h3><p>正确：</p>\n<blockquote>\n<p>这件蛋糕只卖 1000 元。</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>这件蛋糕只卖 １０００ 元。</p>\n</blockquote>\n<p>例外：在设计稿、宣传海报中如出现极少量数字的情形时，为方便文字对齐，是可以使用全角数字的。</p>\n<h3 id=\"遇到完整的英文整句、特殊名词，其內容使用半角标点\"><a href=\"#遇到完整的英文整句、特殊名词，其內容使用半角标点\" class=\"headerlink\" title=\"遇到完整的英文整句、特殊名词，其內容使用半角标点\"></a>遇到完整的英文整句、特殊名词，其內容使用半角标点</h3><p>正确：</p>\n<blockquote>\n<p>乔布斯那句话是怎么说的？「Stay hungry, stay foolish.」</p>\n</blockquote>\n<blockquote>\n<p>推荐你阅读《Hackers &amp; Painters: Big Ideas from the Computer Age》，非常的有趣。</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>乔布斯那句话是怎么说的？「Stay hungry，stay foolish。」</p>\n</blockquote>\n<blockquote>\n<p>推荐你阅读《Hackers＆Painters：Big Ideas from the Computer Age》，非常的有趣。</p>\n</blockquote>\n<h2 id=\"名词\"><a href=\"#名词\" class=\"headerlink\" title=\"名词\"></a>名词</h2><h3 id=\"专有名词使用正确的大小写\"><a href=\"#专有名词使用正确的大小写\" class=\"headerlink\" title=\"专有名词使用正确的大小写\"></a>专有名词使用正确的大小写</h3><p>大小写相关用法原属于英文书写范畴，不属于本 wiki 讨论內容，在这里只对部分易错用法进行简述。</p>\n<p>正确：</p>\n<blockquote>\n<p>使用 GitHub 登录</p>\n</blockquote>\n<blockquote>\n<p>我们的客户有 GitHub、Foursquare、Microsoft Corporation、Google、Facebook, Inc.。</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>使用 github 登录</p>\n</blockquote>\n<blockquote>\n<p>使用 GITHUB 登录</p>\n</blockquote>\n<blockquote>\n<p>使用 Github 登录</p>\n</blockquote>\n<blockquote>\n<p>使用 gitHub 登录</p>\n</blockquote>\n<blockquote>\n<p>使用 gｲんĤЦ8 登录</p>\n</blockquote>\n<blockquote>\n<p>我们的客户有 github、foursquare、microsoft corporation、google、facebook, inc.。</p>\n</blockquote>\n<blockquote>\n<p>我们的客户有 GITHUB、FOURSQUARE、MICROSOFT CORPORATION、GOOGLE、FACEBOOK, INC.。</p>\n</blockquote>\n<blockquote>\n<p>我们的客户有 Github、FourSquare、MicroSoft Corporation、Google、FaceBook, Inc.。</p>\n</blockquote>\n<blockquote>\n<p>我们的客户有 gitHub、fourSquare、microSoft Corporation、google、faceBook, Inc.。</p>\n</blockquote>\n<blockquote>\n<p>我们的客户有 gｲんĤЦ8、ｷouЯƧquﾑгє、๓เςг๏ร๏Ŧt ς๏гק๏гคtเ๏ภn、900913、ƒ4ᄃëв๏๏к, IПᄃ.。</p>\n</blockquote>\n<p>注意：当网页中需要配合整体视觉风格而出现全部大写／小写的情形，HTML 中请使用标准的大小写规范进行书写；并通过 <code>text-transform: uppercase;</code>／<code>text-transform: lowercase;</code> 对表现形式进行定义。</p>\n<h3 id=\"不要使用不地道的缩写\"><a href=\"#不要使用不地道的缩写\" class=\"headerlink\" title=\"不要使用不地道的缩写\"></a>不要使用不地道的缩写</h3><p>正确：</p>\n<blockquote>\n<p>我们需要一位熟悉 JavaScript、HTML5，至少理解一种框架（如 Backbone.js、AngularJS、React 等）的前端开发者。</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>我们需要一位熟悉 Js、h5，至少理解一种框架（如 backbone、angular、RJS 等）的 FED。</p>\n</blockquote>\n<h2 id=\"争议\"><a href=\"#争议\" class=\"headerlink\" title=\"争议\"></a>争议</h2><p>以下用法略带有个人色彩，即：无论是否遵循下述规则，从语法的角度来讲都是<strong>正确</strong>的。</p>\n<h3 id=\"链接之间增加空格\"><a href=\"#链接之间增加空格\" class=\"headerlink\" title=\"链接之间增加空格\"></a>链接之间增加空格</h3><p>用法：</p>\n<blockquote>\n<p>请 <a href=\"#\">提交一个 issue</a> 并分配给相关同事。</p>\n</blockquote>\n<blockquote>\n<p>访问我们网站的最新动态，请 <a href=\"#\">点击这里</a> 进行订阅！</p>\n</blockquote>\n<p>对比用法：</p>\n<blockquote>\n<p>请<a href=\"#\">提交一个 issue</a> 并分配给相关同事。</p>\n</blockquote>\n<blockquote>\n<p>访问我们网站的最新动态，请<a href=\"#\">点击这里</a>进行订阅！</p>\n</blockquote>\n<h3 id=\"简体中文使用直角引号\"><a href=\"#简体中文使用直角引号\" class=\"headerlink\" title=\"简体中文使用直角引号\"></a>简体中文使用直角引号</h3><p>用法：</p>\n<blockquote>\n<p>「老师，『有条不紊』的『紊』是什么意思？」</p>\n</blockquote>\n<p>对比用法：</p>\n<blockquote>\n<p>“老师，‘有条不紊’的‘紊’是什么意思？”</p>\n</blockquote>\n<h2 id=\"工具\"><a href=\"#工具\" class=\"headerlink\" title=\"工具\"></a>工具</h2><table>\n<thead>\n<tr>\n<th>仓库</th>\n<th>语言</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"https://github.com/vinta/paranoid-auto-spacing\" target=\"_blank\" rel=\"noopener\">vinta/paranoid-auto-spacing</a></td>\n<td>JavaScript</td>\n</tr>\n<tr>\n<td><a href=\"https://github.com/huei90/pangu.node\" target=\"_blank\" rel=\"noopener\">huei90/pangu.node</a></td>\n<td>Node.js</td>\n</tr>\n<tr>\n<td><a href=\"https://github.com/huacnlee/auto-correct\" target=\"_blank\" rel=\"noopener\">huacnlee/auto-correct</a></td>\n<td>Ruby</td>\n</tr>\n<tr>\n<td><a href=\"https://github.com/sparanoid/space-lover\" target=\"_blank\" rel=\"noopener\">sparanoid/space-lover</a></td>\n<td>PHP (WordPress)</td>\n</tr>\n<tr>\n<td><a href=\"https://github.com/NauxLiu/auto-correct\" target=\"_blank\" rel=\"noopener\">nauxliu/auto-correct</a></td>\n<td>PHP</td>\n</tr>\n<tr>\n<td><a href=\"https://github.com/ricoa/copywriting-correct\" target=\"_blank\" rel=\"noopener\">ricoa/copywriting-correct</a></td>\n<td>PHP</td>\n</tr>\n<tr>\n<td><a href=\"https://github.com/hotoo/pangu.vim\" target=\"_blank\" rel=\"noopener\">hotoo/pangu.vim</a></td>\n<td>Vim</td>\n</tr>\n<tr>\n<td><a href=\"https://github.com/sparanoid/grunt-auto-spacing\" target=\"_blank\" rel=\"noopener\">sparanoid/grunt-auto-spacing</a></td>\n<td>Node.js (Grunt)</td>\n</tr>\n<tr>\n<td><a href=\"https://github.com/hjiang/scripts/blob/master/add-space-between-latin-and-cjk\" target=\"_blank\" rel=\"noopener\">hjiang/scripts/add-space-between-latin-and-cjk</a></td>\n<td>Python</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"谁在这样做？\"><a href=\"#谁在这样做？\" class=\"headerlink\" title=\"谁在这样做？\"></a>谁在这样做？</h2><table>\n<thead>\n<tr>\n<th>网站</th>\n<th>文案</th>\n<th>UGC</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"http://www.apple.com/cn/\" target=\"_blank\" rel=\"noopener\">Apple 中国</a></td>\n<td>Yes</td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><a href=\"http://www.apple.com/hk/\" target=\"_blank\" rel=\"noopener\">Apple 香港</a></td>\n<td>Yes</td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><a href=\"http://www.apple.com/tw/\" target=\"_blank\" rel=\"noopener\">Apple 台湾</a></td>\n<td>Yes</td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><a href=\"http://www.microsoft.com/zh-cn/\" target=\"_blank\" rel=\"noopener\">Microsoft 中国</a></td>\n<td>Yes</td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><a href=\"http://www.microsoft.com/zh-hk/\" target=\"_blank\" rel=\"noopener\">Microsoft 香港</a></td>\n<td>Yes</td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><a href=\"http://www.microsoft.com/zh-tw/\" target=\"_blank\" rel=\"noopener\">Microsoft 台湾</a></td>\n<td>Yes</td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><a href=\"https://leancloud.cn/\" target=\"_blank\" rel=\"noopener\">LeanCloud</a></td>\n<td>Yes</td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><a href=\"https://www.zhihu.com/\" target=\"_blank\" rel=\"noopener\">知乎</a></td>\n<td>Yes</td>\n<td>部分用户达成</td>\n</tr>\n<tr>\n<td><a href=\"https://www.v2ex.com/\" target=\"_blank\" rel=\"noopener\">V2EX</a></td>\n<td>Yes</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td><a href=\"https://segmentfault.com/\" target=\"_blank\" rel=\"noopener\">SegmentFault</a></td>\n<td>Yes</td>\n<td>部分用户达成</td>\n</tr>\n<tr>\n<td><a href=\"http://apple4us.com/\" target=\"_blank\" rel=\"noopener\">Apple4us</a></td>\n<td>Yes</td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><a href=\"https://www.wandoujia.com/\" target=\"_blank\" rel=\"noopener\">豌豆荚</a></td>\n<td>Yes</td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><a href=\"https://ruby-china.org/\" target=\"_blank\" rel=\"noopener\">Ruby China</a></td>\n<td>Yes</td>\n<td>标题达成</td>\n</tr>\n<tr>\n<td><a href=\"https://phphub.org/\" target=\"_blank\" rel=\"noopener\">PHPHub</a></td>\n<td>Yes</td>\n<td>标题达成</td>\n</tr>\n<tr>\n<td><a href=\"http://sspai.com/\" target=\"_blank\" rel=\"noopener\">少数派</a></td>\n<td>Yes</td>\n<td>N/A</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"参考文献\"><a href=\"#参考文献\" class=\"headerlink\" title=\"参考文献\"></a>参考文献</h2><ul>\n<li><a href=\"http://grammar.about.com/od/punctuationandmechanics/a/Guidelines-For-Using-Capital-Letters.htm\" target=\"_blank\" rel=\"noopener\">Guidelines for Using Capital Letters</a></li>\n<li><a href=\"http://en.wikipedia.org/wiki/Letter_case\" target=\"_blank\" rel=\"noopener\">Letter case - Wikipedia</a></li>\n<li><a href=\"http://www.oxforddictionaries.com/words/punctuation\" target=\"_blank\" rel=\"noopener\">Punctuation - Oxford Dictionaries</a></li>\n<li><a href=\"https://owl.english.purdue.edu/owl/section/1/6/\" target=\"_blank\" rel=\"noopener\">Punctuation - The Purdue OWL</a></li>\n<li><a href=\"http://www.wikihow.com/Use-English-Punctuation-Correctly\" target=\"_blank\" rel=\"noopener\">How to Use English Punctuation Corrently - wikiHow</a></li>\n<li><a href=\"https://zh.opensuse.org/index.php?title=Help:%E6%A0%BC%E5%BC%8F\" target=\"_blank\" rel=\"noopener\">格式 - openSUSE</a></li>\n<li><a href=\"http://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2\" target=\"_blank\" rel=\"noopener\">全角和半角 - 维基百科</a></li>\n<li><a href=\"http://zh.wikipedia.org/wiki/%E5%BC%95%E8%99%9F\" target=\"_blank\" rel=\"noopener\">引号 - 维基百科</a></li>\n<li><a href=\"http://zh.wikipedia.org/wiki/%E7%96%91%E5%95%8F%E9%A9%9A%E5%98%86%E8%99%9F\" target=\"_blank\" rel=\"noopener\">疑问惊叹号 - 维基百科</a></li>\n</ul>\n<h3 id=\"Markdown-语法说明-简体中文版\"><a href=\"#Markdown-语法说明-简体中文版\" class=\"headerlink\" title=\"Markdown 语法说明 (简体中文版)\"></a><a href=\"https://www.appinn.com/markdown/\" target=\"_blank\" rel=\"noopener\">Markdown 语法说明 (简体中文版)</a></h3><h3 id=\"源项目地址：-https-github-com-sparanoid-chinese-copywriting-guidelines\"><a href=\"#源项目地址：-https-github-com-sparanoid-chinese-copywriting-guidelines\" class=\"headerlink\" title=\"源项目地址： https://github.com/sparanoid/chinese-copywriting-guidelines\"></a>源项目地址： <a href=\"https://github.com/sparanoid/chinese-copywriting-guidelines\" target=\"_blank\" rel=\"noopener\">https://github.com/sparanoid/chinese-copywriting-guidelines</a></h3>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"中文文案排版指北\"><a href=\"#中文文案排版指北\" class=\"headerlink\" title=\"中文文案排版指北\"></a>中文文案排版指北</h1><p>统一中文文案、排版的相关用法，降低团队成员之间的沟通成本，增强网站气质。</p>\n<p>Other languages:</p>\n<ul>\n<li><a href=\"README.en.md\">English</a></li>\n<li><a href=\"https://github.com/sparanoid/chinese-copywriting-guidelines\" target=\"_blank\" rel=\"noopener\">Chinese Traditional</a></li>\n<li><a href=\"README.md\">Chinese Simplified</a></li>\n</ul>\n<hr>\n<h2 id=\"目录\"><a href=\"#目录\" class=\"headerlink\" title=\"目录\"></a>目录</h2><!-- vim-markdown-toc GFM -->\n<ul>\n<li><a href=\"#空格\">空格</a><ul>\n<li><a href=\"#中英文之间需要增加空格\">中英文之间需要增加空格</a></li>\n<li><a href=\"#中文与数字之间需要增加空格\">中文与数字之间需要增加空格</a></li>\n<li><a href=\"#数字与单位之间需要增加空格\">数字与单位之间需要增加空格</a></li>\n<li><a href=\"#全角标点与其他字符之间不加空格\">全角标点与其他字符之间不加空格</a></li>\n<li><a href=\"#-ms-text-autospace-to-the-rescue\"><code>-ms-text-autospace</code> to the rescue?</a></li>\n</ul>\n</li>\n<li><a href=\"#标点符号\">标点符号</a><ul>\n<li><a href=\"#不重复使用标点符号\">不重复使用标点符号</a></li>\n</ul>\n</li>\n<li><a href=\"#全角和半角\">全角和半角</a><ul>\n<li><a href=\"#使用全角中文标点\">使用全角中文标点</a></li>\n<li><a href=\"#数字使用半角字符\">数字使用半角字符</a></li>\n<li><a href=\"#遇到完整的英文整句特殊名词其內容使用半角标点\">遇到完整的英文整句、特殊名词，其內容使用半角标点</a></li>\n</ul>\n</li>\n<li><a href=\"#名词\">名词</a><ul>\n<li><a href=\"#专有名词使用正确的大小写\">专有名词使用正确的大小写</a></li>\n<li><a href=\"#不要使用不地道的缩写\">不要使用不地道的缩写</a></li>\n</ul>\n</li>\n<li><a href=\"#争议\">争议</a><ul>\n<li><a href=\"#链接之间增加空格\">链接之间增加空格</a></li>\n<li><a href=\"#简体中文使用直角引号\">简体中文使用直角引号</a></li>\n</ul>\n</li>\n<li><a href=\"#工具\">工具</a></li>\n<li><a href=\"#谁在这样做\">谁在这样做？</a></li>\n<li><a href=\"#参考文献\">参考文献</a></li>\n</ul>\n<!-- vim-markdown-toc -->\n<h2 id=\"空格\"><a href=\"#空格\" class=\"headerlink\" title=\"空格\"></a>空格</h2><p>「有研究显示，打字的时候不喜欢在中文和英文之间加空格的人，感情路都走得很辛苦，有七成的比例会在 34 岁的时候跟自己不爱的人结婚，而其余三成的人最后只能把遗产留给自己的猫。毕竟爱情跟书写都需要适时地留白。</p>\n<p>与大家共勉之。」——<a href=\"https://github.com/vinta/pangu.js\" target=\"_blank\" rel=\"noopener\">vinta/paranoid-auto-spacing</a></p>\n<h3 id=\"中英文之间需要增加空格\"><a href=\"#中英文之间需要增加空格\" class=\"headerlink\" title=\"中英文之间需要增加空格\"></a>中英文之间需要增加空格</h3><p>正确：</p>\n<blockquote>\n<p>在 LeanCloud 上，数据存储是围绕 <code>AVObject</code> 进行的。</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>在LeanCloud上，数据存储是围绕<code>AVObject</code>进行的。</p>\n</blockquote>\n<blockquote>\n<p>在 LeanCloud上，数据存储是围绕<code>AVObject</code> 进行的。</p>\n</blockquote>\n<p>完整的正确用法：</p>\n<blockquote>\n<p>在 LeanCloud 上，数据存储是围绕 <code>AVObject</code> 进行的。每个 <code>AVObject</code> 都包含了与 JSON 兼容的 key-value 对应的数据。数据是 schema-free 的，你不需要在每个 <code>AVObject</code> 上提前指定存在哪些键，只要直接设定对应的 key-value 即可。</p>\n</blockquote>\n<p>例外：「豆瓣FM」等产品名词，按照官方所定义的格式书写。</p>\n<h3 id=\"中文与数字之间需要增加空格\"><a href=\"#中文与数字之间需要增加空格\" class=\"headerlink\" title=\"中文与数字之间需要增加空格\"></a>中文与数字之间需要增加空格</h3><p>正确：</p>\n<blockquote>\n<p>今天出去买菜花了 5000 元。</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>今天出去买菜花了 5000元。</p>\n</blockquote>\n<blockquote>\n<p>今天出去买菜花了5000元。</p>\n</blockquote>\n<h3 id=\"数字与单位之间需要增加空格\"><a href=\"#数字与单位之间需要增加空格\" class=\"headerlink\" title=\"数字与单位之间需要增加空格\"></a>数字与单位之间需要增加空格</h3><p>正确：</p>\n<blockquote>\n<p>我家的光纤入户宽带有 10 Gbps，SSD 一共有 20 TB。</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>我家的光纤入户宽带有 10Gbps，SSD 一共有 10TB。</p>\n</blockquote>\n<p>例外：度／百分比与数字之间不需要增加空格：</p>\n<p>正确：</p>\n<blockquote>\n<p>今天是 233° 的高温。</p>\n</blockquote>\n<blockquote>\n<p>新 MacBook Pro 有 15% 的 CPU 性能提升。</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>今天是 233 ° 的高温。</p>\n</blockquote>\n<blockquote>\n<p>新 MacBook Pro 有 15 % 的 CPU 性能提升。</p>\n</blockquote>\n<h3 id=\"全角标点与其他字符之间不加空格\"><a href=\"#全角标点与其他字符之间不加空格\" class=\"headerlink\" title=\"全角标点与其他字符之间不加空格\"></a>全角标点与其他字符之间不加空格</h3><p>正确：</p>\n<blockquote>\n<p>刚刚买了一部 iPhone，好开心！</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>刚刚买了一部 iPhone ，好开心！</p>\n</blockquote>\n<h3 id=\"ms-text-autospace-to-the-rescue\"><a href=\"#ms-text-autospace-to-the-rescue\" class=\"headerlink\" title=\"-ms-text-autospace to the rescue?\"></a><code>-ms-text-autospace</code> to the rescue?</h3><p>Microsoft 有个 <a href=\"http://msdn.microsoft.com/en-us/library/ie/ms531164(v=vs.85\" target=\"_blank\" rel=\"noopener\"><code>-ms-text-autospace</code></a>.aspx) 的 CSS 属性可以实现自动为中英文之间增加空白。不过目前并未普及，另外在其他应用场景，例如 OS X、iOS 的用户界面目前并不存在这个特性，所以请继续保持随手加空格的习惯。</p>\n<h2 id=\"标点符号\"><a href=\"#标点符号\" class=\"headerlink\" title=\"标点符号\"></a>标点符号</h2><h3 id=\"不重复使用标点符号\"><a href=\"#不重复使用标点符号\" class=\"headerlink\" title=\"不重复使用标点符号\"></a>不重复使用标点符号</h3><p>正确：</p>\n<blockquote>\n<p>德国队竟然战胜了巴西队！</p>\n</blockquote>\n<blockquote>\n<p>她竟然对你说「喵」？！</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>德国队竟然战胜了巴西队！！</p>\n</blockquote>\n<blockquote>\n<p>德国队竟然战胜了巴西队！！！！！！！！</p>\n</blockquote>\n<blockquote>\n<p>她竟然对你说「喵」？？！！</p>\n</blockquote>\n<blockquote>\n<p>她竟然对你说「喵」？！？！？？！！</p>\n</blockquote>\n<h2 id=\"全角和半角\"><a href=\"#全角和半角\" class=\"headerlink\" title=\"全角和半角\"></a>全角和半角</h2><p>不明白什么是全角（全形）与半角（半形）符号？请查看维基百科词条『<a href=\"http://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2\" target=\"_blank\" rel=\"noopener\">全角和半角</a>』。</p>\n<h3 id=\"使用全角中文标点\"><a href=\"#使用全角中文标点\" class=\"headerlink\" title=\"使用全角中文标点\"></a>使用全角中文标点</h3><p>正确：</p>\n<blockquote>\n<p>嗨！你知道嘛？今天前台的小妹跟我说「喵」了哎！</p>\n</blockquote>\n<blockquote>\n<p>核磁共振成像（NMRI）是什么原理都不知道？JFGI！</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>嗨! 你知道嘛? 今天前台的小妹跟我说 “喵” 了哎!</p>\n</blockquote>\n<blockquote>\n<p>嗨!你知道嘛?今天前台的小妹跟我说”喵”了哎!</p>\n</blockquote>\n<blockquote>\n<p>核磁共振成像 (NMRI) 是什么原理都不知道? JFGI!</p>\n</blockquote>\n<blockquote>\n<p>核磁共振成像(NMRI)是什么原理都不知道?JFGI!</p>\n</blockquote>\n<h3 id=\"数字使用半角字符\"><a href=\"#数字使用半角字符\" class=\"headerlink\" title=\"数字使用半角字符\"></a>数字使用半角字符</h3><p>正确：</p>\n<blockquote>\n<p>这件蛋糕只卖 1000 元。</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>这件蛋糕只卖 １０００ 元。</p>\n</blockquote>\n<p>例外：在设计稿、宣传海报中如出现极少量数字的情形时，为方便文字对齐，是可以使用全角数字的。</p>\n<h3 id=\"遇到完整的英文整句、特殊名词，其內容使用半角标点\"><a href=\"#遇到完整的英文整句、特殊名词，其內容使用半角标点\" class=\"headerlink\" title=\"遇到完整的英文整句、特殊名词，其內容使用半角标点\"></a>遇到完整的英文整句、特殊名词，其內容使用半角标点</h3><p>正确：</p>\n<blockquote>\n<p>乔布斯那句话是怎么说的？「Stay hungry, stay foolish.」</p>\n</blockquote>\n<blockquote>\n<p>推荐你阅读《Hackers &amp; Painters: Big Ideas from the Computer Age》，非常的有趣。</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>乔布斯那句话是怎么说的？「Stay hungry，stay foolish。」</p>\n</blockquote>\n<blockquote>\n<p>推荐你阅读《Hackers＆Painters：Big Ideas from the Computer Age》，非常的有趣。</p>\n</blockquote>\n<h2 id=\"名词\"><a href=\"#名词\" class=\"headerlink\" title=\"名词\"></a>名词</h2><h3 id=\"专有名词使用正确的大小写\"><a href=\"#专有名词使用正确的大小写\" class=\"headerlink\" title=\"专有名词使用正确的大小写\"></a>专有名词使用正确的大小写</h3><p>大小写相关用法原属于英文书写范畴，不属于本 wiki 讨论內容，在这里只对部分易错用法进行简述。</p>\n<p>正确：</p>\n<blockquote>\n<p>使用 GitHub 登录</p>\n</blockquote>\n<blockquote>\n<p>我们的客户有 GitHub、Foursquare、Microsoft Corporation、Google、Facebook, Inc.。</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>使用 github 登录</p>\n</blockquote>\n<blockquote>\n<p>使用 GITHUB 登录</p>\n</blockquote>\n<blockquote>\n<p>使用 Github 登录</p>\n</blockquote>\n<blockquote>\n<p>使用 gitHub 登录</p>\n</blockquote>\n<blockquote>\n<p>使用 gｲんĤЦ8 登录</p>\n</blockquote>\n<blockquote>\n<p>我们的客户有 github、foursquare、microsoft corporation、google、facebook, inc.。</p>\n</blockquote>\n<blockquote>\n<p>我们的客户有 GITHUB、FOURSQUARE、MICROSOFT CORPORATION、GOOGLE、FACEBOOK, INC.。</p>\n</blockquote>\n<blockquote>\n<p>我们的客户有 Github、FourSquare、MicroSoft Corporation、Google、FaceBook, Inc.。</p>\n</blockquote>\n<blockquote>\n<p>我们的客户有 gitHub、fourSquare、microSoft Corporation、google、faceBook, Inc.。</p>\n</blockquote>\n<blockquote>\n<p>我们的客户有 gｲんĤЦ8、ｷouЯƧquﾑгє、๓เςг๏ร๏Ŧt ς๏гק๏гคtเ๏ภn、900913、ƒ4ᄃëв๏๏к, IПᄃ.。</p>\n</blockquote>\n<p>注意：当网页中需要配合整体视觉风格而出现全部大写／小写的情形，HTML 中请使用标准的大小写规范进行书写；并通过 <code>text-transform: uppercase;</code>／<code>text-transform: lowercase;</code> 对表现形式进行定义。</p>\n<h3 id=\"不要使用不地道的缩写\"><a href=\"#不要使用不地道的缩写\" class=\"headerlink\" title=\"不要使用不地道的缩写\"></a>不要使用不地道的缩写</h3><p>正确：</p>\n<blockquote>\n<p>我们需要一位熟悉 JavaScript、HTML5，至少理解一种框架（如 Backbone.js、AngularJS、React 等）的前端开发者。</p>\n</blockquote>\n<p>错误：</p>\n<blockquote>\n<p>我们需要一位熟悉 Js、h5，至少理解一种框架（如 backbone、angular、RJS 等）的 FED。</p>\n</blockquote>\n<h2 id=\"争议\"><a href=\"#争议\" class=\"headerlink\" title=\"争议\"></a>争议</h2><p>以下用法略带有个人色彩，即：无论是否遵循下述规则，从语法的角度来讲都是<strong>正确</strong>的。</p>\n<h3 id=\"链接之间增加空格\"><a href=\"#链接之间增加空格\" class=\"headerlink\" title=\"链接之间增加空格\"></a>链接之间增加空格</h3><p>用法：</p>\n<blockquote>\n<p>请 <a href=\"#\">提交一个 issue</a> 并分配给相关同事。</p>\n</blockquote>\n<blockquote>\n<p>访问我们网站的最新动态，请 <a href=\"#\">点击这里</a> 进行订阅！</p>\n</blockquote>\n<p>对比用法：</p>\n<blockquote>\n<p>请<a href=\"#\">提交一个 issue</a> 并分配给相关同事。</p>\n</blockquote>\n<blockquote>\n<p>访问我们网站的最新动态，请<a href=\"#\">点击这里</a>进行订阅！</p>\n</blockquote>\n<h3 id=\"简体中文使用直角引号\"><a href=\"#简体中文使用直角引号\" class=\"headerlink\" title=\"简体中文使用直角引号\"></a>简体中文使用直角引号</h3><p>用法：</p>\n<blockquote>\n<p>「老师，『有条不紊』的『紊』是什么意思？」</p>\n</blockquote>\n<p>对比用法：</p>\n<blockquote>\n<p>“老师，‘有条不紊’的‘紊’是什么意思？”</p>\n</blockquote>\n<h2 id=\"工具\"><a href=\"#工具\" class=\"headerlink\" title=\"工具\"></a>工具</h2><table>\n<thead>\n<tr>\n<th>仓库</th>\n<th>语言</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"https://github.com/vinta/paranoid-auto-spacing\" target=\"_blank\" rel=\"noopener\">vinta/paranoid-auto-spacing</a></td>\n<td>JavaScript</td>\n</tr>\n<tr>\n<td><a href=\"https://github.com/huei90/pangu.node\" target=\"_blank\" rel=\"noopener\">huei90/pangu.node</a></td>\n<td>Node.js</td>\n</tr>\n<tr>\n<td><a href=\"https://github.com/huacnlee/auto-correct\" target=\"_blank\" rel=\"noopener\">huacnlee/auto-correct</a></td>\n<td>Ruby</td>\n</tr>\n<tr>\n<td><a href=\"https://github.com/sparanoid/space-lover\" target=\"_blank\" rel=\"noopener\">sparanoid/space-lover</a></td>\n<td>PHP (WordPress)</td>\n</tr>\n<tr>\n<td><a href=\"https://github.com/NauxLiu/auto-correct\" target=\"_blank\" rel=\"noopener\">nauxliu/auto-correct</a></td>\n<td>PHP</td>\n</tr>\n<tr>\n<td><a href=\"https://github.com/ricoa/copywriting-correct\" target=\"_blank\" rel=\"noopener\">ricoa/copywriting-correct</a></td>\n<td>PHP</td>\n</tr>\n<tr>\n<td><a href=\"https://github.com/hotoo/pangu.vim\" target=\"_blank\" rel=\"noopener\">hotoo/pangu.vim</a></td>\n<td>Vim</td>\n</tr>\n<tr>\n<td><a href=\"https://github.com/sparanoid/grunt-auto-spacing\" target=\"_blank\" rel=\"noopener\">sparanoid/grunt-auto-spacing</a></td>\n<td>Node.js (Grunt)</td>\n</tr>\n<tr>\n<td><a href=\"https://github.com/hjiang/scripts/blob/master/add-space-between-latin-and-cjk\" target=\"_blank\" rel=\"noopener\">hjiang/scripts/add-space-between-latin-and-cjk</a></td>\n<td>Python</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"谁在这样做？\"><a href=\"#谁在这样做？\" class=\"headerlink\" title=\"谁在这样做？\"></a>谁在这样做？</h2><table>\n<thead>\n<tr>\n<th>网站</th>\n<th>文案</th>\n<th>UGC</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"http://www.apple.com/cn/\" target=\"_blank\" rel=\"noopener\">Apple 中国</a></td>\n<td>Yes</td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><a href=\"http://www.apple.com/hk/\" target=\"_blank\" rel=\"noopener\">Apple 香港</a></td>\n<td>Yes</td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><a href=\"http://www.apple.com/tw/\" target=\"_blank\" rel=\"noopener\">Apple 台湾</a></td>\n<td>Yes</td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><a href=\"http://www.microsoft.com/zh-cn/\" target=\"_blank\" rel=\"noopener\">Microsoft 中国</a></td>\n<td>Yes</td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><a href=\"http://www.microsoft.com/zh-hk/\" target=\"_blank\" rel=\"noopener\">Microsoft 香港</a></td>\n<td>Yes</td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><a href=\"http://www.microsoft.com/zh-tw/\" target=\"_blank\" rel=\"noopener\">Microsoft 台湾</a></td>\n<td>Yes</td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><a href=\"https://leancloud.cn/\" target=\"_blank\" rel=\"noopener\">LeanCloud</a></td>\n<td>Yes</td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><a href=\"https://www.zhihu.com/\" target=\"_blank\" rel=\"noopener\">知乎</a></td>\n<td>Yes</td>\n<td>部分用户达成</td>\n</tr>\n<tr>\n<td><a href=\"https://www.v2ex.com/\" target=\"_blank\" rel=\"noopener\">V2EX</a></td>\n<td>Yes</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td><a href=\"https://segmentfault.com/\" target=\"_blank\" rel=\"noopener\">SegmentFault</a></td>\n<td>Yes</td>\n<td>部分用户达成</td>\n</tr>\n<tr>\n<td><a href=\"http://apple4us.com/\" target=\"_blank\" rel=\"noopener\">Apple4us</a></td>\n<td>Yes</td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><a href=\"https://www.wandoujia.com/\" target=\"_blank\" rel=\"noopener\">豌豆荚</a></td>\n<td>Yes</td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><a href=\"https://ruby-china.org/\" target=\"_blank\" rel=\"noopener\">Ruby China</a></td>\n<td>Yes</td>\n<td>标题达成</td>\n</tr>\n<tr>\n<td><a href=\"https://phphub.org/\" target=\"_blank\" rel=\"noopener\">PHPHub</a></td>\n<td>Yes</td>\n<td>标题达成</td>\n</tr>\n<tr>\n<td><a href=\"http://sspai.com/\" target=\"_blank\" rel=\"noopener\">少数派</a></td>\n<td>Yes</td>\n<td>N/A</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"参考文献\"><a href=\"#参考文献\" class=\"headerlink\" title=\"参考文献\"></a>参考文献</h2><ul>\n<li><a href=\"http://grammar.about.com/od/punctuationandmechanics/a/Guidelines-For-Using-Capital-Letters.htm\" target=\"_blank\" rel=\"noopener\">Guidelines for Using Capital Letters</a></li>\n<li><a href=\"http://en.wikipedia.org/wiki/Letter_case\" target=\"_blank\" rel=\"noopener\">Letter case - Wikipedia</a></li>\n<li><a href=\"http://www.oxforddictionaries.com/words/punctuation\" target=\"_blank\" rel=\"noopener\">Punctuation - Oxford Dictionaries</a></li>\n<li><a href=\"https://owl.english.purdue.edu/owl/section/1/6/\" target=\"_blank\" rel=\"noopener\">Punctuation - The Purdue OWL</a></li>\n<li><a href=\"http://www.wikihow.com/Use-English-Punctuation-Correctly\" target=\"_blank\" rel=\"noopener\">How to Use English Punctuation Corrently - wikiHow</a></li>\n<li><a href=\"https://zh.opensuse.org/index.php?title=Help:%E6%A0%BC%E5%BC%8F\" target=\"_blank\" rel=\"noopener\">格式 - openSUSE</a></li>\n<li><a href=\"http://zh.wikipedia.org/wiki/%E5%85%A8%E5%BD%A2%E5%92%8C%E5%8D%8A%E5%BD%A2\" target=\"_blank\" rel=\"noopener\">全角和半角 - 维基百科</a></li>\n<li><a href=\"http://zh.wikipedia.org/wiki/%E5%BC%95%E8%99%9F\" target=\"_blank\" rel=\"noopener\">引号 - 维基百科</a></li>\n<li><a href=\"http://zh.wikipedia.org/wiki/%E7%96%91%E5%95%8F%E9%A9%9A%E5%98%86%E8%99%9F\" target=\"_blank\" rel=\"noopener\">疑问惊叹号 - 维基百科</a></li>\n</ul>\n<h3 id=\"Markdown-语法说明-简体中文版\"><a href=\"#Markdown-语法说明-简体中文版\" class=\"headerlink\" title=\"Markdown 语法说明 (简体中文版)\"></a><a href=\"https://www.appinn.com/markdown/\" target=\"_blank\" rel=\"noopener\">Markdown 语法说明 (简体中文版)</a></h3><h3 id=\"源项目地址：-https-github-com-sparanoid-chinese-copywriting-guidelines\"><a href=\"#源项目地址：-https-github-com-sparanoid-chinese-copywriting-guidelines\" class=\"headerlink\" title=\"源项目地址： https://github.com/sparanoid/chinese-copywriting-guidelines\"></a>源项目地址： <a href=\"https://github.com/sparanoid/chinese-copywriting-guidelines\" target=\"_blank\" rel=\"noopener\">https://github.com/sparanoid/chinese-copywriting-guidelines</a></h3>"},{"title":"SpringCloud-config client不能连接server","date":"2017-10-30T13:01:24.000Z","_content":"[错误详情](https://github.com/spring-cloud/spring-cloud-config/issues/830)\n\n### config client\n### java代码\n```java\nnew SpringApplicationBuilder(Application.class).properties(\"spring.cloud.config.enabled:true\").web(true).run(args);\n```\n### yml配置\n```yml\nspring:\n  application:\n    name: masque\n  cloud:\n    config:\n      uri: http://localhost:8888\n      profile: dev\n      label: final\n      enabled: true\n```\n### 依赖\n```xml\n<dependencies>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-web</artifactId>\n    </dependency>\n\n    <dependency>\n        <groupId>org.springframework.cloud</groupId>\n        <artifactId>spring-cloud-starter-config</artifactId>\n    </dependency>\n\n    <dependency>\n        <groupId>org.springframework.cloud</groupId>\n        <artifactId>spring-cloud-config-server</artifactId>\n    </dependency>\n</dependencies>\n```\n### 出现的问题\n官方示例中不需要配置 `spring.cloud.config.enabled`默认是`true`现在的情况是必须配置这两个`enabled`,否则`client`不会去找`server`  项目正常启动,没有**任何异常**\n\n### 解决办法\n在对照了所有的java代码,翻阅了网上的一些博客发现,`client`多了一个依赖`spring-cloud-config-server` 去掉这个就正常了\n\n","source":"_posts/SpringCloud-config-client不能连接server.md","raw":"---\ntitle: SpringCloud-config client不能连接server\npermalink: springcloud-config-client-canot-conect-to-server\ntags:\n  - Java\n  - Spring Boot\n  - Spring Cloud\ncategories: Java相关\ndate: 2017-10-30 21:01:24\n---\n[错误详情](https://github.com/spring-cloud/spring-cloud-config/issues/830)\n\n### config client\n### java代码\n```java\nnew SpringApplicationBuilder(Application.class).properties(\"spring.cloud.config.enabled:true\").web(true).run(args);\n```\n### yml配置\n```yml\nspring:\n  application:\n    name: masque\n  cloud:\n    config:\n      uri: http://localhost:8888\n      profile: dev\n      label: final\n      enabled: true\n```\n### 依赖\n```xml\n<dependencies>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-web</artifactId>\n    </dependency>\n\n    <dependency>\n        <groupId>org.springframework.cloud</groupId>\n        <artifactId>spring-cloud-starter-config</artifactId>\n    </dependency>\n\n    <dependency>\n        <groupId>org.springframework.cloud</groupId>\n        <artifactId>spring-cloud-config-server</artifactId>\n    </dependency>\n</dependencies>\n```\n### 出现的问题\n官方示例中不需要配置 `spring.cloud.config.enabled`默认是`true`现在的情况是必须配置这两个`enabled`,否则`client`不会去找`server`  项目正常启动,没有**任何异常**\n\n### 解决办法\n在对照了所有的java代码,翻阅了网上的一些博客发现,`client`多了一个依赖`spring-cloud-config-server` 去掉这个就正常了\n\n","slug":"springcloud-config-client-canot-conect-to-server","published":1,"updated":"2018-03-25T13:41:08.294Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjf6wl6pi00112gtpq1c5jo00","content":"<p><a href=\"https://github.com/spring-cloud/spring-cloud-config/issues/830\" target=\"_blank\" rel=\"noopener\">错误详情</a></p>\n<h3 id=\"config-client\"><a href=\"#config-client\" class=\"headerlink\" title=\"config client\"></a>config client</h3><h3 id=\"java代码\"><a href=\"#java代码\" class=\"headerlink\" title=\"java代码\"></a>java代码</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> SpringApplicationBuilder(Application.class).properties(<span class=\"string\">\"spring.cloud.config.enabled:true\"</span>).web(<span class=\"keyword\">true</span>).run(args);</span><br></pre></td></tr></table></figure>\n<h3 id=\"yml配置\"><a href=\"#yml配置\" class=\"headerlink\" title=\"yml配置\"></a>yml配置</h3><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\"><span class=\"attr\">  application:</span></span><br><span class=\"line\"><span class=\"attr\">    name:</span> <span class=\"string\">masque</span></span><br><span class=\"line\"><span class=\"attr\">  cloud:</span></span><br><span class=\"line\"><span class=\"attr\">    config:</span></span><br><span class=\"line\"><span class=\"attr\">      uri:</span> <span class=\"attr\">http://localhost:8888</span></span><br><span class=\"line\"><span class=\"attr\">      profile:</span> <span class=\"string\">dev</span></span><br><span class=\"line\"><span class=\"attr\">      label:</span> <span class=\"string\">final</span></span><br><span class=\"line\"><span class=\"attr\">      enabled:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"依赖\"><a href=\"#依赖\" class=\"headerlink\" title=\"依赖\"></a>依赖</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.cloud<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-cloud-starter-config<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.cloud<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-cloud-config-server<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"出现的问题\"><a href=\"#出现的问题\" class=\"headerlink\" title=\"出现的问题\"></a>出现的问题</h3><p>官方示例中不需要配置 <code>spring.cloud.config.enabled</code>默认是<code>true</code>现在的情况是必须配置这两个<code>enabled</code>,否则<code>client</code>不会去找<code>server</code>  项目正常启动,没有<strong>任何异常</strong></p>\n<h3 id=\"解决办法\"><a href=\"#解决办法\" class=\"headerlink\" title=\"解决办法\"></a>解决办法</h3><p>在对照了所有的java代码,翻阅了网上的一些博客发现,<code>client</code>多了一个依赖<code>spring-cloud-config-server</code> 去掉这个就正常了</p>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/spring-cloud/spring-cloud-config/issues/830\" target=\"_blank\" rel=\"noopener\">错误详情</a></p>\n<h3 id=\"config-client\"><a href=\"#config-client\" class=\"headerlink\" title=\"config client\"></a>config client</h3><h3 id=\"java代码\"><a href=\"#java代码\" class=\"headerlink\" title=\"java代码\"></a>java代码</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> SpringApplicationBuilder(Application.class).properties(<span class=\"string\">\"spring.cloud.config.enabled:true\"</span>).web(<span class=\"keyword\">true</span>).run(args);</span><br></pre></td></tr></table></figure>\n<h3 id=\"yml配置\"><a href=\"#yml配置\" class=\"headerlink\" title=\"yml配置\"></a>yml配置</h3><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\"><span class=\"attr\">  application:</span></span><br><span class=\"line\"><span class=\"attr\">    name:</span> <span class=\"string\">masque</span></span><br><span class=\"line\"><span class=\"attr\">  cloud:</span></span><br><span class=\"line\"><span class=\"attr\">    config:</span></span><br><span class=\"line\"><span class=\"attr\">      uri:</span> <span class=\"attr\">http://localhost:8888</span></span><br><span class=\"line\"><span class=\"attr\">      profile:</span> <span class=\"string\">dev</span></span><br><span class=\"line\"><span class=\"attr\">      label:</span> <span class=\"string\">final</span></span><br><span class=\"line\"><span class=\"attr\">      enabled:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"依赖\"><a href=\"#依赖\" class=\"headerlink\" title=\"依赖\"></a>依赖</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.cloud<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-cloud-starter-config<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.cloud<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-cloud-config-server<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"出现的问题\"><a href=\"#出现的问题\" class=\"headerlink\" title=\"出现的问题\"></a>出现的问题</h3><p>官方示例中不需要配置 <code>spring.cloud.config.enabled</code>默认是<code>true</code>现在的情况是必须配置这两个<code>enabled</code>,否则<code>client</code>不会去找<code>server</code>  项目正常启动,没有<strong>任何异常</strong></p>\n<h3 id=\"解决办法\"><a href=\"#解决办法\" class=\"headerlink\" title=\"解决办法\"></a>解决办法</h3><p>在对照了所有的java代码,翻阅了网上的一些博客发现,<code>client</code>多了一个依赖<code>spring-cloud-config-server</code> 去掉这个就正常了</p>\n"},{"title":"提问的智慧","date":"2018-03-25T14:20:20.000Z","_content":"\n\n提问的智慧\n====================\n\n\n**艾瑞克 · 史蒂文 · 雷蒙德（_Eric Steven Raymond_）**  \n[Thyrsus Enterprises](http://www.catb.org/~esr/)  \n[esr@thyrsus.com](mailto:esr@thyrsus.com)\n\n**瑞克 · 莫恩（_Rick Moen_）**  \n[respond-auto@linuxmafia.com](mailto:respond-auto@linuxmafia.com)\n\n版权 © 2001，2006，2014 _Eric S. Raymond_，_Rick Moen_\n\n目录\n----------------\n\n- [译文](#译文) \n- [免责声明](#免责声明)\n- [引言](#引言)\n- [如何做提问前的准备](#如何做提问前的准备)\n- [如何提问](#如何提问)\n    - [仔细挑选论坛](#仔细挑选论坛)\n    - [`Stack Overflow`](#stack-overflow)\n    - [面向新手的论坛和互联网中继聊天（`IRC`）通常响应最快](#面向新手的论坛和互联网中继聊天irc通常响应最快)\n    - [第二步，使用项目的邮件列表](#第二步使用项目的邮件列表)\n    - [使用有意义且明确的主题](#使用有意义且明确的主题)\n    - [使问题容易回复](#使问题容易回复)\n    - [用清晰、语法、拼写正确的语句书写](#用清晰语法拼写正确的语句书写)\n    - [使用易于读取且标准的文件格式发送问题](#使用易于读取且标准的文件格式发送问题)\n    - [描述问题应准确且有内容](#描述问题应准确且有内容)\n    - [量不在多，精炼则灵](#量不在多精炼则灵)\n    - [别急于宣称找到`Bug`](#别急于宣称找到bug)\n    - [低声下气代替不了做自己的家庭作业](#低声下气代替不了做自己的家庭作业)\n    - [描述问题症状而不是猜测](#描述问题症状而不是猜测)\n    - [按时间先后罗列问题症状](#按时间先后罗列问题症状)\n    - [描述目标而不是过程](#描述目标而不是过程)\n    - [别要求私下回复电邮](#别要求私下回复电邮)\n    - [提问应明确](#提问应明确)\n    - [关于代码的问题](#关于代码的问题)\n    - [别张贴家庭作业式问题](#别张贴家庭作业式问题)\n    - [删除无意义的要求](#删除无意义的要求)\n    - [不要把问题标记为『紧急』，即使对你而言的确如此](#不要把问题标记为紧急即使对你而言的确如此)\n    - [礼貌总是有益的](#礼貌总是有益的)\n    - [问题解决后追加一条简要说明](#问题解决后追加一条简要说明)\n- [如何解读回答](#如何解读回答)\n    - [『读读他妈的手册（`RTFM`）』和『搜搜他妈的网络（`STFW`）』：是在告知你的问题根本不该提出来](#读读他妈的手册rtfm和搜搜他妈的网络stfw是在告知你的问题根本不该提出来)\n    - [如果你还是不明白……](#如果你还是不明白)\n    - [对待无礼](#对待无礼)\n- [别像失败者那样反应](#别像失败者那样反应)\n- [提问禁忌](#提问禁忌)\n- [好问题与坏问题](#好问题与坏问题)\n- [如果得不到回答](#如果得不到回答)\n- [如何更好地回答](#如何更好地回答)\n- [相关资源](#相关资源)\n- [鸣谢](#鸣谢)\n- [修订历史](#修订历史)\n\n译文\n==================\n\n译文：\n[印尼语](http://bulsara.host.sk/index.php?p=2005)\n[白俄罗斯语](http://www.fatcow.com/edu/smart-questions-by)\n[巴西葡萄牙语](http://www.istf.com.br/perguntas/)\n[简体中文](https://github.com/oldratlee/translations/blob/master/how-to-ask-questions-the-smart-way/README.md)\n[荷兰语](http://docs.jaspervries.nl/smart-questions/)\n[法语](http://www.gnurou.org/documents/smart-questions-fr.html)\n[乔治亚语](http://maxo127.narod.ru/Geo/Articles/smart-questions_ge.html)\n[德语](http://www.tty1.net/smart-questions_de.html)\n[希腊语](http://www.dionyziz.com/howto-smart-questions-gr/)\n[希伯来语](http://www.penguin.org.il/essays/smart-questions-he.html)\n[日语](http://www.ranvis.com/articles/smart-questions.ja.html)\n[波兰语](http://rtfm.killfile.pl/)\n[葡萄牙语](http://www.celiojunior.com.br/comofazerperguntas.htm)\n[罗马尼亚语](http://wiki.lug.ro/mediawiki/index.php/Cum_se_pun_%C3%AEntreb%C4%83ri_%C3%AEn_mod_inteligent)\n[俄语](http://maddog.sitengine.ru/smart-question-ru.html)\n[西班牙语](http://www.sindominio.net/ayuda/preguntas-inteligentes.html)\n[泰语](http://wiki.opentle.org/Smart-questions)\n如果你想复制、镜像、翻译或引用本文，请参阅我的 [复制协议](http://www.catb.org/~esr/copying.html)。\n\n免责声明\n==================\n\n许多项目的网站在如何取得帮助的部分链接了本文，这没有关系，也正是我们想要的。\n但如果你是该项目生成此链接的网管，请在链接附近显著位置注明：**_我们不提供该项目的服务支持！_**\n\n我们已经领教了没有此说明带来的痛苦，我们将不停地被一些白痴纠缠，他们认为既然我们发布了本文，那么我们就有责任解决世上所有的技术问题。\n\n如果你是因为需要帮助正在阅读本文，然后就带着可以直接从作者那取得帮助的印象离开，那么 **_你_** 就不幸成了我们所说的白痴之一。\n别向 **_我们_** 提问，我们不会理睬的。 我们只是在这教你如何从那些真正懂得你软硬件问题的人那里取得帮助，但 99.9％ 的时间我们不会是那些人。\n除非你非常地 **_确定_** 本文的作者是你遇到问题方面的专家，请不要打搅，这样大家都更开心一点。\n\n引言\n==================\n\n在 [黑客](http://www.catb.org/~esr/faqs/hacker-howto.html) 的世界里，你所提技术问题的解答很大程度上取决于你提问的方式与解决此问题的难度，本文将教你如何提问才更有可能得到满意的答复。\n\n开源程序的应用已经很广，你通常可以从其他更有经验的用户而不是黑客那里得到解答。\n这是好事，他们一般对新手常有的毛病更容忍一点。然而，使用我们推荐的方法，像对待黑客那样对待这些有经验的用户，通常能最有效地得到问题的解答。\n\n第一件需要明白的事是黑客喜欢难题和激发思考的好问题。假如不是这样，我们也不会写本文了。\n如果你能提出一个有趣的问题让我们咀嚼玩味，我们会感激你。好问题是种激励与礼物，帮助我们发展认知，揭示没有注意或想到的问题。\n在黑客中，『好问题！』 是非常热烈而真挚的赞许。\n\n此外，黑客还有遇到简单问题就表现出敌视或傲慢的名声。\n有时，我们看起来还对新手和愚蠢的家伙有条件反射式的无礼，但事情并不真是这样。\n\n我们只是毫无歉意地敌视那些提问前不愿思考、不做自己家庭作业的人。\n这种人就像时间无底洞 —— 他们只知道索取，不愿意付出，他们浪费了时间，这些时间本可用于其它更有趣的问题或更值得回答的人。\n我们将这种人叫做 『失败者（loser）』（由于历史原因，我们有时将『loser』拼写为『lusers』 。）\n\n我们意识到许多人只是想使用我们写的软件，他们对学习技术细节没有兴趣。对大多数人而言，计算机只是种工具，是种达到目的的手段而已。\n他们有自己的生活并且有更要紧的事要做，我们承认这点，也从不指望每个人都对这些让我们着迷的技术问题感兴趣。\n不过，我们回答问题的风格是为了适应那些 **_真正_** 对此有兴趣并愿意主动参与解决问题的人，这一点不会变，也不该变。\n如果连这都变了，我们就会在自己能做得最好的事情上不再那么犀利。\n\n我们（大多数）是自愿者，从自己繁忙的生活中抽时间来回答问题，有时会力不从心。\n因此，我们会毫不留情地滤除问题，特别是那些看起来像是失败者提的，以便更有效地把回答问题的时间留给那些胜利者。\n\n如果你认为这种态度令人反感、以施惠者自居或傲慢自大，请检查你的假设，我们并未要求你屈服 ——\n事实上，假如你做了该做的努力，我们中的大多数将非常乐意平等地与你交流，并欢迎你接纳我们的文化。\n试图去帮助那些不愿自救的人对我们简直没有效率。不懂没有关系，但愚蠢地做事不行。\n\n所以，你不必在技术上很在行才能吸引我们的注意，但你 **_必须_** 表现出能引导你在行的姿态 —— 机敏、有想法、善于观察、乐于主动参与问题的解决。\n如果你做不到这些使你与众不同的事情，我们建议你付钱跟别人签商业服务合同，而不是要求黑客无偿帮助。\n\n如果你决定向我们求助，你不会想成为一名失败者，你也不想被看成一个失败者。\n得到快速有效回答的最好方法是使提问者看起来像个聪明、自信和有想法的人，并且暗示只是碰巧在某一特别问题上需要帮助。\n\n（欢迎对本文指正，可以将建议发至 [esr@thyrsus.com](mailto:esr@thyrsus.com) 或 [respond-auto@linuxmafia.com](mailto:esr@thyrsus.com)。\n请注意，本文不想成为一般性的 [网络礼仪](http://www.ietf.org/rfc/rfc1855.txt) 指南，我一般会拒绝那些与引出技术论坛中有用的回答不特别相关的建议。）\n\n-----------------\n\n如何做提问前的准备\n==================\n\n在通过电邮、新闻组或论坛提技术问题以前，做以下事情：\n\n1.  尝试在你准备提问论坛的历史文档中搜索答案\n2.  尝试搜索互联网以找到答案\n3.  尝试阅读手册以找到答案\n4.  尝试阅读『常见问题文档（`FAQ`）』以找到答案\n5.  尝试自己检查或试验以找到答案\n6.  尝试请教懂行的朋友以找到答案\n7.  如果你是程序员，尝试阅读源代码以找到答案\n\n提问时，请先表明你已做了上述事情，这将有助于建立你不是寄生虫与浪费别人时间的印象。最好再表述你从中 **_学到的东西_** ，我们喜欢回答那些表现出能从答案中学习的人。\n\n运用某些策略，比如用谷歌（`Google`）搜索你遇到的各种错误提示（既搜索 [谷歌论坛](http://groups.google.com/)，也搜索网页）， 这样很可能直接就找到了解决问题的文档或邮件列表线索。\n即使没有结果，在邮件列表或新闻组寻求帮助时提一句『我在谷歌中搜过下列句子但没有找到什么有用的东西』 也是件好事，至少它表明了搜索引擎不能提供哪些帮助。\n将搜索关键词与你的问题及可能的解决方案联系起来，还有助于引导其他有类似问题的人。\n\n别着急，不要指望几秒钟的谷歌搜索就能解决一个复杂的问题。读一下常见问题文档。在向专家提问之前，先向后靠靠放松一下，再思考一下问题。\n相信我们，他们能从你的提问看出你做了多少阅读与思考，如果你是有备而来，将更有可能得到解答。不要将所有问题一股脑抛出，只因你的第一次搜索没有结果（或者结果太多）。\n\n认真地思考，准备好你的问题。轻率的提问只能得到轻率的回答，或者压根没有。在提问时，你越是表现出在此前做过思考与努力去解决自己的问题，你越有可能得到真正的帮助。\n\n注意别提错问题。如果提问基于错误的假设，某黑客多半会一边想 『愚蠢的问题……』，一边按将错就错的答案回复你，并且希望这种只是得到你自己『问的问题』而非真正所需的解答，给你一个教训。\n\n永远不要假设你 **_有资格_** 得到解答。你没有这种资格，毕竟你没有为此服务付费。\n如果你能够提出有内容、有趣和激励思考的问题 —— 那种毫无疑问能够向社区贡献经验，而不仅仅是消极地要求从别人那获取知识的问题，你将『挣到』答案。\n\n另一方面，表明你有能力也乐意参与问题的解决是个很好的开端。『有没有人能指个方向？』，我这还差点什么？』，『我应该查哪个网站？』，\n通常要比 『请给出我可以用的完整步骤』更容易得到回复，因为你表明了只要有人能指个方向，你就很乐意完成剩下的过程。\n\n如何提问\n==================\n\n仔细挑选论坛\n-------------------\n\n要对在哪提问留心，如果你做了下述事情，多半会被一笔勾销或被看成『失败者』：\n\n* 张贴与论坛主题无关的问题\n* 在面向高级技术问题的论坛上张贴肤浅的问题，反之亦然\n* 在太多不同的新闻组同时张贴\n* 给既非熟人也没有义务解决你问题的人发送你私人的电邮\n\n为保护通信的渠道不被无关的东西淹没，黑客会除掉那些没有找对地方的问题，你不会想让这种事落到自己头上的。\n\n因此，第一步是找对论坛。谷歌和其它搜索引擎还是你的朋友，可以用它们搜索你遇到困难的软硬件问题最相关的项目网站。那里通常都有项目的常见问题（`FAQ`）、邮件列表及文档的链接。\n如果你的努力（包括 **_阅读_** `FAQ`）都没有结果，这些邮件列表就是最后能取得帮助的地方。项目的网站也许还有报告`Bug`的流程或链接，如果是这样，去看看。\n\n向陌生的人或论坛发送邮件极有可能是在冒险。譬如，不要假设一个内容丰富的网页的作者想充当你的免费顾问，不要对你的问题是否会受到欢迎做太乐观的估计 —— 如果你不确定，向别处发或者压根别发。\n\n在选择论坛、新闻组或邮件列表时，别太相信名字，先看看`FAQ`或者许可书以明确你的问题是否切题。发贴前先翻翻已有的帖子，这样可以让你感受一下那里行事的方式。\n事实上，张贴前在新闻组或邮件列表的历史文档中搜索与你问题相关的关键词是个极好的主意，也许就找到答案了。即使没有，也能帮助你归纳出更好的问题。\n\n别像机关枪似的一次性『扫射』所有的帮助渠道，这就像大喊大叫一样会令人不快，温柔地一个一个来。\n\n弄懂主题！最典型的错误之一是在某种致立于跨平台可移植的语言、库或工具的论坛中提关于`Unix`或`Windows`操作系统程序接口的问题。如果你不明白为什么这是大错，最好在搞清楚概念前什么也别问。\n\n一般来说，在仔细挑选的公共论坛中提问比在私有论坛中提同样的问题更容易得到有用的回答。有几个道理支持这点，一是看潜在的回复者有多少，二是看论坛的参与者有多少，黑客更愿回答能启发多数人的问题。\n\n可以理解，老练的黑客和一些流行软件的作者正在承受过多的不当消息。就像那根最后压垮骆驼背的稻草一样，\n你的加入也有可能使情况走向极端 —— 已经好几次了，一些流行软件的作者退出了对自己软件的支持，因为伴随而来的涌入其私人邮箱的垃圾邮件变得无法忍受。\n\n`Stack Overflow`\n-------------------\n\n搜索 **_之后_** 再在`Stack Exchange`提问。\n\n近年来，`Stack Exchange`社区站点已经成为回答技术问题和其他问题的一个主流方式，甚至是很多开源项目的首选论坛。\n\n查看`Stack Exchange`之前先搜索谷歌；谷歌对`Stack Exchange`的索引是实时的。\n如果有人问过类似的问题，这样很容易就找到了，`Stack Exchange`站点的内容往往在搜索结果的顶部出现。\n如果没有找到要的内容，可以在与你问题最相关的网站上重新搜索（见下文说明）。通过标签搜索可以缩小结果范围。\n\n如果你还是没有发现任何内容，把你的问题发表到 **_一个_** 最相关的网站上。使用格式化工具，特别是对于代码，并添加与问题内容相关的标签（尤其比如 编程语言，操作系统，或者你遇到麻烦的库名）。\n如果评论者要求你提供更多信息，请编辑你的主贴新加上来。如果答案对你有帮助，请单击向上箭头给这个答案投票；如果有答案给出了解决办法，请点击投票箭头下面的勾，以接受它成为正确答案。\n\n`Stack Exchange`已经发展到[超过100个站点](http://stackexchange.com/sites)，下面说明了什么问题最合适放在哪个站点：\n\n- [`Super User`](http://superuser.com/)是关于通用计算的问题。如果你的问题和代码无关，或者你说的只是程序在网络连接上的问题，九成在这里问。\n- [`Stack Overflow`](http://stackoverflow.com/)是关于编程问题。\n- [`Server Fault`](http://serverfault.com/)是关于服务器和网络管理的问题。\n\n有几个项目有自己的特定站点，包括[`Android`](http://android.stackexchange.com/)、[`Ubuntu`](http://askubuntu.com/)、[`TeX/LaTeX`](http://tex.stackexchange.com/)和[`SharePoint`](http://sharepoint.stackexchange.com/)。请检查一下`Stack Exchange`以确定现在具体有哪些站点。\n\n面向新手的论坛和互联网中继聊天（`IRC`）通常响应最快\n-------------------\n\n本地的用户组织或者你所用的`Linux`发行版也许正在宣传新手取得帮助的论坛或`IRC`通道（在一些非英语国家，新手论坛很可能还是邮件列表），这些地方是开始提问的好去处，特别是当你觉得遇到的也许只是相对简单或者很普通的问题时。\n经过宣传的`IRC`通道是公开邀请提问的地方，通常可以得到实时的回复。\n\n事实上，如果出问题的程序来自某发行版（这很常见），最好先去该发行版的论坛或邮件列表中提问，再到程序本身的项目论坛或邮件列表。否则该项目的黑客可能仅仅回复『用 **_我们的_** 代码』。\n\n在任何论坛发贴以前，先看看有没有搜索功能。如果有，就试着用问题的几个关键词搜索一下，也许就有帮助。如果在此之前你已做过全面的网页搜索（你应该这样去做），还是再搜索一下论坛，搜索引擎有可能没来得及索引此论坛的全部内容。\n\n通过论坛或`IRC`通道提供项目的用户支持有增长的趋势，电子邮件交流则更多地为项目开发者保留。所以先在论坛或`IRC`中寻求与该项目相关的帮助。\n\n第二步，使用项目的邮件列表\n-------------------\n\n当某个项目存在开发者邮件列表时，要向列表而不是其中的个别成员提问，即使你确信他能最好地回答你的问题。查一查项目的文档和主页，找到项目的邮件列表并使用它。采用这种办法有几个很好的理由：\n\n* 向一个开发者提的好问题，对整个项目组也会有益。反之，如果你认为自己的问题对整个项目组来说太愚蠢，就没有理由去去骚扰单个开发者。\n* 向列表提问可以分散开发者的负担，单个开发者（尤其是项目领导）也许太忙以至于没法回答你的问题。\n* 大多数邮件列表都要存档，那些存档将被搜索引擎索引，如果你向列表提问并得到解答，将来其它人可以通过网页搜索找到你的问题和答案，也就不用再次发问了。\n* 如果某些问题经常被问到，开发者可以利用此信息改进文档或软件本身，以使其更清楚。如果只是私下提问，就没有人能看到最常见问题的完整场景。\n\n如果一个项目既有 『用户』 也有『开发者』（或 『黑客』）邮件列表或论坛，而你又不摆弄那些代码，向『用户』列表或论坛提问。不要假设自己会在开发者列表中受到欢迎，那些人多半会遭受你的噪音干扰。\n\n然尔，如果你 **_确信_** 你的问题不一般，而且在『用户』 列表或论坛中几天都没有回复，可以试试『开发者』列表或论坛。\n建议你在张贴前最好先暗暗地观察几天，至少看看最近几天保存的帖子，以了解那的行事方式（事实上这是参与任何私有或半私有列表的好主意）\n\n如果你找不到一个项目的邮件列表，而只能查到项目维护者的地址，只管向其发信。\n即便在这种情况下，也别假设项目的邮件列表不存在。在你的电子邮件中陈述你已经试过但没有找到合适的邮件列表，也提及你不反对将自己的邮件转发给他人\n（许多人认为，即使没什么秘密，私人电子邮件也不应该被公开。通过允许将你的电子邮件转发他人，你给了相应人员处置你邮件的选择）。\n\n使用有意义且明确的主题\n-------------------\n\n在邮件列表、新闻组或论坛中，主题是你在五十个或更少的字以内吸引有资格专家注意的黄金机会，不要用诸如 『请帮我』 （更别提大写的 『请帮我！！！！』，这种主题的消息会被条件反射式地删掉）之类的唠叨浪费机会。\n不要用你痛苦的深度来打动我们，相反，要在这点空间中使用超级简明扼要的问题描述。\n\n编写主题题头好的惯例格式是『对象 —— 偏差』，许多技术支持组织都支持这么做。在『对象』部分指明是哪一个或哪一组东西有问题，在『偏差』部分则描述与期望的行为不一致的地方。\n\n**愚蠢：**\n\n> 救命啊！我的笔记本视频工作不正常！\n\n**明智：**\n\n> `X.org 6.8.1`扭曲鼠标光标，`MV1005`型号的某显卡芯片组\n\n**更明智：**\n\n> 使用`MV1005`型号的某显卡芯片组在`X.org 6.8.1`的鼠标光标被扭曲\n\n编写 『对象 —— 偏差』式描述的过程有助于你组织对问题的细致思考。是什么被影响了？仅仅是鼠标光标或者还有其它图形？\n只在`X.org`中出现？或只是在其`6.8.1`版中？是针对某显卡芯片组？或者只是其中的`MV1005`型号？一个黑客只需描一眼就能够立即明白什么是你遇到的问题，什么是你自己的问题。\n\n更一般地，想像一下在一个只显示主题的文档索引中查找。让你的主题更好地反映问题，可以使下一个搜索类似问题的人能够在文档中直接就找到答案的线索，而不用再次发贴提问。\n\n如果你想在回复中提问，确保改变主题以表明你是在问一个问题，一个主题像 『Re: 测试』 或者 『Re: 新`Bug`』的消息不太可能引起足够的注意。同时，将回复中与新主题不甚相关的引用内容尽量删除。\n\n对于列表消息，不要直接点击回复按钮来开始一个全新的线索，这将限制你的观众。有些邮件阅读程序，比如`mutt`，允许用户按线索排序并通过折叠线索来隐藏消息，这样做的人永远看不到你发的消息。\n\n仅仅改变主题还不够。`mutt`和其它一些邮件阅读程序还要检查邮件头主题以外的其它信息，以便为其指定线索，所以宁可发一个全新的邮件。\n\n在论坛，因为消息与特定的线索紧密结合，并且通常在线索之外不可见，好的提问方式略有不同，通过回复提问并不要紧。不是所有论坛都允许在回复中出现分离的主题，而且这样做了基本上没有人会去看。\n不过，通过回复提问本身就是令人怀疑的做法，因为它们只会被正在查看该线索的人读到。所以，除非你 **_只想_** 在该线索当前活跃的人群中提问，还是另起炉灶比较好。\n\n使问题容易回复\n-------------------\n\n以『请向……回复』来结束问题多半会使你得不到回答。如果你觉得花几秒钟在邮件客户端设置一下回复地址都麻烦，我们也觉得花几秒钟考虑你的问题更麻烦。\n如果你的邮件客户端程序不支持这样做，[换个好点的](http://linuxmafia.com/faq/Mail/muas.html)；如果是操作系统不支持所有这种邮件客户端程序，也换个好点的。\n\n在论坛，要求通过电子邮件回复是完全无礼的，除非你确信回复的信息也许是敏感的（而且有人会为了某些未知的原因，只让你而不是整个论坛知道答案）。\n如果你只是想在有人回复线索时得到电子邮件提醒，可以要求论坛发送。几乎所有论坛都支持诸如『留意本线索』、『有回复发送邮件』等功能。\n\n用清晰、语法、拼写正确的语句书写\n-------------------\n\n经验告诉我们，粗心与草率的作者通常也粗心与草率地思考和编程（我敢打赌）。为这些粗心与草率的思考者回答问题没有什么好处，我们宁可将时间花在其它地方。\n\n清楚、良好地表达你的问题非常重要。如果你觉得这样做麻烦，我们也觉得注意你的问题麻烦。\n花点额外的精力斟酌一下字句，用不着太僵硬与正式 —— 事实上，黑客文化很看重能准确地使用非正式、俚语和幽默的语句。但它 **_必须_** 很准确，而且有迹象表明你是在思考和关注问题。\n\n正确地拼写、使用标点和大小写，不要将『its』混淆为『it's』，『loose』搞成『lose』或者将『discrete』弄成 『discreet』。不要全部用大写，这会被视为无礼的大声嚷嚷。\n（全部小写也好不到哪去，因为不易阅读。_Alan Cox_ 也许可以这样做，但你不行。）\n【**_译注_**：[_Alan Cox_](https://en.wikipedia.org/wiki/Alan_Cox) 著名黑客，`Linux`内核的重要参与者】\n\n一般而言，如果你写得像个半文盲似的傻子，多半得不到理睬。也不要使用即时通讯中的简写，如将『you』简化为『u』会使你看起来像一个为了节约二次击键的半文盲式的傻子。\n更糟的是，如果像个小孩似地鬼画桃符那绝对是在找死，可以肯定没人会理你（或者最多是给你一大堆指责与挖苦）。\n\n如果在非母语论坛提问，你的拼写与语法错误会得到有限的宽容，但懒惰完全不会被容忍（是的，我们通常看得出其中的差别）。\n同时，除非你知道回复者使用的语言，请使用英语书写。繁忙的黑客一般会直接删除用他们看不懂语言写的消息。\n在互联网上英语是工作语言，用英语书写可以将你的问题不被阅读就被直接删除的可能性降到最低。\n\n如果你用英语书写但它是你的第二语言，最好提醒潜在的回复者语言上可能的困难以便绕过这个问题，比如：\n\n*   英语不是我的母语，请谅解拼写错误。\n*   如果您使用某某语言，请电邮/私聊我，也许我需要您的协助翻译我的问题。\n*   对于这个技术术语本身我很熟悉，但对于它的一些俚语或习惯表达方式就不太明白了。\n*   我已经同时用某某语及英语提问，如果您使用两者之一回复，我很乐意翻译。\n\n使用易于读取且标准的文件格式发送问题\n-------------------\n\n如果你人为地将问题搞得难以阅读，它多半会被忽略，人们更愿读易懂的问题，所以：\n\n* 使用纯文本而不是`HTML`（ [关闭`HTML`](http://www.birdhouse.org/etc/evilmail.html) 并不难）\n* 使用`MIME`附件通常没有问题，前提是真正有内容（譬如附带的源文件或补丁），而不仅仅是邮件客户端程序生成的模板（譬如只是消息内容的拷贝）。\n* 不要发送整段只是单行句子但多次折回的邮件（这使得回复部分内容非常困难）。设想你的读者是在80个字符宽的文本终端阅读邮件，设置你的行折回点小于 80 列。\n* 但是，也 **_不要_** 用任何固定列折回数据（譬如日志文件拷贝或会话记录）。数据应该原样包含，使回复者确信他们看到的是与你看到的一样的东西。\n* 在英语论坛中，不要使用`MIME`可打印字符引用编码编码（[`Quoted-Printable encoding`](https://zh.wikipedia.org/wiki/Quoted-printable)）发送消息。这种编码对于张贴非`ASCII`语言可能是必须的，但很多邮件程序并不支持。\n    当它们分断时，那些文本中四处散布的 『`=20`』符号既难看也分散注意力，甚至有可能破坏内容的语意。\n* **_永远不要_** 指望黑客们阅读使用封闭的专用格式编写的文档，诸如微软公司的`Word`或`Excel`文件等。\n    大多数黑客对此的反应就像有人将还在冒热气的猪粪倒在你门口时你的反应一样。即使他们能够处理，也很厌恶这么做。\n* 如果你从使用视窗的电脑发送电子邮件，关闭问题颇多的微软『聪明引用』功能（在『工具』 -> 『自动纠正选项』的『输入时自动格式化』下去掉聪明引用的选框），以免在你的邮件中到处散布垃圾字符。\n* 在论坛，勿滥用『表情符号』和『`HTML`』功能（当它们提供时）。一两个表情符号通常没有问题，但花哨的彩色文本倾向于使人认为你是个无能之辈。过滥地使用表情符号、色彩和字体会使你看来像个傻笑的小姑娘。\n    这通常不是个好主意，除非你只是对性而不是有用的回复更有兴趣。\n\n如果你使用图形用户界面的邮件客户端程序（如网景公司的`Messenger`、微软公司的`Outlook`或者其它类似的），注意它们的缺省配置不一定满足这些要求。\n大多数这类程序有基于菜单的『查看源码』命令，用它来检查发送文件夹中的消息，以确保发送的是没有多余杂质的纯文本文件。\n\n描述问题应准确且有内容\n-------------------\n\n*   仔细、清楚地描述问题的症状\n*   描述问题发生的环境（主机、操作系统、应用程序，任何相关的），提供销售商的发行版和版本号（如：『`Fedora Core 7`』、『`Slackware 9.1`』等）\n*   描述提问前做过的研究及其理解。\n*   描述提问前为确定问题而采取的诊断步骤。\n*   描述最近对计算机或软件配置的任何相关改变。\n*   如果可能，提供在可控环境下重现问题的方法。\n\n尽最大努力预测黑客会提到的问题，并提前备好答案。\n\n如果你认为是代码有问题，向黑客提供在可控环境下重现问题的方法尤其重要。当你这么做时，得到有用且及时回复的可能性将大大增加。\n\n西蒙 · 泰瑟姆（_Simon Tatham_）写过一篇 [如何有效报告`Bug`](http://www.chiark.greenend.org.uk/~sgtatham/bugs.html) 的文章，我强烈推荐各位阅读。\n\n量不在多，精炼则灵\n-------------------\n\n你应该写得精炼且有内容，简单地将一大堆代码或数据罗列在求助消息中达不到目的。如果你有一个很大且复杂的测试样例让程序崩溃，尝试将其裁剪得越小越好。\n\n至少有三个理由支持这点。第一，让别人看到你在努力简化问题使你更有可能得到回复。\n第二，简化问题使你更有可能得到 **_有用的_** 回复。第三，在提纯`Bug`报告的过程中，你可能自己就找到了解决办法或权宜之计。\n\n别急于宣称找到`Bug`\n-------------------\n\n当你在一个软件中遇到问题，除非你 **_非常、非常_** 的有根据，不要动辄声称找到了`Bug`。\n提示：除非你能提供解决问题的源代码补丁，或者对前一版本的回归测试表现出不正确的行为，否则你都多半不够完全确信。\n对于网页和文档也如此，如果你发现了文档的『`Bug`』，你应该能提供相应位置的替代文本。\n\n记住，还有许多其它用户并未经历你遇到的问题，否则你在阅读文档或搜索网页时就应该发现了（你在报怨前已经做了这些，[是吧](#如何做提问前的准备) ？）。\n这也意味着很有可能是你弄错了而不是软件本身有问题。\n\n编写软件的人总是非常辛苦地使它尽可能完美。如果你声称找到了`Bug`，也就置疑了他们的能力，即使你是对的，也有可能会使其中的部分人感到不快。\n此外，在主题中嚷嚷『`Bug`』也是特别不老练的。\n\n提问时，即使你私下非常确信已经发现一个真正的`Bug`，最好写得像是 **_你_** 做错了什么。如果真的有`Bug`，你会在回复中看到这点。\n这样做的话，如果真有`Bug`，维护者就会向你道歉，这总比你弄砸了然后欠别人一个道歉要强。\n\n低声下气代替不了做自己的家庭作业\n-------------------\n\n有些人明白他们不应该粗鲁或傲慢地行事并要求得到答复，但他们退到相反的低声下气的极端：\n『我知道我只是个可怜的新丁，一个失败者，但……』。这既使人困扰，也没有用，当伴随着对实际问题含糊的描述时还特别令人反感。\n\n别用低级灵长类动物的办法浪费你我的时间，相反，尽可能清楚地描述背景情况和你的问题，这比低声下气更好地摆正了你的位置。\n\n有时，论坛设有单独的初学者提问版面，如果你真的认为遇到了肤浅的问题，到那去就是了，但一样别低声下气。\n\n描述问题症状而不是猜测\n-------------------\n\n告诉黑客是什么导致了问题是没用的（如果你的诊断理论是了不起的东西，你还会向别人咨询求助吗？）。\n所以，确保只是告诉他们问题的原始症状，而不是你的解释和理论，让他们来解释和诊断。如果你认为陈述自己的猜测很重要，应清楚地说明这只是你的猜测并描述为什么它们不起作用。\n\n**愚蠢：**\n\n> 我在编译内核时接连遇到`SIG11`错误，怀疑主板上的某根电路丝断了，找到它们的最好办法是什么？\n\n**明智：**\n\n> 我组装的电脑（`K6/233 CPU、FIC-PA2007`主板[威盛`Apollo VP2`芯片组]、`Corsair PC133 SDRAM 256Mb`内存）最近在开机 20 分钟左右、做内核编译时频繁地报`SIG11`错，但在头 20 分钟内从不出问题。\n> 重启动不会复位时钟，但整夜关机会。更换所有内存未解决问题，相关的典型编译会话日志附后。\n\n由于以上这点许多人似乎难以掌握，这里有句话可以提醒你：『所有的诊断专家都来自密苏里州』。\n美国国务院的官方座右铭则是『让我看看』（出自国会议员威勒德 · D · 范迪弗［_Willard D. Vandiver_］在1899年时的讲话：\n『我来自一个出产玉米、棉花、牛蒡和民主党人的国家，滔滔雄辩既不能说服我，也不会让我满意。我来自密苏里州，你必须让我看看。』）\n针对诊断者而言，这并不是怀疑，而只是一种真实而有用的需求，以便让他们看到与你看到的原始证据尽可能一致的东西，而不是你的猜测与总结。所以，让我们看看。\n\n按时间先后罗列问题症状\n-------------------\n\n刚出问题之前发生的事情通常包含有解决问题最有效的线索。所以，记录中应准确地描述你、电脑和软件在崩溃前都做了什么。\n在命令行处理的情况下，有会话日志（如运行脚本工具生成的）并引用相关的若干（如20）行记录会非常有帮助。\n\n如果崩溃的程序有诊断选项（如`-v`详述开关），试着选择这些能在记录中增加排错信息的选项。\n记住，『多』不等于『好』。试着选取适当的排错级别以便提供有用的信息而不是将阅读者淹没在垃圾中。\n\n如果你的记录很长（如超过四段），在开头简述问题随后按时间先后罗列详细过程也许更有用。这样，黑客在读你的记录时就知道该注意哪些内容了。\n\n描述目标而不是过程\n-------------------\n\n如果你想弄清楚如何做某事（而不是报告一个`Bug`），在开头就描述你的目标，然后才陈述遇到问题的特定步骤。\n\n经常出现这种情况，寻求技术帮助的人在脑袋里有个更高层次的目标，他们在自以为能达到目标的特定道路上被卡住了，然后跑来问该怎么走，但没有意识到这条路本身有问题，结果要费很大的劲才能通过。\n\n**愚蠢：**\n\n> 我怎样才能让某图形程序的颜色拾取器取得十六进制的`RGB`值？\n\n**明智：**\n\n> 我正试着用自己选定数值的颜色替换一幅图片的色表，我现在知道的唯一方法是编辑每个表槽，但却无法让某图形程序的颜色拾取器取得十六进制的`RGB`值。\n\n第二种提法是明智的，它使得建议采用更合适的工具以完成任务的回复成为可能。\n\n别要求私下回复电邮\n-------------------\n\n黑客们认为问题的解决过程应该公开、透明，此过程中如果更有才能的人注意到不完整或者不当之处，最初的回复才能够、也应该被纠正。同时，作为回复者也因为能力和学识被其它同行看到而得到某种回报。\n\n当你要求私下回复时，此过程和回报都被中止。别这样做，让 **_回复者_** 来决定是否私下回答 —— 如果他真这么做了，通常是因为他认为问题编写太差或者太肤浅，以至于对其它人毫无意义。\n\n对这条规则存在一条有限的例外，如果你确信提问可能会引来大量雷同的回复时，那么『向我发电邮，我将为论坛归纳这些回复』将是神奇的句子。\n试着将邮件列表或新闻组从洪水般雷同的回复中解救出来是非常有礼貌的 —— 但你必须信守诺言。\n\n提问应明确\n-------------------\n\n漫无边际的问题通常也被视为没有明确限制的时间无底洞。\n最有可能给你有用答案的人通常也是最忙的人（假如只是因为他们承担了太多工作的话），这些人对于没有止境的时间无底洞极其敏感，所以他们也倾向于讨厌那些漫无边际的问题。\n\n如果你明确了想让回复者做的事（如指点方向、发送代码、检查补丁或其它），你更有可能得到有用的回复。\n因为这样可以让他们集中精力并间接地设定了他们为帮助你需要花费的时间和精力上限，这很好。\n\n要想理解专家生活的世界，可以这样设想：那里有丰富的专长资源但稀缺的响应时间。你暗中要求他们奉献的时间越少，你越有可能从这些真正懂行也真正很忙的专家那里得到解答。\n\n所以限定你的问题以使专家回答时需要付出的时间最少 —— 这通常与简化问题还不太一样。\n举个例，『请问可否指点一下哪有好一点的 X 解释？』通常要比『请解释一下 X』明智。如果你的代码不运行了，通常请别人看看哪有问题比叫他们帮你改正更明智。\n\n关于代码的问题\n-------------------\n\n别要求他人给你出问题的代码排错而不提及应该从何入手。张贴几百行的代码，然后说一声『它不能运行』会让你得不到理睬。\n只贴几十行代码，然后说一句『在第七行以后，本应该显示<x>，但实际出现的是<y>』非常有可能让你得到回复。\n\n最精确描述代码问题的方法是提供一个能展示问题的最小测试样例。什么是最小测试样例？\n它是对问题的展现，只需要刚好能够重现非预期行为的代码即可。如何生成一个最小测试样例？\n如果你知道哪一行或哪一段代码会产生问题，将其复制并提供刚好够用的外围支撑代码以构成一个完整的样例\n（够用是指源码刚好能被编译器、解释器或任何处理它的程序所接受）。如果你不能将问题缩小到特定的段落，复制源码并去除那些与问题无关的代码段。\n你能提供的最小测试样例越小越好（参见 [量不在多，精炼则灵](#量不在多精炼则灵) ）。\n\n生成一个非常小的最小测试样例并不总是可能，但尽力去做是很好的锻练，这有可能帮助你找到需要自己解决的问题。即使你找不到，黑客们喜欢看到你努力过，这将使他们更合作。\n\n如果你只是想让别人帮忙审一下代码，在最开头就要说出来，并且一定要提到你认为哪一部分特别需要关注以及为什么。\n\n别张贴家庭作业式问题\n-------------------\n\n黑客们善于发现『家庭作业』式的问题。我们中的大多数人已经做了自己的家庭作业，那是该 **_你_** 做的，以便从中学到东西。问一下提示没有关系，但不是要求完整的解决方案。\n\n如果你怀疑自己碰到了一个家庭作业式的问题，但仍然无法解决，试试在用户组、论坛或（作为最后一招）在项目的『用户』邮件列表或论坛中提问。尽管黑客们 **_会_** 看出来，一些老用户也许仍会给你提示。\n\n删除无意义的要求\n-------------------\n\n抵制这种诱惑，即在求助消息末尾加上诸如『有人能帮我吗？』或『有没有答案？』之类在语义上毫无意义的东西。\n第一，如果问题描述还不完整，这些附加的东西最多也只能是多余的。第二，因为它们是多余的，黑客们会认为这些东西烦人 —— 就很有可能用逻辑上无误但打发人的回复，诸如『是的，你可以得到帮助』和『不，没有给你的帮助』。\n\n一般来说，避免提『是或否』类型的问题，除非你想得到 [『是或否』类型的回答](http://homepage.ntlworld.com./jonathan.deboynepollard/FGA/questions-with-yes-or-no-answers.html)。\n\n不要把问题标记为『紧急』，即使对你而言的确如此\n-------------------\n\n这是你的问题，不要我们的。宣称『紧急』极有可能事与愿违：\n大多数黑客会直接删除这种消息，他们认为这是无礼和自私地企图得到即时与特殊的关照。而且『紧急』或其它有类似含义的主题有可能触发垃圾过滤规则，潜在的回复者可能永远看不到你的问题！\n\n有一点点局部的例外，如果你是在一些知名度很高、会使黑客们激动的地方使用程序，也许值得这样去做。在这种情况下，如果你有期限压力，也很有礼貌地提到这点，人们也许会有足够的兴趣快一点回答。\n\n当然，这是非常冒险的，因为黑客们对什么是令人激动的标准多半与你的不同。\n譬如从国际空间站这样张贴没有问题，但代表感觉良好的慈善或政治原因这样做几乎肯定不行。\n事实上，张贴诸如『紧急：帮我救救这个毛绒绒的小海豹！』肯定会让黑客回避你或觉得窝火，即使他们认为毛绒绒的小海豹很重要。\n\n如果你觉得这不可思议，再把剩下的内容多读几遍，直到弄懂了再发贴也不迟。\n\n礼貌总是有益的\n-------------------\n\n礼貌一点，使用『请』和『谢谢你的关注』或者『谢谢你的关照』，让别人明白你感谢他们无偿花时间帮助你。\n\n坦率地讲，这一点没有语法正确、文字清晰、准确、有内容和避免使用专用格式重要（同时也不能替代它们）。\n黑客们一般宁可读有点唐突但技术鲜明的`Bug`报告，而不是那种有礼但含糊的报告。（如果这点让你不解，记住我们是按问题能教我们什么来评价它的）\n\n然尔，如果你已经谈清楚了技术问题，客气一点肯定会增加你得到有用回复的机会。\n\n（我们必须指出，本文唯一受到一些老黑客认真反对的地方是以前曾经推荐过的『提前谢了』，一些黑客认为这隐含着事后不用再感谢任何人的暗示。\n我们的建议是要么先说 『提前谢了』，事后 **_再_** 对回复者表示感谢，要么换种方式表达，譬如用『谢谢你的关注』或『谢谢你的关照』）。\n\n问题解决后追加一条简要说明\n-------------------\n\n问题解决后向所有帮助过的人追加一条消息，让他们知道问题是如何解决的并再次感谢。如果问题在邮件列表或新闻组中受到广泛关注，在那里追加此消息比较恰当。\n\n最理想的方式是向最初提问的线索回复此消息，并在主题中包含『已解决』、『已搞定』或其它同等含义的明显标记。\n在人来人往的邮件列表里，一个看见线索 『问题 X』和『问题 X - 已解决』的潜在回复者就明白不用再浪费时间了（除非他个人觉得『问题 X』有趣），因此可以利用此时间去解决其它问题。\n\n追加的消息用不着太长或太复杂，一句简单的『你好 —— 是网线坏了！谢谢大家 —— 比尔』就比什么都没有要强。\n事实上，除非解决问题的技术真正高深，一条简短而亲切的总结比长篇大论要好。说明是什么行动解决了问题，用不着重演整个排错的故事。\n\n对于有深度的问题，张贴排错历史的摘要是恰当的。描述问题的最终状态，说明是什么解决了问题，**_在此之后_** 才指明可以避免的弯路。\n应避免的弯路部分应放在正确的解决方案和其它总结材料之后，而不要将此消息搞成侦探推理小说。列出那些帮助过你的名字，那样你会交到朋友的。\n\n除了有礼貌、有内容以外，这种类型的追帖将帮助其他人在邮件列表、新闻组或论坛文档中搜索到真正解决你问题的方案，从而也让他们受益。\n\n最后，此类追帖还让每位参与协助的人因问题的解决而产生一种满足感。如果你自己不是技术专家或黑客，相信我们，这种感觉对于你寻求帮助的老手和专家是非常重要的。\n问题叙述到最后不知所终总是令人沮丧的，黑客们痒痒地渴望它们被解决。『挠痒痒』为你挣到的信誉将对你下次再次张贴提问非常非常的有帮助。\n\n考虑一下怎样才能避免他人将来也遇到类似的问题，问问自己编一份文档或`FAQ`补丁会不会有帮助，如果是的话就将补丁发给维护者。\n\n在黑客中，这种良好的后继行动实际上比传统的礼貌更重要，也是你善待他人而赢得声誉的方式，这是非常有价值的财富。\n\n如何解读回答\n==================\n\n『读读他妈的手册（`RTFM`）』和『搜搜他妈的网络（`STFW`）』：是在告知你的问题根本不该提出来\n-------------------\n\n有一个古老而神圣的传统：如果你收到『读读他妈的手册（`RTFM`）』的回复，发信人认为你应该去『读读他妈的手册』。他或她多半是对的，去读一下吧。\n\n『读读他妈的手册（`RTFM`）』有个年轻一点的亲戚，如果你收到『搜搜他妈的网络（`STFW`）』的回复，发信人认为你应该『搜搜他妈的网络』。那人多半也是对的，去搜一下吧。（更温和一点的说法是『谷歌是你的朋友！』）\n\n在论坛，你也可能被要求去搜索论坛的文档。事实上，有人甚至可能热心地为你提供以前解决此问题的线索。但不要依赖这种关照，提问前应该先搜索一下文档。\n\n通常，叫你搜索的人已经打开了能解决你问题的手册或网页，正在一边看一边敲键盘。这些回复意味着他认为：第一，你要的信息很容易找到。第二，自已找要比别人喂到嘴里能学得更多。\n\n你不应该觉得这样就被冒犯了，按黑客的标准，回复者没有不理你就是在向你表示某种尊敬，你反而应该感谢他热切地想帮助你。\n\n如果你还是不明白……\n-------------------\n\n如果你看不懂回答，不要马上回复一个要求说明的消息，先试试那些最初提问时用过的相同工具（如手册、`FAQ`、网页、懂行的朋友等）试着搞懂回答。如果还是需要说明，展现你已经明白的。\n\n譬如，假如我告诉你：『看起来像是某输入项有问题，你需要清除它』，接着是个 **_不好_** 的回帖：『什么是某输入项？』。\n而这是一个 **_很好_** 的跟帖：『是的，我读了手册，某某输入项只在`-z`和`-p`开关中被提到，但都没有涉及到如何清除它们，你指的是哪一个还是我弄错了什么？』\n\n对待无礼\n-------------------\n\n很多黑客圈子中看似无礼的行为并不是存心冒犯。相反，它是直接了当、一针见血式的交流风格，这种风格对于更关注解决问题而不是使别人感觉舒服而混乱的人是很自然的。\n\n如果你觉得被冒犯了，试着平静地反应。如果有人真的做了出格的事，邮件列表、新闻组或论坛中的前辈多半会招呼他。\n如果这 **_没有_** 发生而你却发火了，那么你发火对象的言语可能在黑客社区中看起来是正常的，而 **_你_** 将被视为有错的一方，这将伤害到你获取信息或帮助的机会。\n\n另一方面，你会偶而真的碰到无礼和无聊的言行。与上述相反，对真正的冒犯者狠狠地打击、用犀利的语言将其驳得体无完肤都是可以接受的。\n然尔，在行事之前一定要非常非常的有根据。纠正无礼的言论与开始一场毫无意义的口水战仅一线之隔，黑客们自己莽撞地越线的情况并不鲜见。\n如果你是新手或外来者，避开这种莽撞的机会并不高。如果你想得到的是信息而不是消磨时光，这时最好不要把手放在键盘上以免冒险。\n\n（有些人断言很多黑客都有轻度的自闭症或阿斯伯格综合症，缺少用于润滑人类社会『正常』交往所需的脑电路。这既可能是真也可能是假。\n如果你自己不是黑客，兴许你认为我们脑袋有问题还能帮助你应付我们的古怪行为。只管这么干好了，我们不在乎。我们 **_喜欢_** 现在这个样子，并且一般都对病号标记有站得住脚的怀疑。）\n\n在下一节，我们会谈到另一个问题，当 **_你_** 行为不当时会受到的『冒犯』。\n\n-----------------\n相关资源\n==================\n\n如果需要个人电脑、`Unix`和互联网如何工作的基础知识，参阅 [`Unix`和互联网工作的基本原理](http://en.tldp.org/HOWTO/Unix-and-Internet-Fundamentals-HOWTO/)。\n\n当你发布软件或补丁时，试着按 [软件发布实践](http://en.tldp.org/HOWTO/Software-Release-Practice-HOWTO/index.html) 操作。\n\n鸣谢\n==================\n\n伊夫林 · 米切尔（_Evelyn Mitchell_）贡献了一些愚蠢问题例子并启发了编写『如何更好地回答问题』这一节，米哈伊尔 · 罗门迪克（_Mikhail Ramendik_）贡献了一些特别有价值的建议和改进。\n\n修订历史\n==================\n\n修订版 | 时间 | 修订人 | 修订内容\n----- | ---- | ---- | ----\n3.10 | 2014年5月21日 | esr | 新增`Stack Overflow`的一节\n3.9 | 2013年4月23日 | esr | 修正链接\n3.8 | 2012年6月19日 | esr | 修正链接\n3.7 | 2010年12月6日 | esr | 对于英语为第二语言人士的有益建议\n3.7 | 2010年11月2日 | esr | 几种翻译不见了\n3.6 | 2008年3月19日 | esr | 小更新及新链接\n3.5 | 2008年1月2日 | esr | 勘误及一些翻译链接\n3.4 | 2007年3月24日 | esr | 新章节：『关于代码的问题』\n3.3 | 2006年9月29日 | esr | 增加凯 · 尼格曼（_Kai Niggemann_）的一个好建议\n3.2 | 2006年1月10日 | esr | 加入瑞克 · 莫恩（_Rick Moen_）编写的内容\n3.1 | 2004年10月28日 | esr | 文档『谷歌是你的朋友！』\n3.0 | 2004年2月2日 | esr | 主要新增在网页论坛应有的礼节\n\n-----------------\n","source":"_posts/180307_提问的智慧.md","raw":"---\ntitle: 提问的智慧\ndate: 2018-03-25 22:20:20\npermalink: how-to-ask-questions-the-smart-way\ncategories: 其他\ntags:\n - 转载\n---\n\n\n提问的智慧\n====================\n\n\n**艾瑞克 · 史蒂文 · 雷蒙德（_Eric Steven Raymond_）**  \n[Thyrsus Enterprises](http://www.catb.org/~esr/)  \n[esr@thyrsus.com](mailto:esr@thyrsus.com)\n\n**瑞克 · 莫恩（_Rick Moen_）**  \n[respond-auto@linuxmafia.com](mailto:respond-auto@linuxmafia.com)\n\n版权 © 2001，2006，2014 _Eric S. Raymond_，_Rick Moen_\n\n目录\n----------------\n\n- [译文](#译文) \n- [免责声明](#免责声明)\n- [引言](#引言)\n- [如何做提问前的准备](#如何做提问前的准备)\n- [如何提问](#如何提问)\n    - [仔细挑选论坛](#仔细挑选论坛)\n    - [`Stack Overflow`](#stack-overflow)\n    - [面向新手的论坛和互联网中继聊天（`IRC`）通常响应最快](#面向新手的论坛和互联网中继聊天irc通常响应最快)\n    - [第二步，使用项目的邮件列表](#第二步使用项目的邮件列表)\n    - [使用有意义且明确的主题](#使用有意义且明确的主题)\n    - [使问题容易回复](#使问题容易回复)\n    - [用清晰、语法、拼写正确的语句书写](#用清晰语法拼写正确的语句书写)\n    - [使用易于读取且标准的文件格式发送问题](#使用易于读取且标准的文件格式发送问题)\n    - [描述问题应准确且有内容](#描述问题应准确且有内容)\n    - [量不在多，精炼则灵](#量不在多精炼则灵)\n    - [别急于宣称找到`Bug`](#别急于宣称找到bug)\n    - [低声下气代替不了做自己的家庭作业](#低声下气代替不了做自己的家庭作业)\n    - [描述问题症状而不是猜测](#描述问题症状而不是猜测)\n    - [按时间先后罗列问题症状](#按时间先后罗列问题症状)\n    - [描述目标而不是过程](#描述目标而不是过程)\n    - [别要求私下回复电邮](#别要求私下回复电邮)\n    - [提问应明确](#提问应明确)\n    - [关于代码的问题](#关于代码的问题)\n    - [别张贴家庭作业式问题](#别张贴家庭作业式问题)\n    - [删除无意义的要求](#删除无意义的要求)\n    - [不要把问题标记为『紧急』，即使对你而言的确如此](#不要把问题标记为紧急即使对你而言的确如此)\n    - [礼貌总是有益的](#礼貌总是有益的)\n    - [问题解决后追加一条简要说明](#问题解决后追加一条简要说明)\n- [如何解读回答](#如何解读回答)\n    - [『读读他妈的手册（`RTFM`）』和『搜搜他妈的网络（`STFW`）』：是在告知你的问题根本不该提出来](#读读他妈的手册rtfm和搜搜他妈的网络stfw是在告知你的问题根本不该提出来)\n    - [如果你还是不明白……](#如果你还是不明白)\n    - [对待无礼](#对待无礼)\n- [别像失败者那样反应](#别像失败者那样反应)\n- [提问禁忌](#提问禁忌)\n- [好问题与坏问题](#好问题与坏问题)\n- [如果得不到回答](#如果得不到回答)\n- [如何更好地回答](#如何更好地回答)\n- [相关资源](#相关资源)\n- [鸣谢](#鸣谢)\n- [修订历史](#修订历史)\n\n译文\n==================\n\n译文：\n[印尼语](http://bulsara.host.sk/index.php?p=2005)\n[白俄罗斯语](http://www.fatcow.com/edu/smart-questions-by)\n[巴西葡萄牙语](http://www.istf.com.br/perguntas/)\n[简体中文](https://github.com/oldratlee/translations/blob/master/how-to-ask-questions-the-smart-way/README.md)\n[荷兰语](http://docs.jaspervries.nl/smart-questions/)\n[法语](http://www.gnurou.org/documents/smart-questions-fr.html)\n[乔治亚语](http://maxo127.narod.ru/Geo/Articles/smart-questions_ge.html)\n[德语](http://www.tty1.net/smart-questions_de.html)\n[希腊语](http://www.dionyziz.com/howto-smart-questions-gr/)\n[希伯来语](http://www.penguin.org.il/essays/smart-questions-he.html)\n[日语](http://www.ranvis.com/articles/smart-questions.ja.html)\n[波兰语](http://rtfm.killfile.pl/)\n[葡萄牙语](http://www.celiojunior.com.br/comofazerperguntas.htm)\n[罗马尼亚语](http://wiki.lug.ro/mediawiki/index.php/Cum_se_pun_%C3%AEntreb%C4%83ri_%C3%AEn_mod_inteligent)\n[俄语](http://maddog.sitengine.ru/smart-question-ru.html)\n[西班牙语](http://www.sindominio.net/ayuda/preguntas-inteligentes.html)\n[泰语](http://wiki.opentle.org/Smart-questions)\n如果你想复制、镜像、翻译或引用本文，请参阅我的 [复制协议](http://www.catb.org/~esr/copying.html)。\n\n免责声明\n==================\n\n许多项目的网站在如何取得帮助的部分链接了本文，这没有关系，也正是我们想要的。\n但如果你是该项目生成此链接的网管，请在链接附近显著位置注明：**_我们不提供该项目的服务支持！_**\n\n我们已经领教了没有此说明带来的痛苦，我们将不停地被一些白痴纠缠，他们认为既然我们发布了本文，那么我们就有责任解决世上所有的技术问题。\n\n如果你是因为需要帮助正在阅读本文，然后就带着可以直接从作者那取得帮助的印象离开，那么 **_你_** 就不幸成了我们所说的白痴之一。\n别向 **_我们_** 提问，我们不会理睬的。 我们只是在这教你如何从那些真正懂得你软硬件问题的人那里取得帮助，但 99.9％ 的时间我们不会是那些人。\n除非你非常地 **_确定_** 本文的作者是你遇到问题方面的专家，请不要打搅，这样大家都更开心一点。\n\n引言\n==================\n\n在 [黑客](http://www.catb.org/~esr/faqs/hacker-howto.html) 的世界里，你所提技术问题的解答很大程度上取决于你提问的方式与解决此问题的难度，本文将教你如何提问才更有可能得到满意的答复。\n\n开源程序的应用已经很广，你通常可以从其他更有经验的用户而不是黑客那里得到解答。\n这是好事，他们一般对新手常有的毛病更容忍一点。然而，使用我们推荐的方法，像对待黑客那样对待这些有经验的用户，通常能最有效地得到问题的解答。\n\n第一件需要明白的事是黑客喜欢难题和激发思考的好问题。假如不是这样，我们也不会写本文了。\n如果你能提出一个有趣的问题让我们咀嚼玩味，我们会感激你。好问题是种激励与礼物，帮助我们发展认知，揭示没有注意或想到的问题。\n在黑客中，『好问题！』 是非常热烈而真挚的赞许。\n\n此外，黑客还有遇到简单问题就表现出敌视或傲慢的名声。\n有时，我们看起来还对新手和愚蠢的家伙有条件反射式的无礼，但事情并不真是这样。\n\n我们只是毫无歉意地敌视那些提问前不愿思考、不做自己家庭作业的人。\n这种人就像时间无底洞 —— 他们只知道索取，不愿意付出，他们浪费了时间，这些时间本可用于其它更有趣的问题或更值得回答的人。\n我们将这种人叫做 『失败者（loser）』（由于历史原因，我们有时将『loser』拼写为『lusers』 。）\n\n我们意识到许多人只是想使用我们写的软件，他们对学习技术细节没有兴趣。对大多数人而言，计算机只是种工具，是种达到目的的手段而已。\n他们有自己的生活并且有更要紧的事要做，我们承认这点，也从不指望每个人都对这些让我们着迷的技术问题感兴趣。\n不过，我们回答问题的风格是为了适应那些 **_真正_** 对此有兴趣并愿意主动参与解决问题的人，这一点不会变，也不该变。\n如果连这都变了，我们就会在自己能做得最好的事情上不再那么犀利。\n\n我们（大多数）是自愿者，从自己繁忙的生活中抽时间来回答问题，有时会力不从心。\n因此，我们会毫不留情地滤除问题，特别是那些看起来像是失败者提的，以便更有效地把回答问题的时间留给那些胜利者。\n\n如果你认为这种态度令人反感、以施惠者自居或傲慢自大，请检查你的假设，我们并未要求你屈服 ——\n事实上，假如你做了该做的努力，我们中的大多数将非常乐意平等地与你交流，并欢迎你接纳我们的文化。\n试图去帮助那些不愿自救的人对我们简直没有效率。不懂没有关系，但愚蠢地做事不行。\n\n所以，你不必在技术上很在行才能吸引我们的注意，但你 **_必须_** 表现出能引导你在行的姿态 —— 机敏、有想法、善于观察、乐于主动参与问题的解决。\n如果你做不到这些使你与众不同的事情，我们建议你付钱跟别人签商业服务合同，而不是要求黑客无偿帮助。\n\n如果你决定向我们求助，你不会想成为一名失败者，你也不想被看成一个失败者。\n得到快速有效回答的最好方法是使提问者看起来像个聪明、自信和有想法的人，并且暗示只是碰巧在某一特别问题上需要帮助。\n\n（欢迎对本文指正，可以将建议发至 [esr@thyrsus.com](mailto:esr@thyrsus.com) 或 [respond-auto@linuxmafia.com](mailto:esr@thyrsus.com)。\n请注意，本文不想成为一般性的 [网络礼仪](http://www.ietf.org/rfc/rfc1855.txt) 指南，我一般会拒绝那些与引出技术论坛中有用的回答不特别相关的建议。）\n\n-----------------\n\n如何做提问前的准备\n==================\n\n在通过电邮、新闻组或论坛提技术问题以前，做以下事情：\n\n1.  尝试在你准备提问论坛的历史文档中搜索答案\n2.  尝试搜索互联网以找到答案\n3.  尝试阅读手册以找到答案\n4.  尝试阅读『常见问题文档（`FAQ`）』以找到答案\n5.  尝试自己检查或试验以找到答案\n6.  尝试请教懂行的朋友以找到答案\n7.  如果你是程序员，尝试阅读源代码以找到答案\n\n提问时，请先表明你已做了上述事情，这将有助于建立你不是寄生虫与浪费别人时间的印象。最好再表述你从中 **_学到的东西_** ，我们喜欢回答那些表现出能从答案中学习的人。\n\n运用某些策略，比如用谷歌（`Google`）搜索你遇到的各种错误提示（既搜索 [谷歌论坛](http://groups.google.com/)，也搜索网页）， 这样很可能直接就找到了解决问题的文档或邮件列表线索。\n即使没有结果，在邮件列表或新闻组寻求帮助时提一句『我在谷歌中搜过下列句子但没有找到什么有用的东西』 也是件好事，至少它表明了搜索引擎不能提供哪些帮助。\n将搜索关键词与你的问题及可能的解决方案联系起来，还有助于引导其他有类似问题的人。\n\n别着急，不要指望几秒钟的谷歌搜索就能解决一个复杂的问题。读一下常见问题文档。在向专家提问之前，先向后靠靠放松一下，再思考一下问题。\n相信我们，他们能从你的提问看出你做了多少阅读与思考，如果你是有备而来，将更有可能得到解答。不要将所有问题一股脑抛出，只因你的第一次搜索没有结果（或者结果太多）。\n\n认真地思考，准备好你的问题。轻率的提问只能得到轻率的回答，或者压根没有。在提问时，你越是表现出在此前做过思考与努力去解决自己的问题，你越有可能得到真正的帮助。\n\n注意别提错问题。如果提问基于错误的假设，某黑客多半会一边想 『愚蠢的问题……』，一边按将错就错的答案回复你，并且希望这种只是得到你自己『问的问题』而非真正所需的解答，给你一个教训。\n\n永远不要假设你 **_有资格_** 得到解答。你没有这种资格，毕竟你没有为此服务付费。\n如果你能够提出有内容、有趣和激励思考的问题 —— 那种毫无疑问能够向社区贡献经验，而不仅仅是消极地要求从别人那获取知识的问题，你将『挣到』答案。\n\n另一方面，表明你有能力也乐意参与问题的解决是个很好的开端。『有没有人能指个方向？』，我这还差点什么？』，『我应该查哪个网站？』，\n通常要比 『请给出我可以用的完整步骤』更容易得到回复，因为你表明了只要有人能指个方向，你就很乐意完成剩下的过程。\n\n如何提问\n==================\n\n仔细挑选论坛\n-------------------\n\n要对在哪提问留心，如果你做了下述事情，多半会被一笔勾销或被看成『失败者』：\n\n* 张贴与论坛主题无关的问题\n* 在面向高级技术问题的论坛上张贴肤浅的问题，反之亦然\n* 在太多不同的新闻组同时张贴\n* 给既非熟人也没有义务解决你问题的人发送你私人的电邮\n\n为保护通信的渠道不被无关的东西淹没，黑客会除掉那些没有找对地方的问题，你不会想让这种事落到自己头上的。\n\n因此，第一步是找对论坛。谷歌和其它搜索引擎还是你的朋友，可以用它们搜索你遇到困难的软硬件问题最相关的项目网站。那里通常都有项目的常见问题（`FAQ`）、邮件列表及文档的链接。\n如果你的努力（包括 **_阅读_** `FAQ`）都没有结果，这些邮件列表就是最后能取得帮助的地方。项目的网站也许还有报告`Bug`的流程或链接，如果是这样，去看看。\n\n向陌生的人或论坛发送邮件极有可能是在冒险。譬如，不要假设一个内容丰富的网页的作者想充当你的免费顾问，不要对你的问题是否会受到欢迎做太乐观的估计 —— 如果你不确定，向别处发或者压根别发。\n\n在选择论坛、新闻组或邮件列表时，别太相信名字，先看看`FAQ`或者许可书以明确你的问题是否切题。发贴前先翻翻已有的帖子，这样可以让你感受一下那里行事的方式。\n事实上，张贴前在新闻组或邮件列表的历史文档中搜索与你问题相关的关键词是个极好的主意，也许就找到答案了。即使没有，也能帮助你归纳出更好的问题。\n\n别像机关枪似的一次性『扫射』所有的帮助渠道，这就像大喊大叫一样会令人不快，温柔地一个一个来。\n\n弄懂主题！最典型的错误之一是在某种致立于跨平台可移植的语言、库或工具的论坛中提关于`Unix`或`Windows`操作系统程序接口的问题。如果你不明白为什么这是大错，最好在搞清楚概念前什么也别问。\n\n一般来说，在仔细挑选的公共论坛中提问比在私有论坛中提同样的问题更容易得到有用的回答。有几个道理支持这点，一是看潜在的回复者有多少，二是看论坛的参与者有多少，黑客更愿回答能启发多数人的问题。\n\n可以理解，老练的黑客和一些流行软件的作者正在承受过多的不当消息。就像那根最后压垮骆驼背的稻草一样，\n你的加入也有可能使情况走向极端 —— 已经好几次了，一些流行软件的作者退出了对自己软件的支持，因为伴随而来的涌入其私人邮箱的垃圾邮件变得无法忍受。\n\n`Stack Overflow`\n-------------------\n\n搜索 **_之后_** 再在`Stack Exchange`提问。\n\n近年来，`Stack Exchange`社区站点已经成为回答技术问题和其他问题的一个主流方式，甚至是很多开源项目的首选论坛。\n\n查看`Stack Exchange`之前先搜索谷歌；谷歌对`Stack Exchange`的索引是实时的。\n如果有人问过类似的问题，这样很容易就找到了，`Stack Exchange`站点的内容往往在搜索结果的顶部出现。\n如果没有找到要的内容，可以在与你问题最相关的网站上重新搜索（见下文说明）。通过标签搜索可以缩小结果范围。\n\n如果你还是没有发现任何内容，把你的问题发表到 **_一个_** 最相关的网站上。使用格式化工具，特别是对于代码，并添加与问题内容相关的标签（尤其比如 编程语言，操作系统，或者你遇到麻烦的库名）。\n如果评论者要求你提供更多信息，请编辑你的主贴新加上来。如果答案对你有帮助，请单击向上箭头给这个答案投票；如果有答案给出了解决办法，请点击投票箭头下面的勾，以接受它成为正确答案。\n\n`Stack Exchange`已经发展到[超过100个站点](http://stackexchange.com/sites)，下面说明了什么问题最合适放在哪个站点：\n\n- [`Super User`](http://superuser.com/)是关于通用计算的问题。如果你的问题和代码无关，或者你说的只是程序在网络连接上的问题，九成在这里问。\n- [`Stack Overflow`](http://stackoverflow.com/)是关于编程问题。\n- [`Server Fault`](http://serverfault.com/)是关于服务器和网络管理的问题。\n\n有几个项目有自己的特定站点，包括[`Android`](http://android.stackexchange.com/)、[`Ubuntu`](http://askubuntu.com/)、[`TeX/LaTeX`](http://tex.stackexchange.com/)和[`SharePoint`](http://sharepoint.stackexchange.com/)。请检查一下`Stack Exchange`以确定现在具体有哪些站点。\n\n面向新手的论坛和互联网中继聊天（`IRC`）通常响应最快\n-------------------\n\n本地的用户组织或者你所用的`Linux`发行版也许正在宣传新手取得帮助的论坛或`IRC`通道（在一些非英语国家，新手论坛很可能还是邮件列表），这些地方是开始提问的好去处，特别是当你觉得遇到的也许只是相对简单或者很普通的问题时。\n经过宣传的`IRC`通道是公开邀请提问的地方，通常可以得到实时的回复。\n\n事实上，如果出问题的程序来自某发行版（这很常见），最好先去该发行版的论坛或邮件列表中提问，再到程序本身的项目论坛或邮件列表。否则该项目的黑客可能仅仅回复『用 **_我们的_** 代码』。\n\n在任何论坛发贴以前，先看看有没有搜索功能。如果有，就试着用问题的几个关键词搜索一下，也许就有帮助。如果在此之前你已做过全面的网页搜索（你应该这样去做），还是再搜索一下论坛，搜索引擎有可能没来得及索引此论坛的全部内容。\n\n通过论坛或`IRC`通道提供项目的用户支持有增长的趋势，电子邮件交流则更多地为项目开发者保留。所以先在论坛或`IRC`中寻求与该项目相关的帮助。\n\n第二步，使用项目的邮件列表\n-------------------\n\n当某个项目存在开发者邮件列表时，要向列表而不是其中的个别成员提问，即使你确信他能最好地回答你的问题。查一查项目的文档和主页，找到项目的邮件列表并使用它。采用这种办法有几个很好的理由：\n\n* 向一个开发者提的好问题，对整个项目组也会有益。反之，如果你认为自己的问题对整个项目组来说太愚蠢，就没有理由去去骚扰单个开发者。\n* 向列表提问可以分散开发者的负担，单个开发者（尤其是项目领导）也许太忙以至于没法回答你的问题。\n* 大多数邮件列表都要存档，那些存档将被搜索引擎索引，如果你向列表提问并得到解答，将来其它人可以通过网页搜索找到你的问题和答案，也就不用再次发问了。\n* 如果某些问题经常被问到，开发者可以利用此信息改进文档或软件本身，以使其更清楚。如果只是私下提问，就没有人能看到最常见问题的完整场景。\n\n如果一个项目既有 『用户』 也有『开发者』（或 『黑客』）邮件列表或论坛，而你又不摆弄那些代码，向『用户』列表或论坛提问。不要假设自己会在开发者列表中受到欢迎，那些人多半会遭受你的噪音干扰。\n\n然尔，如果你 **_确信_** 你的问题不一般，而且在『用户』 列表或论坛中几天都没有回复，可以试试『开发者』列表或论坛。\n建议你在张贴前最好先暗暗地观察几天，至少看看最近几天保存的帖子，以了解那的行事方式（事实上这是参与任何私有或半私有列表的好主意）\n\n如果你找不到一个项目的邮件列表，而只能查到项目维护者的地址，只管向其发信。\n即便在这种情况下，也别假设项目的邮件列表不存在。在你的电子邮件中陈述你已经试过但没有找到合适的邮件列表，也提及你不反对将自己的邮件转发给他人\n（许多人认为，即使没什么秘密，私人电子邮件也不应该被公开。通过允许将你的电子邮件转发他人，你给了相应人员处置你邮件的选择）。\n\n使用有意义且明确的主题\n-------------------\n\n在邮件列表、新闻组或论坛中，主题是你在五十个或更少的字以内吸引有资格专家注意的黄金机会，不要用诸如 『请帮我』 （更别提大写的 『请帮我！！！！』，这种主题的消息会被条件反射式地删掉）之类的唠叨浪费机会。\n不要用你痛苦的深度来打动我们，相反，要在这点空间中使用超级简明扼要的问题描述。\n\n编写主题题头好的惯例格式是『对象 —— 偏差』，许多技术支持组织都支持这么做。在『对象』部分指明是哪一个或哪一组东西有问题，在『偏差』部分则描述与期望的行为不一致的地方。\n\n**愚蠢：**\n\n> 救命啊！我的笔记本视频工作不正常！\n\n**明智：**\n\n> `X.org 6.8.1`扭曲鼠标光标，`MV1005`型号的某显卡芯片组\n\n**更明智：**\n\n> 使用`MV1005`型号的某显卡芯片组在`X.org 6.8.1`的鼠标光标被扭曲\n\n编写 『对象 —— 偏差』式描述的过程有助于你组织对问题的细致思考。是什么被影响了？仅仅是鼠标光标或者还有其它图形？\n只在`X.org`中出现？或只是在其`6.8.1`版中？是针对某显卡芯片组？或者只是其中的`MV1005`型号？一个黑客只需描一眼就能够立即明白什么是你遇到的问题，什么是你自己的问题。\n\n更一般地，想像一下在一个只显示主题的文档索引中查找。让你的主题更好地反映问题，可以使下一个搜索类似问题的人能够在文档中直接就找到答案的线索，而不用再次发贴提问。\n\n如果你想在回复中提问，确保改变主题以表明你是在问一个问题，一个主题像 『Re: 测试』 或者 『Re: 新`Bug`』的消息不太可能引起足够的注意。同时，将回复中与新主题不甚相关的引用内容尽量删除。\n\n对于列表消息，不要直接点击回复按钮来开始一个全新的线索，这将限制你的观众。有些邮件阅读程序，比如`mutt`，允许用户按线索排序并通过折叠线索来隐藏消息，这样做的人永远看不到你发的消息。\n\n仅仅改变主题还不够。`mutt`和其它一些邮件阅读程序还要检查邮件头主题以外的其它信息，以便为其指定线索，所以宁可发一个全新的邮件。\n\n在论坛，因为消息与特定的线索紧密结合，并且通常在线索之外不可见，好的提问方式略有不同，通过回复提问并不要紧。不是所有论坛都允许在回复中出现分离的主题，而且这样做了基本上没有人会去看。\n不过，通过回复提问本身就是令人怀疑的做法，因为它们只会被正在查看该线索的人读到。所以，除非你 **_只想_** 在该线索当前活跃的人群中提问，还是另起炉灶比较好。\n\n使问题容易回复\n-------------------\n\n以『请向……回复』来结束问题多半会使你得不到回答。如果你觉得花几秒钟在邮件客户端设置一下回复地址都麻烦，我们也觉得花几秒钟考虑你的问题更麻烦。\n如果你的邮件客户端程序不支持这样做，[换个好点的](http://linuxmafia.com/faq/Mail/muas.html)；如果是操作系统不支持所有这种邮件客户端程序，也换个好点的。\n\n在论坛，要求通过电子邮件回复是完全无礼的，除非你确信回复的信息也许是敏感的（而且有人会为了某些未知的原因，只让你而不是整个论坛知道答案）。\n如果你只是想在有人回复线索时得到电子邮件提醒，可以要求论坛发送。几乎所有论坛都支持诸如『留意本线索』、『有回复发送邮件』等功能。\n\n用清晰、语法、拼写正确的语句书写\n-------------------\n\n经验告诉我们，粗心与草率的作者通常也粗心与草率地思考和编程（我敢打赌）。为这些粗心与草率的思考者回答问题没有什么好处，我们宁可将时间花在其它地方。\n\n清楚、良好地表达你的问题非常重要。如果你觉得这样做麻烦，我们也觉得注意你的问题麻烦。\n花点额外的精力斟酌一下字句，用不着太僵硬与正式 —— 事实上，黑客文化很看重能准确地使用非正式、俚语和幽默的语句。但它 **_必须_** 很准确，而且有迹象表明你是在思考和关注问题。\n\n正确地拼写、使用标点和大小写，不要将『its』混淆为『it's』，『loose』搞成『lose』或者将『discrete』弄成 『discreet』。不要全部用大写，这会被视为无礼的大声嚷嚷。\n（全部小写也好不到哪去，因为不易阅读。_Alan Cox_ 也许可以这样做，但你不行。）\n【**_译注_**：[_Alan Cox_](https://en.wikipedia.org/wiki/Alan_Cox) 著名黑客，`Linux`内核的重要参与者】\n\n一般而言，如果你写得像个半文盲似的傻子，多半得不到理睬。也不要使用即时通讯中的简写，如将『you』简化为『u』会使你看起来像一个为了节约二次击键的半文盲式的傻子。\n更糟的是，如果像个小孩似地鬼画桃符那绝对是在找死，可以肯定没人会理你（或者最多是给你一大堆指责与挖苦）。\n\n如果在非母语论坛提问，你的拼写与语法错误会得到有限的宽容，但懒惰完全不会被容忍（是的，我们通常看得出其中的差别）。\n同时，除非你知道回复者使用的语言，请使用英语书写。繁忙的黑客一般会直接删除用他们看不懂语言写的消息。\n在互联网上英语是工作语言，用英语书写可以将你的问题不被阅读就被直接删除的可能性降到最低。\n\n如果你用英语书写但它是你的第二语言，最好提醒潜在的回复者语言上可能的困难以便绕过这个问题，比如：\n\n*   英语不是我的母语，请谅解拼写错误。\n*   如果您使用某某语言，请电邮/私聊我，也许我需要您的协助翻译我的问题。\n*   对于这个技术术语本身我很熟悉，但对于它的一些俚语或习惯表达方式就不太明白了。\n*   我已经同时用某某语及英语提问，如果您使用两者之一回复，我很乐意翻译。\n\n使用易于读取且标准的文件格式发送问题\n-------------------\n\n如果你人为地将问题搞得难以阅读，它多半会被忽略，人们更愿读易懂的问题，所以：\n\n* 使用纯文本而不是`HTML`（ [关闭`HTML`](http://www.birdhouse.org/etc/evilmail.html) 并不难）\n* 使用`MIME`附件通常没有问题，前提是真正有内容（譬如附带的源文件或补丁），而不仅仅是邮件客户端程序生成的模板（譬如只是消息内容的拷贝）。\n* 不要发送整段只是单行句子但多次折回的邮件（这使得回复部分内容非常困难）。设想你的读者是在80个字符宽的文本终端阅读邮件，设置你的行折回点小于 80 列。\n* 但是，也 **_不要_** 用任何固定列折回数据（譬如日志文件拷贝或会话记录）。数据应该原样包含，使回复者确信他们看到的是与你看到的一样的东西。\n* 在英语论坛中，不要使用`MIME`可打印字符引用编码编码（[`Quoted-Printable encoding`](https://zh.wikipedia.org/wiki/Quoted-printable)）发送消息。这种编码对于张贴非`ASCII`语言可能是必须的，但很多邮件程序并不支持。\n    当它们分断时，那些文本中四处散布的 『`=20`』符号既难看也分散注意力，甚至有可能破坏内容的语意。\n* **_永远不要_** 指望黑客们阅读使用封闭的专用格式编写的文档，诸如微软公司的`Word`或`Excel`文件等。\n    大多数黑客对此的反应就像有人将还在冒热气的猪粪倒在你门口时你的反应一样。即使他们能够处理，也很厌恶这么做。\n* 如果你从使用视窗的电脑发送电子邮件，关闭问题颇多的微软『聪明引用』功能（在『工具』 -> 『自动纠正选项』的『输入时自动格式化』下去掉聪明引用的选框），以免在你的邮件中到处散布垃圾字符。\n* 在论坛，勿滥用『表情符号』和『`HTML`』功能（当它们提供时）。一两个表情符号通常没有问题，但花哨的彩色文本倾向于使人认为你是个无能之辈。过滥地使用表情符号、色彩和字体会使你看来像个傻笑的小姑娘。\n    这通常不是个好主意，除非你只是对性而不是有用的回复更有兴趣。\n\n如果你使用图形用户界面的邮件客户端程序（如网景公司的`Messenger`、微软公司的`Outlook`或者其它类似的），注意它们的缺省配置不一定满足这些要求。\n大多数这类程序有基于菜单的『查看源码』命令，用它来检查发送文件夹中的消息，以确保发送的是没有多余杂质的纯文本文件。\n\n描述问题应准确且有内容\n-------------------\n\n*   仔细、清楚地描述问题的症状\n*   描述问题发生的环境（主机、操作系统、应用程序，任何相关的），提供销售商的发行版和版本号（如：『`Fedora Core 7`』、『`Slackware 9.1`』等）\n*   描述提问前做过的研究及其理解。\n*   描述提问前为确定问题而采取的诊断步骤。\n*   描述最近对计算机或软件配置的任何相关改变。\n*   如果可能，提供在可控环境下重现问题的方法。\n\n尽最大努力预测黑客会提到的问题，并提前备好答案。\n\n如果你认为是代码有问题，向黑客提供在可控环境下重现问题的方法尤其重要。当你这么做时，得到有用且及时回复的可能性将大大增加。\n\n西蒙 · 泰瑟姆（_Simon Tatham_）写过一篇 [如何有效报告`Bug`](http://www.chiark.greenend.org.uk/~sgtatham/bugs.html) 的文章，我强烈推荐各位阅读。\n\n量不在多，精炼则灵\n-------------------\n\n你应该写得精炼且有内容，简单地将一大堆代码或数据罗列在求助消息中达不到目的。如果你有一个很大且复杂的测试样例让程序崩溃，尝试将其裁剪得越小越好。\n\n至少有三个理由支持这点。第一，让别人看到你在努力简化问题使你更有可能得到回复。\n第二，简化问题使你更有可能得到 **_有用的_** 回复。第三，在提纯`Bug`报告的过程中，你可能自己就找到了解决办法或权宜之计。\n\n别急于宣称找到`Bug`\n-------------------\n\n当你在一个软件中遇到问题，除非你 **_非常、非常_** 的有根据，不要动辄声称找到了`Bug`。\n提示：除非你能提供解决问题的源代码补丁，或者对前一版本的回归测试表现出不正确的行为，否则你都多半不够完全确信。\n对于网页和文档也如此，如果你发现了文档的『`Bug`』，你应该能提供相应位置的替代文本。\n\n记住，还有许多其它用户并未经历你遇到的问题，否则你在阅读文档或搜索网页时就应该发现了（你在报怨前已经做了这些，[是吧](#如何做提问前的准备) ？）。\n这也意味着很有可能是你弄错了而不是软件本身有问题。\n\n编写软件的人总是非常辛苦地使它尽可能完美。如果你声称找到了`Bug`，也就置疑了他们的能力，即使你是对的，也有可能会使其中的部分人感到不快。\n此外，在主题中嚷嚷『`Bug`』也是特别不老练的。\n\n提问时，即使你私下非常确信已经发现一个真正的`Bug`，最好写得像是 **_你_** 做错了什么。如果真的有`Bug`，你会在回复中看到这点。\n这样做的话，如果真有`Bug`，维护者就会向你道歉，这总比你弄砸了然后欠别人一个道歉要强。\n\n低声下气代替不了做自己的家庭作业\n-------------------\n\n有些人明白他们不应该粗鲁或傲慢地行事并要求得到答复，但他们退到相反的低声下气的极端：\n『我知道我只是个可怜的新丁，一个失败者，但……』。这既使人困扰，也没有用，当伴随着对实际问题含糊的描述时还特别令人反感。\n\n别用低级灵长类动物的办法浪费你我的时间，相反，尽可能清楚地描述背景情况和你的问题，这比低声下气更好地摆正了你的位置。\n\n有时，论坛设有单独的初学者提问版面，如果你真的认为遇到了肤浅的问题，到那去就是了，但一样别低声下气。\n\n描述问题症状而不是猜测\n-------------------\n\n告诉黑客是什么导致了问题是没用的（如果你的诊断理论是了不起的东西，你还会向别人咨询求助吗？）。\n所以，确保只是告诉他们问题的原始症状，而不是你的解释和理论，让他们来解释和诊断。如果你认为陈述自己的猜测很重要，应清楚地说明这只是你的猜测并描述为什么它们不起作用。\n\n**愚蠢：**\n\n> 我在编译内核时接连遇到`SIG11`错误，怀疑主板上的某根电路丝断了，找到它们的最好办法是什么？\n\n**明智：**\n\n> 我组装的电脑（`K6/233 CPU、FIC-PA2007`主板[威盛`Apollo VP2`芯片组]、`Corsair PC133 SDRAM 256Mb`内存）最近在开机 20 分钟左右、做内核编译时频繁地报`SIG11`错，但在头 20 分钟内从不出问题。\n> 重启动不会复位时钟，但整夜关机会。更换所有内存未解决问题，相关的典型编译会话日志附后。\n\n由于以上这点许多人似乎难以掌握，这里有句话可以提醒你：『所有的诊断专家都来自密苏里州』。\n美国国务院的官方座右铭则是『让我看看』（出自国会议员威勒德 · D · 范迪弗［_Willard D. Vandiver_］在1899年时的讲话：\n『我来自一个出产玉米、棉花、牛蒡和民主党人的国家，滔滔雄辩既不能说服我，也不会让我满意。我来自密苏里州，你必须让我看看。』）\n针对诊断者而言，这并不是怀疑，而只是一种真实而有用的需求，以便让他们看到与你看到的原始证据尽可能一致的东西，而不是你的猜测与总结。所以，让我们看看。\n\n按时间先后罗列问题症状\n-------------------\n\n刚出问题之前发生的事情通常包含有解决问题最有效的线索。所以，记录中应准确地描述你、电脑和软件在崩溃前都做了什么。\n在命令行处理的情况下，有会话日志（如运行脚本工具生成的）并引用相关的若干（如20）行记录会非常有帮助。\n\n如果崩溃的程序有诊断选项（如`-v`详述开关），试着选择这些能在记录中增加排错信息的选项。\n记住，『多』不等于『好』。试着选取适当的排错级别以便提供有用的信息而不是将阅读者淹没在垃圾中。\n\n如果你的记录很长（如超过四段），在开头简述问题随后按时间先后罗列详细过程也许更有用。这样，黑客在读你的记录时就知道该注意哪些内容了。\n\n描述目标而不是过程\n-------------------\n\n如果你想弄清楚如何做某事（而不是报告一个`Bug`），在开头就描述你的目标，然后才陈述遇到问题的特定步骤。\n\n经常出现这种情况，寻求技术帮助的人在脑袋里有个更高层次的目标，他们在自以为能达到目标的特定道路上被卡住了，然后跑来问该怎么走，但没有意识到这条路本身有问题，结果要费很大的劲才能通过。\n\n**愚蠢：**\n\n> 我怎样才能让某图形程序的颜色拾取器取得十六进制的`RGB`值？\n\n**明智：**\n\n> 我正试着用自己选定数值的颜色替换一幅图片的色表，我现在知道的唯一方法是编辑每个表槽，但却无法让某图形程序的颜色拾取器取得十六进制的`RGB`值。\n\n第二种提法是明智的，它使得建议采用更合适的工具以完成任务的回复成为可能。\n\n别要求私下回复电邮\n-------------------\n\n黑客们认为问题的解决过程应该公开、透明，此过程中如果更有才能的人注意到不完整或者不当之处，最初的回复才能够、也应该被纠正。同时，作为回复者也因为能力和学识被其它同行看到而得到某种回报。\n\n当你要求私下回复时，此过程和回报都被中止。别这样做，让 **_回复者_** 来决定是否私下回答 —— 如果他真这么做了，通常是因为他认为问题编写太差或者太肤浅，以至于对其它人毫无意义。\n\n对这条规则存在一条有限的例外，如果你确信提问可能会引来大量雷同的回复时，那么『向我发电邮，我将为论坛归纳这些回复』将是神奇的句子。\n试着将邮件列表或新闻组从洪水般雷同的回复中解救出来是非常有礼貌的 —— 但你必须信守诺言。\n\n提问应明确\n-------------------\n\n漫无边际的问题通常也被视为没有明确限制的时间无底洞。\n最有可能给你有用答案的人通常也是最忙的人（假如只是因为他们承担了太多工作的话），这些人对于没有止境的时间无底洞极其敏感，所以他们也倾向于讨厌那些漫无边际的问题。\n\n如果你明确了想让回复者做的事（如指点方向、发送代码、检查补丁或其它），你更有可能得到有用的回复。\n因为这样可以让他们集中精力并间接地设定了他们为帮助你需要花费的时间和精力上限，这很好。\n\n要想理解专家生活的世界，可以这样设想：那里有丰富的专长资源但稀缺的响应时间。你暗中要求他们奉献的时间越少，你越有可能从这些真正懂行也真正很忙的专家那里得到解答。\n\n所以限定你的问题以使专家回答时需要付出的时间最少 —— 这通常与简化问题还不太一样。\n举个例，『请问可否指点一下哪有好一点的 X 解释？』通常要比『请解释一下 X』明智。如果你的代码不运行了，通常请别人看看哪有问题比叫他们帮你改正更明智。\n\n关于代码的问题\n-------------------\n\n别要求他人给你出问题的代码排错而不提及应该从何入手。张贴几百行的代码，然后说一声『它不能运行』会让你得不到理睬。\n只贴几十行代码，然后说一句『在第七行以后，本应该显示<x>，但实际出现的是<y>』非常有可能让你得到回复。\n\n最精确描述代码问题的方法是提供一个能展示问题的最小测试样例。什么是最小测试样例？\n它是对问题的展现，只需要刚好能够重现非预期行为的代码即可。如何生成一个最小测试样例？\n如果你知道哪一行或哪一段代码会产生问题，将其复制并提供刚好够用的外围支撑代码以构成一个完整的样例\n（够用是指源码刚好能被编译器、解释器或任何处理它的程序所接受）。如果你不能将问题缩小到特定的段落，复制源码并去除那些与问题无关的代码段。\n你能提供的最小测试样例越小越好（参见 [量不在多，精炼则灵](#量不在多精炼则灵) ）。\n\n生成一个非常小的最小测试样例并不总是可能，但尽力去做是很好的锻练，这有可能帮助你找到需要自己解决的问题。即使你找不到，黑客们喜欢看到你努力过，这将使他们更合作。\n\n如果你只是想让别人帮忙审一下代码，在最开头就要说出来，并且一定要提到你认为哪一部分特别需要关注以及为什么。\n\n别张贴家庭作业式问题\n-------------------\n\n黑客们善于发现『家庭作业』式的问题。我们中的大多数人已经做了自己的家庭作业，那是该 **_你_** 做的，以便从中学到东西。问一下提示没有关系，但不是要求完整的解决方案。\n\n如果你怀疑自己碰到了一个家庭作业式的问题，但仍然无法解决，试试在用户组、论坛或（作为最后一招）在项目的『用户』邮件列表或论坛中提问。尽管黑客们 **_会_** 看出来，一些老用户也许仍会给你提示。\n\n删除无意义的要求\n-------------------\n\n抵制这种诱惑，即在求助消息末尾加上诸如『有人能帮我吗？』或『有没有答案？』之类在语义上毫无意义的东西。\n第一，如果问题描述还不完整，这些附加的东西最多也只能是多余的。第二，因为它们是多余的，黑客们会认为这些东西烦人 —— 就很有可能用逻辑上无误但打发人的回复，诸如『是的，你可以得到帮助』和『不，没有给你的帮助』。\n\n一般来说，避免提『是或否』类型的问题，除非你想得到 [『是或否』类型的回答](http://homepage.ntlworld.com./jonathan.deboynepollard/FGA/questions-with-yes-or-no-answers.html)。\n\n不要把问题标记为『紧急』，即使对你而言的确如此\n-------------------\n\n这是你的问题，不要我们的。宣称『紧急』极有可能事与愿违：\n大多数黑客会直接删除这种消息，他们认为这是无礼和自私地企图得到即时与特殊的关照。而且『紧急』或其它有类似含义的主题有可能触发垃圾过滤规则，潜在的回复者可能永远看不到你的问题！\n\n有一点点局部的例外，如果你是在一些知名度很高、会使黑客们激动的地方使用程序，也许值得这样去做。在这种情况下，如果你有期限压力，也很有礼貌地提到这点，人们也许会有足够的兴趣快一点回答。\n\n当然，这是非常冒险的，因为黑客们对什么是令人激动的标准多半与你的不同。\n譬如从国际空间站这样张贴没有问题，但代表感觉良好的慈善或政治原因这样做几乎肯定不行。\n事实上，张贴诸如『紧急：帮我救救这个毛绒绒的小海豹！』肯定会让黑客回避你或觉得窝火，即使他们认为毛绒绒的小海豹很重要。\n\n如果你觉得这不可思议，再把剩下的内容多读几遍，直到弄懂了再发贴也不迟。\n\n礼貌总是有益的\n-------------------\n\n礼貌一点，使用『请』和『谢谢你的关注』或者『谢谢你的关照』，让别人明白你感谢他们无偿花时间帮助你。\n\n坦率地讲，这一点没有语法正确、文字清晰、准确、有内容和避免使用专用格式重要（同时也不能替代它们）。\n黑客们一般宁可读有点唐突但技术鲜明的`Bug`报告，而不是那种有礼但含糊的报告。（如果这点让你不解，记住我们是按问题能教我们什么来评价它的）\n\n然尔，如果你已经谈清楚了技术问题，客气一点肯定会增加你得到有用回复的机会。\n\n（我们必须指出，本文唯一受到一些老黑客认真反对的地方是以前曾经推荐过的『提前谢了』，一些黑客认为这隐含着事后不用再感谢任何人的暗示。\n我们的建议是要么先说 『提前谢了』，事后 **_再_** 对回复者表示感谢，要么换种方式表达，譬如用『谢谢你的关注』或『谢谢你的关照』）。\n\n问题解决后追加一条简要说明\n-------------------\n\n问题解决后向所有帮助过的人追加一条消息，让他们知道问题是如何解决的并再次感谢。如果问题在邮件列表或新闻组中受到广泛关注，在那里追加此消息比较恰当。\n\n最理想的方式是向最初提问的线索回复此消息，并在主题中包含『已解决』、『已搞定』或其它同等含义的明显标记。\n在人来人往的邮件列表里，一个看见线索 『问题 X』和『问题 X - 已解决』的潜在回复者就明白不用再浪费时间了（除非他个人觉得『问题 X』有趣），因此可以利用此时间去解决其它问题。\n\n追加的消息用不着太长或太复杂，一句简单的『你好 —— 是网线坏了！谢谢大家 —— 比尔』就比什么都没有要强。\n事实上，除非解决问题的技术真正高深，一条简短而亲切的总结比长篇大论要好。说明是什么行动解决了问题，用不着重演整个排错的故事。\n\n对于有深度的问题，张贴排错历史的摘要是恰当的。描述问题的最终状态，说明是什么解决了问题，**_在此之后_** 才指明可以避免的弯路。\n应避免的弯路部分应放在正确的解决方案和其它总结材料之后，而不要将此消息搞成侦探推理小说。列出那些帮助过你的名字，那样你会交到朋友的。\n\n除了有礼貌、有内容以外，这种类型的追帖将帮助其他人在邮件列表、新闻组或论坛文档中搜索到真正解决你问题的方案，从而也让他们受益。\n\n最后，此类追帖还让每位参与协助的人因问题的解决而产生一种满足感。如果你自己不是技术专家或黑客，相信我们，这种感觉对于你寻求帮助的老手和专家是非常重要的。\n问题叙述到最后不知所终总是令人沮丧的，黑客们痒痒地渴望它们被解决。『挠痒痒』为你挣到的信誉将对你下次再次张贴提问非常非常的有帮助。\n\n考虑一下怎样才能避免他人将来也遇到类似的问题，问问自己编一份文档或`FAQ`补丁会不会有帮助，如果是的话就将补丁发给维护者。\n\n在黑客中，这种良好的后继行动实际上比传统的礼貌更重要，也是你善待他人而赢得声誉的方式，这是非常有价值的财富。\n\n如何解读回答\n==================\n\n『读读他妈的手册（`RTFM`）』和『搜搜他妈的网络（`STFW`）』：是在告知你的问题根本不该提出来\n-------------------\n\n有一个古老而神圣的传统：如果你收到『读读他妈的手册（`RTFM`）』的回复，发信人认为你应该去『读读他妈的手册』。他或她多半是对的，去读一下吧。\n\n『读读他妈的手册（`RTFM`）』有个年轻一点的亲戚，如果你收到『搜搜他妈的网络（`STFW`）』的回复，发信人认为你应该『搜搜他妈的网络』。那人多半也是对的，去搜一下吧。（更温和一点的说法是『谷歌是你的朋友！』）\n\n在论坛，你也可能被要求去搜索论坛的文档。事实上，有人甚至可能热心地为你提供以前解决此问题的线索。但不要依赖这种关照，提问前应该先搜索一下文档。\n\n通常，叫你搜索的人已经打开了能解决你问题的手册或网页，正在一边看一边敲键盘。这些回复意味着他认为：第一，你要的信息很容易找到。第二，自已找要比别人喂到嘴里能学得更多。\n\n你不应该觉得这样就被冒犯了，按黑客的标准，回复者没有不理你就是在向你表示某种尊敬，你反而应该感谢他热切地想帮助你。\n\n如果你还是不明白……\n-------------------\n\n如果你看不懂回答，不要马上回复一个要求说明的消息，先试试那些最初提问时用过的相同工具（如手册、`FAQ`、网页、懂行的朋友等）试着搞懂回答。如果还是需要说明，展现你已经明白的。\n\n譬如，假如我告诉你：『看起来像是某输入项有问题，你需要清除它』，接着是个 **_不好_** 的回帖：『什么是某输入项？』。\n而这是一个 **_很好_** 的跟帖：『是的，我读了手册，某某输入项只在`-z`和`-p`开关中被提到，但都没有涉及到如何清除它们，你指的是哪一个还是我弄错了什么？』\n\n对待无礼\n-------------------\n\n很多黑客圈子中看似无礼的行为并不是存心冒犯。相反，它是直接了当、一针见血式的交流风格，这种风格对于更关注解决问题而不是使别人感觉舒服而混乱的人是很自然的。\n\n如果你觉得被冒犯了，试着平静地反应。如果有人真的做了出格的事，邮件列表、新闻组或论坛中的前辈多半会招呼他。\n如果这 **_没有_** 发生而你却发火了，那么你发火对象的言语可能在黑客社区中看起来是正常的，而 **_你_** 将被视为有错的一方，这将伤害到你获取信息或帮助的机会。\n\n另一方面，你会偶而真的碰到无礼和无聊的言行。与上述相反，对真正的冒犯者狠狠地打击、用犀利的语言将其驳得体无完肤都是可以接受的。\n然尔，在行事之前一定要非常非常的有根据。纠正无礼的言论与开始一场毫无意义的口水战仅一线之隔，黑客们自己莽撞地越线的情况并不鲜见。\n如果你是新手或外来者，避开这种莽撞的机会并不高。如果你想得到的是信息而不是消磨时光，这时最好不要把手放在键盘上以免冒险。\n\n（有些人断言很多黑客都有轻度的自闭症或阿斯伯格综合症，缺少用于润滑人类社会『正常』交往所需的脑电路。这既可能是真也可能是假。\n如果你自己不是黑客，兴许你认为我们脑袋有问题还能帮助你应付我们的古怪行为。只管这么干好了，我们不在乎。我们 **_喜欢_** 现在这个样子，并且一般都对病号标记有站得住脚的怀疑。）\n\n在下一节，我们会谈到另一个问题，当 **_你_** 行为不当时会受到的『冒犯』。\n\n-----------------\n相关资源\n==================\n\n如果需要个人电脑、`Unix`和互联网如何工作的基础知识，参阅 [`Unix`和互联网工作的基本原理](http://en.tldp.org/HOWTO/Unix-and-Internet-Fundamentals-HOWTO/)。\n\n当你发布软件或补丁时，试着按 [软件发布实践](http://en.tldp.org/HOWTO/Software-Release-Practice-HOWTO/index.html) 操作。\n\n鸣谢\n==================\n\n伊夫林 · 米切尔（_Evelyn Mitchell_）贡献了一些愚蠢问题例子并启发了编写『如何更好地回答问题』这一节，米哈伊尔 · 罗门迪克（_Mikhail Ramendik_）贡献了一些特别有价值的建议和改进。\n\n修订历史\n==================\n\n修订版 | 时间 | 修订人 | 修订内容\n----- | ---- | ---- | ----\n3.10 | 2014年5月21日 | esr | 新增`Stack Overflow`的一节\n3.9 | 2013年4月23日 | esr | 修正链接\n3.8 | 2012年6月19日 | esr | 修正链接\n3.7 | 2010年12月6日 | esr | 对于英语为第二语言人士的有益建议\n3.7 | 2010年11月2日 | esr | 几种翻译不见了\n3.6 | 2008年3月19日 | esr | 小更新及新链接\n3.5 | 2008年1月2日 | esr | 勘误及一些翻译链接\n3.4 | 2007年3月24日 | esr | 新章节：『关于代码的问题』\n3.3 | 2006年9月29日 | esr | 增加凯 · 尼格曼（_Kai Niggemann_）的一个好建议\n3.2 | 2006年1月10日 | esr | 加入瑞克 · 莫恩（_Rick Moen_）编写的内容\n3.1 | 2004年10月28日 | esr | 文档『谷歌是你的朋友！』\n3.0 | 2004年2月2日 | esr | 主要新增在网页论坛应有的礼节\n\n-----------------\n","slug":"how-to-ask-questions-the-smart-way","published":1,"updated":"2018-03-25T14:35:31.797Z","_id":"cjf6wl6pk00152gtp6p0o1zuw","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"提问的智慧\"><a href=\"#提问的智慧\" class=\"headerlink\" title=\"提问的智慧\"></a>提问的智慧</h1><p><strong>艾瑞克 · 史蒂文 · 雷蒙德（<em>Eric Steven Raymond</em>）</strong><br><a href=\"http://www.catb.org/~esr/\" target=\"_blank\" rel=\"noopener\">Thyrsus Enterprises</a><br><a href=\"mailto:esr@thyrsus.com\" target=\"_blank\" rel=\"noopener\">esr@thyrsus.com</a></p>\n<p><strong>瑞克 · 莫恩（<em>Rick Moen</em>）</strong><br><a href=\"mailto:respond-auto@linuxmafia.com\" target=\"_blank\" rel=\"noopener\">respond-auto@linuxmafia.com</a></p>\n<p>版权 © 2001，2006，2014 <em>Eric S. Raymond</em>，<em>Rick Moen</em></p>\n<h2 id=\"目录\"><a href=\"#目录\" class=\"headerlink\" title=\"目录\"></a>目录</h2><ul>\n<li><a href=\"#译文\">译文</a> </li>\n<li><a href=\"#免责声明\">免责声明</a></li>\n<li><a href=\"#引言\">引言</a></li>\n<li><a href=\"#如何做提问前的准备\">如何做提问前的准备</a></li>\n<li><a href=\"#如何提问\">如何提问</a><ul>\n<li><a href=\"#仔细挑选论坛\">仔细挑选论坛</a></li>\n<li><a href=\"#stack-overflow\"><code>Stack Overflow</code></a></li>\n<li><a href=\"#面向新手的论坛和互联网中继聊天irc通常响应最快\">面向新手的论坛和互联网中继聊天（<code>IRC</code>）通常响应最快</a></li>\n<li><a href=\"#第二步使用项目的邮件列表\">第二步，使用项目的邮件列表</a></li>\n<li><a href=\"#使用有意义且明确的主题\">使用有意义且明确的主题</a></li>\n<li><a href=\"#使问题容易回复\">使问题容易回复</a></li>\n<li><a href=\"#用清晰语法拼写正确的语句书写\">用清晰、语法、拼写正确的语句书写</a></li>\n<li><a href=\"#使用易于读取且标准的文件格式发送问题\">使用易于读取且标准的文件格式发送问题</a></li>\n<li><a href=\"#描述问题应准确且有内容\">描述问题应准确且有内容</a></li>\n<li><a href=\"#量不在多精炼则灵\">量不在多，精炼则灵</a></li>\n<li><a href=\"#别急于宣称找到bug\">别急于宣称找到<code>Bug</code></a></li>\n<li><a href=\"#低声下气代替不了做自己的家庭作业\">低声下气代替不了做自己的家庭作业</a></li>\n<li><a href=\"#描述问题症状而不是猜测\">描述问题症状而不是猜测</a></li>\n<li><a href=\"#按时间先后罗列问题症状\">按时间先后罗列问题症状</a></li>\n<li><a href=\"#描述目标而不是过程\">描述目标而不是过程</a></li>\n<li><a href=\"#别要求私下回复电邮\">别要求私下回复电邮</a></li>\n<li><a href=\"#提问应明确\">提问应明确</a></li>\n<li><a href=\"#关于代码的问题\">关于代码的问题</a></li>\n<li><a href=\"#别张贴家庭作业式问题\">别张贴家庭作业式问题</a></li>\n<li><a href=\"#删除无意义的要求\">删除无意义的要求</a></li>\n<li><a href=\"#不要把问题标记为紧急即使对你而言的确如此\">不要把问题标记为『紧急』，即使对你而言的确如此</a></li>\n<li><a href=\"#礼貌总是有益的\">礼貌总是有益的</a></li>\n<li><a href=\"#问题解决后追加一条简要说明\">问题解决后追加一条简要说明</a></li>\n</ul>\n</li>\n<li><a href=\"#如何解读回答\">如何解读回答</a><ul>\n<li><a href=\"#读读他妈的手册rtfm和搜搜他妈的网络stfw是在告知你的问题根本不该提出来\">『读读他妈的手册（<code>RTFM</code>）』和『搜搜他妈的网络（<code>STFW</code>）』：是在告知你的问题根本不该提出来</a></li>\n<li><a href=\"#如果你还是不明白\">如果你还是不明白……</a></li>\n<li><a href=\"#对待无礼\">对待无礼</a></li>\n</ul>\n</li>\n<li><a href=\"#别像失败者那样反应\">别像失败者那样反应</a></li>\n<li><a href=\"#提问禁忌\">提问禁忌</a></li>\n<li><a href=\"#好问题与坏问题\">好问题与坏问题</a></li>\n<li><a href=\"#如果得不到回答\">如果得不到回答</a></li>\n<li><a href=\"#如何更好地回答\">如何更好地回答</a></li>\n<li><a href=\"#相关资源\">相关资源</a></li>\n<li><a href=\"#鸣谢\">鸣谢</a></li>\n<li><a href=\"#修订历史\">修订历史</a></li>\n</ul>\n<h1 id=\"译文\"><a href=\"#译文\" class=\"headerlink\" title=\"译文\"></a>译文</h1><p>译文：<br><a href=\"http://bulsara.host.sk/index.php?p=2005\" target=\"_blank\" rel=\"noopener\">印尼语</a><br><a href=\"http://www.fatcow.com/edu/smart-questions-by\" target=\"_blank\" rel=\"noopener\">白俄罗斯语</a><br><a href=\"http://www.istf.com.br/perguntas/\" target=\"_blank\" rel=\"noopener\">巴西葡萄牙语</a><br><a href=\"https://github.com/oldratlee/translations/blob/master/how-to-ask-questions-the-smart-way/README.md\" target=\"_blank\" rel=\"noopener\">简体中文</a><br><a href=\"http://docs.jaspervries.nl/smart-questions/\" target=\"_blank\" rel=\"noopener\">荷兰语</a><br><a href=\"http://www.gnurou.org/documents/smart-questions-fr.html\" target=\"_blank\" rel=\"noopener\">法语</a><br><a href=\"http://maxo127.narod.ru/Geo/Articles/smart-questions_ge.html\" target=\"_blank\" rel=\"noopener\">乔治亚语</a><br><a href=\"http://www.tty1.net/smart-questions_de.html\" target=\"_blank\" rel=\"noopener\">德语</a><br><a href=\"http://www.dionyziz.com/howto-smart-questions-gr/\" target=\"_blank\" rel=\"noopener\">希腊语</a><br><a href=\"http://www.penguin.org.il/essays/smart-questions-he.html\" target=\"_blank\" rel=\"noopener\">希伯来语</a><br><a href=\"http://www.ranvis.com/articles/smart-questions.ja.html\" target=\"_blank\" rel=\"noopener\">日语</a><br><a href=\"http://rtfm.killfile.pl/\" target=\"_blank\" rel=\"noopener\">波兰语</a><br><a href=\"http://www.celiojunior.com.br/comofazerperguntas.htm\" target=\"_blank\" rel=\"noopener\">葡萄牙语</a><br><a href=\"http://wiki.lug.ro/mediawiki/index.php/Cum_se_pun_%C3%AEntreb%C4%83ri_%C3%AEn_mod_inteligent\" target=\"_blank\" rel=\"noopener\">罗马尼亚语</a><br><a href=\"http://maddog.sitengine.ru/smart-question-ru.html\" target=\"_blank\" rel=\"noopener\">俄语</a><br><a href=\"http://www.sindominio.net/ayuda/preguntas-inteligentes.html\" target=\"_blank\" rel=\"noopener\">西班牙语</a><br><a href=\"http://wiki.opentle.org/Smart-questions\" target=\"_blank\" rel=\"noopener\">泰语</a><br>如果你想复制、镜像、翻译或引用本文，请参阅我的 <a href=\"http://www.catb.org/~esr/copying.html\" target=\"_blank\" rel=\"noopener\">复制协议</a>。</p>\n<h1 id=\"免责声明\"><a href=\"#免责声明\" class=\"headerlink\" title=\"免责声明\"></a>免责声明</h1><p>许多项目的网站在如何取得帮助的部分链接了本文，这没有关系，也正是我们想要的。<br>但如果你是该项目生成此链接的网管，请在链接附近显著位置注明：<strong><em>我们不提供该项目的服务支持！</em></strong></p>\n<p>我们已经领教了没有此说明带来的痛苦，我们将不停地被一些白痴纠缠，他们认为既然我们发布了本文，那么我们就有责任解决世上所有的技术问题。</p>\n<p>如果你是因为需要帮助正在阅读本文，然后就带着可以直接从作者那取得帮助的印象离开，那么 <strong>_你_</strong> 就不幸成了我们所说的白痴之一。<br>别向 <strong>_我们_</strong> 提问，我们不会理睬的。 我们只是在这教你如何从那些真正懂得你软硬件问题的人那里取得帮助，但 99.9％ 的时间我们不会是那些人。<br>除非你非常地 <strong>_确定_</strong> 本文的作者是你遇到问题方面的专家，请不要打搅，这样大家都更开心一点。</p>\n<h1 id=\"引言\"><a href=\"#引言\" class=\"headerlink\" title=\"引言\"></a>引言</h1><p>在 <a href=\"http://www.catb.org/~esr/faqs/hacker-howto.html\" target=\"_blank\" rel=\"noopener\">黑客</a> 的世界里，你所提技术问题的解答很大程度上取决于你提问的方式与解决此问题的难度，本文将教你如何提问才更有可能得到满意的答复。</p>\n<p>开源程序的应用已经很广，你通常可以从其他更有经验的用户而不是黑客那里得到解答。<br>这是好事，他们一般对新手常有的毛病更容忍一点。然而，使用我们推荐的方法，像对待黑客那样对待这些有经验的用户，通常能最有效地得到问题的解答。</p>\n<p>第一件需要明白的事是黑客喜欢难题和激发思考的好问题。假如不是这样，我们也不会写本文了。<br>如果你能提出一个有趣的问题让我们咀嚼玩味，我们会感激你。好问题是种激励与礼物，帮助我们发展认知，揭示没有注意或想到的问题。<br>在黑客中，『好问题！』 是非常热烈而真挚的赞许。</p>\n<p>此外，黑客还有遇到简单问题就表现出敌视或傲慢的名声。<br>有时，我们看起来还对新手和愚蠢的家伙有条件反射式的无礼，但事情并不真是这样。</p>\n<p>我们只是毫无歉意地敌视那些提问前不愿思考、不做自己家庭作业的人。<br>这种人就像时间无底洞 —— 他们只知道索取，不愿意付出，他们浪费了时间，这些时间本可用于其它更有趣的问题或更值得回答的人。<br>我们将这种人叫做 『失败者（loser）』（由于历史原因，我们有时将『loser』拼写为『lusers』 。）</p>\n<p>我们意识到许多人只是想使用我们写的软件，他们对学习技术细节没有兴趣。对大多数人而言，计算机只是种工具，是种达到目的的手段而已。<br>他们有自己的生活并且有更要紧的事要做，我们承认这点，也从不指望每个人都对这些让我们着迷的技术问题感兴趣。<br>不过，我们回答问题的风格是为了适应那些 <strong>_真正_</strong> 对此有兴趣并愿意主动参与解决问题的人，这一点不会变，也不该变。<br>如果连这都变了，我们就会在自己能做得最好的事情上不再那么犀利。</p>\n<p>我们（大多数）是自愿者，从自己繁忙的生活中抽时间来回答问题，有时会力不从心。<br>因此，我们会毫不留情地滤除问题，特别是那些看起来像是失败者提的，以便更有效地把回答问题的时间留给那些胜利者。</p>\n<p>如果你认为这种态度令人反感、以施惠者自居或傲慢自大，请检查你的假设，我们并未要求你屈服 ——<br>事实上，假如你做了该做的努力，我们中的大多数将非常乐意平等地与你交流，并欢迎你接纳我们的文化。<br>试图去帮助那些不愿自救的人对我们简直没有效率。不懂没有关系，但愚蠢地做事不行。</p>\n<p>所以，你不必在技术上很在行才能吸引我们的注意，但你 <strong>_必须_</strong> 表现出能引导你在行的姿态 —— 机敏、有想法、善于观察、乐于主动参与问题的解决。<br>如果你做不到这些使你与众不同的事情，我们建议你付钱跟别人签商业服务合同，而不是要求黑客无偿帮助。</p>\n<p>如果你决定向我们求助，你不会想成为一名失败者，你也不想被看成一个失败者。<br>得到快速有效回答的最好方法是使提问者看起来像个聪明、自信和有想法的人，并且暗示只是碰巧在某一特别问题上需要帮助。</p>\n<p>（欢迎对本文指正，可以将建议发至 <a href=\"mailto:esr@thyrsus.com\" target=\"_blank\" rel=\"noopener\">esr@thyrsus.com</a> 或 <a href=\"mailto:esr@thyrsus.com\" target=\"_blank\" rel=\"noopener\">respond-auto@linuxmafia.com</a>。<br>请注意，本文不想成为一般性的 <a href=\"http://www.ietf.org/rfc/rfc1855.txt\" target=\"_blank\" rel=\"noopener\">网络礼仪</a> 指南，我一般会拒绝那些与引出技术论坛中有用的回答不特别相关的建议。）</p>\n<hr>\n<h1 id=\"如何做提问前的准备\"><a href=\"#如何做提问前的准备\" class=\"headerlink\" title=\"如何做提问前的准备\"></a>如何做提问前的准备</h1><p>在通过电邮、新闻组或论坛提技术问题以前，做以下事情：</p>\n<ol>\n<li>尝试在你准备提问论坛的历史文档中搜索答案</li>\n<li>尝试搜索互联网以找到答案</li>\n<li>尝试阅读手册以找到答案</li>\n<li>尝试阅读『常见问题文档（<code>FAQ</code>）』以找到答案</li>\n<li>尝试自己检查或试验以找到答案</li>\n<li>尝试请教懂行的朋友以找到答案</li>\n<li>如果你是程序员，尝试阅读源代码以找到答案</li>\n</ol>\n<p>提问时，请先表明你已做了上述事情，这将有助于建立你不是寄生虫与浪费别人时间的印象。最好再表述你从中 <strong><em>学到的东西</em></strong> ，我们喜欢回答那些表现出能从答案中学习的人。</p>\n<p>运用某些策略，比如用谷歌（<code>Google</code>）搜索你遇到的各种错误提示（既搜索 <a href=\"http://groups.google.com/\" target=\"_blank\" rel=\"noopener\">谷歌论坛</a>，也搜索网页）， 这样很可能直接就找到了解决问题的文档或邮件列表线索。<br>即使没有结果，在邮件列表或新闻组寻求帮助时提一句『我在谷歌中搜过下列句子但没有找到什么有用的东西』 也是件好事，至少它表明了搜索引擎不能提供哪些帮助。<br>将搜索关键词与你的问题及可能的解决方案联系起来，还有助于引导其他有类似问题的人。</p>\n<p>别着急，不要指望几秒钟的谷歌搜索就能解决一个复杂的问题。读一下常见问题文档。在向专家提问之前，先向后靠靠放松一下，再思考一下问题。<br>相信我们，他们能从你的提问看出你做了多少阅读与思考，如果你是有备而来，将更有可能得到解答。不要将所有问题一股脑抛出，只因你的第一次搜索没有结果（或者结果太多）。</p>\n<p>认真地思考，准备好你的问题。轻率的提问只能得到轻率的回答，或者压根没有。在提问时，你越是表现出在此前做过思考与努力去解决自己的问题，你越有可能得到真正的帮助。</p>\n<p>注意别提错问题。如果提问基于错误的假设，某黑客多半会一边想 『愚蠢的问题……』，一边按将错就错的答案回复你，并且希望这种只是得到你自己『问的问题』而非真正所需的解答，给你一个教训。</p>\n<p>永远不要假设你 <strong><em>有资格</em></strong> 得到解答。你没有这种资格，毕竟你没有为此服务付费。<br>如果你能够提出有内容、有趣和激励思考的问题 —— 那种毫无疑问能够向社区贡献经验，而不仅仅是消极地要求从别人那获取知识的问题，你将『挣到』答案。</p>\n<p>另一方面，表明你有能力也乐意参与问题的解决是个很好的开端。『有没有人能指个方向？』，我这还差点什么？』，『我应该查哪个网站？』，<br>通常要比 『请给出我可以用的完整步骤』更容易得到回复，因为你表明了只要有人能指个方向，你就很乐意完成剩下的过程。</p>\n<h1 id=\"如何提问\"><a href=\"#如何提问\" class=\"headerlink\" title=\"如何提问\"></a>如何提问</h1><h2 id=\"仔细挑选论坛\"><a href=\"#仔细挑选论坛\" class=\"headerlink\" title=\"仔细挑选论坛\"></a>仔细挑选论坛</h2><p>要对在哪提问留心，如果你做了下述事情，多半会被一笔勾销或被看成『失败者』：</p>\n<ul>\n<li>张贴与论坛主题无关的问题</li>\n<li>在面向高级技术问题的论坛上张贴肤浅的问题，反之亦然</li>\n<li>在太多不同的新闻组同时张贴</li>\n<li>给既非熟人也没有义务解决你问题的人发送你私人的电邮</li>\n</ul>\n<p>为保护通信的渠道不被无关的东西淹没，黑客会除掉那些没有找对地方的问题，你不会想让这种事落到自己头上的。</p>\n<p>因此，第一步是找对论坛。谷歌和其它搜索引擎还是你的朋友，可以用它们搜索你遇到困难的软硬件问题最相关的项目网站。那里通常都有项目的常见问题（<code>FAQ</code>）、邮件列表及文档的链接。<br>如果你的努力（包括 <strong>_阅读_</strong> <code>FAQ</code>）都没有结果，这些邮件列表就是最后能取得帮助的地方。项目的网站也许还有报告<code>Bug</code>的流程或链接，如果是这样，去看看。</p>\n<p>向陌生的人或论坛发送邮件极有可能是在冒险。譬如，不要假设一个内容丰富的网页的作者想充当你的免费顾问，不要对你的问题是否会受到欢迎做太乐观的估计 —— 如果你不确定，向别处发或者压根别发。</p>\n<p>在选择论坛、新闻组或邮件列表时，别太相信名字，先看看<code>FAQ</code>或者许可书以明确你的问题是否切题。发贴前先翻翻已有的帖子，这样可以让你感受一下那里行事的方式。<br>事实上，张贴前在新闻组或邮件列表的历史文档中搜索与你问题相关的关键词是个极好的主意，也许就找到答案了。即使没有，也能帮助你归纳出更好的问题。</p>\n<p>别像机关枪似的一次性『扫射』所有的帮助渠道，这就像大喊大叫一样会令人不快，温柔地一个一个来。</p>\n<p>弄懂主题！最典型的错误之一是在某种致立于跨平台可移植的语言、库或工具的论坛中提关于<code>Unix</code>或<code>Windows</code>操作系统程序接口的问题。如果你不明白为什么这是大错，最好在搞清楚概念前什么也别问。</p>\n<p>一般来说，在仔细挑选的公共论坛中提问比在私有论坛中提同样的问题更容易得到有用的回答。有几个道理支持这点，一是看潜在的回复者有多少，二是看论坛的参与者有多少，黑客更愿回答能启发多数人的问题。</p>\n<p>可以理解，老练的黑客和一些流行软件的作者正在承受过多的不当消息。就像那根最后压垮骆驼背的稻草一样，<br>你的加入也有可能使情况走向极端 —— 已经好几次了，一些流行软件的作者退出了对自己软件的支持，因为伴随而来的涌入其私人邮箱的垃圾邮件变得无法忍受。</p>\n<h2 id=\"Stack-Overflow\"><a href=\"#Stack-Overflow\" class=\"headerlink\" title=\"Stack Overflow\"></a><code>Stack Overflow</code></h2><p>搜索 <strong>_之后_</strong> 再在<code>Stack Exchange</code>提问。</p>\n<p>近年来，<code>Stack Exchange</code>社区站点已经成为回答技术问题和其他问题的一个主流方式，甚至是很多开源项目的首选论坛。</p>\n<p>查看<code>Stack Exchange</code>之前先搜索谷歌；谷歌对<code>Stack Exchange</code>的索引是实时的。<br>如果有人问过类似的问题，这样很容易就找到了，<code>Stack Exchange</code>站点的内容往往在搜索结果的顶部出现。<br>如果没有找到要的内容，可以在与你问题最相关的网站上重新搜索（见下文说明）。通过标签搜索可以缩小结果范围。</p>\n<p>如果你还是没有发现任何内容，把你的问题发表到 <strong>_一个_</strong> 最相关的网站上。使用格式化工具，特别是对于代码，并添加与问题内容相关的标签（尤其比如 编程语言，操作系统，或者你遇到麻烦的库名）。<br>如果评论者要求你提供更多信息，请编辑你的主贴新加上来。如果答案对你有帮助，请单击向上箭头给这个答案投票；如果有答案给出了解决办法，请点击投票箭头下面的勾，以接受它成为正确答案。</p>\n<p><code>Stack Exchange</code>已经发展到<a href=\"http://stackexchange.com/sites\" target=\"_blank\" rel=\"noopener\">超过100个站点</a>，下面说明了什么问题最合适放在哪个站点：</p>\n<ul>\n<li><a href=\"http://superuser.com/\" target=\"_blank\" rel=\"noopener\"><code>Super User</code></a>是关于通用计算的问题。如果你的问题和代码无关，或者你说的只是程序在网络连接上的问题，九成在这里问。</li>\n<li><a href=\"http://stackoverflow.com/\" target=\"_blank\" rel=\"noopener\"><code>Stack Overflow</code></a>是关于编程问题。</li>\n<li><a href=\"http://serverfault.com/\" target=\"_blank\" rel=\"noopener\"><code>Server Fault</code></a>是关于服务器和网络管理的问题。</li>\n</ul>\n<p>有几个项目有自己的特定站点，包括<a href=\"http://android.stackexchange.com/\" target=\"_blank\" rel=\"noopener\"><code>Android</code></a>、<a href=\"http://askubuntu.com/\" target=\"_blank\" rel=\"noopener\"><code>Ubuntu</code></a>、<a href=\"http://tex.stackexchange.com/\" target=\"_blank\" rel=\"noopener\"><code>TeX/LaTeX</code></a>和<a href=\"http://sharepoint.stackexchange.com/\" target=\"_blank\" rel=\"noopener\"><code>SharePoint</code></a>。请检查一下<code>Stack Exchange</code>以确定现在具体有哪些站点。</p>\n<h2 id=\"面向新手的论坛和互联网中继聊天（IRC）通常响应最快\"><a href=\"#面向新手的论坛和互联网中继聊天（IRC）通常响应最快\" class=\"headerlink\" title=\"面向新手的论坛和互联网中继聊天（IRC）通常响应最快\"></a>面向新手的论坛和互联网中继聊天（<code>IRC</code>）通常响应最快</h2><p>本地的用户组织或者你所用的<code>Linux</code>发行版也许正在宣传新手取得帮助的论坛或<code>IRC</code>通道（在一些非英语国家，新手论坛很可能还是邮件列表），这些地方是开始提问的好去处，特别是当你觉得遇到的也许只是相对简单或者很普通的问题时。<br>经过宣传的<code>IRC</code>通道是公开邀请提问的地方，通常可以得到实时的回复。</p>\n<p>事实上，如果出问题的程序来自某发行版（这很常见），最好先去该发行版的论坛或邮件列表中提问，再到程序本身的项目论坛或邮件列表。否则该项目的黑客可能仅仅回复『用 <strong><em>我们的</em></strong> 代码』。</p>\n<p>在任何论坛发贴以前，先看看有没有搜索功能。如果有，就试着用问题的几个关键词搜索一下，也许就有帮助。如果在此之前你已做过全面的网页搜索（你应该这样去做），还是再搜索一下论坛，搜索引擎有可能没来得及索引此论坛的全部内容。</p>\n<p>通过论坛或<code>IRC</code>通道提供项目的用户支持有增长的趋势，电子邮件交流则更多地为项目开发者保留。所以先在论坛或<code>IRC</code>中寻求与该项目相关的帮助。</p>\n<h2 id=\"第二步，使用项目的邮件列表\"><a href=\"#第二步，使用项目的邮件列表\" class=\"headerlink\" title=\"第二步，使用项目的邮件列表\"></a>第二步，使用项目的邮件列表</h2><p>当某个项目存在开发者邮件列表时，要向列表而不是其中的个别成员提问，即使你确信他能最好地回答你的问题。查一查项目的文档和主页，找到项目的邮件列表并使用它。采用这种办法有几个很好的理由：</p>\n<ul>\n<li>向一个开发者提的好问题，对整个项目组也会有益。反之，如果你认为自己的问题对整个项目组来说太愚蠢，就没有理由去去骚扰单个开发者。</li>\n<li>向列表提问可以分散开发者的负担，单个开发者（尤其是项目领导）也许太忙以至于没法回答你的问题。</li>\n<li>大多数邮件列表都要存档，那些存档将被搜索引擎索引，如果你向列表提问并得到解答，将来其它人可以通过网页搜索找到你的问题和答案，也就不用再次发问了。</li>\n<li>如果某些问题经常被问到，开发者可以利用此信息改进文档或软件本身，以使其更清楚。如果只是私下提问，就没有人能看到最常见问题的完整场景。</li>\n</ul>\n<p>如果一个项目既有 『用户』 也有『开发者』（或 『黑客』）邮件列表或论坛，而你又不摆弄那些代码，向『用户』列表或论坛提问。不要假设自己会在开发者列表中受到欢迎，那些人多半会遭受你的噪音干扰。</p>\n<p>然尔，如果你 <strong>_确信_</strong> 你的问题不一般，而且在『用户』 列表或论坛中几天都没有回复，可以试试『开发者』列表或论坛。<br>建议你在张贴前最好先暗暗地观察几天，至少看看最近几天保存的帖子，以了解那的行事方式（事实上这是参与任何私有或半私有列表的好主意）</p>\n<p>如果你找不到一个项目的邮件列表，而只能查到项目维护者的地址，只管向其发信。<br>即便在这种情况下，也别假设项目的邮件列表不存在。在你的电子邮件中陈述你已经试过但没有找到合适的邮件列表，也提及你不反对将自己的邮件转发给他人<br>（许多人认为，即使没什么秘密，私人电子邮件也不应该被公开。通过允许将你的电子邮件转发他人，你给了相应人员处置你邮件的选择）。</p>\n<h2 id=\"使用有意义且明确的主题\"><a href=\"#使用有意义且明确的主题\" class=\"headerlink\" title=\"使用有意义且明确的主题\"></a>使用有意义且明确的主题</h2><p>在邮件列表、新闻组或论坛中，主题是你在五十个或更少的字以内吸引有资格专家注意的黄金机会，不要用诸如 『请帮我』 （更别提大写的 『请帮我！！！！』，这种主题的消息会被条件反射式地删掉）之类的唠叨浪费机会。<br>不要用你痛苦的深度来打动我们，相反，要在这点空间中使用超级简明扼要的问题描述。</p>\n<p>编写主题题头好的惯例格式是『对象 —— 偏差』，许多技术支持组织都支持这么做。在『对象』部分指明是哪一个或哪一组东西有问题，在『偏差』部分则描述与期望的行为不一致的地方。</p>\n<p><strong>愚蠢：</strong></p>\n<blockquote>\n<p>救命啊！我的笔记本视频工作不正常！</p>\n</blockquote>\n<p><strong>明智：</strong></p>\n<blockquote>\n<p><code>X.org 6.8.1</code>扭曲鼠标光标，<code>MV1005</code>型号的某显卡芯片组</p>\n</blockquote>\n<p><strong>更明智：</strong></p>\n<blockquote>\n<p>使用<code>MV1005</code>型号的某显卡芯片组在<code>X.org 6.8.1</code>的鼠标光标被扭曲</p>\n</blockquote>\n<p>编写 『对象 —— 偏差』式描述的过程有助于你组织对问题的细致思考。是什么被影响了？仅仅是鼠标光标或者还有其它图形？<br>只在<code>X.org</code>中出现？或只是在其<code>6.8.1</code>版中？是针对某显卡芯片组？或者只是其中的<code>MV1005</code>型号？一个黑客只需描一眼就能够立即明白什么是你遇到的问题，什么是你自己的问题。</p>\n<p>更一般地，想像一下在一个只显示主题的文档索引中查找。让你的主题更好地反映问题，可以使下一个搜索类似问题的人能够在文档中直接就找到答案的线索，而不用再次发贴提问。</p>\n<p>如果你想在回复中提问，确保改变主题以表明你是在问一个问题，一个主题像 『Re: 测试』 或者 『Re: 新<code>Bug</code>』的消息不太可能引起足够的注意。同时，将回复中与新主题不甚相关的引用内容尽量删除。</p>\n<p>对于列表消息，不要直接点击回复按钮来开始一个全新的线索，这将限制你的观众。有些邮件阅读程序，比如<code>mutt</code>，允许用户按线索排序并通过折叠线索来隐藏消息，这样做的人永远看不到你发的消息。</p>\n<p>仅仅改变主题还不够。<code>mutt</code>和其它一些邮件阅读程序还要检查邮件头主题以外的其它信息，以便为其指定线索，所以宁可发一个全新的邮件。</p>\n<p>在论坛，因为消息与特定的线索紧密结合，并且通常在线索之外不可见，好的提问方式略有不同，通过回复提问并不要紧。不是所有论坛都允许在回复中出现分离的主题，而且这样做了基本上没有人会去看。<br>不过，通过回复提问本身就是令人怀疑的做法，因为它们只会被正在查看该线索的人读到。所以，除非你 <strong>_只想_</strong> 在该线索当前活跃的人群中提问，还是另起炉灶比较好。</p>\n<h2 id=\"使问题容易回复\"><a href=\"#使问题容易回复\" class=\"headerlink\" title=\"使问题容易回复\"></a>使问题容易回复</h2><p>以『请向……回复』来结束问题多半会使你得不到回答。如果你觉得花几秒钟在邮件客户端设置一下回复地址都麻烦，我们也觉得花几秒钟考虑你的问题更麻烦。<br>如果你的邮件客户端程序不支持这样做，<a href=\"http://linuxmafia.com/faq/Mail/muas.html\" target=\"_blank\" rel=\"noopener\">换个好点的</a>；如果是操作系统不支持所有这种邮件客户端程序，也换个好点的。</p>\n<p>在论坛，要求通过电子邮件回复是完全无礼的，除非你确信回复的信息也许是敏感的（而且有人会为了某些未知的原因，只让你而不是整个论坛知道答案）。<br>如果你只是想在有人回复线索时得到电子邮件提醒，可以要求论坛发送。几乎所有论坛都支持诸如『留意本线索』、『有回复发送邮件』等功能。</p>\n<h2 id=\"用清晰、语法、拼写正确的语句书写\"><a href=\"#用清晰、语法、拼写正确的语句书写\" class=\"headerlink\" title=\"用清晰、语法、拼写正确的语句书写\"></a>用清晰、语法、拼写正确的语句书写</h2><p>经验告诉我们，粗心与草率的作者通常也粗心与草率地思考和编程（我敢打赌）。为这些粗心与草率的思考者回答问题没有什么好处，我们宁可将时间花在其它地方。</p>\n<p>清楚、良好地表达你的问题非常重要。如果你觉得这样做麻烦，我们也觉得注意你的问题麻烦。<br>花点额外的精力斟酌一下字句，用不着太僵硬与正式 —— 事实上，黑客文化很看重能准确地使用非正式、俚语和幽默的语句。但它 <strong>_必须_</strong> 很准确，而且有迹象表明你是在思考和关注问题。</p>\n<p>正确地拼写、使用标点和大小写，不要将『its』混淆为『it’s』，『loose』搞成『lose』或者将『discrete』弄成 『discreet』。不要全部用大写，这会被视为无礼的大声嚷嚷。<br>（全部小写也好不到哪去，因为不易阅读。<em>Alan Cox</em> 也许可以这样做，但你不行。）<br>【<strong>_译注_</strong>：<a href=\"https://en.wikipedia.org/wiki/Alan_Cox\" target=\"_blank\" rel=\"noopener\"><em>Alan Cox</em></a> 著名黑客，<code>Linux</code>内核的重要参与者】</p>\n<p>一般而言，如果你写得像个半文盲似的傻子，多半得不到理睬。也不要使用即时通讯中的简写，如将『you』简化为『u』会使你看起来像一个为了节约二次击键的半文盲式的傻子。<br>更糟的是，如果像个小孩似地鬼画桃符那绝对是在找死，可以肯定没人会理你（或者最多是给你一大堆指责与挖苦）。</p>\n<p>如果在非母语论坛提问，你的拼写与语法错误会得到有限的宽容，但懒惰完全不会被容忍（是的，我们通常看得出其中的差别）。<br>同时，除非你知道回复者使用的语言，请使用英语书写。繁忙的黑客一般会直接删除用他们看不懂语言写的消息。<br>在互联网上英语是工作语言，用英语书写可以将你的问题不被阅读就被直接删除的可能性降到最低。</p>\n<p>如果你用英语书写但它是你的第二语言，最好提醒潜在的回复者语言上可能的困难以便绕过这个问题，比如：</p>\n<ul>\n<li>英语不是我的母语，请谅解拼写错误。</li>\n<li>如果您使用某某语言，请电邮/私聊我，也许我需要您的协助翻译我的问题。</li>\n<li>对于这个技术术语本身我很熟悉，但对于它的一些俚语或习惯表达方式就不太明白了。</li>\n<li>我已经同时用某某语及英语提问，如果您使用两者之一回复，我很乐意翻译。</li>\n</ul>\n<h2 id=\"使用易于读取且标准的文件格式发送问题\"><a href=\"#使用易于读取且标准的文件格式发送问题\" class=\"headerlink\" title=\"使用易于读取且标准的文件格式发送问题\"></a>使用易于读取且标准的文件格式发送问题</h2><p>如果你人为地将问题搞得难以阅读，它多半会被忽略，人们更愿读易懂的问题，所以：</p>\n<ul>\n<li>使用纯文本而不是<code>HTML</code>（ <a href=\"http://www.birdhouse.org/etc/evilmail.html\" target=\"_blank\" rel=\"noopener\">关闭<code>HTML</code></a> 并不难）</li>\n<li>使用<code>MIME</code>附件通常没有问题，前提是真正有内容（譬如附带的源文件或补丁），而不仅仅是邮件客户端程序生成的模板（譬如只是消息内容的拷贝）。</li>\n<li>不要发送整段只是单行句子但多次折回的邮件（这使得回复部分内容非常困难）。设想你的读者是在80个字符宽的文本终端阅读邮件，设置你的行折回点小于 80 列。</li>\n<li>但是，也 <strong>_不要_</strong> 用任何固定列折回数据（譬如日志文件拷贝或会话记录）。数据应该原样包含，使回复者确信他们看到的是与你看到的一样的东西。</li>\n<li>在英语论坛中，不要使用<code>MIME</code>可打印字符引用编码编码（<a href=\"https://zh.wikipedia.org/wiki/Quoted-printable\" target=\"_blank\" rel=\"noopener\"><code>Quoted-Printable encoding</code></a>）发送消息。这种编码对于张贴非<code>ASCII</code>语言可能是必须的，但很多邮件程序并不支持。<br>  当它们分断时，那些文本中四处散布的 『<code>=20</code>』符号既难看也分散注意力，甚至有可能破坏内容的语意。</li>\n<li><strong><em>永远不要</em></strong> 指望黑客们阅读使用封闭的专用格式编写的文档，诸如微软公司的<code>Word</code>或<code>Excel</code>文件等。<br>  大多数黑客对此的反应就像有人将还在冒热气的猪粪倒在你门口时你的反应一样。即使他们能够处理，也很厌恶这么做。</li>\n<li>如果你从使用视窗的电脑发送电子邮件，关闭问题颇多的微软『聪明引用』功能（在『工具』 -&gt; 『自动纠正选项』的『输入时自动格式化』下去掉聪明引用的选框），以免在你的邮件中到处散布垃圾字符。</li>\n<li>在论坛，勿滥用『表情符号』和『<code>HTML</code>』功能（当它们提供时）。一两个表情符号通常没有问题，但花哨的彩色文本倾向于使人认为你是个无能之辈。过滥地使用表情符号、色彩和字体会使你看来像个傻笑的小姑娘。<br>  这通常不是个好主意，除非你只是对性而不是有用的回复更有兴趣。</li>\n</ul>\n<p>如果你使用图形用户界面的邮件客户端程序（如网景公司的<code>Messenger</code>、微软公司的<code>Outlook</code>或者其它类似的），注意它们的缺省配置不一定满足这些要求。<br>大多数这类程序有基于菜单的『查看源码』命令，用它来检查发送文件夹中的消息，以确保发送的是没有多余杂质的纯文本文件。</p>\n<h2 id=\"描述问题应准确且有内容\"><a href=\"#描述问题应准确且有内容\" class=\"headerlink\" title=\"描述问题应准确且有内容\"></a>描述问题应准确且有内容</h2><ul>\n<li>仔细、清楚地描述问题的症状</li>\n<li>描述问题发生的环境（主机、操作系统、应用程序，任何相关的），提供销售商的发行版和版本号（如：『<code>Fedora Core 7</code>』、『<code>Slackware 9.1</code>』等）</li>\n<li>描述提问前做过的研究及其理解。</li>\n<li>描述提问前为确定问题而采取的诊断步骤。</li>\n<li>描述最近对计算机或软件配置的任何相关改变。</li>\n<li>如果可能，提供在可控环境下重现问题的方法。</li>\n</ul>\n<p>尽最大努力预测黑客会提到的问题，并提前备好答案。</p>\n<p>如果你认为是代码有问题，向黑客提供在可控环境下重现问题的方法尤其重要。当你这么做时，得到有用且及时回复的可能性将大大增加。</p>\n<p>西蒙 · 泰瑟姆（<em>Simon Tatham</em>）写过一篇 <a href=\"http://www.chiark.greenend.org.uk/~sgtatham/bugs.html\" target=\"_blank\" rel=\"noopener\">如何有效报告<code>Bug</code></a> 的文章，我强烈推荐各位阅读。</p>\n<h2 id=\"量不在多，精炼则灵\"><a href=\"#量不在多，精炼则灵\" class=\"headerlink\" title=\"量不在多，精炼则灵\"></a>量不在多，精炼则灵</h2><p>你应该写得精炼且有内容，简单地将一大堆代码或数据罗列在求助消息中达不到目的。如果你有一个很大且复杂的测试样例让程序崩溃，尝试将其裁剪得越小越好。</p>\n<p>至少有三个理由支持这点。第一，让别人看到你在努力简化问题使你更有可能得到回复。<br>第二，简化问题使你更有可能得到 <strong><em>有用的</em></strong> 回复。第三，在提纯<code>Bug</code>报告的过程中，你可能自己就找到了解决办法或权宜之计。</p>\n<h2 id=\"别急于宣称找到Bug\"><a href=\"#别急于宣称找到Bug\" class=\"headerlink\" title=\"别急于宣称找到Bug\"></a>别急于宣称找到<code>Bug</code></h2><p>当你在一个软件中遇到问题，除非你 <strong><em>非常、非常</em></strong> 的有根据，不要动辄声称找到了<code>Bug</code>。<br>提示：除非你能提供解决问题的源代码补丁，或者对前一版本的回归测试表现出不正确的行为，否则你都多半不够完全确信。<br>对于网页和文档也如此，如果你发现了文档的『<code>Bug</code>』，你应该能提供相应位置的替代文本。</p>\n<p>记住，还有许多其它用户并未经历你遇到的问题，否则你在阅读文档或搜索网页时就应该发现了（你在报怨前已经做了这些，<a href=\"#如何做提问前的准备\">是吧</a> ？）。<br>这也意味着很有可能是你弄错了而不是软件本身有问题。</p>\n<p>编写软件的人总是非常辛苦地使它尽可能完美。如果你声称找到了<code>Bug</code>，也就置疑了他们的能力，即使你是对的，也有可能会使其中的部分人感到不快。<br>此外，在主题中嚷嚷『<code>Bug</code>』也是特别不老练的。</p>\n<p>提问时，即使你私下非常确信已经发现一个真正的<code>Bug</code>，最好写得像是 <strong>_你_</strong> 做错了什么。如果真的有<code>Bug</code>，你会在回复中看到这点。<br>这样做的话，如果真有<code>Bug</code>，维护者就会向你道歉，这总比你弄砸了然后欠别人一个道歉要强。</p>\n<h2 id=\"低声下气代替不了做自己的家庭作业\"><a href=\"#低声下气代替不了做自己的家庭作业\" class=\"headerlink\" title=\"低声下气代替不了做自己的家庭作业\"></a>低声下气代替不了做自己的家庭作业</h2><p>有些人明白他们不应该粗鲁或傲慢地行事并要求得到答复，但他们退到相反的低声下气的极端：<br>『我知道我只是个可怜的新丁，一个失败者，但……』。这既使人困扰，也没有用，当伴随着对实际问题含糊的描述时还特别令人反感。</p>\n<p>别用低级灵长类动物的办法浪费你我的时间，相反，尽可能清楚地描述背景情况和你的问题，这比低声下气更好地摆正了你的位置。</p>\n<p>有时，论坛设有单独的初学者提问版面，如果你真的认为遇到了肤浅的问题，到那去就是了，但一样别低声下气。</p>\n<h2 id=\"描述问题症状而不是猜测\"><a href=\"#描述问题症状而不是猜测\" class=\"headerlink\" title=\"描述问题症状而不是猜测\"></a>描述问题症状而不是猜测</h2><p>告诉黑客是什么导致了问题是没用的（如果你的诊断理论是了不起的东西，你还会向别人咨询求助吗？）。<br>所以，确保只是告诉他们问题的原始症状，而不是你的解释和理论，让他们来解释和诊断。如果你认为陈述自己的猜测很重要，应清楚地说明这只是你的猜测并描述为什么它们不起作用。</p>\n<p><strong>愚蠢：</strong></p>\n<blockquote>\n<p>我在编译内核时接连遇到<code>SIG11</code>错误，怀疑主板上的某根电路丝断了，找到它们的最好办法是什么？</p>\n</blockquote>\n<p><strong>明智：</strong></p>\n<blockquote>\n<p>我组装的电脑（<code>K6/233 CPU、FIC-PA2007</code>主板[威盛<code>Apollo VP2</code>芯片组]、<code>Corsair PC133 SDRAM 256Mb</code>内存）最近在开机 20 分钟左右、做内核编译时频繁地报<code>SIG11</code>错，但在头 20 分钟内从不出问题。<br>重启动不会复位时钟，但整夜关机会。更换所有内存未解决问题，相关的典型编译会话日志附后。</p>\n</blockquote>\n<p>由于以上这点许多人似乎难以掌握，这里有句话可以提醒你：『所有的诊断专家都来自密苏里州』。<br>美国国务院的官方座右铭则是『让我看看』（出自国会议员威勒德 · D · 范迪弗［<em>Willard D. Vandiver</em>］在1899年时的讲话：<br>『我来自一个出产玉米、棉花、牛蒡和民主党人的国家，滔滔雄辩既不能说服我，也不会让我满意。我来自密苏里州，你必须让我看看。』）<br>针对诊断者而言，这并不是怀疑，而只是一种真实而有用的需求，以便让他们看到与你看到的原始证据尽可能一致的东西，而不是你的猜测与总结。所以，让我们看看。</p>\n<h2 id=\"按时间先后罗列问题症状\"><a href=\"#按时间先后罗列问题症状\" class=\"headerlink\" title=\"按时间先后罗列问题症状\"></a>按时间先后罗列问题症状</h2><p>刚出问题之前发生的事情通常包含有解决问题最有效的线索。所以，记录中应准确地描述你、电脑和软件在崩溃前都做了什么。<br>在命令行处理的情况下，有会话日志（如运行脚本工具生成的）并引用相关的若干（如20）行记录会非常有帮助。</p>\n<p>如果崩溃的程序有诊断选项（如<code>-v</code>详述开关），试着选择这些能在记录中增加排错信息的选项。<br>记住，『多』不等于『好』。试着选取适当的排错级别以便提供有用的信息而不是将阅读者淹没在垃圾中。</p>\n<p>如果你的记录很长（如超过四段），在开头简述问题随后按时间先后罗列详细过程也许更有用。这样，黑客在读你的记录时就知道该注意哪些内容了。</p>\n<h2 id=\"描述目标而不是过程\"><a href=\"#描述目标而不是过程\" class=\"headerlink\" title=\"描述目标而不是过程\"></a>描述目标而不是过程</h2><p>如果你想弄清楚如何做某事（而不是报告一个<code>Bug</code>），在开头就描述你的目标，然后才陈述遇到问题的特定步骤。</p>\n<p>经常出现这种情况，寻求技术帮助的人在脑袋里有个更高层次的目标，他们在自以为能达到目标的特定道路上被卡住了，然后跑来问该怎么走，但没有意识到这条路本身有问题，结果要费很大的劲才能通过。</p>\n<p><strong>愚蠢：</strong></p>\n<blockquote>\n<p>我怎样才能让某图形程序的颜色拾取器取得十六进制的<code>RGB</code>值？</p>\n</blockquote>\n<p><strong>明智：</strong></p>\n<blockquote>\n<p>我正试着用自己选定数值的颜色替换一幅图片的色表，我现在知道的唯一方法是编辑每个表槽，但却无法让某图形程序的颜色拾取器取得十六进制的<code>RGB</code>值。</p>\n</blockquote>\n<p>第二种提法是明智的，它使得建议采用更合适的工具以完成任务的回复成为可能。</p>\n<h2 id=\"别要求私下回复电邮\"><a href=\"#别要求私下回复电邮\" class=\"headerlink\" title=\"别要求私下回复电邮\"></a>别要求私下回复电邮</h2><p>黑客们认为问题的解决过程应该公开、透明，此过程中如果更有才能的人注意到不完整或者不当之处，最初的回复才能够、也应该被纠正。同时，作为回复者也因为能力和学识被其它同行看到而得到某种回报。</p>\n<p>当你要求私下回复时，此过程和回报都被中止。别这样做，让 <strong><em>回复者</em></strong> 来决定是否私下回答 —— 如果他真这么做了，通常是因为他认为问题编写太差或者太肤浅，以至于对其它人毫无意义。</p>\n<p>对这条规则存在一条有限的例外，如果你确信提问可能会引来大量雷同的回复时，那么『向我发电邮，我将为论坛归纳这些回复』将是神奇的句子。<br>试着将邮件列表或新闻组从洪水般雷同的回复中解救出来是非常有礼貌的 —— 但你必须信守诺言。</p>\n<h2 id=\"提问应明确\"><a href=\"#提问应明确\" class=\"headerlink\" title=\"提问应明确\"></a>提问应明确</h2><p>漫无边际的问题通常也被视为没有明确限制的时间无底洞。<br>最有可能给你有用答案的人通常也是最忙的人（假如只是因为他们承担了太多工作的话），这些人对于没有止境的时间无底洞极其敏感，所以他们也倾向于讨厌那些漫无边际的问题。</p>\n<p>如果你明确了想让回复者做的事（如指点方向、发送代码、检查补丁或其它），你更有可能得到有用的回复。<br>因为这样可以让他们集中精力并间接地设定了他们为帮助你需要花费的时间和精力上限，这很好。</p>\n<p>要想理解专家生活的世界，可以这样设想：那里有丰富的专长资源但稀缺的响应时间。你暗中要求他们奉献的时间越少，你越有可能从这些真正懂行也真正很忙的专家那里得到解答。</p>\n<p>所以限定你的问题以使专家回答时需要付出的时间最少 —— 这通常与简化问题还不太一样。<br>举个例，『请问可否指点一下哪有好一点的 X 解释？』通常要比『请解释一下 X』明智。如果你的代码不运行了，通常请别人看看哪有问题比叫他们帮你改正更明智。</p>\n<h2 id=\"关于代码的问题\"><a href=\"#关于代码的问题\" class=\"headerlink\" title=\"关于代码的问题\"></a>关于代码的问题</h2><p>别要求他人给你出问题的代码排错而不提及应该从何入手。张贴几百行的代码，然后说一声『它不能运行』会让你得不到理睬。<br>只贴几十行代码，然后说一句『在第七行以后，本应该显示<x>，但实际出现的是<y>』非常有可能让你得到回复。</y></x></p>\n<p>最精确描述代码问题的方法是提供一个能展示问题的最小测试样例。什么是最小测试样例？<br>它是对问题的展现，只需要刚好能够重现非预期行为的代码即可。如何生成一个最小测试样例？<br>如果你知道哪一行或哪一段代码会产生问题，将其复制并提供刚好够用的外围支撑代码以构成一个完整的样例<br>（够用是指源码刚好能被编译器、解释器或任何处理它的程序所接受）。如果你不能将问题缩小到特定的段落，复制源码并去除那些与问题无关的代码段。<br>你能提供的最小测试样例越小越好（参见 <a href=\"#量不在多精炼则灵\">量不在多，精炼则灵</a> ）。</p>\n<p>生成一个非常小的最小测试样例并不总是可能，但尽力去做是很好的锻练，这有可能帮助你找到需要自己解决的问题。即使你找不到，黑客们喜欢看到你努力过，这将使他们更合作。</p>\n<p>如果你只是想让别人帮忙审一下代码，在最开头就要说出来，并且一定要提到你认为哪一部分特别需要关注以及为什么。</p>\n<h2 id=\"别张贴家庭作业式问题\"><a href=\"#别张贴家庭作业式问题\" class=\"headerlink\" title=\"别张贴家庭作业式问题\"></a>别张贴家庭作业式问题</h2><p>黑客们善于发现『家庭作业』式的问题。我们中的大多数人已经做了自己的家庭作业，那是该 <strong>_你_</strong> 做的，以便从中学到东西。问一下提示没有关系，但不是要求完整的解决方案。</p>\n<p>如果你怀疑自己碰到了一个家庭作业式的问题，但仍然无法解决，试试在用户组、论坛或（作为最后一招）在项目的『用户』邮件列表或论坛中提问。尽管黑客们 <strong>_会_</strong> 看出来，一些老用户也许仍会给你提示。</p>\n<h2 id=\"删除无意义的要求\"><a href=\"#删除无意义的要求\" class=\"headerlink\" title=\"删除无意义的要求\"></a>删除无意义的要求</h2><p>抵制这种诱惑，即在求助消息末尾加上诸如『有人能帮我吗？』或『有没有答案？』之类在语义上毫无意义的东西。<br>第一，如果问题描述还不完整，这些附加的东西最多也只能是多余的。第二，因为它们是多余的，黑客们会认为这些东西烦人 —— 就很有可能用逻辑上无误但打发人的回复，诸如『是的，你可以得到帮助』和『不，没有给你的帮助』。</p>\n<p>一般来说，避免提『是或否』类型的问题，除非你想得到 <a href=\"http://homepage.ntlworld.com./jonathan.deboynepollard/FGA/questions-with-yes-or-no-answers.html\" target=\"_blank\" rel=\"noopener\">『是或否』类型的回答</a>。</p>\n<h2 id=\"不要把问题标记为『紧急』，即使对你而言的确如此\"><a href=\"#不要把问题标记为『紧急』，即使对你而言的确如此\" class=\"headerlink\" title=\"不要把问题标记为『紧急』，即使对你而言的确如此\"></a>不要把问题标记为『紧急』，即使对你而言的确如此</h2><p>这是你的问题，不要我们的。宣称『紧急』极有可能事与愿违：<br>大多数黑客会直接删除这种消息，他们认为这是无礼和自私地企图得到即时与特殊的关照。而且『紧急』或其它有类似含义的主题有可能触发垃圾过滤规则，潜在的回复者可能永远看不到你的问题！</p>\n<p>有一点点局部的例外，如果你是在一些知名度很高、会使黑客们激动的地方使用程序，也许值得这样去做。在这种情况下，如果你有期限压力，也很有礼貌地提到这点，人们也许会有足够的兴趣快一点回答。</p>\n<p>当然，这是非常冒险的，因为黑客们对什么是令人激动的标准多半与你的不同。<br>譬如从国际空间站这样张贴没有问题，但代表感觉良好的慈善或政治原因这样做几乎肯定不行。<br>事实上，张贴诸如『紧急：帮我救救这个毛绒绒的小海豹！』肯定会让黑客回避你或觉得窝火，即使他们认为毛绒绒的小海豹很重要。</p>\n<p>如果你觉得这不可思议，再把剩下的内容多读几遍，直到弄懂了再发贴也不迟。</p>\n<h2 id=\"礼貌总是有益的\"><a href=\"#礼貌总是有益的\" class=\"headerlink\" title=\"礼貌总是有益的\"></a>礼貌总是有益的</h2><p>礼貌一点，使用『请』和『谢谢你的关注』或者『谢谢你的关照』，让别人明白你感谢他们无偿花时间帮助你。</p>\n<p>坦率地讲，这一点没有语法正确、文字清晰、准确、有内容和避免使用专用格式重要（同时也不能替代它们）。<br>黑客们一般宁可读有点唐突但技术鲜明的<code>Bug</code>报告，而不是那种有礼但含糊的报告。（如果这点让你不解，记住我们是按问题能教我们什么来评价它的）</p>\n<p>然尔，如果你已经谈清楚了技术问题，客气一点肯定会增加你得到有用回复的机会。</p>\n<p>（我们必须指出，本文唯一受到一些老黑客认真反对的地方是以前曾经推荐过的『提前谢了』，一些黑客认为这隐含着事后不用再感谢任何人的暗示。<br>我们的建议是要么先说 『提前谢了』，事后 <strong>_再_</strong> 对回复者表示感谢，要么换种方式表达，譬如用『谢谢你的关注』或『谢谢你的关照』）。</p>\n<h2 id=\"问题解决后追加一条简要说明\"><a href=\"#问题解决后追加一条简要说明\" class=\"headerlink\" title=\"问题解决后追加一条简要说明\"></a>问题解决后追加一条简要说明</h2><p>问题解决后向所有帮助过的人追加一条消息，让他们知道问题是如何解决的并再次感谢。如果问题在邮件列表或新闻组中受到广泛关注，在那里追加此消息比较恰当。</p>\n<p>最理想的方式是向最初提问的线索回复此消息，并在主题中包含『已解决』、『已搞定』或其它同等含义的明显标记。<br>在人来人往的邮件列表里，一个看见线索 『问题 X』和『问题 X - 已解决』的潜在回复者就明白不用再浪费时间了（除非他个人觉得『问题 X』有趣），因此可以利用此时间去解决其它问题。</p>\n<p>追加的消息用不着太长或太复杂，一句简单的『你好 —— 是网线坏了！谢谢大家 —— 比尔』就比什么都没有要强。<br>事实上，除非解决问题的技术真正高深，一条简短而亲切的总结比长篇大论要好。说明是什么行动解决了问题，用不着重演整个排错的故事。</p>\n<p>对于有深度的问题，张贴排错历史的摘要是恰当的。描述问题的最终状态，说明是什么解决了问题，<strong><em>在此之后</em></strong> 才指明可以避免的弯路。<br>应避免的弯路部分应放在正确的解决方案和其它总结材料之后，而不要将此消息搞成侦探推理小说。列出那些帮助过你的名字，那样你会交到朋友的。</p>\n<p>除了有礼貌、有内容以外，这种类型的追帖将帮助其他人在邮件列表、新闻组或论坛文档中搜索到真正解决你问题的方案，从而也让他们受益。</p>\n<p>最后，此类追帖还让每位参与协助的人因问题的解决而产生一种满足感。如果你自己不是技术专家或黑客，相信我们，这种感觉对于你寻求帮助的老手和专家是非常重要的。<br>问题叙述到最后不知所终总是令人沮丧的，黑客们痒痒地渴望它们被解决。『挠痒痒』为你挣到的信誉将对你下次再次张贴提问非常非常的有帮助。</p>\n<p>考虑一下怎样才能避免他人将来也遇到类似的问题，问问自己编一份文档或<code>FAQ</code>补丁会不会有帮助，如果是的话就将补丁发给维护者。</p>\n<p>在黑客中，这种良好的后继行动实际上比传统的礼貌更重要，也是你善待他人而赢得声誉的方式，这是非常有价值的财富。</p>\n<h1 id=\"如何解读回答\"><a href=\"#如何解读回答\" class=\"headerlink\" title=\"如何解读回答\"></a>如何解读回答</h1><h2 id=\"『读读他妈的手册（RTFM）』和『搜搜他妈的网络（STFW）』：是在告知你的问题根本不该提出来\"><a href=\"#『读读他妈的手册（RTFM）』和『搜搜他妈的网络（STFW）』：是在告知你的问题根本不该提出来\" class=\"headerlink\" title=\"『读读他妈的手册（RTFM）』和『搜搜他妈的网络（STFW）』：是在告知你的问题根本不该提出来\"></a>『读读他妈的手册（<code>RTFM</code>）』和『搜搜他妈的网络（<code>STFW</code>）』：是在告知你的问题根本不该提出来</h2><p>有一个古老而神圣的传统：如果你收到『读读他妈的手册（<code>RTFM</code>）』的回复，发信人认为你应该去『读读他妈的手册』。他或她多半是对的，去读一下吧。</p>\n<p>『读读他妈的手册（<code>RTFM</code>）』有个年轻一点的亲戚，如果你收到『搜搜他妈的网络（<code>STFW</code>）』的回复，发信人认为你应该『搜搜他妈的网络』。那人多半也是对的，去搜一下吧。（更温和一点的说法是『谷歌是你的朋友！』）</p>\n<p>在论坛，你也可能被要求去搜索论坛的文档。事实上，有人甚至可能热心地为你提供以前解决此问题的线索。但不要依赖这种关照，提问前应该先搜索一下文档。</p>\n<p>通常，叫你搜索的人已经打开了能解决你问题的手册或网页，正在一边看一边敲键盘。这些回复意味着他认为：第一，你要的信息很容易找到。第二，自已找要比别人喂到嘴里能学得更多。</p>\n<p>你不应该觉得这样就被冒犯了，按黑客的标准，回复者没有不理你就是在向你表示某种尊敬，你反而应该感谢他热切地想帮助你。</p>\n<h2 id=\"如果你还是不明白……\"><a href=\"#如果你还是不明白……\" class=\"headerlink\" title=\"如果你还是不明白……\"></a>如果你还是不明白……</h2><p>如果你看不懂回答，不要马上回复一个要求说明的消息，先试试那些最初提问时用过的相同工具（如手册、<code>FAQ</code>、网页、懂行的朋友等）试着搞懂回答。如果还是需要说明，展现你已经明白的。</p>\n<p>譬如，假如我告诉你：『看起来像是某输入项有问题，你需要清除它』，接着是个 <strong>_不好_</strong> 的回帖：『什么是某输入项？』。<br>而这是一个 <strong>_很好_</strong> 的跟帖：『是的，我读了手册，某某输入项只在<code>-z</code>和<code>-p</code>开关中被提到，但都没有涉及到如何清除它们，你指的是哪一个还是我弄错了什么？』</p>\n<h2 id=\"对待无礼\"><a href=\"#对待无礼\" class=\"headerlink\" title=\"对待无礼\"></a>对待无礼</h2><p>很多黑客圈子中看似无礼的行为并不是存心冒犯。相反，它是直接了当、一针见血式的交流风格，这种风格对于更关注解决问题而不是使别人感觉舒服而混乱的人是很自然的。</p>\n<p>如果你觉得被冒犯了，试着平静地反应。如果有人真的做了出格的事，邮件列表、新闻组或论坛中的前辈多半会招呼他。<br>如果这 <strong>_没有_</strong> 发生而你却发火了，那么你发火对象的言语可能在黑客社区中看起来是正常的，而 <strong>_你_</strong> 将被视为有错的一方，这将伤害到你获取信息或帮助的机会。</p>\n<p>另一方面，你会偶而真的碰到无礼和无聊的言行。与上述相反，对真正的冒犯者狠狠地打击、用犀利的语言将其驳得体无完肤都是可以接受的。<br>然尔，在行事之前一定要非常非常的有根据。纠正无礼的言论与开始一场毫无意义的口水战仅一线之隔，黑客们自己莽撞地越线的情况并不鲜见。<br>如果你是新手或外来者，避开这种莽撞的机会并不高。如果你想得到的是信息而不是消磨时光，这时最好不要把手放在键盘上以免冒险。</p>\n<p>（有些人断言很多黑客都有轻度的自闭症或阿斯伯格综合症，缺少用于润滑人类社会『正常』交往所需的脑电路。这既可能是真也可能是假。<br>如果你自己不是黑客，兴许你认为我们脑袋有问题还能帮助你应付我们的古怪行为。只管这么干好了，我们不在乎。我们 <strong>_喜欢_</strong> 现在这个样子，并且一般都对病号标记有站得住脚的怀疑。）</p>\n<p>在下一节，我们会谈到另一个问题，当 <strong>_你_</strong> 行为不当时会受到的『冒犯』。</p>\n<hr>\n<h1 id=\"相关资源\"><a href=\"#相关资源\" class=\"headerlink\" title=\"相关资源\"></a>相关资源</h1><p>如果需要个人电脑、<code>Unix</code>和互联网如何工作的基础知识，参阅 <a href=\"http://en.tldp.org/HOWTO/Unix-and-Internet-Fundamentals-HOWTO/\" target=\"_blank\" rel=\"noopener\"><code>Unix</code>和互联网工作的基本原理</a>。</p>\n<p>当你发布软件或补丁时，试着按 <a href=\"http://en.tldp.org/HOWTO/Software-Release-Practice-HOWTO/index.html\" target=\"_blank\" rel=\"noopener\">软件发布实践</a> 操作。</p>\n<h1 id=\"鸣谢\"><a href=\"#鸣谢\" class=\"headerlink\" title=\"鸣谢\"></a>鸣谢</h1><p>伊夫林 · 米切尔（<em>Evelyn Mitchell</em>）贡献了一些愚蠢问题例子并启发了编写『如何更好地回答问题』这一节，米哈伊尔 · 罗门迪克（<em>Mikhail Ramendik</em>）贡献了一些特别有价值的建议和改进。</p>\n<h1 id=\"修订历史\"><a href=\"#修订历史\" class=\"headerlink\" title=\"修订历史\"></a>修订历史</h1><table>\n<thead>\n<tr>\n<th>修订版</th>\n<th>时间</th>\n<th>修订人</th>\n<th>修订内容</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>3.10</td>\n<td>2014年5月21日</td>\n<td>esr</td>\n<td>新增<code>Stack Overflow</code>的一节</td>\n</tr>\n<tr>\n<td>3.9</td>\n<td>2013年4月23日</td>\n<td>esr</td>\n<td>修正链接</td>\n</tr>\n<tr>\n<td>3.8</td>\n<td>2012年6月19日</td>\n<td>esr</td>\n<td>修正链接</td>\n</tr>\n<tr>\n<td>3.7</td>\n<td>2010年12月6日</td>\n<td>esr</td>\n<td>对于英语为第二语言人士的有益建议</td>\n</tr>\n<tr>\n<td>3.7</td>\n<td>2010年11月2日</td>\n<td>esr</td>\n<td>几种翻译不见了</td>\n</tr>\n<tr>\n<td>3.6</td>\n<td>2008年3月19日</td>\n<td>esr</td>\n<td>小更新及新链接</td>\n</tr>\n<tr>\n<td>3.5</td>\n<td>2008年1月2日</td>\n<td>esr</td>\n<td>勘误及一些翻译链接</td>\n</tr>\n<tr>\n<td>3.4</td>\n<td>2007年3月24日</td>\n<td>esr</td>\n<td>新章节：『关于代码的问题』</td>\n</tr>\n<tr>\n<td>3.3</td>\n<td>2006年9月29日</td>\n<td>esr</td>\n<td>增加凯 · 尼格曼（<em>Kai Niggemann</em>）的一个好建议</td>\n</tr>\n<tr>\n<td>3.2</td>\n<td>2006年1月10日</td>\n<td>esr</td>\n<td>加入瑞克 · 莫恩（<em>Rick Moen</em>）编写的内容</td>\n</tr>\n<tr>\n<td>3.1</td>\n<td>2004年10月28日</td>\n<td>esr</td>\n<td>文档『谷歌是你的朋友！』</td>\n</tr>\n<tr>\n<td>3.0</td>\n<td>2004年2月2日</td>\n<td>esr</td>\n<td>主要新增在网页论坛应有的礼节</td>\n</tr>\n</tbody>\n</table>\n<hr>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"提问的智慧\"><a href=\"#提问的智慧\" class=\"headerlink\" title=\"提问的智慧\"></a>提问的智慧</h1><p><strong>艾瑞克 · 史蒂文 · 雷蒙德（<em>Eric Steven Raymond</em>）</strong><br><a href=\"http://www.catb.org/~esr/\" target=\"_blank\" rel=\"noopener\">Thyrsus Enterprises</a><br><a href=\"mailto:esr@thyrsus.com\" target=\"_blank\" rel=\"noopener\">esr@thyrsus.com</a></p>\n<p><strong>瑞克 · 莫恩（<em>Rick Moen</em>）</strong><br><a href=\"mailto:respond-auto@linuxmafia.com\" target=\"_blank\" rel=\"noopener\">respond-auto@linuxmafia.com</a></p>\n<p>版权 © 2001，2006，2014 <em>Eric S. Raymond</em>，<em>Rick Moen</em></p>\n<h2 id=\"目录\"><a href=\"#目录\" class=\"headerlink\" title=\"目录\"></a>目录</h2><ul>\n<li><a href=\"#译文\">译文</a> </li>\n<li><a href=\"#免责声明\">免责声明</a></li>\n<li><a href=\"#引言\">引言</a></li>\n<li><a href=\"#如何做提问前的准备\">如何做提问前的准备</a></li>\n<li><a href=\"#如何提问\">如何提问</a><ul>\n<li><a href=\"#仔细挑选论坛\">仔细挑选论坛</a></li>\n<li><a href=\"#stack-overflow\"><code>Stack Overflow</code></a></li>\n<li><a href=\"#面向新手的论坛和互联网中继聊天irc通常响应最快\">面向新手的论坛和互联网中继聊天（<code>IRC</code>）通常响应最快</a></li>\n<li><a href=\"#第二步使用项目的邮件列表\">第二步，使用项目的邮件列表</a></li>\n<li><a href=\"#使用有意义且明确的主题\">使用有意义且明确的主题</a></li>\n<li><a href=\"#使问题容易回复\">使问题容易回复</a></li>\n<li><a href=\"#用清晰语法拼写正确的语句书写\">用清晰、语法、拼写正确的语句书写</a></li>\n<li><a href=\"#使用易于读取且标准的文件格式发送问题\">使用易于读取且标准的文件格式发送问题</a></li>\n<li><a href=\"#描述问题应准确且有内容\">描述问题应准确且有内容</a></li>\n<li><a href=\"#量不在多精炼则灵\">量不在多，精炼则灵</a></li>\n<li><a href=\"#别急于宣称找到bug\">别急于宣称找到<code>Bug</code></a></li>\n<li><a href=\"#低声下气代替不了做自己的家庭作业\">低声下气代替不了做自己的家庭作业</a></li>\n<li><a href=\"#描述问题症状而不是猜测\">描述问题症状而不是猜测</a></li>\n<li><a href=\"#按时间先后罗列问题症状\">按时间先后罗列问题症状</a></li>\n<li><a href=\"#描述目标而不是过程\">描述目标而不是过程</a></li>\n<li><a href=\"#别要求私下回复电邮\">别要求私下回复电邮</a></li>\n<li><a href=\"#提问应明确\">提问应明确</a></li>\n<li><a href=\"#关于代码的问题\">关于代码的问题</a></li>\n<li><a href=\"#别张贴家庭作业式问题\">别张贴家庭作业式问题</a></li>\n<li><a href=\"#删除无意义的要求\">删除无意义的要求</a></li>\n<li><a href=\"#不要把问题标记为紧急即使对你而言的确如此\">不要把问题标记为『紧急』，即使对你而言的确如此</a></li>\n<li><a href=\"#礼貌总是有益的\">礼貌总是有益的</a></li>\n<li><a href=\"#问题解决后追加一条简要说明\">问题解决后追加一条简要说明</a></li>\n</ul>\n</li>\n<li><a href=\"#如何解读回答\">如何解读回答</a><ul>\n<li><a href=\"#读读他妈的手册rtfm和搜搜他妈的网络stfw是在告知你的问题根本不该提出来\">『读读他妈的手册（<code>RTFM</code>）』和『搜搜他妈的网络（<code>STFW</code>）』：是在告知你的问题根本不该提出来</a></li>\n<li><a href=\"#如果你还是不明白\">如果你还是不明白……</a></li>\n<li><a href=\"#对待无礼\">对待无礼</a></li>\n</ul>\n</li>\n<li><a href=\"#别像失败者那样反应\">别像失败者那样反应</a></li>\n<li><a href=\"#提问禁忌\">提问禁忌</a></li>\n<li><a href=\"#好问题与坏问题\">好问题与坏问题</a></li>\n<li><a href=\"#如果得不到回答\">如果得不到回答</a></li>\n<li><a href=\"#如何更好地回答\">如何更好地回答</a></li>\n<li><a href=\"#相关资源\">相关资源</a></li>\n<li><a href=\"#鸣谢\">鸣谢</a></li>\n<li><a href=\"#修订历史\">修订历史</a></li>\n</ul>\n<h1 id=\"译文\"><a href=\"#译文\" class=\"headerlink\" title=\"译文\"></a>译文</h1><p>译文：<br><a href=\"http://bulsara.host.sk/index.php?p=2005\" target=\"_blank\" rel=\"noopener\">印尼语</a><br><a href=\"http://www.fatcow.com/edu/smart-questions-by\" target=\"_blank\" rel=\"noopener\">白俄罗斯语</a><br><a href=\"http://www.istf.com.br/perguntas/\" target=\"_blank\" rel=\"noopener\">巴西葡萄牙语</a><br><a href=\"https://github.com/oldratlee/translations/blob/master/how-to-ask-questions-the-smart-way/README.md\" target=\"_blank\" rel=\"noopener\">简体中文</a><br><a href=\"http://docs.jaspervries.nl/smart-questions/\" target=\"_blank\" rel=\"noopener\">荷兰语</a><br><a href=\"http://www.gnurou.org/documents/smart-questions-fr.html\" target=\"_blank\" rel=\"noopener\">法语</a><br><a href=\"http://maxo127.narod.ru/Geo/Articles/smart-questions_ge.html\" target=\"_blank\" rel=\"noopener\">乔治亚语</a><br><a href=\"http://www.tty1.net/smart-questions_de.html\" target=\"_blank\" rel=\"noopener\">德语</a><br><a href=\"http://www.dionyziz.com/howto-smart-questions-gr/\" target=\"_blank\" rel=\"noopener\">希腊语</a><br><a href=\"http://www.penguin.org.il/essays/smart-questions-he.html\" target=\"_blank\" rel=\"noopener\">希伯来语</a><br><a href=\"http://www.ranvis.com/articles/smart-questions.ja.html\" target=\"_blank\" rel=\"noopener\">日语</a><br><a href=\"http://rtfm.killfile.pl/\" target=\"_blank\" rel=\"noopener\">波兰语</a><br><a href=\"http://www.celiojunior.com.br/comofazerperguntas.htm\" target=\"_blank\" rel=\"noopener\">葡萄牙语</a><br><a href=\"http://wiki.lug.ro/mediawiki/index.php/Cum_se_pun_%C3%AEntreb%C4%83ri_%C3%AEn_mod_inteligent\" target=\"_blank\" rel=\"noopener\">罗马尼亚语</a><br><a href=\"http://maddog.sitengine.ru/smart-question-ru.html\" target=\"_blank\" rel=\"noopener\">俄语</a><br><a href=\"http://www.sindominio.net/ayuda/preguntas-inteligentes.html\" target=\"_blank\" rel=\"noopener\">西班牙语</a><br><a href=\"http://wiki.opentle.org/Smart-questions\" target=\"_blank\" rel=\"noopener\">泰语</a><br>如果你想复制、镜像、翻译或引用本文，请参阅我的 <a href=\"http://www.catb.org/~esr/copying.html\" target=\"_blank\" rel=\"noopener\">复制协议</a>。</p>\n<h1 id=\"免责声明\"><a href=\"#免责声明\" class=\"headerlink\" title=\"免责声明\"></a>免责声明</h1><p>许多项目的网站在如何取得帮助的部分链接了本文，这没有关系，也正是我们想要的。<br>但如果你是该项目生成此链接的网管，请在链接附近显著位置注明：<strong><em>我们不提供该项目的服务支持！</em></strong></p>\n<p>我们已经领教了没有此说明带来的痛苦，我们将不停地被一些白痴纠缠，他们认为既然我们发布了本文，那么我们就有责任解决世上所有的技术问题。</p>\n<p>如果你是因为需要帮助正在阅读本文，然后就带着可以直接从作者那取得帮助的印象离开，那么 <strong>_你_</strong> 就不幸成了我们所说的白痴之一。<br>别向 <strong>_我们_</strong> 提问，我们不会理睬的。 我们只是在这教你如何从那些真正懂得你软硬件问题的人那里取得帮助，但 99.9％ 的时间我们不会是那些人。<br>除非你非常地 <strong>_确定_</strong> 本文的作者是你遇到问题方面的专家，请不要打搅，这样大家都更开心一点。</p>\n<h1 id=\"引言\"><a href=\"#引言\" class=\"headerlink\" title=\"引言\"></a>引言</h1><p>在 <a href=\"http://www.catb.org/~esr/faqs/hacker-howto.html\" target=\"_blank\" rel=\"noopener\">黑客</a> 的世界里，你所提技术问题的解答很大程度上取决于你提问的方式与解决此问题的难度，本文将教你如何提问才更有可能得到满意的答复。</p>\n<p>开源程序的应用已经很广，你通常可以从其他更有经验的用户而不是黑客那里得到解答。<br>这是好事，他们一般对新手常有的毛病更容忍一点。然而，使用我们推荐的方法，像对待黑客那样对待这些有经验的用户，通常能最有效地得到问题的解答。</p>\n<p>第一件需要明白的事是黑客喜欢难题和激发思考的好问题。假如不是这样，我们也不会写本文了。<br>如果你能提出一个有趣的问题让我们咀嚼玩味，我们会感激你。好问题是种激励与礼物，帮助我们发展认知，揭示没有注意或想到的问题。<br>在黑客中，『好问题！』 是非常热烈而真挚的赞许。</p>\n<p>此外，黑客还有遇到简单问题就表现出敌视或傲慢的名声。<br>有时，我们看起来还对新手和愚蠢的家伙有条件反射式的无礼，但事情并不真是这样。</p>\n<p>我们只是毫无歉意地敌视那些提问前不愿思考、不做自己家庭作业的人。<br>这种人就像时间无底洞 —— 他们只知道索取，不愿意付出，他们浪费了时间，这些时间本可用于其它更有趣的问题或更值得回答的人。<br>我们将这种人叫做 『失败者（loser）』（由于历史原因，我们有时将『loser』拼写为『lusers』 。）</p>\n<p>我们意识到许多人只是想使用我们写的软件，他们对学习技术细节没有兴趣。对大多数人而言，计算机只是种工具，是种达到目的的手段而已。<br>他们有自己的生活并且有更要紧的事要做，我们承认这点，也从不指望每个人都对这些让我们着迷的技术问题感兴趣。<br>不过，我们回答问题的风格是为了适应那些 <strong>_真正_</strong> 对此有兴趣并愿意主动参与解决问题的人，这一点不会变，也不该变。<br>如果连这都变了，我们就会在自己能做得最好的事情上不再那么犀利。</p>\n<p>我们（大多数）是自愿者，从自己繁忙的生活中抽时间来回答问题，有时会力不从心。<br>因此，我们会毫不留情地滤除问题，特别是那些看起来像是失败者提的，以便更有效地把回答问题的时间留给那些胜利者。</p>\n<p>如果你认为这种态度令人反感、以施惠者自居或傲慢自大，请检查你的假设，我们并未要求你屈服 ——<br>事实上，假如你做了该做的努力，我们中的大多数将非常乐意平等地与你交流，并欢迎你接纳我们的文化。<br>试图去帮助那些不愿自救的人对我们简直没有效率。不懂没有关系，但愚蠢地做事不行。</p>\n<p>所以，你不必在技术上很在行才能吸引我们的注意，但你 <strong>_必须_</strong> 表现出能引导你在行的姿态 —— 机敏、有想法、善于观察、乐于主动参与问题的解决。<br>如果你做不到这些使你与众不同的事情，我们建议你付钱跟别人签商业服务合同，而不是要求黑客无偿帮助。</p>\n<p>如果你决定向我们求助，你不会想成为一名失败者，你也不想被看成一个失败者。<br>得到快速有效回答的最好方法是使提问者看起来像个聪明、自信和有想法的人，并且暗示只是碰巧在某一特别问题上需要帮助。</p>\n<p>（欢迎对本文指正，可以将建议发至 <a href=\"mailto:esr@thyrsus.com\" target=\"_blank\" rel=\"noopener\">esr@thyrsus.com</a> 或 <a href=\"mailto:esr@thyrsus.com\" target=\"_blank\" rel=\"noopener\">respond-auto@linuxmafia.com</a>。<br>请注意，本文不想成为一般性的 <a href=\"http://www.ietf.org/rfc/rfc1855.txt\" target=\"_blank\" rel=\"noopener\">网络礼仪</a> 指南，我一般会拒绝那些与引出技术论坛中有用的回答不特别相关的建议。）</p>\n<hr>\n<h1 id=\"如何做提问前的准备\"><a href=\"#如何做提问前的准备\" class=\"headerlink\" title=\"如何做提问前的准备\"></a>如何做提问前的准备</h1><p>在通过电邮、新闻组或论坛提技术问题以前，做以下事情：</p>\n<ol>\n<li>尝试在你准备提问论坛的历史文档中搜索答案</li>\n<li>尝试搜索互联网以找到答案</li>\n<li>尝试阅读手册以找到答案</li>\n<li>尝试阅读『常见问题文档（<code>FAQ</code>）』以找到答案</li>\n<li>尝试自己检查或试验以找到答案</li>\n<li>尝试请教懂行的朋友以找到答案</li>\n<li>如果你是程序员，尝试阅读源代码以找到答案</li>\n</ol>\n<p>提问时，请先表明你已做了上述事情，这将有助于建立你不是寄生虫与浪费别人时间的印象。最好再表述你从中 <strong><em>学到的东西</em></strong> ，我们喜欢回答那些表现出能从答案中学习的人。</p>\n<p>运用某些策略，比如用谷歌（<code>Google</code>）搜索你遇到的各种错误提示（既搜索 <a href=\"http://groups.google.com/\" target=\"_blank\" rel=\"noopener\">谷歌论坛</a>，也搜索网页）， 这样很可能直接就找到了解决问题的文档或邮件列表线索。<br>即使没有结果，在邮件列表或新闻组寻求帮助时提一句『我在谷歌中搜过下列句子但没有找到什么有用的东西』 也是件好事，至少它表明了搜索引擎不能提供哪些帮助。<br>将搜索关键词与你的问题及可能的解决方案联系起来，还有助于引导其他有类似问题的人。</p>\n<p>别着急，不要指望几秒钟的谷歌搜索就能解决一个复杂的问题。读一下常见问题文档。在向专家提问之前，先向后靠靠放松一下，再思考一下问题。<br>相信我们，他们能从你的提问看出你做了多少阅读与思考，如果你是有备而来，将更有可能得到解答。不要将所有问题一股脑抛出，只因你的第一次搜索没有结果（或者结果太多）。</p>\n<p>认真地思考，准备好你的问题。轻率的提问只能得到轻率的回答，或者压根没有。在提问时，你越是表现出在此前做过思考与努力去解决自己的问题，你越有可能得到真正的帮助。</p>\n<p>注意别提错问题。如果提问基于错误的假设，某黑客多半会一边想 『愚蠢的问题……』，一边按将错就错的答案回复你，并且希望这种只是得到你自己『问的问题』而非真正所需的解答，给你一个教训。</p>\n<p>永远不要假设你 <strong><em>有资格</em></strong> 得到解答。你没有这种资格，毕竟你没有为此服务付费。<br>如果你能够提出有内容、有趣和激励思考的问题 —— 那种毫无疑问能够向社区贡献经验，而不仅仅是消极地要求从别人那获取知识的问题，你将『挣到』答案。</p>\n<p>另一方面，表明你有能力也乐意参与问题的解决是个很好的开端。『有没有人能指个方向？』，我这还差点什么？』，『我应该查哪个网站？』，<br>通常要比 『请给出我可以用的完整步骤』更容易得到回复，因为你表明了只要有人能指个方向，你就很乐意完成剩下的过程。</p>\n<h1 id=\"如何提问\"><a href=\"#如何提问\" class=\"headerlink\" title=\"如何提问\"></a>如何提问</h1><h2 id=\"仔细挑选论坛\"><a href=\"#仔细挑选论坛\" class=\"headerlink\" title=\"仔细挑选论坛\"></a>仔细挑选论坛</h2><p>要对在哪提问留心，如果你做了下述事情，多半会被一笔勾销或被看成『失败者』：</p>\n<ul>\n<li>张贴与论坛主题无关的问题</li>\n<li>在面向高级技术问题的论坛上张贴肤浅的问题，反之亦然</li>\n<li>在太多不同的新闻组同时张贴</li>\n<li>给既非熟人也没有义务解决你问题的人发送你私人的电邮</li>\n</ul>\n<p>为保护通信的渠道不被无关的东西淹没，黑客会除掉那些没有找对地方的问题，你不会想让这种事落到自己头上的。</p>\n<p>因此，第一步是找对论坛。谷歌和其它搜索引擎还是你的朋友，可以用它们搜索你遇到困难的软硬件问题最相关的项目网站。那里通常都有项目的常见问题（<code>FAQ</code>）、邮件列表及文档的链接。<br>如果你的努力（包括 <strong>_阅读_</strong> <code>FAQ</code>）都没有结果，这些邮件列表就是最后能取得帮助的地方。项目的网站也许还有报告<code>Bug</code>的流程或链接，如果是这样，去看看。</p>\n<p>向陌生的人或论坛发送邮件极有可能是在冒险。譬如，不要假设一个内容丰富的网页的作者想充当你的免费顾问，不要对你的问题是否会受到欢迎做太乐观的估计 —— 如果你不确定，向别处发或者压根别发。</p>\n<p>在选择论坛、新闻组或邮件列表时，别太相信名字，先看看<code>FAQ</code>或者许可书以明确你的问题是否切题。发贴前先翻翻已有的帖子，这样可以让你感受一下那里行事的方式。<br>事实上，张贴前在新闻组或邮件列表的历史文档中搜索与你问题相关的关键词是个极好的主意，也许就找到答案了。即使没有，也能帮助你归纳出更好的问题。</p>\n<p>别像机关枪似的一次性『扫射』所有的帮助渠道，这就像大喊大叫一样会令人不快，温柔地一个一个来。</p>\n<p>弄懂主题！最典型的错误之一是在某种致立于跨平台可移植的语言、库或工具的论坛中提关于<code>Unix</code>或<code>Windows</code>操作系统程序接口的问题。如果你不明白为什么这是大错，最好在搞清楚概念前什么也别问。</p>\n<p>一般来说，在仔细挑选的公共论坛中提问比在私有论坛中提同样的问题更容易得到有用的回答。有几个道理支持这点，一是看潜在的回复者有多少，二是看论坛的参与者有多少，黑客更愿回答能启发多数人的问题。</p>\n<p>可以理解，老练的黑客和一些流行软件的作者正在承受过多的不当消息。就像那根最后压垮骆驼背的稻草一样，<br>你的加入也有可能使情况走向极端 —— 已经好几次了，一些流行软件的作者退出了对自己软件的支持，因为伴随而来的涌入其私人邮箱的垃圾邮件变得无法忍受。</p>\n<h2 id=\"Stack-Overflow\"><a href=\"#Stack-Overflow\" class=\"headerlink\" title=\"Stack Overflow\"></a><code>Stack Overflow</code></h2><p>搜索 <strong>_之后_</strong> 再在<code>Stack Exchange</code>提问。</p>\n<p>近年来，<code>Stack Exchange</code>社区站点已经成为回答技术问题和其他问题的一个主流方式，甚至是很多开源项目的首选论坛。</p>\n<p>查看<code>Stack Exchange</code>之前先搜索谷歌；谷歌对<code>Stack Exchange</code>的索引是实时的。<br>如果有人问过类似的问题，这样很容易就找到了，<code>Stack Exchange</code>站点的内容往往在搜索结果的顶部出现。<br>如果没有找到要的内容，可以在与你问题最相关的网站上重新搜索（见下文说明）。通过标签搜索可以缩小结果范围。</p>\n<p>如果你还是没有发现任何内容，把你的问题发表到 <strong>_一个_</strong> 最相关的网站上。使用格式化工具，特别是对于代码，并添加与问题内容相关的标签（尤其比如 编程语言，操作系统，或者你遇到麻烦的库名）。<br>如果评论者要求你提供更多信息，请编辑你的主贴新加上来。如果答案对你有帮助，请单击向上箭头给这个答案投票；如果有答案给出了解决办法，请点击投票箭头下面的勾，以接受它成为正确答案。</p>\n<p><code>Stack Exchange</code>已经发展到<a href=\"http://stackexchange.com/sites\" target=\"_blank\" rel=\"noopener\">超过100个站点</a>，下面说明了什么问题最合适放在哪个站点：</p>\n<ul>\n<li><a href=\"http://superuser.com/\" target=\"_blank\" rel=\"noopener\"><code>Super User</code></a>是关于通用计算的问题。如果你的问题和代码无关，或者你说的只是程序在网络连接上的问题，九成在这里问。</li>\n<li><a href=\"http://stackoverflow.com/\" target=\"_blank\" rel=\"noopener\"><code>Stack Overflow</code></a>是关于编程问题。</li>\n<li><a href=\"http://serverfault.com/\" target=\"_blank\" rel=\"noopener\"><code>Server Fault</code></a>是关于服务器和网络管理的问题。</li>\n</ul>\n<p>有几个项目有自己的特定站点，包括<a href=\"http://android.stackexchange.com/\" target=\"_blank\" rel=\"noopener\"><code>Android</code></a>、<a href=\"http://askubuntu.com/\" target=\"_blank\" rel=\"noopener\"><code>Ubuntu</code></a>、<a href=\"http://tex.stackexchange.com/\" target=\"_blank\" rel=\"noopener\"><code>TeX/LaTeX</code></a>和<a href=\"http://sharepoint.stackexchange.com/\" target=\"_blank\" rel=\"noopener\"><code>SharePoint</code></a>。请检查一下<code>Stack Exchange</code>以确定现在具体有哪些站点。</p>\n<h2 id=\"面向新手的论坛和互联网中继聊天（IRC）通常响应最快\"><a href=\"#面向新手的论坛和互联网中继聊天（IRC）通常响应最快\" class=\"headerlink\" title=\"面向新手的论坛和互联网中继聊天（IRC）通常响应最快\"></a>面向新手的论坛和互联网中继聊天（<code>IRC</code>）通常响应最快</h2><p>本地的用户组织或者你所用的<code>Linux</code>发行版也许正在宣传新手取得帮助的论坛或<code>IRC</code>通道（在一些非英语国家，新手论坛很可能还是邮件列表），这些地方是开始提问的好去处，特别是当你觉得遇到的也许只是相对简单或者很普通的问题时。<br>经过宣传的<code>IRC</code>通道是公开邀请提问的地方，通常可以得到实时的回复。</p>\n<p>事实上，如果出问题的程序来自某发行版（这很常见），最好先去该发行版的论坛或邮件列表中提问，再到程序本身的项目论坛或邮件列表。否则该项目的黑客可能仅仅回复『用 <strong><em>我们的</em></strong> 代码』。</p>\n<p>在任何论坛发贴以前，先看看有没有搜索功能。如果有，就试着用问题的几个关键词搜索一下，也许就有帮助。如果在此之前你已做过全面的网页搜索（你应该这样去做），还是再搜索一下论坛，搜索引擎有可能没来得及索引此论坛的全部内容。</p>\n<p>通过论坛或<code>IRC</code>通道提供项目的用户支持有增长的趋势，电子邮件交流则更多地为项目开发者保留。所以先在论坛或<code>IRC</code>中寻求与该项目相关的帮助。</p>\n<h2 id=\"第二步，使用项目的邮件列表\"><a href=\"#第二步，使用项目的邮件列表\" class=\"headerlink\" title=\"第二步，使用项目的邮件列表\"></a>第二步，使用项目的邮件列表</h2><p>当某个项目存在开发者邮件列表时，要向列表而不是其中的个别成员提问，即使你确信他能最好地回答你的问题。查一查项目的文档和主页，找到项目的邮件列表并使用它。采用这种办法有几个很好的理由：</p>\n<ul>\n<li>向一个开发者提的好问题，对整个项目组也会有益。反之，如果你认为自己的问题对整个项目组来说太愚蠢，就没有理由去去骚扰单个开发者。</li>\n<li>向列表提问可以分散开发者的负担，单个开发者（尤其是项目领导）也许太忙以至于没法回答你的问题。</li>\n<li>大多数邮件列表都要存档，那些存档将被搜索引擎索引，如果你向列表提问并得到解答，将来其它人可以通过网页搜索找到你的问题和答案，也就不用再次发问了。</li>\n<li>如果某些问题经常被问到，开发者可以利用此信息改进文档或软件本身，以使其更清楚。如果只是私下提问，就没有人能看到最常见问题的完整场景。</li>\n</ul>\n<p>如果一个项目既有 『用户』 也有『开发者』（或 『黑客』）邮件列表或论坛，而你又不摆弄那些代码，向『用户』列表或论坛提问。不要假设自己会在开发者列表中受到欢迎，那些人多半会遭受你的噪音干扰。</p>\n<p>然尔，如果你 <strong>_确信_</strong> 你的问题不一般，而且在『用户』 列表或论坛中几天都没有回复，可以试试『开发者』列表或论坛。<br>建议你在张贴前最好先暗暗地观察几天，至少看看最近几天保存的帖子，以了解那的行事方式（事实上这是参与任何私有或半私有列表的好主意）</p>\n<p>如果你找不到一个项目的邮件列表，而只能查到项目维护者的地址，只管向其发信。<br>即便在这种情况下，也别假设项目的邮件列表不存在。在你的电子邮件中陈述你已经试过但没有找到合适的邮件列表，也提及你不反对将自己的邮件转发给他人<br>（许多人认为，即使没什么秘密，私人电子邮件也不应该被公开。通过允许将你的电子邮件转发他人，你给了相应人员处置你邮件的选择）。</p>\n<h2 id=\"使用有意义且明确的主题\"><a href=\"#使用有意义且明确的主题\" class=\"headerlink\" title=\"使用有意义且明确的主题\"></a>使用有意义且明确的主题</h2><p>在邮件列表、新闻组或论坛中，主题是你在五十个或更少的字以内吸引有资格专家注意的黄金机会，不要用诸如 『请帮我』 （更别提大写的 『请帮我！！！！』，这种主题的消息会被条件反射式地删掉）之类的唠叨浪费机会。<br>不要用你痛苦的深度来打动我们，相反，要在这点空间中使用超级简明扼要的问题描述。</p>\n<p>编写主题题头好的惯例格式是『对象 —— 偏差』，许多技术支持组织都支持这么做。在『对象』部分指明是哪一个或哪一组东西有问题，在『偏差』部分则描述与期望的行为不一致的地方。</p>\n<p><strong>愚蠢：</strong></p>\n<blockquote>\n<p>救命啊！我的笔记本视频工作不正常！</p>\n</blockquote>\n<p><strong>明智：</strong></p>\n<blockquote>\n<p><code>X.org 6.8.1</code>扭曲鼠标光标，<code>MV1005</code>型号的某显卡芯片组</p>\n</blockquote>\n<p><strong>更明智：</strong></p>\n<blockquote>\n<p>使用<code>MV1005</code>型号的某显卡芯片组在<code>X.org 6.8.1</code>的鼠标光标被扭曲</p>\n</blockquote>\n<p>编写 『对象 —— 偏差』式描述的过程有助于你组织对问题的细致思考。是什么被影响了？仅仅是鼠标光标或者还有其它图形？<br>只在<code>X.org</code>中出现？或只是在其<code>6.8.1</code>版中？是针对某显卡芯片组？或者只是其中的<code>MV1005</code>型号？一个黑客只需描一眼就能够立即明白什么是你遇到的问题，什么是你自己的问题。</p>\n<p>更一般地，想像一下在一个只显示主题的文档索引中查找。让你的主题更好地反映问题，可以使下一个搜索类似问题的人能够在文档中直接就找到答案的线索，而不用再次发贴提问。</p>\n<p>如果你想在回复中提问，确保改变主题以表明你是在问一个问题，一个主题像 『Re: 测试』 或者 『Re: 新<code>Bug</code>』的消息不太可能引起足够的注意。同时，将回复中与新主题不甚相关的引用内容尽量删除。</p>\n<p>对于列表消息，不要直接点击回复按钮来开始一个全新的线索，这将限制你的观众。有些邮件阅读程序，比如<code>mutt</code>，允许用户按线索排序并通过折叠线索来隐藏消息，这样做的人永远看不到你发的消息。</p>\n<p>仅仅改变主题还不够。<code>mutt</code>和其它一些邮件阅读程序还要检查邮件头主题以外的其它信息，以便为其指定线索，所以宁可发一个全新的邮件。</p>\n<p>在论坛，因为消息与特定的线索紧密结合，并且通常在线索之外不可见，好的提问方式略有不同，通过回复提问并不要紧。不是所有论坛都允许在回复中出现分离的主题，而且这样做了基本上没有人会去看。<br>不过，通过回复提问本身就是令人怀疑的做法，因为它们只会被正在查看该线索的人读到。所以，除非你 <strong>_只想_</strong> 在该线索当前活跃的人群中提问，还是另起炉灶比较好。</p>\n<h2 id=\"使问题容易回复\"><a href=\"#使问题容易回复\" class=\"headerlink\" title=\"使问题容易回复\"></a>使问题容易回复</h2><p>以『请向……回复』来结束问题多半会使你得不到回答。如果你觉得花几秒钟在邮件客户端设置一下回复地址都麻烦，我们也觉得花几秒钟考虑你的问题更麻烦。<br>如果你的邮件客户端程序不支持这样做，<a href=\"http://linuxmafia.com/faq/Mail/muas.html\" target=\"_blank\" rel=\"noopener\">换个好点的</a>；如果是操作系统不支持所有这种邮件客户端程序，也换个好点的。</p>\n<p>在论坛，要求通过电子邮件回复是完全无礼的，除非你确信回复的信息也许是敏感的（而且有人会为了某些未知的原因，只让你而不是整个论坛知道答案）。<br>如果你只是想在有人回复线索时得到电子邮件提醒，可以要求论坛发送。几乎所有论坛都支持诸如『留意本线索』、『有回复发送邮件』等功能。</p>\n<h2 id=\"用清晰、语法、拼写正确的语句书写\"><a href=\"#用清晰、语法、拼写正确的语句书写\" class=\"headerlink\" title=\"用清晰、语法、拼写正确的语句书写\"></a>用清晰、语法、拼写正确的语句书写</h2><p>经验告诉我们，粗心与草率的作者通常也粗心与草率地思考和编程（我敢打赌）。为这些粗心与草率的思考者回答问题没有什么好处，我们宁可将时间花在其它地方。</p>\n<p>清楚、良好地表达你的问题非常重要。如果你觉得这样做麻烦，我们也觉得注意你的问题麻烦。<br>花点额外的精力斟酌一下字句，用不着太僵硬与正式 —— 事实上，黑客文化很看重能准确地使用非正式、俚语和幽默的语句。但它 <strong>_必须_</strong> 很准确，而且有迹象表明你是在思考和关注问题。</p>\n<p>正确地拼写、使用标点和大小写，不要将『its』混淆为『it’s』，『loose』搞成『lose』或者将『discrete』弄成 『discreet』。不要全部用大写，这会被视为无礼的大声嚷嚷。<br>（全部小写也好不到哪去，因为不易阅读。<em>Alan Cox</em> 也许可以这样做，但你不行。）<br>【<strong>_译注_</strong>：<a href=\"https://en.wikipedia.org/wiki/Alan_Cox\" target=\"_blank\" rel=\"noopener\"><em>Alan Cox</em></a> 著名黑客，<code>Linux</code>内核的重要参与者】</p>\n<p>一般而言，如果你写得像个半文盲似的傻子，多半得不到理睬。也不要使用即时通讯中的简写，如将『you』简化为『u』会使你看起来像一个为了节约二次击键的半文盲式的傻子。<br>更糟的是，如果像个小孩似地鬼画桃符那绝对是在找死，可以肯定没人会理你（或者最多是给你一大堆指责与挖苦）。</p>\n<p>如果在非母语论坛提问，你的拼写与语法错误会得到有限的宽容，但懒惰完全不会被容忍（是的，我们通常看得出其中的差别）。<br>同时，除非你知道回复者使用的语言，请使用英语书写。繁忙的黑客一般会直接删除用他们看不懂语言写的消息。<br>在互联网上英语是工作语言，用英语书写可以将你的问题不被阅读就被直接删除的可能性降到最低。</p>\n<p>如果你用英语书写但它是你的第二语言，最好提醒潜在的回复者语言上可能的困难以便绕过这个问题，比如：</p>\n<ul>\n<li>英语不是我的母语，请谅解拼写错误。</li>\n<li>如果您使用某某语言，请电邮/私聊我，也许我需要您的协助翻译我的问题。</li>\n<li>对于这个技术术语本身我很熟悉，但对于它的一些俚语或习惯表达方式就不太明白了。</li>\n<li>我已经同时用某某语及英语提问，如果您使用两者之一回复，我很乐意翻译。</li>\n</ul>\n<h2 id=\"使用易于读取且标准的文件格式发送问题\"><a href=\"#使用易于读取且标准的文件格式发送问题\" class=\"headerlink\" title=\"使用易于读取且标准的文件格式发送问题\"></a>使用易于读取且标准的文件格式发送问题</h2><p>如果你人为地将问题搞得难以阅读，它多半会被忽略，人们更愿读易懂的问题，所以：</p>\n<ul>\n<li>使用纯文本而不是<code>HTML</code>（ <a href=\"http://www.birdhouse.org/etc/evilmail.html\" target=\"_blank\" rel=\"noopener\">关闭<code>HTML</code></a> 并不难）</li>\n<li>使用<code>MIME</code>附件通常没有问题，前提是真正有内容（譬如附带的源文件或补丁），而不仅仅是邮件客户端程序生成的模板（譬如只是消息内容的拷贝）。</li>\n<li>不要发送整段只是单行句子但多次折回的邮件（这使得回复部分内容非常困难）。设想你的读者是在80个字符宽的文本终端阅读邮件，设置你的行折回点小于 80 列。</li>\n<li>但是，也 <strong>_不要_</strong> 用任何固定列折回数据（譬如日志文件拷贝或会话记录）。数据应该原样包含，使回复者确信他们看到的是与你看到的一样的东西。</li>\n<li>在英语论坛中，不要使用<code>MIME</code>可打印字符引用编码编码（<a href=\"https://zh.wikipedia.org/wiki/Quoted-printable\" target=\"_blank\" rel=\"noopener\"><code>Quoted-Printable encoding</code></a>）发送消息。这种编码对于张贴非<code>ASCII</code>语言可能是必须的，但很多邮件程序并不支持。<br>  当它们分断时，那些文本中四处散布的 『<code>=20</code>』符号既难看也分散注意力，甚至有可能破坏内容的语意。</li>\n<li><strong><em>永远不要</em></strong> 指望黑客们阅读使用封闭的专用格式编写的文档，诸如微软公司的<code>Word</code>或<code>Excel</code>文件等。<br>  大多数黑客对此的反应就像有人将还在冒热气的猪粪倒在你门口时你的反应一样。即使他们能够处理，也很厌恶这么做。</li>\n<li>如果你从使用视窗的电脑发送电子邮件，关闭问题颇多的微软『聪明引用』功能（在『工具』 -&gt; 『自动纠正选项』的『输入时自动格式化』下去掉聪明引用的选框），以免在你的邮件中到处散布垃圾字符。</li>\n<li>在论坛，勿滥用『表情符号』和『<code>HTML</code>』功能（当它们提供时）。一两个表情符号通常没有问题，但花哨的彩色文本倾向于使人认为你是个无能之辈。过滥地使用表情符号、色彩和字体会使你看来像个傻笑的小姑娘。<br>  这通常不是个好主意，除非你只是对性而不是有用的回复更有兴趣。</li>\n</ul>\n<p>如果你使用图形用户界面的邮件客户端程序（如网景公司的<code>Messenger</code>、微软公司的<code>Outlook</code>或者其它类似的），注意它们的缺省配置不一定满足这些要求。<br>大多数这类程序有基于菜单的『查看源码』命令，用它来检查发送文件夹中的消息，以确保发送的是没有多余杂质的纯文本文件。</p>\n<h2 id=\"描述问题应准确且有内容\"><a href=\"#描述问题应准确且有内容\" class=\"headerlink\" title=\"描述问题应准确且有内容\"></a>描述问题应准确且有内容</h2><ul>\n<li>仔细、清楚地描述问题的症状</li>\n<li>描述问题发生的环境（主机、操作系统、应用程序，任何相关的），提供销售商的发行版和版本号（如：『<code>Fedora Core 7</code>』、『<code>Slackware 9.1</code>』等）</li>\n<li>描述提问前做过的研究及其理解。</li>\n<li>描述提问前为确定问题而采取的诊断步骤。</li>\n<li>描述最近对计算机或软件配置的任何相关改变。</li>\n<li>如果可能，提供在可控环境下重现问题的方法。</li>\n</ul>\n<p>尽最大努力预测黑客会提到的问题，并提前备好答案。</p>\n<p>如果你认为是代码有问题，向黑客提供在可控环境下重现问题的方法尤其重要。当你这么做时，得到有用且及时回复的可能性将大大增加。</p>\n<p>西蒙 · 泰瑟姆（<em>Simon Tatham</em>）写过一篇 <a href=\"http://www.chiark.greenend.org.uk/~sgtatham/bugs.html\" target=\"_blank\" rel=\"noopener\">如何有效报告<code>Bug</code></a> 的文章，我强烈推荐各位阅读。</p>\n<h2 id=\"量不在多，精炼则灵\"><a href=\"#量不在多，精炼则灵\" class=\"headerlink\" title=\"量不在多，精炼则灵\"></a>量不在多，精炼则灵</h2><p>你应该写得精炼且有内容，简单地将一大堆代码或数据罗列在求助消息中达不到目的。如果你有一个很大且复杂的测试样例让程序崩溃，尝试将其裁剪得越小越好。</p>\n<p>至少有三个理由支持这点。第一，让别人看到你在努力简化问题使你更有可能得到回复。<br>第二，简化问题使你更有可能得到 <strong><em>有用的</em></strong> 回复。第三，在提纯<code>Bug</code>报告的过程中，你可能自己就找到了解决办法或权宜之计。</p>\n<h2 id=\"别急于宣称找到Bug\"><a href=\"#别急于宣称找到Bug\" class=\"headerlink\" title=\"别急于宣称找到Bug\"></a>别急于宣称找到<code>Bug</code></h2><p>当你在一个软件中遇到问题，除非你 <strong><em>非常、非常</em></strong> 的有根据，不要动辄声称找到了<code>Bug</code>。<br>提示：除非你能提供解决问题的源代码补丁，或者对前一版本的回归测试表现出不正确的行为，否则你都多半不够完全确信。<br>对于网页和文档也如此，如果你发现了文档的『<code>Bug</code>』，你应该能提供相应位置的替代文本。</p>\n<p>记住，还有许多其它用户并未经历你遇到的问题，否则你在阅读文档或搜索网页时就应该发现了（你在报怨前已经做了这些，<a href=\"#如何做提问前的准备\">是吧</a> ？）。<br>这也意味着很有可能是你弄错了而不是软件本身有问题。</p>\n<p>编写软件的人总是非常辛苦地使它尽可能完美。如果你声称找到了<code>Bug</code>，也就置疑了他们的能力，即使你是对的，也有可能会使其中的部分人感到不快。<br>此外，在主题中嚷嚷『<code>Bug</code>』也是特别不老练的。</p>\n<p>提问时，即使你私下非常确信已经发现一个真正的<code>Bug</code>，最好写得像是 <strong>_你_</strong> 做错了什么。如果真的有<code>Bug</code>，你会在回复中看到这点。<br>这样做的话，如果真有<code>Bug</code>，维护者就会向你道歉，这总比你弄砸了然后欠别人一个道歉要强。</p>\n<h2 id=\"低声下气代替不了做自己的家庭作业\"><a href=\"#低声下气代替不了做自己的家庭作业\" class=\"headerlink\" title=\"低声下气代替不了做自己的家庭作业\"></a>低声下气代替不了做自己的家庭作业</h2><p>有些人明白他们不应该粗鲁或傲慢地行事并要求得到答复，但他们退到相反的低声下气的极端：<br>『我知道我只是个可怜的新丁，一个失败者，但……』。这既使人困扰，也没有用，当伴随着对实际问题含糊的描述时还特别令人反感。</p>\n<p>别用低级灵长类动物的办法浪费你我的时间，相反，尽可能清楚地描述背景情况和你的问题，这比低声下气更好地摆正了你的位置。</p>\n<p>有时，论坛设有单独的初学者提问版面，如果你真的认为遇到了肤浅的问题，到那去就是了，但一样别低声下气。</p>\n<h2 id=\"描述问题症状而不是猜测\"><a href=\"#描述问题症状而不是猜测\" class=\"headerlink\" title=\"描述问题症状而不是猜测\"></a>描述问题症状而不是猜测</h2><p>告诉黑客是什么导致了问题是没用的（如果你的诊断理论是了不起的东西，你还会向别人咨询求助吗？）。<br>所以，确保只是告诉他们问题的原始症状，而不是你的解释和理论，让他们来解释和诊断。如果你认为陈述自己的猜测很重要，应清楚地说明这只是你的猜测并描述为什么它们不起作用。</p>\n<p><strong>愚蠢：</strong></p>\n<blockquote>\n<p>我在编译内核时接连遇到<code>SIG11</code>错误，怀疑主板上的某根电路丝断了，找到它们的最好办法是什么？</p>\n</blockquote>\n<p><strong>明智：</strong></p>\n<blockquote>\n<p>我组装的电脑（<code>K6/233 CPU、FIC-PA2007</code>主板[威盛<code>Apollo VP2</code>芯片组]、<code>Corsair PC133 SDRAM 256Mb</code>内存）最近在开机 20 分钟左右、做内核编译时频繁地报<code>SIG11</code>错，但在头 20 分钟内从不出问题。<br>重启动不会复位时钟，但整夜关机会。更换所有内存未解决问题，相关的典型编译会话日志附后。</p>\n</blockquote>\n<p>由于以上这点许多人似乎难以掌握，这里有句话可以提醒你：『所有的诊断专家都来自密苏里州』。<br>美国国务院的官方座右铭则是『让我看看』（出自国会议员威勒德 · D · 范迪弗［<em>Willard D. Vandiver</em>］在1899年时的讲话：<br>『我来自一个出产玉米、棉花、牛蒡和民主党人的国家，滔滔雄辩既不能说服我，也不会让我满意。我来自密苏里州，你必须让我看看。』）<br>针对诊断者而言，这并不是怀疑，而只是一种真实而有用的需求，以便让他们看到与你看到的原始证据尽可能一致的东西，而不是你的猜测与总结。所以，让我们看看。</p>\n<h2 id=\"按时间先后罗列问题症状\"><a href=\"#按时间先后罗列问题症状\" class=\"headerlink\" title=\"按时间先后罗列问题症状\"></a>按时间先后罗列问题症状</h2><p>刚出问题之前发生的事情通常包含有解决问题最有效的线索。所以，记录中应准确地描述你、电脑和软件在崩溃前都做了什么。<br>在命令行处理的情况下，有会话日志（如运行脚本工具生成的）并引用相关的若干（如20）行记录会非常有帮助。</p>\n<p>如果崩溃的程序有诊断选项（如<code>-v</code>详述开关），试着选择这些能在记录中增加排错信息的选项。<br>记住，『多』不等于『好』。试着选取适当的排错级别以便提供有用的信息而不是将阅读者淹没在垃圾中。</p>\n<p>如果你的记录很长（如超过四段），在开头简述问题随后按时间先后罗列详细过程也许更有用。这样，黑客在读你的记录时就知道该注意哪些内容了。</p>\n<h2 id=\"描述目标而不是过程\"><a href=\"#描述目标而不是过程\" class=\"headerlink\" title=\"描述目标而不是过程\"></a>描述目标而不是过程</h2><p>如果你想弄清楚如何做某事（而不是报告一个<code>Bug</code>），在开头就描述你的目标，然后才陈述遇到问题的特定步骤。</p>\n<p>经常出现这种情况，寻求技术帮助的人在脑袋里有个更高层次的目标，他们在自以为能达到目标的特定道路上被卡住了，然后跑来问该怎么走，但没有意识到这条路本身有问题，结果要费很大的劲才能通过。</p>\n<p><strong>愚蠢：</strong></p>\n<blockquote>\n<p>我怎样才能让某图形程序的颜色拾取器取得十六进制的<code>RGB</code>值？</p>\n</blockquote>\n<p><strong>明智：</strong></p>\n<blockquote>\n<p>我正试着用自己选定数值的颜色替换一幅图片的色表，我现在知道的唯一方法是编辑每个表槽，但却无法让某图形程序的颜色拾取器取得十六进制的<code>RGB</code>值。</p>\n</blockquote>\n<p>第二种提法是明智的，它使得建议采用更合适的工具以完成任务的回复成为可能。</p>\n<h2 id=\"别要求私下回复电邮\"><a href=\"#别要求私下回复电邮\" class=\"headerlink\" title=\"别要求私下回复电邮\"></a>别要求私下回复电邮</h2><p>黑客们认为问题的解决过程应该公开、透明，此过程中如果更有才能的人注意到不完整或者不当之处，最初的回复才能够、也应该被纠正。同时，作为回复者也因为能力和学识被其它同行看到而得到某种回报。</p>\n<p>当你要求私下回复时，此过程和回报都被中止。别这样做，让 <strong><em>回复者</em></strong> 来决定是否私下回答 —— 如果他真这么做了，通常是因为他认为问题编写太差或者太肤浅，以至于对其它人毫无意义。</p>\n<p>对这条规则存在一条有限的例外，如果你确信提问可能会引来大量雷同的回复时，那么『向我发电邮，我将为论坛归纳这些回复』将是神奇的句子。<br>试着将邮件列表或新闻组从洪水般雷同的回复中解救出来是非常有礼貌的 —— 但你必须信守诺言。</p>\n<h2 id=\"提问应明确\"><a href=\"#提问应明确\" class=\"headerlink\" title=\"提问应明确\"></a>提问应明确</h2><p>漫无边际的问题通常也被视为没有明确限制的时间无底洞。<br>最有可能给你有用答案的人通常也是最忙的人（假如只是因为他们承担了太多工作的话），这些人对于没有止境的时间无底洞极其敏感，所以他们也倾向于讨厌那些漫无边际的问题。</p>\n<p>如果你明确了想让回复者做的事（如指点方向、发送代码、检查补丁或其它），你更有可能得到有用的回复。<br>因为这样可以让他们集中精力并间接地设定了他们为帮助你需要花费的时间和精力上限，这很好。</p>\n<p>要想理解专家生活的世界，可以这样设想：那里有丰富的专长资源但稀缺的响应时间。你暗中要求他们奉献的时间越少，你越有可能从这些真正懂行也真正很忙的专家那里得到解答。</p>\n<p>所以限定你的问题以使专家回答时需要付出的时间最少 —— 这通常与简化问题还不太一样。<br>举个例，『请问可否指点一下哪有好一点的 X 解释？』通常要比『请解释一下 X』明智。如果你的代码不运行了，通常请别人看看哪有问题比叫他们帮你改正更明智。</p>\n<h2 id=\"关于代码的问题\"><a href=\"#关于代码的问题\" class=\"headerlink\" title=\"关于代码的问题\"></a>关于代码的问题</h2><p>别要求他人给你出问题的代码排错而不提及应该从何入手。张贴几百行的代码，然后说一声『它不能运行』会让你得不到理睬。<br>只贴几十行代码，然后说一句『在第七行以后，本应该显示<x>，但实际出现的是<y>』非常有可能让你得到回复。</y></x></p>\n<p>最精确描述代码问题的方法是提供一个能展示问题的最小测试样例。什么是最小测试样例？<br>它是对问题的展现，只需要刚好能够重现非预期行为的代码即可。如何生成一个最小测试样例？<br>如果你知道哪一行或哪一段代码会产生问题，将其复制并提供刚好够用的外围支撑代码以构成一个完整的样例<br>（够用是指源码刚好能被编译器、解释器或任何处理它的程序所接受）。如果你不能将问题缩小到特定的段落，复制源码并去除那些与问题无关的代码段。<br>你能提供的最小测试样例越小越好（参见 <a href=\"#量不在多精炼则灵\">量不在多，精炼则灵</a> ）。</p>\n<p>生成一个非常小的最小测试样例并不总是可能，但尽力去做是很好的锻练，这有可能帮助你找到需要自己解决的问题。即使你找不到，黑客们喜欢看到你努力过，这将使他们更合作。</p>\n<p>如果你只是想让别人帮忙审一下代码，在最开头就要说出来，并且一定要提到你认为哪一部分特别需要关注以及为什么。</p>\n<h2 id=\"别张贴家庭作业式问题\"><a href=\"#别张贴家庭作业式问题\" class=\"headerlink\" title=\"别张贴家庭作业式问题\"></a>别张贴家庭作业式问题</h2><p>黑客们善于发现『家庭作业』式的问题。我们中的大多数人已经做了自己的家庭作业，那是该 <strong>_你_</strong> 做的，以便从中学到东西。问一下提示没有关系，但不是要求完整的解决方案。</p>\n<p>如果你怀疑自己碰到了一个家庭作业式的问题，但仍然无法解决，试试在用户组、论坛或（作为最后一招）在项目的『用户』邮件列表或论坛中提问。尽管黑客们 <strong>_会_</strong> 看出来，一些老用户也许仍会给你提示。</p>\n<h2 id=\"删除无意义的要求\"><a href=\"#删除无意义的要求\" class=\"headerlink\" title=\"删除无意义的要求\"></a>删除无意义的要求</h2><p>抵制这种诱惑，即在求助消息末尾加上诸如『有人能帮我吗？』或『有没有答案？』之类在语义上毫无意义的东西。<br>第一，如果问题描述还不完整，这些附加的东西最多也只能是多余的。第二，因为它们是多余的，黑客们会认为这些东西烦人 —— 就很有可能用逻辑上无误但打发人的回复，诸如『是的，你可以得到帮助』和『不，没有给你的帮助』。</p>\n<p>一般来说，避免提『是或否』类型的问题，除非你想得到 <a href=\"http://homepage.ntlworld.com./jonathan.deboynepollard/FGA/questions-with-yes-or-no-answers.html\" target=\"_blank\" rel=\"noopener\">『是或否』类型的回答</a>。</p>\n<h2 id=\"不要把问题标记为『紧急』，即使对你而言的确如此\"><a href=\"#不要把问题标记为『紧急』，即使对你而言的确如此\" class=\"headerlink\" title=\"不要把问题标记为『紧急』，即使对你而言的确如此\"></a>不要把问题标记为『紧急』，即使对你而言的确如此</h2><p>这是你的问题，不要我们的。宣称『紧急』极有可能事与愿违：<br>大多数黑客会直接删除这种消息，他们认为这是无礼和自私地企图得到即时与特殊的关照。而且『紧急』或其它有类似含义的主题有可能触发垃圾过滤规则，潜在的回复者可能永远看不到你的问题！</p>\n<p>有一点点局部的例外，如果你是在一些知名度很高、会使黑客们激动的地方使用程序，也许值得这样去做。在这种情况下，如果你有期限压力，也很有礼貌地提到这点，人们也许会有足够的兴趣快一点回答。</p>\n<p>当然，这是非常冒险的，因为黑客们对什么是令人激动的标准多半与你的不同。<br>譬如从国际空间站这样张贴没有问题，但代表感觉良好的慈善或政治原因这样做几乎肯定不行。<br>事实上，张贴诸如『紧急：帮我救救这个毛绒绒的小海豹！』肯定会让黑客回避你或觉得窝火，即使他们认为毛绒绒的小海豹很重要。</p>\n<p>如果你觉得这不可思议，再把剩下的内容多读几遍，直到弄懂了再发贴也不迟。</p>\n<h2 id=\"礼貌总是有益的\"><a href=\"#礼貌总是有益的\" class=\"headerlink\" title=\"礼貌总是有益的\"></a>礼貌总是有益的</h2><p>礼貌一点，使用『请』和『谢谢你的关注』或者『谢谢你的关照』，让别人明白你感谢他们无偿花时间帮助你。</p>\n<p>坦率地讲，这一点没有语法正确、文字清晰、准确、有内容和避免使用专用格式重要（同时也不能替代它们）。<br>黑客们一般宁可读有点唐突但技术鲜明的<code>Bug</code>报告，而不是那种有礼但含糊的报告。（如果这点让你不解，记住我们是按问题能教我们什么来评价它的）</p>\n<p>然尔，如果你已经谈清楚了技术问题，客气一点肯定会增加你得到有用回复的机会。</p>\n<p>（我们必须指出，本文唯一受到一些老黑客认真反对的地方是以前曾经推荐过的『提前谢了』，一些黑客认为这隐含着事后不用再感谢任何人的暗示。<br>我们的建议是要么先说 『提前谢了』，事后 <strong>_再_</strong> 对回复者表示感谢，要么换种方式表达，譬如用『谢谢你的关注』或『谢谢你的关照』）。</p>\n<h2 id=\"问题解决后追加一条简要说明\"><a href=\"#问题解决后追加一条简要说明\" class=\"headerlink\" title=\"问题解决后追加一条简要说明\"></a>问题解决后追加一条简要说明</h2><p>问题解决后向所有帮助过的人追加一条消息，让他们知道问题是如何解决的并再次感谢。如果问题在邮件列表或新闻组中受到广泛关注，在那里追加此消息比较恰当。</p>\n<p>最理想的方式是向最初提问的线索回复此消息，并在主题中包含『已解决』、『已搞定』或其它同等含义的明显标记。<br>在人来人往的邮件列表里，一个看见线索 『问题 X』和『问题 X - 已解决』的潜在回复者就明白不用再浪费时间了（除非他个人觉得『问题 X』有趣），因此可以利用此时间去解决其它问题。</p>\n<p>追加的消息用不着太长或太复杂，一句简单的『你好 —— 是网线坏了！谢谢大家 —— 比尔』就比什么都没有要强。<br>事实上，除非解决问题的技术真正高深，一条简短而亲切的总结比长篇大论要好。说明是什么行动解决了问题，用不着重演整个排错的故事。</p>\n<p>对于有深度的问题，张贴排错历史的摘要是恰当的。描述问题的最终状态，说明是什么解决了问题，<strong><em>在此之后</em></strong> 才指明可以避免的弯路。<br>应避免的弯路部分应放在正确的解决方案和其它总结材料之后，而不要将此消息搞成侦探推理小说。列出那些帮助过你的名字，那样你会交到朋友的。</p>\n<p>除了有礼貌、有内容以外，这种类型的追帖将帮助其他人在邮件列表、新闻组或论坛文档中搜索到真正解决你问题的方案，从而也让他们受益。</p>\n<p>最后，此类追帖还让每位参与协助的人因问题的解决而产生一种满足感。如果你自己不是技术专家或黑客，相信我们，这种感觉对于你寻求帮助的老手和专家是非常重要的。<br>问题叙述到最后不知所终总是令人沮丧的，黑客们痒痒地渴望它们被解决。『挠痒痒』为你挣到的信誉将对你下次再次张贴提问非常非常的有帮助。</p>\n<p>考虑一下怎样才能避免他人将来也遇到类似的问题，问问自己编一份文档或<code>FAQ</code>补丁会不会有帮助，如果是的话就将补丁发给维护者。</p>\n<p>在黑客中，这种良好的后继行动实际上比传统的礼貌更重要，也是你善待他人而赢得声誉的方式，这是非常有价值的财富。</p>\n<h1 id=\"如何解读回答\"><a href=\"#如何解读回答\" class=\"headerlink\" title=\"如何解读回答\"></a>如何解读回答</h1><h2 id=\"『读读他妈的手册（RTFM）』和『搜搜他妈的网络（STFW）』：是在告知你的问题根本不该提出来\"><a href=\"#『读读他妈的手册（RTFM）』和『搜搜他妈的网络（STFW）』：是在告知你的问题根本不该提出来\" class=\"headerlink\" title=\"『读读他妈的手册（RTFM）』和『搜搜他妈的网络（STFW）』：是在告知你的问题根本不该提出来\"></a>『读读他妈的手册（<code>RTFM</code>）』和『搜搜他妈的网络（<code>STFW</code>）』：是在告知你的问题根本不该提出来</h2><p>有一个古老而神圣的传统：如果你收到『读读他妈的手册（<code>RTFM</code>）』的回复，发信人认为你应该去『读读他妈的手册』。他或她多半是对的，去读一下吧。</p>\n<p>『读读他妈的手册（<code>RTFM</code>）』有个年轻一点的亲戚，如果你收到『搜搜他妈的网络（<code>STFW</code>）』的回复，发信人认为你应该『搜搜他妈的网络』。那人多半也是对的，去搜一下吧。（更温和一点的说法是『谷歌是你的朋友！』）</p>\n<p>在论坛，你也可能被要求去搜索论坛的文档。事实上，有人甚至可能热心地为你提供以前解决此问题的线索。但不要依赖这种关照，提问前应该先搜索一下文档。</p>\n<p>通常，叫你搜索的人已经打开了能解决你问题的手册或网页，正在一边看一边敲键盘。这些回复意味着他认为：第一，你要的信息很容易找到。第二，自已找要比别人喂到嘴里能学得更多。</p>\n<p>你不应该觉得这样就被冒犯了，按黑客的标准，回复者没有不理你就是在向你表示某种尊敬，你反而应该感谢他热切地想帮助你。</p>\n<h2 id=\"如果你还是不明白……\"><a href=\"#如果你还是不明白……\" class=\"headerlink\" title=\"如果你还是不明白……\"></a>如果你还是不明白……</h2><p>如果你看不懂回答，不要马上回复一个要求说明的消息，先试试那些最初提问时用过的相同工具（如手册、<code>FAQ</code>、网页、懂行的朋友等）试着搞懂回答。如果还是需要说明，展现你已经明白的。</p>\n<p>譬如，假如我告诉你：『看起来像是某输入项有问题，你需要清除它』，接着是个 <strong>_不好_</strong> 的回帖：『什么是某输入项？』。<br>而这是一个 <strong>_很好_</strong> 的跟帖：『是的，我读了手册，某某输入项只在<code>-z</code>和<code>-p</code>开关中被提到，但都没有涉及到如何清除它们，你指的是哪一个还是我弄错了什么？』</p>\n<h2 id=\"对待无礼\"><a href=\"#对待无礼\" class=\"headerlink\" title=\"对待无礼\"></a>对待无礼</h2><p>很多黑客圈子中看似无礼的行为并不是存心冒犯。相反，它是直接了当、一针见血式的交流风格，这种风格对于更关注解决问题而不是使别人感觉舒服而混乱的人是很自然的。</p>\n<p>如果你觉得被冒犯了，试着平静地反应。如果有人真的做了出格的事，邮件列表、新闻组或论坛中的前辈多半会招呼他。<br>如果这 <strong>_没有_</strong> 发生而你却发火了，那么你发火对象的言语可能在黑客社区中看起来是正常的，而 <strong>_你_</strong> 将被视为有错的一方，这将伤害到你获取信息或帮助的机会。</p>\n<p>另一方面，你会偶而真的碰到无礼和无聊的言行。与上述相反，对真正的冒犯者狠狠地打击、用犀利的语言将其驳得体无完肤都是可以接受的。<br>然尔，在行事之前一定要非常非常的有根据。纠正无礼的言论与开始一场毫无意义的口水战仅一线之隔，黑客们自己莽撞地越线的情况并不鲜见。<br>如果你是新手或外来者，避开这种莽撞的机会并不高。如果你想得到的是信息而不是消磨时光，这时最好不要把手放在键盘上以免冒险。</p>\n<p>（有些人断言很多黑客都有轻度的自闭症或阿斯伯格综合症，缺少用于润滑人类社会『正常』交往所需的脑电路。这既可能是真也可能是假。<br>如果你自己不是黑客，兴许你认为我们脑袋有问题还能帮助你应付我们的古怪行为。只管这么干好了，我们不在乎。我们 <strong>_喜欢_</strong> 现在这个样子，并且一般都对病号标记有站得住脚的怀疑。）</p>\n<p>在下一节，我们会谈到另一个问题，当 <strong>_你_</strong> 行为不当时会受到的『冒犯』。</p>\n<hr>\n<h1 id=\"相关资源\"><a href=\"#相关资源\" class=\"headerlink\" title=\"相关资源\"></a>相关资源</h1><p>如果需要个人电脑、<code>Unix</code>和互联网如何工作的基础知识，参阅 <a href=\"http://en.tldp.org/HOWTO/Unix-and-Internet-Fundamentals-HOWTO/\" target=\"_blank\" rel=\"noopener\"><code>Unix</code>和互联网工作的基本原理</a>。</p>\n<p>当你发布软件或补丁时，试着按 <a href=\"http://en.tldp.org/HOWTO/Software-Release-Practice-HOWTO/index.html\" target=\"_blank\" rel=\"noopener\">软件发布实践</a> 操作。</p>\n<h1 id=\"鸣谢\"><a href=\"#鸣谢\" class=\"headerlink\" title=\"鸣谢\"></a>鸣谢</h1><p>伊夫林 · 米切尔（<em>Evelyn Mitchell</em>）贡献了一些愚蠢问题例子并启发了编写『如何更好地回答问题』这一节，米哈伊尔 · 罗门迪克（<em>Mikhail Ramendik</em>）贡献了一些特别有价值的建议和改进。</p>\n<h1 id=\"修订历史\"><a href=\"#修订历史\" class=\"headerlink\" title=\"修订历史\"></a>修订历史</h1><table>\n<thead>\n<tr>\n<th>修订版</th>\n<th>时间</th>\n<th>修订人</th>\n<th>修订内容</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>3.10</td>\n<td>2014年5月21日</td>\n<td>esr</td>\n<td>新增<code>Stack Overflow</code>的一节</td>\n</tr>\n<tr>\n<td>3.9</td>\n<td>2013年4月23日</td>\n<td>esr</td>\n<td>修正链接</td>\n</tr>\n<tr>\n<td>3.8</td>\n<td>2012年6月19日</td>\n<td>esr</td>\n<td>修正链接</td>\n</tr>\n<tr>\n<td>3.7</td>\n<td>2010年12月6日</td>\n<td>esr</td>\n<td>对于英语为第二语言人士的有益建议</td>\n</tr>\n<tr>\n<td>3.7</td>\n<td>2010年11月2日</td>\n<td>esr</td>\n<td>几种翻译不见了</td>\n</tr>\n<tr>\n<td>3.6</td>\n<td>2008年3月19日</td>\n<td>esr</td>\n<td>小更新及新链接</td>\n</tr>\n<tr>\n<td>3.5</td>\n<td>2008年1月2日</td>\n<td>esr</td>\n<td>勘误及一些翻译链接</td>\n</tr>\n<tr>\n<td>3.4</td>\n<td>2007年3月24日</td>\n<td>esr</td>\n<td>新章节：『关于代码的问题』</td>\n</tr>\n<tr>\n<td>3.3</td>\n<td>2006年9月29日</td>\n<td>esr</td>\n<td>增加凯 · 尼格曼（<em>Kai Niggemann</em>）的一个好建议</td>\n</tr>\n<tr>\n<td>3.2</td>\n<td>2006年1月10日</td>\n<td>esr</td>\n<td>加入瑞克 · 莫恩（<em>Rick Moen</em>）编写的内容</td>\n</tr>\n<tr>\n<td>3.1</td>\n<td>2004年10月28日</td>\n<td>esr</td>\n<td>文档『谷歌是你的朋友！』</td>\n</tr>\n<tr>\n<td>3.0</td>\n<td>2004年2月2日</td>\n<td>esr</td>\n<td>主要新增在网页论坛应有的礼节</td>\n</tr>\n</tbody>\n</table>\n<hr>\n"},{"title":"ali-api-util","date":"2017-12-06T15:45:02.000Z","_content":"\n```java\n@Component\n@NotThreadSafe\npublic class AliApiClientUtil implements InitializingBean {\n\n    @Value(\"${aliapi.appKey:no_config}\")\n    private String appKey;\n\n    @Value(\"${aliapi.appSecret:no_config}\")\n    private String appSecret;\n\n    @Value(\"${aliapi.enable:false}\")\n    private boolean enable;\n\n    private AliApiClient asyncClient;\n\n    @Override\n    public void afterPropertiesSet() throws Exception {\n        if (enable && (Constant.DEF_CONFIG.equals(appKey) || Constant.DEF_CONFIG.equals(appSecret))) {\n            throw new RuntimeException(String.format(\"阿里云第三方API初始化,缺失参数appKey:{0},appSecret{1}\", new Object[]{appKey, appSecret}));\n        }\n        asyncClient = AliApiClient.newBuilder()\n                .appKey(appKey)\n                .appSecret(appSecret)\n                .build();\n    }\n\n    public static class Builder extends BaseApiClientBuilder<Builder, AliApiClient> {\n\n        @Override\n        protected AliApiClient build(BuilderParams params) {\n            return new AliApiClient(params);\n        }\n    }\n\n    public static class AliApiClient extends BaseApiClient {\n\n        private AliApiClient(BuilderParams builderParams) {\n            super(builderParams);\n        }\n\n        public static Builder newBuilder() {\n            return new Builder();\n        }\n\n        public static AliApiClient getInstance() {\n            return getApiClassInstance(AliApiClient.class);\n        }\n\n        public void asyncInvoke0(ApiRequest apiRequest, ApiCallBack callBack) {\n            asyncInvoke(apiRequest, callBack);\n        }\n\n        public ApiResponse syncInvoke0(ApiRequest apiRequest) {\n            return syncInvoke(apiRequest);\n        }\n    }\n\n    /**\n     *{\n     *\"resp\":{\n     *  \"code\":0,\n     *  \"desc\":\"OK\"\n     *  } ,\n     *  \"data\":{},\n     * }\n     * 银行卡二、三、四元素实名认证\n     * https://market.aliyun.com/products/57000002/cmapi014429.html?spm=5176.2020520132.101.5.2lTTNI#sku=yuncode842900008\n     * @see AliHttpStatusEm\n     * @see com.dotnar.usc.common.util.aliapi.bankcardverifi.BankCardVerifiStatusEm\n     * @param bankCardVerifiVo\n     * @return\n     */\n    public ApiResponse syncBankCardVerifi(BankCardVerifiVo bankCardVerifiVo) {\n        ApiRequest apiRequest = new ApiRequest(Scheme.HTTP, Method.GET, Constant.BANK_CARD_VERIFI_HOST, Constant.BANK_CARD_VERIFI_API_PATH);\n        apiRequest.addParam(\"acct_name\", bankCardVerifiVo.getAcctName(), ParamPosition.QUERY, false);\n        apiRequest.addParam(\"acct_pan\", bankCardVerifiVo.getAcctPan(), ParamPosition.QUERY, true);\n        apiRequest.addParam(\"cert_id\", bankCardVerifiVo.getCertId(), ParamPosition.QUERY, false);\n        apiRequest.addParam(\"phone_num\", bankCardVerifiVo.getPhoneNum(), ParamPosition.QUERY, false);\n        return asyncClient.syncInvoke0(apiRequest);\n    }\n\n    /**\n     * {\n     * \"resp\": {\n     *      \"code\": 0,\n     *      \"desc\": \"匹配\"\n     * },\n     * \"data\": {\n     *    \"photo\": \"/9j/4AAQSkZJRgABAgAAAQAzb0a9jtkMbHG/o3+19P89K28x...\",\n     *    \"address\": \"四川省雅安地区荥经县\",\n     *    \"sex\": \"M\",\n     *    \"birthday\": \"1989-9-28\"\n     *   }\n     * }\n     *\n     * 身份证实名认证--返照片\n     * https://market.aliyun.com/products/57000002/cmapi015194.html?spm=5176.2020520132.101.10.2lTTNI#sku=yuncode919400000\n     * @param idPhotoVo\n     * @see AliHttpStatusEm\n     * @see com.dotnar.usc.common.util.aliapi.idphoto.IdPhotoStatusEm\n     * @return\n     */\n    public ApiResponse syncIdphoto(IdPhotoVo idPhotoVo) {\n        ApiRequest apiRequest = new ApiRequest(Scheme.HTTP, Method.GET, Constant.ID_PHOTO_HOST, Constant.ID_PHOTO_API_PATH);\n        apiRequest.addParam(\"cardno\", idPhotoVo.getCardno(), ParamPosition.QUERY, true);\n        apiRequest.addParam(\"name\", idPhotoVo.getName(), ParamPosition.QUERY, true);\n        return asyncClient.syncInvoke0(apiRequest);\n    }\n\n}\n```\n \n常见的错误\n```java\n/**\n * @Date 2017/12/5 16:42\n * <p>\n * https://help.aliyun.com/document_detail/43906.html\n */\n\npublic enum AliHttpStatusEm {\n\n    OK(\"OK\", 200, \"成功\"),\n\n    THROTTLED_BY_USER_FLOW_CONTROL(\"Throttled by USER Flow Control\", 403, \"因用户流控被限制\"),\n\n    THROTTLED_BY_APP_FLOW_CONTROL(\"Throttled by APP Flow Control\", 403, \"因APP流控被限制\"),\n\n    THROTTLED_BY_API_FLOW_CONTROL(\"Throttled by API Flow Control\", 403, \"因 API 流控被限制\"),\n\n    THROTTLED_BY_DOMAIN_FLOW_CONTROL(\"Throttled by DOMAIN Flow Control\", 403, \"因二级域名流控被限制，或因分组流控被限制\"),\n\n    QUOTA_EXHAUSTED(\"Quota Exhausted\", 403, \"调用次数已用完\"),\n\n    QUOTA_EXPIRED(\"Quota Expired\", 403, \"购买次数已过期\"),\n\n    USER_ARREARS(\"User Arrears\", 403, \"用户已欠费\"),\n\n    INVALID_ACCESS_KEY_ID_NOT_FOUND(\"InvalidAccessKeyId.NotFound\", 404, \"AccessKeyId 找不到\"),\n\n    INVALID_ACCESS_KEY_ID_INACTIVE(\"InvalidAccessKeyId.Inactive\", 400, \"AccessKeyId 被禁用。\"),\n\n    INVALID_TIME_STAMP_FORMAT(\"InvalidTimeStamp.Format\", 400, \"时间戳格式不对( Date 和 Timestamp)。\"),\n\n    INVALID_TIME_STAMP_EXPIRED(\"InvalidTimeStamp.Expired\", 400, \"用户时间和服务器时间超过15分钟。\"),\n\n    INVALID_SIGNATURE_METHOD(\"InvalidSignatureMethod\", 400, \"签名方法不支持。\"),\n\n    SIGNATURE_DOES_NOT_MATCH(\"SignatureDoesNotMatch\", 400, \"签名不通过。\"),\n\n    THROTTLING_USER(\"Throttling.User\", 400, \"用户调用频率超限。\"),\n\n    THROTTLING_API(\"Throttling.API\", 400, \"API 访问频率超限。\");\n\n    /**\n     * 错误码\n     */\n    private String code;\n    /**\n     * http 状态码\n     */\n    private int statusCode;\n    /**\n     * 中文描述\n     */\n    private String desc;\n\n    private final static Map<String, AliHttpStatusEm> ID_MAP = Arrays.stream(AliHttpStatusEm.values())\n            .collect(Collectors.toMap(AliHttpStatusEm::getCode, Function.identity()));\n\n    AliHttpStatusEm(String code, int statusCode, String desc) {\n        this.code = code;\n        this.statusCode = statusCode;\n        this.desc = desc;\n    }\n\n    public String getCode() {\n        return code;\n    }\n\n    public int getStatusCode() {\n        return statusCode;\n    }\n\n    public String getDesc() {\n        return desc;\n    }\n\n    public static AliHttpStatusEm getAliHttpStatusEmByStatusCode(String code) {\n        return ID_MAP.get(code);\n    }\n}\n\n```\n\n银行卡验证错误状态\n```java\n/**\n * 银行卡验证状态码\n *\n * @author \n * @Date 2017/12/5 17:31\n * <p>\n * https://market.aliyun.com/products/57000002/cmapi014429.html?spm=5176.2020520132.101.5.2lTTNI#sku=yuncode842900008\n */\n\npublic enum BankCardVerifiStatusEm {\n\n    OK((short) 0, \"OK\"),\n\n    CARD_IS_FORFEITED((short) 4, \"此卡被没收，请于发卡方联系\"),\n\n    CARDHOLDER_AUTHENTICATION_FAILED((short) 5, \"持卡人认证失败\"),\n\n    INVALID_CARD_NUMBER((short) 14, \"无效卡号\"),\n\n    CARD_DOES_NOT_CORRESPOND_ISSUER((short) 15, \"此卡无对应发卡方\"),\n\n    CARD_IS_NOT_INITIALIZED_OR_SLEEPS((short) 21, \"该卡未初始化或睡眠卡\"),\n\n    CHEAT_TUNKA((short) 34, \"作弊卡，吞卡\"),\n\n    ISSUER_DOES_NOT_SUPPORT_TRANSACTION((short) 40, \"发卡方不支持的交易\"),\n\n    CARD_HAS__REPORTED((short) 41, \"此卡已经挂失\"),\n\n    CARD_IS_FORFEITED_2((short) 43, \"此卡被没收\"),\n\n    CARD_HAS_EXPIRED((short) 54, \"该卡已过期\"),\n\n    CARD_ISSUER_DOES_NOT_ALLOW_THIS_TRANSACTION((short) 57, \"发卡方不允许此交易\"),\n\n    RESTRICTED_CARD((short) 62, \"受限制的卡\"),\n\n    WRONG_NUMBER_OF_PASSWORDS((short) 75, \"密码错误次数超限\"),\n\n    FAILED((short) 96, \"交易失败，请稍后重试\");\n\n    private short code;\n\n    private String desc;\n\n    private final static Map<Short, BankCardVerifiStatusEm> ID_MAP = Arrays.stream(BankCardVerifiStatusEm.values())\n            .collect(Collectors.toMap(BankCardVerifiStatusEm::getCode, Function.identity()));\n\n    BankCardVerifiStatusEm(short code, String desc) {\n        this.code = code;\n        this.desc = desc;\n    }\n\n    public short getCode() {\n        return code;\n    }\n\n    public String getDesc() {\n        return desc;\n    }\n\n    public static BankCardVerifiStatusEm getBankCardVerifiStatusEmByCode(short code) {\n        return ID_MAP.get(code);\n    }\n}\n```\n \n获取 身份证照片\n```java\n/**\n * @author \n * @Date 2017/12/5 19:05\n * https://market.aliyun.com/products/57000002/cmapi015194.html?spm=5176.2020520132.101.10.2lTTNI#sku=yuncode919400000\n */\n\npublic enum IdPhotoStatusEm {\n\n    OK((short) 0, \"匹配\"),\n\n    MISMATCH((short) 5, \"不匹配\"),\n\n    NOT_EXIST((short) 14, \"无此身份证号码\"),\n\n    FAILED((short) 96, \"交易失败，请稍后重试\");\n\n    private short code;\n\n    private String desc;\n\n    private final static Map<Short, IdPhotoStatusEm> ID_MAP = Arrays.stream(IdPhotoStatusEm.values())\n            .collect(Collectors.toMap(IdPhotoStatusEm::getCode, Function.identity()));\n\n    IdPhotoStatusEm(short code, String desc) {\n        this.code = code;\n        this.desc = desc;\n    }\n\n    public short getCode() {\n        return code;\n    }\n\n    public String getDesc() {\n        return desc;\n    }\n\n    public static IdPhotoStatusEm getIdPhotoStatusEmByCode(short code) {\n        return ID_MAP.get(code);\n    }\n}\n\n```\n\n\n","source":"_posts/ali-api.md","raw":"---\ntitle: ali-api-util\ndate: 2017-12-06 23:45:02\npermalink: ali-api-util\ncategories: Gists\ntags:\n - java\n---\n\n```java\n@Component\n@NotThreadSafe\npublic class AliApiClientUtil implements InitializingBean {\n\n    @Value(\"${aliapi.appKey:no_config}\")\n    private String appKey;\n\n    @Value(\"${aliapi.appSecret:no_config}\")\n    private String appSecret;\n\n    @Value(\"${aliapi.enable:false}\")\n    private boolean enable;\n\n    private AliApiClient asyncClient;\n\n    @Override\n    public void afterPropertiesSet() throws Exception {\n        if (enable && (Constant.DEF_CONFIG.equals(appKey) || Constant.DEF_CONFIG.equals(appSecret))) {\n            throw new RuntimeException(String.format(\"阿里云第三方API初始化,缺失参数appKey:{0},appSecret{1}\", new Object[]{appKey, appSecret}));\n        }\n        asyncClient = AliApiClient.newBuilder()\n                .appKey(appKey)\n                .appSecret(appSecret)\n                .build();\n    }\n\n    public static class Builder extends BaseApiClientBuilder<Builder, AliApiClient> {\n\n        @Override\n        protected AliApiClient build(BuilderParams params) {\n            return new AliApiClient(params);\n        }\n    }\n\n    public static class AliApiClient extends BaseApiClient {\n\n        private AliApiClient(BuilderParams builderParams) {\n            super(builderParams);\n        }\n\n        public static Builder newBuilder() {\n            return new Builder();\n        }\n\n        public static AliApiClient getInstance() {\n            return getApiClassInstance(AliApiClient.class);\n        }\n\n        public void asyncInvoke0(ApiRequest apiRequest, ApiCallBack callBack) {\n            asyncInvoke(apiRequest, callBack);\n        }\n\n        public ApiResponse syncInvoke0(ApiRequest apiRequest) {\n            return syncInvoke(apiRequest);\n        }\n    }\n\n    /**\n     *{\n     *\"resp\":{\n     *  \"code\":0,\n     *  \"desc\":\"OK\"\n     *  } ,\n     *  \"data\":{},\n     * }\n     * 银行卡二、三、四元素实名认证\n     * https://market.aliyun.com/products/57000002/cmapi014429.html?spm=5176.2020520132.101.5.2lTTNI#sku=yuncode842900008\n     * @see AliHttpStatusEm\n     * @see com.dotnar.usc.common.util.aliapi.bankcardverifi.BankCardVerifiStatusEm\n     * @param bankCardVerifiVo\n     * @return\n     */\n    public ApiResponse syncBankCardVerifi(BankCardVerifiVo bankCardVerifiVo) {\n        ApiRequest apiRequest = new ApiRequest(Scheme.HTTP, Method.GET, Constant.BANK_CARD_VERIFI_HOST, Constant.BANK_CARD_VERIFI_API_PATH);\n        apiRequest.addParam(\"acct_name\", bankCardVerifiVo.getAcctName(), ParamPosition.QUERY, false);\n        apiRequest.addParam(\"acct_pan\", bankCardVerifiVo.getAcctPan(), ParamPosition.QUERY, true);\n        apiRequest.addParam(\"cert_id\", bankCardVerifiVo.getCertId(), ParamPosition.QUERY, false);\n        apiRequest.addParam(\"phone_num\", bankCardVerifiVo.getPhoneNum(), ParamPosition.QUERY, false);\n        return asyncClient.syncInvoke0(apiRequest);\n    }\n\n    /**\n     * {\n     * \"resp\": {\n     *      \"code\": 0,\n     *      \"desc\": \"匹配\"\n     * },\n     * \"data\": {\n     *    \"photo\": \"/9j/4AAQSkZJRgABAgAAAQAzb0a9jtkMbHG/o3+19P89K28x...\",\n     *    \"address\": \"四川省雅安地区荥经县\",\n     *    \"sex\": \"M\",\n     *    \"birthday\": \"1989-9-28\"\n     *   }\n     * }\n     *\n     * 身份证实名认证--返照片\n     * https://market.aliyun.com/products/57000002/cmapi015194.html?spm=5176.2020520132.101.10.2lTTNI#sku=yuncode919400000\n     * @param idPhotoVo\n     * @see AliHttpStatusEm\n     * @see com.dotnar.usc.common.util.aliapi.idphoto.IdPhotoStatusEm\n     * @return\n     */\n    public ApiResponse syncIdphoto(IdPhotoVo idPhotoVo) {\n        ApiRequest apiRequest = new ApiRequest(Scheme.HTTP, Method.GET, Constant.ID_PHOTO_HOST, Constant.ID_PHOTO_API_PATH);\n        apiRequest.addParam(\"cardno\", idPhotoVo.getCardno(), ParamPosition.QUERY, true);\n        apiRequest.addParam(\"name\", idPhotoVo.getName(), ParamPosition.QUERY, true);\n        return asyncClient.syncInvoke0(apiRequest);\n    }\n\n}\n```\n \n常见的错误\n```java\n/**\n * @Date 2017/12/5 16:42\n * <p>\n * https://help.aliyun.com/document_detail/43906.html\n */\n\npublic enum AliHttpStatusEm {\n\n    OK(\"OK\", 200, \"成功\"),\n\n    THROTTLED_BY_USER_FLOW_CONTROL(\"Throttled by USER Flow Control\", 403, \"因用户流控被限制\"),\n\n    THROTTLED_BY_APP_FLOW_CONTROL(\"Throttled by APP Flow Control\", 403, \"因APP流控被限制\"),\n\n    THROTTLED_BY_API_FLOW_CONTROL(\"Throttled by API Flow Control\", 403, \"因 API 流控被限制\"),\n\n    THROTTLED_BY_DOMAIN_FLOW_CONTROL(\"Throttled by DOMAIN Flow Control\", 403, \"因二级域名流控被限制，或因分组流控被限制\"),\n\n    QUOTA_EXHAUSTED(\"Quota Exhausted\", 403, \"调用次数已用完\"),\n\n    QUOTA_EXPIRED(\"Quota Expired\", 403, \"购买次数已过期\"),\n\n    USER_ARREARS(\"User Arrears\", 403, \"用户已欠费\"),\n\n    INVALID_ACCESS_KEY_ID_NOT_FOUND(\"InvalidAccessKeyId.NotFound\", 404, \"AccessKeyId 找不到\"),\n\n    INVALID_ACCESS_KEY_ID_INACTIVE(\"InvalidAccessKeyId.Inactive\", 400, \"AccessKeyId 被禁用。\"),\n\n    INVALID_TIME_STAMP_FORMAT(\"InvalidTimeStamp.Format\", 400, \"时间戳格式不对( Date 和 Timestamp)。\"),\n\n    INVALID_TIME_STAMP_EXPIRED(\"InvalidTimeStamp.Expired\", 400, \"用户时间和服务器时间超过15分钟。\"),\n\n    INVALID_SIGNATURE_METHOD(\"InvalidSignatureMethod\", 400, \"签名方法不支持。\"),\n\n    SIGNATURE_DOES_NOT_MATCH(\"SignatureDoesNotMatch\", 400, \"签名不通过。\"),\n\n    THROTTLING_USER(\"Throttling.User\", 400, \"用户调用频率超限。\"),\n\n    THROTTLING_API(\"Throttling.API\", 400, \"API 访问频率超限。\");\n\n    /**\n     * 错误码\n     */\n    private String code;\n    /**\n     * http 状态码\n     */\n    private int statusCode;\n    /**\n     * 中文描述\n     */\n    private String desc;\n\n    private final static Map<String, AliHttpStatusEm> ID_MAP = Arrays.stream(AliHttpStatusEm.values())\n            .collect(Collectors.toMap(AliHttpStatusEm::getCode, Function.identity()));\n\n    AliHttpStatusEm(String code, int statusCode, String desc) {\n        this.code = code;\n        this.statusCode = statusCode;\n        this.desc = desc;\n    }\n\n    public String getCode() {\n        return code;\n    }\n\n    public int getStatusCode() {\n        return statusCode;\n    }\n\n    public String getDesc() {\n        return desc;\n    }\n\n    public static AliHttpStatusEm getAliHttpStatusEmByStatusCode(String code) {\n        return ID_MAP.get(code);\n    }\n}\n\n```\n\n银行卡验证错误状态\n```java\n/**\n * 银行卡验证状态码\n *\n * @author \n * @Date 2017/12/5 17:31\n * <p>\n * https://market.aliyun.com/products/57000002/cmapi014429.html?spm=5176.2020520132.101.5.2lTTNI#sku=yuncode842900008\n */\n\npublic enum BankCardVerifiStatusEm {\n\n    OK((short) 0, \"OK\"),\n\n    CARD_IS_FORFEITED((short) 4, \"此卡被没收，请于发卡方联系\"),\n\n    CARDHOLDER_AUTHENTICATION_FAILED((short) 5, \"持卡人认证失败\"),\n\n    INVALID_CARD_NUMBER((short) 14, \"无效卡号\"),\n\n    CARD_DOES_NOT_CORRESPOND_ISSUER((short) 15, \"此卡无对应发卡方\"),\n\n    CARD_IS_NOT_INITIALIZED_OR_SLEEPS((short) 21, \"该卡未初始化或睡眠卡\"),\n\n    CHEAT_TUNKA((short) 34, \"作弊卡，吞卡\"),\n\n    ISSUER_DOES_NOT_SUPPORT_TRANSACTION((short) 40, \"发卡方不支持的交易\"),\n\n    CARD_HAS__REPORTED((short) 41, \"此卡已经挂失\"),\n\n    CARD_IS_FORFEITED_2((short) 43, \"此卡被没收\"),\n\n    CARD_HAS_EXPIRED((short) 54, \"该卡已过期\"),\n\n    CARD_ISSUER_DOES_NOT_ALLOW_THIS_TRANSACTION((short) 57, \"发卡方不允许此交易\"),\n\n    RESTRICTED_CARD((short) 62, \"受限制的卡\"),\n\n    WRONG_NUMBER_OF_PASSWORDS((short) 75, \"密码错误次数超限\"),\n\n    FAILED((short) 96, \"交易失败，请稍后重试\");\n\n    private short code;\n\n    private String desc;\n\n    private final static Map<Short, BankCardVerifiStatusEm> ID_MAP = Arrays.stream(BankCardVerifiStatusEm.values())\n            .collect(Collectors.toMap(BankCardVerifiStatusEm::getCode, Function.identity()));\n\n    BankCardVerifiStatusEm(short code, String desc) {\n        this.code = code;\n        this.desc = desc;\n    }\n\n    public short getCode() {\n        return code;\n    }\n\n    public String getDesc() {\n        return desc;\n    }\n\n    public static BankCardVerifiStatusEm getBankCardVerifiStatusEmByCode(short code) {\n        return ID_MAP.get(code);\n    }\n}\n```\n \n获取 身份证照片\n```java\n/**\n * @author \n * @Date 2017/12/5 19:05\n * https://market.aliyun.com/products/57000002/cmapi015194.html?spm=5176.2020520132.101.10.2lTTNI#sku=yuncode919400000\n */\n\npublic enum IdPhotoStatusEm {\n\n    OK((short) 0, \"匹配\"),\n\n    MISMATCH((short) 5, \"不匹配\"),\n\n    NOT_EXIST((short) 14, \"无此身份证号码\"),\n\n    FAILED((short) 96, \"交易失败，请稍后重试\");\n\n    private short code;\n\n    private String desc;\n\n    private final static Map<Short, IdPhotoStatusEm> ID_MAP = Arrays.stream(IdPhotoStatusEm.values())\n            .collect(Collectors.toMap(IdPhotoStatusEm::getCode, Function.identity()));\n\n    IdPhotoStatusEm(short code, String desc) {\n        this.code = code;\n        this.desc = desc;\n    }\n\n    public short getCode() {\n        return code;\n    }\n\n    public String getDesc() {\n        return desc;\n    }\n\n    public static IdPhotoStatusEm getIdPhotoStatusEmByCode(short code) {\n        return ID_MAP.get(code);\n    }\n}\n\n```\n\n\n","slug":"ali-api-util","published":1,"updated":"2018-03-25T13:41:06.601Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjf6wl6pn00182gtpq4lzuide","content":"<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"meta\">@NotThreadSafe</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AliApiClientUtil</span> <span class=\"keyword\">implements</span> <span class=\"title\">InitializingBean</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;aliapi.appKey:no_config&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String appKey;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;aliapi.appSecret:no_config&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String appSecret;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;aliapi.enable:false&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> enable;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> AliApiClient asyncClient;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">afterPropertiesSet</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (enable &amp;&amp; (Constant.DEF_CONFIG.equals(appKey) || Constant.DEF_CONFIG.equals(appSecret))) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(String.format(<span class=\"string\">\"阿里云第三方API初始化,缺失参数appKey:&#123;0&#125;,appSecret&#123;1&#125;\"</span>, <span class=\"keyword\">new</span> Object[]&#123;appKey, appSecret&#125;));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        asyncClient = AliApiClient.newBuilder()</span><br><span class=\"line\">                .appKey(appKey)</span><br><span class=\"line\">                .appSecret(appSecret)</span><br><span class=\"line\">                .build();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Builder</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseApiClientBuilder</span>&lt;<span class=\"title\">Builder</span>, <span class=\"title\">AliApiClient</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">protected</span> AliApiClient <span class=\"title\">build</span><span class=\"params\">(BuilderParams params)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> AliApiClient(params);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AliApiClient</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseApiClient</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">AliApiClient</span><span class=\"params\">(BuilderParams builderParams)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">super</span>(builderParams);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Builder <span class=\"title\">newBuilder</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Builder();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> AliApiClient <span class=\"title\">getInstance</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> getApiClassInstance(AliApiClient.class);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">asyncInvoke0</span><span class=\"params\">(ApiRequest apiRequest, ApiCallBack callBack)</span> </span>&#123;</span><br><span class=\"line\">            asyncInvoke(apiRequest, callBack);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> ApiResponse <span class=\"title\">syncInvoke0</span><span class=\"params\">(ApiRequest apiRequest)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> syncInvoke(apiRequest);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     *&#123;</span></span><br><span class=\"line\"><span class=\"comment\">     *\"resp\":&#123;</span></span><br><span class=\"line\"><span class=\"comment\">     *  \"code\":0,</span></span><br><span class=\"line\"><span class=\"comment\">     *  \"desc\":\"OK\"</span></span><br><span class=\"line\"><span class=\"comment\">     *  &#125; ,</span></span><br><span class=\"line\"><span class=\"comment\">     *  \"data\":&#123;&#125;,</span></span><br><span class=\"line\"><span class=\"comment\">     * &#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * 银行卡二、三、四元素实名认证</span></span><br><span class=\"line\"><span class=\"comment\">     * https://market.aliyun.com/products/57000002/cmapi014429.html?spm=5176.2020520132.101.5.2lTTNI#sku=yuncode842900008</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@see</span> AliHttpStatusEm</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@see</span> com.dotnar.usc.common.util.aliapi.bankcardverifi.BankCardVerifiStatusEm</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> bankCardVerifiVo</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ApiResponse <span class=\"title\">syncBankCardVerifi</span><span class=\"params\">(BankCardVerifiVo bankCardVerifiVo)</span> </span>&#123;</span><br><span class=\"line\">        ApiRequest apiRequest = <span class=\"keyword\">new</span> ApiRequest(Scheme.HTTP, Method.GET, Constant.BANK_CARD_VERIFI_HOST, Constant.BANK_CARD_VERIFI_API_PATH);</span><br><span class=\"line\">        apiRequest.addParam(<span class=\"string\">\"acct_name\"</span>, bankCardVerifiVo.getAcctName(), ParamPosition.QUERY, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">        apiRequest.addParam(<span class=\"string\">\"acct_pan\"</span>, bankCardVerifiVo.getAcctPan(), ParamPosition.QUERY, <span class=\"keyword\">true</span>);</span><br><span class=\"line\">        apiRequest.addParam(<span class=\"string\">\"cert_id\"</span>, bankCardVerifiVo.getCertId(), ParamPosition.QUERY, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">        apiRequest.addParam(<span class=\"string\">\"phone_num\"</span>, bankCardVerifiVo.getPhoneNum(), ParamPosition.QUERY, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> asyncClient.syncInvoke0(apiRequest);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;</span></span><br><span class=\"line\"><span class=\"comment\">     * \"resp\": &#123;</span></span><br><span class=\"line\"><span class=\"comment\">     *      \"code\": 0,</span></span><br><span class=\"line\"><span class=\"comment\">     *      \"desc\": \"匹配\"</span></span><br><span class=\"line\"><span class=\"comment\">     * &#125;,</span></span><br><span class=\"line\"><span class=\"comment\">     * \"data\": &#123;</span></span><br><span class=\"line\"><span class=\"comment\">     *    \"photo\": \"/9j/4AAQSkZJRgABAgAAAQAzb0a9jtkMbHG/o3+19P89K28x...\",</span></span><br><span class=\"line\"><span class=\"comment\">     *    \"address\": \"四川省雅安地区荥经县\",</span></span><br><span class=\"line\"><span class=\"comment\">     *    \"sex\": \"M\",</span></span><br><span class=\"line\"><span class=\"comment\">     *    \"birthday\": \"1989-9-28\"</span></span><br><span class=\"line\"><span class=\"comment\">     *   &#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * &#125;</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * 身份证实名认证--返照片</span></span><br><span class=\"line\"><span class=\"comment\">     * https://market.aliyun.com/products/57000002/cmapi015194.html?spm=5176.2020520132.101.10.2lTTNI#sku=yuncode919400000</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> idPhotoVo</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@see</span> AliHttpStatusEm</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@see</span> com.dotnar.usc.common.util.aliapi.idphoto.IdPhotoStatusEm</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ApiResponse <span class=\"title\">syncIdphoto</span><span class=\"params\">(IdPhotoVo idPhotoVo)</span> </span>&#123;</span><br><span class=\"line\">        ApiRequest apiRequest = <span class=\"keyword\">new</span> ApiRequest(Scheme.HTTP, Method.GET, Constant.ID_PHOTO_HOST, Constant.ID_PHOTO_API_PATH);</span><br><span class=\"line\">        apiRequest.addParam(<span class=\"string\">\"cardno\"</span>, idPhotoVo.getCardno(), ParamPosition.QUERY, <span class=\"keyword\">true</span>);</span><br><span class=\"line\">        apiRequest.addParam(<span class=\"string\">\"name\"</span>, idPhotoVo.getName(), ParamPosition.QUERY, <span class=\"keyword\">true</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> asyncClient.syncInvoke0(apiRequest);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>常见的错误<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Date</span> 2017/12/5 16:42</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;p&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * https://help.aliyun.com/document_detail/43906.html</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> AliHttpStatusEm &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    OK(<span class=\"string\">\"OK\"</span>, <span class=\"number\">200</span>, <span class=\"string\">\"成功\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    THROTTLED_BY_USER_FLOW_CONTROL(<span class=\"string\">\"Throttled by USER Flow Control\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"因用户流控被限制\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    THROTTLED_BY_APP_FLOW_CONTROL(<span class=\"string\">\"Throttled by APP Flow Control\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"因APP流控被限制\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    THROTTLED_BY_API_FLOW_CONTROL(<span class=\"string\">\"Throttled by API Flow Control\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"因 API 流控被限制\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    THROTTLED_BY_DOMAIN_FLOW_CONTROL(<span class=\"string\">\"Throttled by DOMAIN Flow Control\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"因二级域名流控被限制，或因分组流控被限制\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    QUOTA_EXHAUSTED(<span class=\"string\">\"Quota Exhausted\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"调用次数已用完\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    QUOTA_EXPIRED(<span class=\"string\">\"Quota Expired\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"购买次数已过期\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    USER_ARREARS(<span class=\"string\">\"User Arrears\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"用户已欠费\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    INVALID_ACCESS_KEY_ID_NOT_FOUND(<span class=\"string\">\"InvalidAccessKeyId.NotFound\"</span>, <span class=\"number\">404</span>, <span class=\"string\">\"AccessKeyId 找不到\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    INVALID_ACCESS_KEY_ID_INACTIVE(<span class=\"string\">\"InvalidAccessKeyId.Inactive\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"AccessKeyId 被禁用。\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    INVALID_TIME_STAMP_FORMAT(<span class=\"string\">\"InvalidTimeStamp.Format\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"时间戳格式不对( Date 和 Timestamp)。\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    INVALID_TIME_STAMP_EXPIRED(<span class=\"string\">\"InvalidTimeStamp.Expired\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"用户时间和服务器时间超过15分钟。\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    INVALID_SIGNATURE_METHOD(<span class=\"string\">\"InvalidSignatureMethod\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"签名方法不支持。\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    SIGNATURE_DOES_NOT_MATCH(<span class=\"string\">\"SignatureDoesNotMatch\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"签名不通过。\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    THROTTLING_USER(<span class=\"string\">\"Throttling.User\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"用户调用频率超限。\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    THROTTLING_API(<span class=\"string\">\"Throttling.API\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"API 访问频率超限。\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 错误码</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String code;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * http 状态码</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> statusCode;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 中文描述</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String desc;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> Map&lt;String, AliHttpStatusEm&gt; ID_MAP = Arrays.stream(AliHttpStatusEm.values())</span><br><span class=\"line\">            .collect(Collectors.toMap(AliHttpStatusEm::getCode, Function.identity()));</span><br><span class=\"line\"></span><br><span class=\"line\">    AliHttpStatusEm(String code, <span class=\"keyword\">int</span> statusCode, String desc) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.code = code;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.statusCode = statusCode;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.desc = desc;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getCode</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> code;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getStatusCode</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> statusCode;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDesc</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> desc;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> AliHttpStatusEm <span class=\"title\">getAliHttpStatusEmByStatusCode</span><span class=\"params\">(String code)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ID_MAP.get(code);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>银行卡验证错误状态<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 银行卡验证状态码</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Date</span> 2017/12/5 17:31</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;p&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * https://market.aliyun.com/products/57000002/cmapi014429.html?spm=5176.2020520132.101.5.2lTTNI#sku=yuncode842900008</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> BankCardVerifiStatusEm &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    OK((<span class=\"keyword\">short</span>) <span class=\"number\">0</span>, <span class=\"string\">\"OK\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    CARD_IS_FORFEITED((<span class=\"keyword\">short</span>) <span class=\"number\">4</span>, <span class=\"string\">\"此卡被没收，请于发卡方联系\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    CARDHOLDER_AUTHENTICATION_FAILED((<span class=\"keyword\">short</span>) <span class=\"number\">5</span>, <span class=\"string\">\"持卡人认证失败\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    INVALID_CARD_NUMBER((<span class=\"keyword\">short</span>) <span class=\"number\">14</span>, <span class=\"string\">\"无效卡号\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    CARD_DOES_NOT_CORRESPOND_ISSUER((<span class=\"keyword\">short</span>) <span class=\"number\">15</span>, <span class=\"string\">\"此卡无对应发卡方\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    CARD_IS_NOT_INITIALIZED_OR_SLEEPS((<span class=\"keyword\">short</span>) <span class=\"number\">21</span>, <span class=\"string\">\"该卡未初始化或睡眠卡\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    CHEAT_TUNKA((<span class=\"keyword\">short</span>) <span class=\"number\">34</span>, <span class=\"string\">\"作弊卡，吞卡\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    ISSUER_DOES_NOT_SUPPORT_TRANSACTION((<span class=\"keyword\">short</span>) <span class=\"number\">40</span>, <span class=\"string\">\"发卡方不支持的交易\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    CARD_HAS__REPORTED((<span class=\"keyword\">short</span>) <span class=\"number\">41</span>, <span class=\"string\">\"此卡已经挂失\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    CARD_IS_FORFEITED_2((<span class=\"keyword\">short</span>) <span class=\"number\">43</span>, <span class=\"string\">\"此卡被没收\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    CARD_HAS_EXPIRED((<span class=\"keyword\">short</span>) <span class=\"number\">54</span>, <span class=\"string\">\"该卡已过期\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    CARD_ISSUER_DOES_NOT_ALLOW_THIS_TRANSACTION((<span class=\"keyword\">short</span>) <span class=\"number\">57</span>, <span class=\"string\">\"发卡方不允许此交易\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    RESTRICTED_CARD((<span class=\"keyword\">short</span>) <span class=\"number\">62</span>, <span class=\"string\">\"受限制的卡\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    WRONG_NUMBER_OF_PASSWORDS((<span class=\"keyword\">short</span>) <span class=\"number\">75</span>, <span class=\"string\">\"密码错误次数超限\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    FAILED((<span class=\"keyword\">short</span>) <span class=\"number\">96</span>, <span class=\"string\">\"交易失败，请稍后重试\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">short</span> code;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String desc;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> Map&lt;Short, BankCardVerifiStatusEm&gt; ID_MAP = Arrays.stream(BankCardVerifiStatusEm.values())</span><br><span class=\"line\">            .collect(Collectors.toMap(BankCardVerifiStatusEm::getCode, Function.identity()));</span><br><span class=\"line\"></span><br><span class=\"line\">    BankCardVerifiStatusEm(<span class=\"keyword\">short</span> code, String desc) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.code = code;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.desc = desc;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">short</span> <span class=\"title\">getCode</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> code;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDesc</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> desc;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> BankCardVerifiStatusEm <span class=\"title\">getBankCardVerifiStatusEmByCode</span><span class=\"params\">(<span class=\"keyword\">short</span> code)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ID_MAP.get(code);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>获取 身份证照片<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Date</span> 2017/12/5 19:05</span></span><br><span class=\"line\"><span class=\"comment\"> * https://market.aliyun.com/products/57000002/cmapi015194.html?spm=5176.2020520132.101.10.2lTTNI#sku=yuncode919400000</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> IdPhotoStatusEm &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    OK((<span class=\"keyword\">short</span>) <span class=\"number\">0</span>, <span class=\"string\">\"匹配\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    MISMATCH((<span class=\"keyword\">short</span>) <span class=\"number\">5</span>, <span class=\"string\">\"不匹配\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    NOT_EXIST((<span class=\"keyword\">short</span>) <span class=\"number\">14</span>, <span class=\"string\">\"无此身份证号码\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    FAILED((<span class=\"keyword\">short</span>) <span class=\"number\">96</span>, <span class=\"string\">\"交易失败，请稍后重试\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">short</span> code;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String desc;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> Map&lt;Short, IdPhotoStatusEm&gt; ID_MAP = Arrays.stream(IdPhotoStatusEm.values())</span><br><span class=\"line\">            .collect(Collectors.toMap(IdPhotoStatusEm::getCode, Function.identity()));</span><br><span class=\"line\"></span><br><span class=\"line\">    IdPhotoStatusEm(<span class=\"keyword\">short</span> code, String desc) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.code = code;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.desc = desc;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">short</span> <span class=\"title\">getCode</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> code;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDesc</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> desc;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> IdPhotoStatusEm <span class=\"title\">getIdPhotoStatusEmByCode</span><span class=\"params\">(<span class=\"keyword\">short</span> code)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ID_MAP.get(code);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"meta\">@NotThreadSafe</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AliApiClientUtil</span> <span class=\"keyword\">implements</span> <span class=\"title\">InitializingBean</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;aliapi.appKey:no_config&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String appKey;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;aliapi.appSecret:no_config&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String appSecret;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;aliapi.enable:false&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> enable;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> AliApiClient asyncClient;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">afterPropertiesSet</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (enable &amp;&amp; (Constant.DEF_CONFIG.equals(appKey) || Constant.DEF_CONFIG.equals(appSecret))) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(String.format(<span class=\"string\">\"阿里云第三方API初始化,缺失参数appKey:&#123;0&#125;,appSecret&#123;1&#125;\"</span>, <span class=\"keyword\">new</span> Object[]&#123;appKey, appSecret&#125;));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        asyncClient = AliApiClient.newBuilder()</span><br><span class=\"line\">                .appKey(appKey)</span><br><span class=\"line\">                .appSecret(appSecret)</span><br><span class=\"line\">                .build();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Builder</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseApiClientBuilder</span>&lt;<span class=\"title\">Builder</span>, <span class=\"title\">AliApiClient</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">protected</span> AliApiClient <span class=\"title\">build</span><span class=\"params\">(BuilderParams params)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> AliApiClient(params);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AliApiClient</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseApiClient</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">AliApiClient</span><span class=\"params\">(BuilderParams builderParams)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">super</span>(builderParams);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Builder <span class=\"title\">newBuilder</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Builder();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> AliApiClient <span class=\"title\">getInstance</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> getApiClassInstance(AliApiClient.class);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">asyncInvoke0</span><span class=\"params\">(ApiRequest apiRequest, ApiCallBack callBack)</span> </span>&#123;</span><br><span class=\"line\">            asyncInvoke(apiRequest, callBack);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> ApiResponse <span class=\"title\">syncInvoke0</span><span class=\"params\">(ApiRequest apiRequest)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> syncInvoke(apiRequest);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     *&#123;</span></span><br><span class=\"line\"><span class=\"comment\">     *\"resp\":&#123;</span></span><br><span class=\"line\"><span class=\"comment\">     *  \"code\":0,</span></span><br><span class=\"line\"><span class=\"comment\">     *  \"desc\":\"OK\"</span></span><br><span class=\"line\"><span class=\"comment\">     *  &#125; ,</span></span><br><span class=\"line\"><span class=\"comment\">     *  \"data\":&#123;&#125;,</span></span><br><span class=\"line\"><span class=\"comment\">     * &#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * 银行卡二、三、四元素实名认证</span></span><br><span class=\"line\"><span class=\"comment\">     * https://market.aliyun.com/products/57000002/cmapi014429.html?spm=5176.2020520132.101.5.2lTTNI#sku=yuncode842900008</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@see</span> AliHttpStatusEm</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@see</span> com.dotnar.usc.common.util.aliapi.bankcardverifi.BankCardVerifiStatusEm</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> bankCardVerifiVo</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ApiResponse <span class=\"title\">syncBankCardVerifi</span><span class=\"params\">(BankCardVerifiVo bankCardVerifiVo)</span> </span>&#123;</span><br><span class=\"line\">        ApiRequest apiRequest = <span class=\"keyword\">new</span> ApiRequest(Scheme.HTTP, Method.GET, Constant.BANK_CARD_VERIFI_HOST, Constant.BANK_CARD_VERIFI_API_PATH);</span><br><span class=\"line\">        apiRequest.addParam(<span class=\"string\">\"acct_name\"</span>, bankCardVerifiVo.getAcctName(), ParamPosition.QUERY, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">        apiRequest.addParam(<span class=\"string\">\"acct_pan\"</span>, bankCardVerifiVo.getAcctPan(), ParamPosition.QUERY, <span class=\"keyword\">true</span>);</span><br><span class=\"line\">        apiRequest.addParam(<span class=\"string\">\"cert_id\"</span>, bankCardVerifiVo.getCertId(), ParamPosition.QUERY, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">        apiRequest.addParam(<span class=\"string\">\"phone_num\"</span>, bankCardVerifiVo.getPhoneNum(), ParamPosition.QUERY, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> asyncClient.syncInvoke0(apiRequest);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;</span></span><br><span class=\"line\"><span class=\"comment\">     * \"resp\": &#123;</span></span><br><span class=\"line\"><span class=\"comment\">     *      \"code\": 0,</span></span><br><span class=\"line\"><span class=\"comment\">     *      \"desc\": \"匹配\"</span></span><br><span class=\"line\"><span class=\"comment\">     * &#125;,</span></span><br><span class=\"line\"><span class=\"comment\">     * \"data\": &#123;</span></span><br><span class=\"line\"><span class=\"comment\">     *    \"photo\": \"/9j/4AAQSkZJRgABAgAAAQAzb0a9jtkMbHG/o3+19P89K28x...\",</span></span><br><span class=\"line\"><span class=\"comment\">     *    \"address\": \"四川省雅安地区荥经县\",</span></span><br><span class=\"line\"><span class=\"comment\">     *    \"sex\": \"M\",</span></span><br><span class=\"line\"><span class=\"comment\">     *    \"birthday\": \"1989-9-28\"</span></span><br><span class=\"line\"><span class=\"comment\">     *   &#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * &#125;</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * 身份证实名认证--返照片</span></span><br><span class=\"line\"><span class=\"comment\">     * https://market.aliyun.com/products/57000002/cmapi015194.html?spm=5176.2020520132.101.10.2lTTNI#sku=yuncode919400000</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> idPhotoVo</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@see</span> AliHttpStatusEm</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@see</span> com.dotnar.usc.common.util.aliapi.idphoto.IdPhotoStatusEm</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ApiResponse <span class=\"title\">syncIdphoto</span><span class=\"params\">(IdPhotoVo idPhotoVo)</span> </span>&#123;</span><br><span class=\"line\">        ApiRequest apiRequest = <span class=\"keyword\">new</span> ApiRequest(Scheme.HTTP, Method.GET, Constant.ID_PHOTO_HOST, Constant.ID_PHOTO_API_PATH);</span><br><span class=\"line\">        apiRequest.addParam(<span class=\"string\">\"cardno\"</span>, idPhotoVo.getCardno(), ParamPosition.QUERY, <span class=\"keyword\">true</span>);</span><br><span class=\"line\">        apiRequest.addParam(<span class=\"string\">\"name\"</span>, idPhotoVo.getName(), ParamPosition.QUERY, <span class=\"keyword\">true</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> asyncClient.syncInvoke0(apiRequest);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>常见的错误<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Date</span> 2017/12/5 16:42</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;p&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * https://help.aliyun.com/document_detail/43906.html</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> AliHttpStatusEm &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    OK(<span class=\"string\">\"OK\"</span>, <span class=\"number\">200</span>, <span class=\"string\">\"成功\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    THROTTLED_BY_USER_FLOW_CONTROL(<span class=\"string\">\"Throttled by USER Flow Control\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"因用户流控被限制\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    THROTTLED_BY_APP_FLOW_CONTROL(<span class=\"string\">\"Throttled by APP Flow Control\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"因APP流控被限制\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    THROTTLED_BY_API_FLOW_CONTROL(<span class=\"string\">\"Throttled by API Flow Control\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"因 API 流控被限制\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    THROTTLED_BY_DOMAIN_FLOW_CONTROL(<span class=\"string\">\"Throttled by DOMAIN Flow Control\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"因二级域名流控被限制，或因分组流控被限制\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    QUOTA_EXHAUSTED(<span class=\"string\">\"Quota Exhausted\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"调用次数已用完\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    QUOTA_EXPIRED(<span class=\"string\">\"Quota Expired\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"购买次数已过期\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    USER_ARREARS(<span class=\"string\">\"User Arrears\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"用户已欠费\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    INVALID_ACCESS_KEY_ID_NOT_FOUND(<span class=\"string\">\"InvalidAccessKeyId.NotFound\"</span>, <span class=\"number\">404</span>, <span class=\"string\">\"AccessKeyId 找不到\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    INVALID_ACCESS_KEY_ID_INACTIVE(<span class=\"string\">\"InvalidAccessKeyId.Inactive\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"AccessKeyId 被禁用。\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    INVALID_TIME_STAMP_FORMAT(<span class=\"string\">\"InvalidTimeStamp.Format\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"时间戳格式不对( Date 和 Timestamp)。\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    INVALID_TIME_STAMP_EXPIRED(<span class=\"string\">\"InvalidTimeStamp.Expired\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"用户时间和服务器时间超过15分钟。\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    INVALID_SIGNATURE_METHOD(<span class=\"string\">\"InvalidSignatureMethod\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"签名方法不支持。\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    SIGNATURE_DOES_NOT_MATCH(<span class=\"string\">\"SignatureDoesNotMatch\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"签名不通过。\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    THROTTLING_USER(<span class=\"string\">\"Throttling.User\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"用户调用频率超限。\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    THROTTLING_API(<span class=\"string\">\"Throttling.API\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"API 访问频率超限。\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 错误码</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String code;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * http 状态码</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> statusCode;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 中文描述</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String desc;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> Map&lt;String, AliHttpStatusEm&gt; ID_MAP = Arrays.stream(AliHttpStatusEm.values())</span><br><span class=\"line\">            .collect(Collectors.toMap(AliHttpStatusEm::getCode, Function.identity()));</span><br><span class=\"line\"></span><br><span class=\"line\">    AliHttpStatusEm(String code, <span class=\"keyword\">int</span> statusCode, String desc) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.code = code;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.statusCode = statusCode;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.desc = desc;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getCode</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> code;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getStatusCode</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> statusCode;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDesc</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> desc;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> AliHttpStatusEm <span class=\"title\">getAliHttpStatusEmByStatusCode</span><span class=\"params\">(String code)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ID_MAP.get(code);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>银行卡验证错误状态<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 银行卡验证状态码</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Date</span> 2017/12/5 17:31</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;p&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * https://market.aliyun.com/products/57000002/cmapi014429.html?spm=5176.2020520132.101.5.2lTTNI#sku=yuncode842900008</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> BankCardVerifiStatusEm &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    OK((<span class=\"keyword\">short</span>) <span class=\"number\">0</span>, <span class=\"string\">\"OK\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    CARD_IS_FORFEITED((<span class=\"keyword\">short</span>) <span class=\"number\">4</span>, <span class=\"string\">\"此卡被没收，请于发卡方联系\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    CARDHOLDER_AUTHENTICATION_FAILED((<span class=\"keyword\">short</span>) <span class=\"number\">5</span>, <span class=\"string\">\"持卡人认证失败\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    INVALID_CARD_NUMBER((<span class=\"keyword\">short</span>) <span class=\"number\">14</span>, <span class=\"string\">\"无效卡号\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    CARD_DOES_NOT_CORRESPOND_ISSUER((<span class=\"keyword\">short</span>) <span class=\"number\">15</span>, <span class=\"string\">\"此卡无对应发卡方\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    CARD_IS_NOT_INITIALIZED_OR_SLEEPS((<span class=\"keyword\">short</span>) <span class=\"number\">21</span>, <span class=\"string\">\"该卡未初始化或睡眠卡\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    CHEAT_TUNKA((<span class=\"keyword\">short</span>) <span class=\"number\">34</span>, <span class=\"string\">\"作弊卡，吞卡\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    ISSUER_DOES_NOT_SUPPORT_TRANSACTION((<span class=\"keyword\">short</span>) <span class=\"number\">40</span>, <span class=\"string\">\"发卡方不支持的交易\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    CARD_HAS__REPORTED((<span class=\"keyword\">short</span>) <span class=\"number\">41</span>, <span class=\"string\">\"此卡已经挂失\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    CARD_IS_FORFEITED_2((<span class=\"keyword\">short</span>) <span class=\"number\">43</span>, <span class=\"string\">\"此卡被没收\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    CARD_HAS_EXPIRED((<span class=\"keyword\">short</span>) <span class=\"number\">54</span>, <span class=\"string\">\"该卡已过期\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    CARD_ISSUER_DOES_NOT_ALLOW_THIS_TRANSACTION((<span class=\"keyword\">short</span>) <span class=\"number\">57</span>, <span class=\"string\">\"发卡方不允许此交易\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    RESTRICTED_CARD((<span class=\"keyword\">short</span>) <span class=\"number\">62</span>, <span class=\"string\">\"受限制的卡\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    WRONG_NUMBER_OF_PASSWORDS((<span class=\"keyword\">short</span>) <span class=\"number\">75</span>, <span class=\"string\">\"密码错误次数超限\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    FAILED((<span class=\"keyword\">short</span>) <span class=\"number\">96</span>, <span class=\"string\">\"交易失败，请稍后重试\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">short</span> code;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String desc;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> Map&lt;Short, BankCardVerifiStatusEm&gt; ID_MAP = Arrays.stream(BankCardVerifiStatusEm.values())</span><br><span class=\"line\">            .collect(Collectors.toMap(BankCardVerifiStatusEm::getCode, Function.identity()));</span><br><span class=\"line\"></span><br><span class=\"line\">    BankCardVerifiStatusEm(<span class=\"keyword\">short</span> code, String desc) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.code = code;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.desc = desc;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">short</span> <span class=\"title\">getCode</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> code;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDesc</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> desc;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> BankCardVerifiStatusEm <span class=\"title\">getBankCardVerifiStatusEmByCode</span><span class=\"params\">(<span class=\"keyword\">short</span> code)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ID_MAP.get(code);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>获取 身份证照片<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> </span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Date</span> 2017/12/5 19:05</span></span><br><span class=\"line\"><span class=\"comment\"> * https://market.aliyun.com/products/57000002/cmapi015194.html?spm=5176.2020520132.101.10.2lTTNI#sku=yuncode919400000</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> IdPhotoStatusEm &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    OK((<span class=\"keyword\">short</span>) <span class=\"number\">0</span>, <span class=\"string\">\"匹配\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    MISMATCH((<span class=\"keyword\">short</span>) <span class=\"number\">5</span>, <span class=\"string\">\"不匹配\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    NOT_EXIST((<span class=\"keyword\">short</span>) <span class=\"number\">14</span>, <span class=\"string\">\"无此身份证号码\"</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">    FAILED((<span class=\"keyword\">short</span>) <span class=\"number\">96</span>, <span class=\"string\">\"交易失败，请稍后重试\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">short</span> code;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String desc;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> Map&lt;Short, IdPhotoStatusEm&gt; ID_MAP = Arrays.stream(IdPhotoStatusEm.values())</span><br><span class=\"line\">            .collect(Collectors.toMap(IdPhotoStatusEm::getCode, Function.identity()));</span><br><span class=\"line\"></span><br><span class=\"line\">    IdPhotoStatusEm(<span class=\"keyword\">short</span> code, String desc) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.code = code;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.desc = desc;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">short</span> <span class=\"title\">getCode</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> code;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDesc</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> desc;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> IdPhotoStatusEm <span class=\"title\">getIdPhotoStatusEmByCode</span><span class=\"params\">(<span class=\"keyword\">short</span> code)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ID_MAP.get(code);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n"},{"title":"java生成md5","date":"2017-12-06T15:45:02.000Z","_content":"\n```java\npublic static String md5(String source){\n    try {\n        MessageDigest md5 = MessageDigest.getInstance(\"MD5\");\n        return bytesConvertToHexString(md5.digest(source.getBytes()));\n    }catch (Exception e){\n    }\n    return null;\n}\n\n/**\n * 把字节数组转化成字符串返回\n * @param bytes\n * @return\n */\npublic static String bytesConvertToHexString(byte [] bytes) {\n    StringBuffer sb = new StringBuffer();\n    for (byte aByte : bytes) {\n        String s= Integer.toHexString(0xff & aByte);\n        if(s.length()==1){\n            sb.append(\"0\"+s);\n        }else{\n            sb.append(s);\n        }\n    }\n    return sb.toString();\n}\n```\n","source":"_posts/java-generate-md5.md","raw":"---\ntitle: java生成md5\ndate: 2017-12-06 23:45:02\npermalink: java-generate-md5\ncategories: Gists\ntags:\n - java\n---\n\n```java\npublic static String md5(String source){\n    try {\n        MessageDigest md5 = MessageDigest.getInstance(\"MD5\");\n        return bytesConvertToHexString(md5.digest(source.getBytes()));\n    }catch (Exception e){\n    }\n    return null;\n}\n\n/**\n * 把字节数组转化成字符串返回\n * @param bytes\n * @return\n */\npublic static String bytesConvertToHexString(byte [] bytes) {\n    StringBuffer sb = new StringBuffer();\n    for (byte aByte : bytes) {\n        String s= Integer.toHexString(0xff & aByte);\n        if(s.length()==1){\n            sb.append(\"0\"+s);\n        }else{\n            sb.append(s);\n        }\n    }\n    return sb.toString();\n}\n```\n","slug":"java-generate-md5","published":1,"updated":"2018-03-25T13:41:07.741Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjf6wl6pp001b2gtp4ui6dogz","content":"<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">md5</span><span class=\"params\">(String source)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        MessageDigest md5 = MessageDigest.getInstance(<span class=\"string\">\"MD5\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> bytesConvertToHexString(md5.digest(source.getBytes()));</span><br><span class=\"line\">    &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 把字节数组转化成字符串返回</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> bytes</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">bytesConvertToHexString</span><span class=\"params\">(<span class=\"keyword\">byte</span> [] bytes)</span> </span>&#123;</span><br><span class=\"line\">    StringBuffer sb = <span class=\"keyword\">new</span> StringBuffer();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">byte</span> aByte : bytes) &#123;</span><br><span class=\"line\">        String s= Integer.toHexString(<span class=\"number\">0xff</span> &amp; aByte);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(s.length()==<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">            sb.append(<span class=\"string\">\"0\"</span>+s);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            sb.append(s);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sb.toString();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">md5</span><span class=\"params\">(String source)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        MessageDigest md5 = MessageDigest.getInstance(<span class=\"string\">\"MD5\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> bytesConvertToHexString(md5.digest(source.getBytes()));</span><br><span class=\"line\">    &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 把字节数组转化成字符串返回</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> bytes</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">bytesConvertToHexString</span><span class=\"params\">(<span class=\"keyword\">byte</span> [] bytes)</span> </span>&#123;</span><br><span class=\"line\">    StringBuffer sb = <span class=\"keyword\">new</span> StringBuffer();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">byte</span> aByte : bytes) &#123;</span><br><span class=\"line\">        String s= Integer.toHexString(<span class=\"number\">0xff</span> &amp; aByte);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(s.length()==<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">            sb.append(<span class=\"string\">\"0\"</span>+s);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            sb.append(s);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sb.toString();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"二进制位运算实例","date":"2017-10-31T15:10:42.000Z","_content":"### 二进制位运算实例\n#### 问题\n设计多选题的选项问题,一道题有多个选项ABCD,可能有更多如何设计更有效存储识别?\n#### 分析\n选项只有选与不选的区别,而且总的个数固定,而且判定2个结果是否存在(答案是否正确),二进制完全满足条件.\n#### 结果\n##### 单个选项\n```\nA：1        1\nB: 1 << 1   2\nC: 1 << 2   4\nD: 1 << 3   8\n...\n```\n##### 组合选项\n```\nAB：  1|2\nBC:   2|4\nABCD: 1|2|4|8\n```\n##### 比较答案\n正确答案 `ABC : 1|2|4 --> 7` </br>\n\n---\n\n用户选择 `AB  : 1|2 --> 3`  </br>\n运算  `3!=7 && 3|7=7`  说明部分答对 \n\n---\n\n用户选择 `BD  : 2|8 --> 10`  </br>\n运算  `10!=7 && 10|7=!7 ` 说明有错误选项\n#### 相关知识 \n[Java位运算(移位、位与、或、异或、非）](http://blog.csdn.net/xiaochunyong/article/details/7748713)","source":"_posts/二进制位运算实例.md","raw":"---\ntitle: 二进制位运算实例\npermalink: binary-bit-operation-example\ntags:\n  - 二进制\n  - Java\n  - Java基础\n  - 位运算\ncategories: Java相关\ndate: 2017-10-31 23:10:42\n---\n### 二进制位运算实例\n#### 问题\n设计多选题的选项问题,一道题有多个选项ABCD,可能有更多如何设计更有效存储识别?\n#### 分析\n选项只有选与不选的区别,而且总的个数固定,而且判定2个结果是否存在(答案是否正确),二进制完全满足条件.\n#### 结果\n##### 单个选项\n```\nA：1        1\nB: 1 << 1   2\nC: 1 << 2   4\nD: 1 << 3   8\n...\n```\n##### 组合选项\n```\nAB：  1|2\nBC:   2|4\nABCD: 1|2|4|8\n```\n##### 比较答案\n正确答案 `ABC : 1|2|4 --> 7` </br>\n\n---\n\n用户选择 `AB  : 1|2 --> 3`  </br>\n运算  `3!=7 && 3|7=7`  说明部分答对 \n\n---\n\n用户选择 `BD  : 2|8 --> 10`  </br>\n运算  `10!=7 && 10|7=!7 ` 说明有错误选项\n#### 相关知识 \n[Java位运算(移位、位与、或、异或、非）](http://blog.csdn.net/xiaochunyong/article/details/7748713)","slug":"binary-bit-operation-example","published":1,"updated":"2018-03-25T13:41:08.847Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjf6wl6ps001f2gtp8ln3ok7j","content":"<h3 id=\"二进制位运算实例\"><a href=\"#二进制位运算实例\" class=\"headerlink\" title=\"二进制位运算实例\"></a>二进制位运算实例</h3><h4 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h4><p>设计多选题的选项问题,一道题有多个选项ABCD,可能有更多如何设计更有效存储识别?</p>\n<h4 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h4><p>选项只有选与不选的区别,而且总的个数固定,而且判定2个结果是否存在(答案是否正确),二进制完全满足条件.</p>\n<h4 id=\"结果\"><a href=\"#结果\" class=\"headerlink\" title=\"结果\"></a>结果</h4><h5 id=\"单个选项\"><a href=\"#单个选项\" class=\"headerlink\" title=\"单个选项\"></a>单个选项</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A：1        1</span><br><span class=\"line\">B: 1 &lt;&lt; 1   2</span><br><span class=\"line\">C: 1 &lt;&lt; 2   4</span><br><span class=\"line\">D: 1 &lt;&lt; 3   8</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<h5 id=\"组合选项\"><a href=\"#组合选项\" class=\"headerlink\" title=\"组合选项\"></a>组合选项</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AB：  1|2</span><br><span class=\"line\">BC:   2|4</span><br><span class=\"line\">ABCD: 1|2|4|8</span><br></pre></td></tr></table></figure>\n<h5 id=\"比较答案\"><a href=\"#比较答案\" class=\"headerlink\" title=\"比较答案\"></a>比较答案</h5><p>正确答案 <code>ABC : 1|2|4 --&gt; 7</code> <br></p>\n<hr>\n<p>用户选择 <code>AB  : 1|2 --&gt; 3</code>  <br><br>运算  <code>3!=7 &amp;&amp; 3|7=7</code>  说明部分答对 </p>\n<hr>\n<p>用户选择 <code>BD  : 2|8 --&gt; 10</code>  <br><br>运算  <code>10!=7 &amp;&amp; 10|7=!7</code> 说明有错误选项</p>\n<h4 id=\"相关知识\"><a href=\"#相关知识\" class=\"headerlink\" title=\"相关知识\"></a>相关知识</h4><p><a href=\"http://blog.csdn.net/xiaochunyong/article/details/7748713\" target=\"_blank\" rel=\"noopener\">Java位运算(移位、位与、或、异或、非）</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"二进制位运算实例\"><a href=\"#二进制位运算实例\" class=\"headerlink\" title=\"二进制位运算实例\"></a>二进制位运算实例</h3><h4 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h4><p>设计多选题的选项问题,一道题有多个选项ABCD,可能有更多如何设计更有效存储识别?</p>\n<h4 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h4><p>选项只有选与不选的区别,而且总的个数固定,而且判定2个结果是否存在(答案是否正确),二进制完全满足条件.</p>\n<h4 id=\"结果\"><a href=\"#结果\" class=\"headerlink\" title=\"结果\"></a>结果</h4><h5 id=\"单个选项\"><a href=\"#单个选项\" class=\"headerlink\" title=\"单个选项\"></a>单个选项</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A：1        1</span><br><span class=\"line\">B: 1 &lt;&lt; 1   2</span><br><span class=\"line\">C: 1 &lt;&lt; 2   4</span><br><span class=\"line\">D: 1 &lt;&lt; 3   8</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<h5 id=\"组合选项\"><a href=\"#组合选项\" class=\"headerlink\" title=\"组合选项\"></a>组合选项</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AB：  1|2</span><br><span class=\"line\">BC:   2|4</span><br><span class=\"line\">ABCD: 1|2|4|8</span><br></pre></td></tr></table></figure>\n<h5 id=\"比较答案\"><a href=\"#比较答案\" class=\"headerlink\" title=\"比较答案\"></a>比较答案</h5><p>正确答案 <code>ABC : 1|2|4 --&gt; 7</code> <br></p>\n<hr>\n<p>用户选择 <code>AB  : 1|2 --&gt; 3</code>  <br><br>运算  <code>3!=7 &amp;&amp; 3|7=7</code>  说明部分答对 </p>\n<hr>\n<p>用户选择 <code>BD  : 2|8 --&gt; 10</code>  <br><br>运算  <code>10!=7 &amp;&amp; 10|7=!7</code> 说明有错误选项</p>\n<h4 id=\"相关知识\"><a href=\"#相关知识\" class=\"headerlink\" title=\"相关知识\"></a>相关知识</h4><p><a href=\"http://blog.csdn.net/xiaochunyong/article/details/7748713\" target=\"_blank\" rel=\"noopener\">Java位运算(移位、位与、或、异或、非）</a></p>\n"},{"title":"website","date":"2017-12-06T15:45:02.000Z","_content":"\n- [python自动上色](http://paintstransfer.com/)\n- [google翻译](https://translate.google.cn/)\n- [自动部署](https://travis-ci.org/)\n- [自动部署帮助文档](https://docs.travis-ci.com/user/encryption-keys/)\n  - (http://notes.iissnan.com/2016/publishing-github-pages-with-travis-ci/)\n- [阿里图标库](http://www.iconfont.cn/)\n  - (http://588ku.com)\n  - (http://www.iconpng.com)\n- [小图标](http://fontawesome.io/3.2.1/icons/)\n- [进度条&勋章](http://shields.io/)\n- [图标生成](https://poser.pugx.org/)\n- [在线编辑](https://www.zybuluo.com/mdeditor)\n- go语言学习\n  - [tour](https://tour.go-zh.org)\n","source":"_posts/website.md","raw":"---\ntitle: website\ndate: 2017-12-06 23:45:02\npermalink: website\ncategories: 其他\ntags:\n - 其他\n---\n\n- [python自动上色](http://paintstransfer.com/)\n- [google翻译](https://translate.google.cn/)\n- [自动部署](https://travis-ci.org/)\n- [自动部署帮助文档](https://docs.travis-ci.com/user/encryption-keys/)\n  - (http://notes.iissnan.com/2016/publishing-github-pages-with-travis-ci/)\n- [阿里图标库](http://www.iconfont.cn/)\n  - (http://588ku.com)\n  - (http://www.iconpng.com)\n- [小图标](http://fontawesome.io/3.2.1/icons/)\n- [进度条&勋章](http://shields.io/)\n- [图标生成](https://poser.pugx.org/)\n- [在线编辑](https://www.zybuluo.com/mdeditor)\n- go语言学习\n  - [tour](https://tour.go-zh.org)\n","slug":"website","published":1,"updated":"2018-03-25T13:41:08.571Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjf6wl6pw001j2gtpv74vtvdt","content":"<ul>\n<li><a href=\"http://paintstransfer.com/\" target=\"_blank\" rel=\"noopener\">python自动上色</a></li>\n<li><a href=\"https://translate.google.cn/\" target=\"_blank\" rel=\"noopener\">google翻译</a></li>\n<li><a href=\"https://travis-ci.org/\" target=\"_blank\" rel=\"noopener\">自动部署</a></li>\n<li><a href=\"https://docs.travis-ci.com/user/encryption-keys/\" target=\"_blank\" rel=\"noopener\">自动部署帮助文档</a><ul>\n<li>(<a href=\"http://notes.iissnan.com/2016/publishing-github-pages-with-travis-ci/\" target=\"_blank\" rel=\"noopener\">http://notes.iissnan.com/2016/publishing-github-pages-with-travis-ci/</a>)</li>\n</ul>\n</li>\n<li><a href=\"http://www.iconfont.cn/\" target=\"_blank\" rel=\"noopener\">阿里图标库</a><ul>\n<li>(<a href=\"http://588ku.com\" target=\"_blank\" rel=\"noopener\">http://588ku.com</a>)</li>\n<li>(<a href=\"http://www.iconpng.com\" target=\"_blank\" rel=\"noopener\">http://www.iconpng.com</a>)</li>\n</ul>\n</li>\n<li><a href=\"http://fontawesome.io/3.2.1/icons/\" target=\"_blank\" rel=\"noopener\">小图标</a></li>\n<li><a href=\"http://shields.io/\" target=\"_blank\" rel=\"noopener\">进度条&amp;勋章</a></li>\n<li><a href=\"https://poser.pugx.org/\" target=\"_blank\" rel=\"noopener\">图标生成</a></li>\n<li><a href=\"https://www.zybuluo.com/mdeditor\" target=\"_blank\" rel=\"noopener\">在线编辑</a></li>\n<li>go语言学习<ul>\n<li><a href=\"https://tour.go-zh.org\" target=\"_blank\" rel=\"noopener\">tour</a></li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li><a href=\"http://paintstransfer.com/\" target=\"_blank\" rel=\"noopener\">python自动上色</a></li>\n<li><a href=\"https://translate.google.cn/\" target=\"_blank\" rel=\"noopener\">google翻译</a></li>\n<li><a href=\"https://travis-ci.org/\" target=\"_blank\" rel=\"noopener\">自动部署</a></li>\n<li><a href=\"https://docs.travis-ci.com/user/encryption-keys/\" target=\"_blank\" rel=\"noopener\">自动部署帮助文档</a><ul>\n<li>(<a href=\"http://notes.iissnan.com/2016/publishing-github-pages-with-travis-ci/\" target=\"_blank\" rel=\"noopener\">http://notes.iissnan.com/2016/publishing-github-pages-with-travis-ci/</a>)</li>\n</ul>\n</li>\n<li><a href=\"http://www.iconfont.cn/\" target=\"_blank\" rel=\"noopener\">阿里图标库</a><ul>\n<li>(<a href=\"http://588ku.com\" target=\"_blank\" rel=\"noopener\">http://588ku.com</a>)</li>\n<li>(<a href=\"http://www.iconpng.com\" target=\"_blank\" rel=\"noopener\">http://www.iconpng.com</a>)</li>\n</ul>\n</li>\n<li><a href=\"http://fontawesome.io/3.2.1/icons/\" target=\"_blank\" rel=\"noopener\">小图标</a></li>\n<li><a href=\"http://shields.io/\" target=\"_blank\" rel=\"noopener\">进度条&amp;勋章</a></li>\n<li><a href=\"https://poser.pugx.org/\" target=\"_blank\" rel=\"noopener\">图标生成</a></li>\n<li><a href=\"https://www.zybuluo.com/mdeditor\" target=\"_blank\" rel=\"noopener\">在线编辑</a></li>\n<li>go语言学习<ul>\n<li><a href=\"https://tour.go-zh.org\" target=\"_blank\" rel=\"noopener\">tour</a></li>\n</ul>\n</li>\n</ul>\n"},{"title":"java生成二维码","date":"2017-12-06T16:04:32.000Z","_content":"\n```java\nimport java.awt.Color;\nimport java.awt.Graphics2D;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.util.Hashtable;\n\nimport javax.imageio.ImageIO;\n\nimport com.google.zxing.BarcodeFormat;\nimport com.google.zxing.BinaryBitmap;\nimport com.google.zxing.EncodeHintType;\nimport com.google.zxing.LuminanceSource;\nimport com.google.zxing.ReaderException;\nimport com.google.zxing.Result;\nimport com.google.zxing.WriterException;\nimport com.google.zxing.client.j2se.BufferedImageLuminanceSource;\nimport com.google.zxing.common.BitMatrix;\nimport com.google.zxing.common.HybridBinarizer;\nimport com.google.zxing.qrcode.QRCodeReader;\nimport com.google.zxing.qrcode.QRCodeWriter;\nimport com.google.zxing.qrcode.decoder.ErrorCorrectionLevel;\n\n/**\n * 二维码生成和读的工具类\n */\npublic class QrCodeCreateUtil {\n\n    /**\n     * 生成包含字符串信息的二维码图片\n     *\n     * @param outputStream 文件输出流路径\n     * @param content      二维码携带信息\n     * @param qrCodeSize   二维码图片大小\n     * @param imageFormat  二维码的格式\n     * @throws WriterException\n     * @throws IOException\n     */\n    public static boolean createQrCode(OutputStream outputStream, String content, int qrCodeSize, String imageFormat) throws WriterException, IOException {\n        //设置二维码纠错级别ＭＡＰ\n        Hashtable<EncodeHintType, ErrorCorrectionLevel> hintMap = new Hashtable<EncodeHintType, ErrorCorrectionLevel>();\n        hintMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.L);  // 矫错级别\n        QRCodeWriter qrCodeWriter = new QRCodeWriter();\n        //创建比特矩阵(位矩阵)的QR码编码的字符串\n        BitMatrix byteMatrix = qrCodeWriter.encode(content, BarcodeFormat.QR_CODE, qrCodeSize, qrCodeSize, hintMap);\n        // 使BufferedImage勾画QRCode  (matrixWidth 是行二维码像素点)\n        int matrixWidth = byteMatrix.getWidth();\n        BufferedImage image = new BufferedImage(matrixWidth - 200, matrixWidth - 200, BufferedImage.TYPE_INT_RGB);\n        image.createGraphics();\n        Graphics2D graphics = (Graphics2D) image.getGraphics();\n        graphics.setColor(Color.WHITE);\n        graphics.fillRect(0, 0, matrixWidth, matrixWidth);\n        // 使用比特矩阵画并保存图像\n        graphics.setColor(Color.BLACK);\n        for (int i = 0; i < matrixWidth; i++) {\n            for (int j = 0; j < matrixWidth; j++) {\n                if (byteMatrix.get(i, j)) {\n                    graphics.fillRect(i - 100, j - 100, 1, 1);\n                }\n            }\n        }\n        return ImageIO.write(image, imageFormat, outputStream);\n    }\n\n    /**\n     * 读二维码并输出携带的信息\n     */\n    public static void readQrCode(InputStream inputStream) throws IOException {\n        //从输入流中获取字符串信息\n        BufferedImage image = ImageIO.read(inputStream);\n        //将图像转换为二进制位图源\n        LuminanceSource source = new BufferedImageLuminanceSource(image);\n        BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));\n        QRCodeReader reader = new QRCodeReader();\n        Result result = null;\n        try {\n            result = reader.decode(bitmap);\n        } catch (ReaderException e) {\n            e.printStackTrace();\n        }\n        System.out.println(result.getText());\n    }\n\n    /**\n     * 测试代码\n     *\n     * @throws WriterException\n     */\n    public static void main(String[] args) throws IOException, WriterException {\n        createQrCode(new FileOutputStream(new File(\"d:\\\\qrcode.jpg\")), \"http://dmrs.me\", 900, \"JPEG\");\n        readQrCode(new FileInputStream(new File(\"d:\\\\qrcode.jpg\")));\n    }\n\n}\n```\n\n```xml\n<dependency>\n    <groupId>com.google.zxing</groupId>\n    <artifactId>core</artifactId>\n    <version>3.0.0</version>\n</dependency>\n<dependency>\n    <groupId>com.google.zxing</groupId>\n    <artifactId>javase</artifactId>\n    <version>3.0.0</version>\n</dependency>\n```","source":"_posts/java生成二维码.md","raw":"---\ntitle: java生成二维码\ndate: 2017-12-07 00:04:32\npermalink: java-generate-qr-code\ncategories: Gists\ntags:\n - java\n---\n\n```java\nimport java.awt.Color;\nimport java.awt.Graphics2D;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.util.Hashtable;\n\nimport javax.imageio.ImageIO;\n\nimport com.google.zxing.BarcodeFormat;\nimport com.google.zxing.BinaryBitmap;\nimport com.google.zxing.EncodeHintType;\nimport com.google.zxing.LuminanceSource;\nimport com.google.zxing.ReaderException;\nimport com.google.zxing.Result;\nimport com.google.zxing.WriterException;\nimport com.google.zxing.client.j2se.BufferedImageLuminanceSource;\nimport com.google.zxing.common.BitMatrix;\nimport com.google.zxing.common.HybridBinarizer;\nimport com.google.zxing.qrcode.QRCodeReader;\nimport com.google.zxing.qrcode.QRCodeWriter;\nimport com.google.zxing.qrcode.decoder.ErrorCorrectionLevel;\n\n/**\n * 二维码生成和读的工具类\n */\npublic class QrCodeCreateUtil {\n\n    /**\n     * 生成包含字符串信息的二维码图片\n     *\n     * @param outputStream 文件输出流路径\n     * @param content      二维码携带信息\n     * @param qrCodeSize   二维码图片大小\n     * @param imageFormat  二维码的格式\n     * @throws WriterException\n     * @throws IOException\n     */\n    public static boolean createQrCode(OutputStream outputStream, String content, int qrCodeSize, String imageFormat) throws WriterException, IOException {\n        //设置二维码纠错级别ＭＡＰ\n        Hashtable<EncodeHintType, ErrorCorrectionLevel> hintMap = new Hashtable<EncodeHintType, ErrorCorrectionLevel>();\n        hintMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.L);  // 矫错级别\n        QRCodeWriter qrCodeWriter = new QRCodeWriter();\n        //创建比特矩阵(位矩阵)的QR码编码的字符串\n        BitMatrix byteMatrix = qrCodeWriter.encode(content, BarcodeFormat.QR_CODE, qrCodeSize, qrCodeSize, hintMap);\n        // 使BufferedImage勾画QRCode  (matrixWidth 是行二维码像素点)\n        int matrixWidth = byteMatrix.getWidth();\n        BufferedImage image = new BufferedImage(matrixWidth - 200, matrixWidth - 200, BufferedImage.TYPE_INT_RGB);\n        image.createGraphics();\n        Graphics2D graphics = (Graphics2D) image.getGraphics();\n        graphics.setColor(Color.WHITE);\n        graphics.fillRect(0, 0, matrixWidth, matrixWidth);\n        // 使用比特矩阵画并保存图像\n        graphics.setColor(Color.BLACK);\n        for (int i = 0; i < matrixWidth; i++) {\n            for (int j = 0; j < matrixWidth; j++) {\n                if (byteMatrix.get(i, j)) {\n                    graphics.fillRect(i - 100, j - 100, 1, 1);\n                }\n            }\n        }\n        return ImageIO.write(image, imageFormat, outputStream);\n    }\n\n    /**\n     * 读二维码并输出携带的信息\n     */\n    public static void readQrCode(InputStream inputStream) throws IOException {\n        //从输入流中获取字符串信息\n        BufferedImage image = ImageIO.read(inputStream);\n        //将图像转换为二进制位图源\n        LuminanceSource source = new BufferedImageLuminanceSource(image);\n        BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));\n        QRCodeReader reader = new QRCodeReader();\n        Result result = null;\n        try {\n            result = reader.decode(bitmap);\n        } catch (ReaderException e) {\n            e.printStackTrace();\n        }\n        System.out.println(result.getText());\n    }\n\n    /**\n     * 测试代码\n     *\n     * @throws WriterException\n     */\n    public static void main(String[] args) throws IOException, WriterException {\n        createQrCode(new FileOutputStream(new File(\"d:\\\\qrcode.jpg\")), \"http://dmrs.me\", 900, \"JPEG\");\n        readQrCode(new FileInputStream(new File(\"d:\\\\qrcode.jpg\")));\n    }\n\n}\n```\n\n```xml\n<dependency>\n    <groupId>com.google.zxing</groupId>\n    <artifactId>core</artifactId>\n    <version>3.0.0</version>\n</dependency>\n<dependency>\n    <groupId>com.google.zxing</groupId>\n    <artifactId>javase</artifactId>\n    <version>3.0.0</version>\n</dependency>\n```","slug":"java-generate-qr-code","published":1,"updated":"2018-03-25T13:41:08.005Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjf6wl6pz001l2gtp5hy1gl3j","content":"<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.awt.Color;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.Graphics2D;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.image.BufferedImage;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.File;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.OutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Hashtable;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.imageio.ImageIO;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.BarcodeFormat;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.BinaryBitmap;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.EncodeHintType;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.LuminanceSource;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.ReaderException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.Result;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.WriterException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.client.j2se.BufferedImageLuminanceSource;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.common.BitMatrix;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.common.HybridBinarizer;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.qrcode.QRCodeReader;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.qrcode.QRCodeWriter;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.qrcode.decoder.ErrorCorrectionLevel;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 二维码生成和读的工具类</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">QrCodeCreateUtil</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 生成包含字符串信息的二维码图片</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> outputStream 文件输出流路径</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> content      二维码携带信息</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> qrCodeSize   二维码图片大小</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> imageFormat  二维码的格式</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> WriterException</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> IOException</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">createQrCode</span><span class=\"params\">(OutputStream outputStream, String content, <span class=\"keyword\">int</span> qrCodeSize, String imageFormat)</span> <span class=\"keyword\">throws</span> WriterException, IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//设置二维码纠错级别ＭＡＰ</span></span><br><span class=\"line\">        Hashtable&lt;EncodeHintType, ErrorCorrectionLevel&gt; hintMap = <span class=\"keyword\">new</span> Hashtable&lt;EncodeHintType, ErrorCorrectionLevel&gt;();</span><br><span class=\"line\">        hintMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.L);  <span class=\"comment\">// 矫错级别</span></span><br><span class=\"line\">        QRCodeWriter qrCodeWriter = <span class=\"keyword\">new</span> QRCodeWriter();</span><br><span class=\"line\">        <span class=\"comment\">//创建比特矩阵(位矩阵)的QR码编码的字符串</span></span><br><span class=\"line\">        BitMatrix byteMatrix = qrCodeWriter.encode(content, BarcodeFormat.QR_CODE, qrCodeSize, qrCodeSize, hintMap);</span><br><span class=\"line\">        <span class=\"comment\">// 使BufferedImage勾画QRCode  (matrixWidth 是行二维码像素点)</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> matrixWidth = byteMatrix.getWidth();</span><br><span class=\"line\">        BufferedImage image = <span class=\"keyword\">new</span> BufferedImage(matrixWidth - <span class=\"number\">200</span>, matrixWidth - <span class=\"number\">200</span>, BufferedImage.TYPE_INT_RGB);</span><br><span class=\"line\">        image.createGraphics();</span><br><span class=\"line\">        Graphics2D graphics = (Graphics2D) image.getGraphics();</span><br><span class=\"line\">        graphics.setColor(Color.WHITE);</span><br><span class=\"line\">        graphics.fillRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, matrixWidth, matrixWidth);</span><br><span class=\"line\">        <span class=\"comment\">// 使用比特矩阵画并保存图像</span></span><br><span class=\"line\">        graphics.setColor(Color.BLACK);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; matrixWidth; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; matrixWidth; j++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (byteMatrix.get(i, j)) &#123;</span><br><span class=\"line\">                    graphics.fillRect(i - <span class=\"number\">100</span>, j - <span class=\"number\">100</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ImageIO.write(image, imageFormat, outputStream);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 读二维码并输出携带的信息</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">readQrCode</span><span class=\"params\">(InputStream inputStream)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//从输入流中获取字符串信息</span></span><br><span class=\"line\">        BufferedImage image = ImageIO.read(inputStream);</span><br><span class=\"line\">        <span class=\"comment\">//将图像转换为二进制位图源</span></span><br><span class=\"line\">        LuminanceSource source = <span class=\"keyword\">new</span> BufferedImageLuminanceSource(image);</span><br><span class=\"line\">        BinaryBitmap bitmap = <span class=\"keyword\">new</span> BinaryBitmap(<span class=\"keyword\">new</span> HybridBinarizer(source));</span><br><span class=\"line\">        QRCodeReader reader = <span class=\"keyword\">new</span> QRCodeReader();</span><br><span class=\"line\">        Result result = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            result = reader.decode(bitmap);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (ReaderException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(result.getText());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 测试代码</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> WriterException</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> IOException, WriterException </span>&#123;</span><br><span class=\"line\">        createQrCode(<span class=\"keyword\">new</span> FileOutputStream(<span class=\"keyword\">new</span> File(<span class=\"string\">\"d:\\\\qrcode.jpg\"</span>)), <span class=\"string\">\"http://dmrs.me\"</span>, <span class=\"number\">900</span>, <span class=\"string\">\"JPEG\"</span>);</span><br><span class=\"line\">        readQrCode(<span class=\"keyword\">new</span> FileInputStream(<span class=\"keyword\">new</span> File(<span class=\"string\">\"d:\\\\qrcode.jpg\"</span>)));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.google.zxing<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.google.zxing<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javase<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.awt.Color;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.Graphics2D;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.image.BufferedImage;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.File;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.OutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Hashtable;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.imageio.ImageIO;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.BarcodeFormat;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.BinaryBitmap;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.EncodeHintType;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.LuminanceSource;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.ReaderException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.Result;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.WriterException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.client.j2se.BufferedImageLuminanceSource;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.common.BitMatrix;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.common.HybridBinarizer;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.qrcode.QRCodeReader;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.qrcode.QRCodeWriter;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.qrcode.decoder.ErrorCorrectionLevel;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 二维码生成和读的工具类</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">QrCodeCreateUtil</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 生成包含字符串信息的二维码图片</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> outputStream 文件输出流路径</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> content      二维码携带信息</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> qrCodeSize   二维码图片大小</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> imageFormat  二维码的格式</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> WriterException</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> IOException</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">createQrCode</span><span class=\"params\">(OutputStream outputStream, String content, <span class=\"keyword\">int</span> qrCodeSize, String imageFormat)</span> <span class=\"keyword\">throws</span> WriterException, IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//设置二维码纠错级别ＭＡＰ</span></span><br><span class=\"line\">        Hashtable&lt;EncodeHintType, ErrorCorrectionLevel&gt; hintMap = <span class=\"keyword\">new</span> Hashtable&lt;EncodeHintType, ErrorCorrectionLevel&gt;();</span><br><span class=\"line\">        hintMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.L);  <span class=\"comment\">// 矫错级别</span></span><br><span class=\"line\">        QRCodeWriter qrCodeWriter = <span class=\"keyword\">new</span> QRCodeWriter();</span><br><span class=\"line\">        <span class=\"comment\">//创建比特矩阵(位矩阵)的QR码编码的字符串</span></span><br><span class=\"line\">        BitMatrix byteMatrix = qrCodeWriter.encode(content, BarcodeFormat.QR_CODE, qrCodeSize, qrCodeSize, hintMap);</span><br><span class=\"line\">        <span class=\"comment\">// 使BufferedImage勾画QRCode  (matrixWidth 是行二维码像素点)</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> matrixWidth = byteMatrix.getWidth();</span><br><span class=\"line\">        BufferedImage image = <span class=\"keyword\">new</span> BufferedImage(matrixWidth - <span class=\"number\">200</span>, matrixWidth - <span class=\"number\">200</span>, BufferedImage.TYPE_INT_RGB);</span><br><span class=\"line\">        image.createGraphics();</span><br><span class=\"line\">        Graphics2D graphics = (Graphics2D) image.getGraphics();</span><br><span class=\"line\">        graphics.setColor(Color.WHITE);</span><br><span class=\"line\">        graphics.fillRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, matrixWidth, matrixWidth);</span><br><span class=\"line\">        <span class=\"comment\">// 使用比特矩阵画并保存图像</span></span><br><span class=\"line\">        graphics.setColor(Color.BLACK);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; matrixWidth; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; matrixWidth; j++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (byteMatrix.get(i, j)) &#123;</span><br><span class=\"line\">                    graphics.fillRect(i - <span class=\"number\">100</span>, j - <span class=\"number\">100</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ImageIO.write(image, imageFormat, outputStream);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 读二维码并输出携带的信息</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">readQrCode</span><span class=\"params\">(InputStream inputStream)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//从输入流中获取字符串信息</span></span><br><span class=\"line\">        BufferedImage image = ImageIO.read(inputStream);</span><br><span class=\"line\">        <span class=\"comment\">//将图像转换为二进制位图源</span></span><br><span class=\"line\">        LuminanceSource source = <span class=\"keyword\">new</span> BufferedImageLuminanceSource(image);</span><br><span class=\"line\">        BinaryBitmap bitmap = <span class=\"keyword\">new</span> BinaryBitmap(<span class=\"keyword\">new</span> HybridBinarizer(source));</span><br><span class=\"line\">        QRCodeReader reader = <span class=\"keyword\">new</span> QRCodeReader();</span><br><span class=\"line\">        Result result = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            result = reader.decode(bitmap);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (ReaderException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(result.getText());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 测试代码</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> WriterException</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> IOException, WriterException </span>&#123;</span><br><span class=\"line\">        createQrCode(<span class=\"keyword\">new</span> FileOutputStream(<span class=\"keyword\">new</span> File(<span class=\"string\">\"d:\\\\qrcode.jpg\"</span>)), <span class=\"string\">\"http://dmrs.me\"</span>, <span class=\"number\">900</span>, <span class=\"string\">\"JPEG\"</span>);</span><br><span class=\"line\">        readQrCode(<span class=\"keyword\">new</span> FileInputStream(<span class=\"keyword\">new</span> File(<span class=\"string\">\"d:\\\\qrcode.jpg\"</span>)));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.google.zxing<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.google.zxing<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javase<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>"},{"title":"关于RedisTemplate能注入到ValueOperations对象的疑问解惑","date":"2018-01-04T12:02:20.000Z","_content":"## 疑问 \n在刚开始接触`redis`的时候发现项目有这样一段看起来有问题的代码\n```java\n@Resource(name = \"redisTemplate\")\npublic void setValOps(ValueOperations<Object, Object> valOps) {\n    CacheUtils.valOps = valOps;\n}\n```\n对，这个是注入代码，我们所知道的注入必须类型匹配，于是我翻看了`RedisTemplate`的源码\n` extends RedisAccessor implements RedisOperations<K, V>, BeanClassLoaderAware`\n`RedisAccessor implements InitializingBean`\n`BeanClassLoaderAware extends Aware`\n而让我感到惊奇的是这些类和接口和 `RedisOperations` 没有任何的关联?\n启动和使用过程都没有任何问题，这个是怎么回事呢？\n## 发现\n通过查询资料发现`ValueOperationsEditor`这个类,注释`PropertyEditor allowing for easy injection of {@link ValueOperations} from {@link RedisOperations}.` 很明显就是这个类讲两个没有任何关联的类能够注入绑定。 \n### 代码如下:\n```java\nclass ValueOperationsEditor extends PropertyEditorSupport {\n  public void setValue(Object value) {\n\tif (value instanceof RedisOperations) {\n\t  super.setValue(((RedisOperations) value).opsForValue());\n\t} else {\n\t\tthrow new java.lang.IllegalArgumentException(\"Editor supports only conversion of type \" + RedisOperations.class);\n\t}\n  }\n}\n```\n`RedisTemplate`实现了`RedisOperations`接口,这段代码意思就是调用`RedisTemplate`的`opsForValue()`方法来给`ValueOperations`注入,事实上这个方法返回类型就是`ValueOperations`.即回答了我们的疑问.\n\n## 答疑\n`PropertyEditorSupport`这个核心的类提供了基类支持,就像注释写的一样\n - 这是一个帮助建立属性编辑器的支持类。它既可以用作基类，也可以用作委托。 </br>\n \n## 扩展\n\n### Resource\n来看看`Resource`注解,搜索下有哪些地方使用了这个注解\n  ![image](https://static.zuul.top/dmrs-me/20180104/1.png)\n\n看到了我们熟悉的spring包\n![image](https://static.zuul.top/dmrs-me/20180104/2.png)\n\n很明显的是表示注解字段或`setter`方法注入信息的类，支持`@Resource`注释。\n### Autowired\n相关核心类`AutowiredAnnotationBeanPostProcessor`\n![image](https://static.zuul.top/dmrs-me/20180104/3.png)\n\n从代码的注释到方法命名字段命名都值得学习。\n### 小窍门\n`idea`的`Find Usages`功能(右键)非常强大\n![image](https://static.zuul.top/dmrs-me/20180104/4.png)\n\n不仅有注解还有`字段`、`类`、`注释`、`引用`。\n\n  ","source":"_posts/关于RedisTemplate能注入到ValueOperations对象的疑问解惑.md","raw":"---\ntitle: 关于RedisTemplate能注入到ValueOperations对象的疑问解惑\ntags:\n  - redis\n  - Resource\n  - Autowired\n  - Spring\ncategories: QA\npermalink: why-ValueOperations-can-inject-RedisTemplate\ndate: 2018-01-04 20:02:20\n---\n## 疑问 \n在刚开始接触`redis`的时候发现项目有这样一段看起来有问题的代码\n```java\n@Resource(name = \"redisTemplate\")\npublic void setValOps(ValueOperations<Object, Object> valOps) {\n    CacheUtils.valOps = valOps;\n}\n```\n对，这个是注入代码，我们所知道的注入必须类型匹配，于是我翻看了`RedisTemplate`的源码\n` extends RedisAccessor implements RedisOperations<K, V>, BeanClassLoaderAware`\n`RedisAccessor implements InitializingBean`\n`BeanClassLoaderAware extends Aware`\n而让我感到惊奇的是这些类和接口和 `RedisOperations` 没有任何的关联?\n启动和使用过程都没有任何问题，这个是怎么回事呢？\n## 发现\n通过查询资料发现`ValueOperationsEditor`这个类,注释`PropertyEditor allowing for easy injection of {@link ValueOperations} from {@link RedisOperations}.` 很明显就是这个类讲两个没有任何关联的类能够注入绑定。 \n### 代码如下:\n```java\nclass ValueOperationsEditor extends PropertyEditorSupport {\n  public void setValue(Object value) {\n\tif (value instanceof RedisOperations) {\n\t  super.setValue(((RedisOperations) value).opsForValue());\n\t} else {\n\t\tthrow new java.lang.IllegalArgumentException(\"Editor supports only conversion of type \" + RedisOperations.class);\n\t}\n  }\n}\n```\n`RedisTemplate`实现了`RedisOperations`接口,这段代码意思就是调用`RedisTemplate`的`opsForValue()`方法来给`ValueOperations`注入,事实上这个方法返回类型就是`ValueOperations`.即回答了我们的疑问.\n\n## 答疑\n`PropertyEditorSupport`这个核心的类提供了基类支持,就像注释写的一样\n - 这是一个帮助建立属性编辑器的支持类。它既可以用作基类，也可以用作委托。 </br>\n \n## 扩展\n\n### Resource\n来看看`Resource`注解,搜索下有哪些地方使用了这个注解\n  ![image](https://static.zuul.top/dmrs-me/20180104/1.png)\n\n看到了我们熟悉的spring包\n![image](https://static.zuul.top/dmrs-me/20180104/2.png)\n\n很明显的是表示注解字段或`setter`方法注入信息的类，支持`@Resource`注释。\n### Autowired\n相关核心类`AutowiredAnnotationBeanPostProcessor`\n![image](https://static.zuul.top/dmrs-me/20180104/3.png)\n\n从代码的注释到方法命名字段命名都值得学习。\n### 小窍门\n`idea`的`Find Usages`功能(右键)非常强大\n![image](https://static.zuul.top/dmrs-me/20180104/4.png)\n\n不仅有注解还有`字段`、`类`、`注释`、`引用`。\n\n  ","slug":"why-ValueOperations-can-inject-RedisTemplate","published":1,"updated":"2018-03-25T13:41:09.118Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjf6wl6q2001o2gtp1ck7269s","content":"<h2 id=\"疑问\"><a href=\"#疑问\" class=\"headerlink\" title=\"疑问\"></a>疑问</h2><p>在刚开始接触<code>redis</code>的时候发现项目有这样一段看起来有问题的代码<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Resource</span>(name = <span class=\"string\">\"redisTemplate\"</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValOps</span><span class=\"params\">(ValueOperations&lt;Object, Object&gt; valOps)</span> </span>&#123;</span><br><span class=\"line\">    CacheUtils.valOps = valOps;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>对，这个是注入代码，我们所知道的注入必须类型匹配，于是我翻看了<code>RedisTemplate</code>的源码<br><code>extends RedisAccessor implements RedisOperations&lt;K, V&gt;, BeanClassLoaderAware</code><br><code>RedisAccessor implements InitializingBean</code><br><code>BeanClassLoaderAware extends Aware</code><br>而让我感到惊奇的是这些类和接口和 <code>RedisOperations</code> 没有任何的关联?<br>启动和使用过程都没有任何问题，这个是怎么回事呢？</p>\n<h2 id=\"发现\"><a href=\"#发现\" class=\"headerlink\" title=\"发现\"></a>发现</h2><p>通过查询资料发现<code>ValueOperationsEditor</code>这个类,注释<code>PropertyEditor allowing for easy injection of {@link ValueOperations} from {@link RedisOperations}.</code> 很明显就是这个类讲两个没有任何关联的类能够注入绑定。 </p>\n<h3 id=\"代码如下\"><a href=\"#代码如下\" class=\"headerlink\" title=\"代码如下:\"></a>代码如下:</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ValueOperationsEditor</span> <span class=\"keyword\">extends</span> <span class=\"title\">PropertyEditorSupport</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValue</span><span class=\"params\">(Object value)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (value <span class=\"keyword\">instanceof</span> RedisOperations) &#123;</span><br><span class=\"line\">\t  <span class=\"keyword\">super</span>.setValue(((RedisOperations) value).opsForValue());</span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> java.lang.IllegalArgumentException(<span class=\"string\">\"Editor supports only conversion of type \"</span> + RedisOperations.class);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>RedisTemplate</code>实现了<code>RedisOperations</code>接口,这段代码意思就是调用<code>RedisTemplate</code>的<code>opsForValue()</code>方法来给<code>ValueOperations</code>注入,事实上这个方法返回类型就是<code>ValueOperations</code>.即回答了我们的疑问.</p>\n<h2 id=\"答疑\"><a href=\"#答疑\" class=\"headerlink\" title=\"答疑\"></a>答疑</h2><p><code>PropertyEditorSupport</code>这个核心的类提供了基类支持,就像注释写的一样</p>\n<ul>\n<li>这是一个帮助建立属性编辑器的支持类。它既可以用作基类，也可以用作委托。 <br></li>\n</ul>\n<h2 id=\"扩展\"><a href=\"#扩展\" class=\"headerlink\" title=\"扩展\"></a>扩展</h2><h3 id=\"Resource\"><a href=\"#Resource\" class=\"headerlink\" title=\"Resource\"></a>Resource</h3><p>来看看<code>Resource</code>注解,搜索下有哪些地方使用了这个注解<br>  <img src=\"https://static.zuul.top/dmrs-me/20180104/1.png\" alt=\"image\"></p>\n<p>看到了我们熟悉的spring包<br><img src=\"https://static.zuul.top/dmrs-me/20180104/2.png\" alt=\"image\"></p>\n<p>很明显的是表示注解字段或<code>setter</code>方法注入信息的类，支持<code>@Resource</code>注释。</p>\n<h3 id=\"Autowired\"><a href=\"#Autowired\" class=\"headerlink\" title=\"Autowired\"></a>Autowired</h3><p>相关核心类<code>AutowiredAnnotationBeanPostProcessor</code><br><img src=\"https://static.zuul.top/dmrs-me/20180104/3.png\" alt=\"image\"></p>\n<p>从代码的注释到方法命名字段命名都值得学习。</p>\n<h3 id=\"小窍门\"><a href=\"#小窍门\" class=\"headerlink\" title=\"小窍门\"></a>小窍门</h3><p><code>idea</code>的<code>Find Usages</code>功能(右键)非常强大<br><img src=\"https://static.zuul.top/dmrs-me/20180104/4.png\" alt=\"image\"></p>\n<p>不仅有注解还有<code>字段</code>、<code>类</code>、<code>注释</code>、<code>引用</code>。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"疑问\"><a href=\"#疑问\" class=\"headerlink\" title=\"疑问\"></a>疑问</h2><p>在刚开始接触<code>redis</code>的时候发现项目有这样一段看起来有问题的代码<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Resource</span>(name = <span class=\"string\">\"redisTemplate\"</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValOps</span><span class=\"params\">(ValueOperations&lt;Object, Object&gt; valOps)</span> </span>&#123;</span><br><span class=\"line\">    CacheUtils.valOps = valOps;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>对，这个是注入代码，我们所知道的注入必须类型匹配，于是我翻看了<code>RedisTemplate</code>的源码<br><code>extends RedisAccessor implements RedisOperations&lt;K, V&gt;, BeanClassLoaderAware</code><br><code>RedisAccessor implements InitializingBean</code><br><code>BeanClassLoaderAware extends Aware</code><br>而让我感到惊奇的是这些类和接口和 <code>RedisOperations</code> 没有任何的关联?<br>启动和使用过程都没有任何问题，这个是怎么回事呢？</p>\n<h2 id=\"发现\"><a href=\"#发现\" class=\"headerlink\" title=\"发现\"></a>发现</h2><p>通过查询资料发现<code>ValueOperationsEditor</code>这个类,注释<code>PropertyEditor allowing for easy injection of {@link ValueOperations} from {@link RedisOperations}.</code> 很明显就是这个类讲两个没有任何关联的类能够注入绑定。 </p>\n<h3 id=\"代码如下\"><a href=\"#代码如下\" class=\"headerlink\" title=\"代码如下:\"></a>代码如下:</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ValueOperationsEditor</span> <span class=\"keyword\">extends</span> <span class=\"title\">PropertyEditorSupport</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValue</span><span class=\"params\">(Object value)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (value <span class=\"keyword\">instanceof</span> RedisOperations) &#123;</span><br><span class=\"line\">\t  <span class=\"keyword\">super</span>.setValue(((RedisOperations) value).opsForValue());</span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> java.lang.IllegalArgumentException(<span class=\"string\">\"Editor supports only conversion of type \"</span> + RedisOperations.class);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>RedisTemplate</code>实现了<code>RedisOperations</code>接口,这段代码意思就是调用<code>RedisTemplate</code>的<code>opsForValue()</code>方法来给<code>ValueOperations</code>注入,事实上这个方法返回类型就是<code>ValueOperations</code>.即回答了我们的疑问.</p>\n<h2 id=\"答疑\"><a href=\"#答疑\" class=\"headerlink\" title=\"答疑\"></a>答疑</h2><p><code>PropertyEditorSupport</code>这个核心的类提供了基类支持,就像注释写的一样</p>\n<ul>\n<li>这是一个帮助建立属性编辑器的支持类。它既可以用作基类，也可以用作委托。 <br></li>\n</ul>\n<h2 id=\"扩展\"><a href=\"#扩展\" class=\"headerlink\" title=\"扩展\"></a>扩展</h2><h3 id=\"Resource\"><a href=\"#Resource\" class=\"headerlink\" title=\"Resource\"></a>Resource</h3><p>来看看<code>Resource</code>注解,搜索下有哪些地方使用了这个注解<br>  <img src=\"https://static.zuul.top/dmrs-me/20180104/1.png\" alt=\"image\"></p>\n<p>看到了我们熟悉的spring包<br><img src=\"https://static.zuul.top/dmrs-me/20180104/2.png\" alt=\"image\"></p>\n<p>很明显的是表示注解字段或<code>setter</code>方法注入信息的类，支持<code>@Resource</code>注释。</p>\n<h3 id=\"Autowired\"><a href=\"#Autowired\" class=\"headerlink\" title=\"Autowired\"></a>Autowired</h3><p>相关核心类<code>AutowiredAnnotationBeanPostProcessor</code><br><img src=\"https://static.zuul.top/dmrs-me/20180104/3.png\" alt=\"image\"></p>\n<p>从代码的注释到方法命名字段命名都值得学习。</p>\n<h3 id=\"小窍门\"><a href=\"#小窍门\" class=\"headerlink\" title=\"小窍门\"></a>小窍门</h3><p><code>idea</code>的<code>Find Usages</code>功能(右键)非常强大<br><img src=\"https://static.zuul.top/dmrs-me/20180104/4.png\" alt=\"image\"></p>\n<p>不仅有注解还有<code>字段</code>、<code>类</code>、<code>注释</code>、<code>引用</code>。</p>\n"},{"title":"拖动排序后台逻辑思考过程","date":"2018-01-27T03:08:12.000Z","_content":"\n## 需求\n实现类似[这个](http://www.jq22.com/yanshi1680)的排序后台逻辑\n\n## 思考\n- 必要字段主键`id`，`sequence`\n- 前端传递最后的值直接保存?\n  - 如果这个不是管理员使用的话，可能被注入错乱的相同排序序号，就无法正确的排序了。\n  - 时间比较紧急，前端需要去查找插件的使用方法等。\n  - 通常前端是实现页面效果和简单的控制，复杂的逻辑还是后端实现。\n- 排序逻辑思考\n  - 最简单的情况 <br/>\n    初始值如下\n    ```\n    id   -   sequence\n    A    -      1\n    B    -      2\n    C    -      3\n    D    -      4\n    ```\n    现在将`D-4`和`C-3`调换位置\n    ```\n    id   -   sequence\n    A    -      1\n    B    -      2\n    D    -      4\n    C    -      3\n    ```\n    想要保存这个结果必须修正`C`和`D`的`sequence` <br/>\n    结果如下\n    ```\n    id   -   sequence\n    A    -      1\n    B    -      2\n    D    -      3\n    C    -      4\n    ```\n    那么这个过程中只是调换了`C`和`D`的`sequence`\n   - 最复杂的情况如下\n     初始值如下\n     ```\n     id   -   sequence\n     A    -      1\n     B    -      2\n     C    -      3\n     D    -      4\n     ```\n     现在将`D-4`拖动到顶层\n     ```\n     id   -   sequence\n     D    -      4\n     A    -      1\n     B    -      2\n     C    -      3\n     ```\n     想要保存这个结果必须修正所有的`sequence`\n     结果如下\n     ```\n     id   -   sequence\n     D    -      1\n     A    -      2\n     B    -      3\n     C    -      4\n     ```\n  - 小结：这个排序其实就是把`sequence`重新分配，只要将所有的`sequence`重新排序，然后按照顺序分配即可。\n## 解决方案  \n  - 前端传递id数据库自关联修改 `sequence`\n    - 问题：数据库不会简单的根据传递的参数来排序\n      - 传递参数 `D,A,B,C` <br/>\n        期望:\n        ```\n        id   -   sequence\n        D    -      4\n        A    -      1\n        B    -      2\n        C    -      3\n        ```\n        实际情况：\n        ```\n        id   -   sequence\n        A    -      1\n        B    -      2\n        C    -      3\n        D    -      4\n        ```\n        通过查询查询资料这个需要写复杂的函数来解决，sql中不宜写复杂的函数，难以维护。\n  - 在`java`中排序然后批量更新(逐条更新会有并发问题的可能性)。\n   \n      ```java\n      public BaseResp<Void> sort(List<DocumentSort> sortList) {\n       List<Integer> sequenceList = new ArrayList<>(sortList.size());\n          sortList.forEach(d -> sequenceList.add(d.getSequence()));\n          Collections.sort(sequenceList);\n          List<DocumentCatalog> needUpdate = new LinkedList<>();\n          for (int i = 0; i < sortList.size(); i++) {\n              DocumentSort document = sortList.get(i);\n              if(Objects.equals(document.getSequence(), sequenceList.get(i))){\n                  continue;\n              }\n              DocumentCatalog catalog = new DocumentCatalog();\n              catalog.setId(document.getId());\n              catalog.setSequence(sequenceList.get(i));\n              needUpdate.add(catalog);\n          }\n          if(0 != needUpdate.size()) {\n              documentCatalogMapper.batchUpdate(needUpdate);\n      }\n      ```\n     - 通过测试这段代码还是存在问题：\n       - 当前端拖动的速度过快，数据`sequence`重复了！！！\n         - java并发问题?\n           - 这个方法没有共享变量\n           - `Collections.sort(sequenceList)`调用的是自身的排序，排查并发问题\n           - 这个是批量更新\n         - 核查了前端传递的数据，不存在传递相同的`sequence`\n         - 偶然发生`debug`不合适\n       - 详细日志，重现问题\n         1. 初始值\n         <pre>\n         id   -   sequence  db-sequence\n         A    -      1           1\n         B    -      2           2\n         C    -      3           3\n         D    -      4           4\n         </pre>\n         \n         2. 将`D`移至第一个\n         <pre>\n         id   -   sequence  db-sequence\n         D    -      1           1\n         A    -      2           2\n         B    -      3           3\n         C    -      4           4\n         </pre>\n               \n         3. 将`A`和`B`调换  此时前端传递的`sequence`没变\n         <pre>\n         id   -   sequence  db-sequence\n         D    -      4           1\n         B    -      2           3\n         A    -      1           2\n         C    -      3           4\n         </pre>\n         \n         4. 重排后结果：\n         <pre>\n         id   -   sequence  db-sequence\n         D    -      1           1\n         B    -      2           3\n         A    -      3           2\n         C    -      4           4\n         </pre>          \n         \n         5. 增量更新就不会更新`B`的`sequence`\n         最后结果数据库\n         <pre>\n         id   -   sequence  db-sequence\n         D    -      1           1\n         B    -      2           3\n         A    -      3           3\n         C    -      4           4\n         </pre>          \n         \n         6. 此时出现了2个`3`\n  - 最终代码全量更新得到正确结果：       \n      ```java\n      public BaseResp<Void> sort(List<DocumentSort> sortList) {\n       List<Integer> sequenceList = new ArrayList<>(sortList.size());\n          sortList.forEach(d -> sequenceList.add(d.getSequence()));\n          Collections.sort(sequenceList);\n          List<DocumentCatalog> needUpdate = new LinkedList<>();\n          for (int i = 0; i < sortList.size(); i++) {\n              DocumentSort document = sortList.get(i);\n              DocumentCatalog catalog = new DocumentCatalog();\n              catalog.setId(document.getId());\n              catalog.setSequence(sequenceList.get(i));\n              needUpdate.add(catalog);\n          }\n          if(0 != needUpdate.size()) {\n              documentCatalogMapper.batchUpdate(needUpdate);\n      }\n      ```  ","source":"_posts/拖动排序后台逻辑思考过程.md","raw":"---\ntitle: 拖动排序后台逻辑思考过程\ntags:\n  - sort\ncategories: QA\npermalink: drag-order-thinking\ndate: 2018-01-27 11:08:12\n---\n\n## 需求\n实现类似[这个](http://www.jq22.com/yanshi1680)的排序后台逻辑\n\n## 思考\n- 必要字段主键`id`，`sequence`\n- 前端传递最后的值直接保存?\n  - 如果这个不是管理员使用的话，可能被注入错乱的相同排序序号，就无法正确的排序了。\n  - 时间比较紧急，前端需要去查找插件的使用方法等。\n  - 通常前端是实现页面效果和简单的控制，复杂的逻辑还是后端实现。\n- 排序逻辑思考\n  - 最简单的情况 <br/>\n    初始值如下\n    ```\n    id   -   sequence\n    A    -      1\n    B    -      2\n    C    -      3\n    D    -      4\n    ```\n    现在将`D-4`和`C-3`调换位置\n    ```\n    id   -   sequence\n    A    -      1\n    B    -      2\n    D    -      4\n    C    -      3\n    ```\n    想要保存这个结果必须修正`C`和`D`的`sequence` <br/>\n    结果如下\n    ```\n    id   -   sequence\n    A    -      1\n    B    -      2\n    D    -      3\n    C    -      4\n    ```\n    那么这个过程中只是调换了`C`和`D`的`sequence`\n   - 最复杂的情况如下\n     初始值如下\n     ```\n     id   -   sequence\n     A    -      1\n     B    -      2\n     C    -      3\n     D    -      4\n     ```\n     现在将`D-4`拖动到顶层\n     ```\n     id   -   sequence\n     D    -      4\n     A    -      1\n     B    -      2\n     C    -      3\n     ```\n     想要保存这个结果必须修正所有的`sequence`\n     结果如下\n     ```\n     id   -   sequence\n     D    -      1\n     A    -      2\n     B    -      3\n     C    -      4\n     ```\n  - 小结：这个排序其实就是把`sequence`重新分配，只要将所有的`sequence`重新排序，然后按照顺序分配即可。\n## 解决方案  \n  - 前端传递id数据库自关联修改 `sequence`\n    - 问题：数据库不会简单的根据传递的参数来排序\n      - 传递参数 `D,A,B,C` <br/>\n        期望:\n        ```\n        id   -   sequence\n        D    -      4\n        A    -      1\n        B    -      2\n        C    -      3\n        ```\n        实际情况：\n        ```\n        id   -   sequence\n        A    -      1\n        B    -      2\n        C    -      3\n        D    -      4\n        ```\n        通过查询查询资料这个需要写复杂的函数来解决，sql中不宜写复杂的函数，难以维护。\n  - 在`java`中排序然后批量更新(逐条更新会有并发问题的可能性)。\n   \n      ```java\n      public BaseResp<Void> sort(List<DocumentSort> sortList) {\n       List<Integer> sequenceList = new ArrayList<>(sortList.size());\n          sortList.forEach(d -> sequenceList.add(d.getSequence()));\n          Collections.sort(sequenceList);\n          List<DocumentCatalog> needUpdate = new LinkedList<>();\n          for (int i = 0; i < sortList.size(); i++) {\n              DocumentSort document = sortList.get(i);\n              if(Objects.equals(document.getSequence(), sequenceList.get(i))){\n                  continue;\n              }\n              DocumentCatalog catalog = new DocumentCatalog();\n              catalog.setId(document.getId());\n              catalog.setSequence(sequenceList.get(i));\n              needUpdate.add(catalog);\n          }\n          if(0 != needUpdate.size()) {\n              documentCatalogMapper.batchUpdate(needUpdate);\n      }\n      ```\n     - 通过测试这段代码还是存在问题：\n       - 当前端拖动的速度过快，数据`sequence`重复了！！！\n         - java并发问题?\n           - 这个方法没有共享变量\n           - `Collections.sort(sequenceList)`调用的是自身的排序，排查并发问题\n           - 这个是批量更新\n         - 核查了前端传递的数据，不存在传递相同的`sequence`\n         - 偶然发生`debug`不合适\n       - 详细日志，重现问题\n         1. 初始值\n         <pre>\n         id   -   sequence  db-sequence\n         A    -      1           1\n         B    -      2           2\n         C    -      3           3\n         D    -      4           4\n         </pre>\n         \n         2. 将`D`移至第一个\n         <pre>\n         id   -   sequence  db-sequence\n         D    -      1           1\n         A    -      2           2\n         B    -      3           3\n         C    -      4           4\n         </pre>\n               \n         3. 将`A`和`B`调换  此时前端传递的`sequence`没变\n         <pre>\n         id   -   sequence  db-sequence\n         D    -      4           1\n         B    -      2           3\n         A    -      1           2\n         C    -      3           4\n         </pre>\n         \n         4. 重排后结果：\n         <pre>\n         id   -   sequence  db-sequence\n         D    -      1           1\n         B    -      2           3\n         A    -      3           2\n         C    -      4           4\n         </pre>          \n         \n         5. 增量更新就不会更新`B`的`sequence`\n         最后结果数据库\n         <pre>\n         id   -   sequence  db-sequence\n         D    -      1           1\n         B    -      2           3\n         A    -      3           3\n         C    -      4           4\n         </pre>          \n         \n         6. 此时出现了2个`3`\n  - 最终代码全量更新得到正确结果：       \n      ```java\n      public BaseResp<Void> sort(List<DocumentSort> sortList) {\n       List<Integer> sequenceList = new ArrayList<>(sortList.size());\n          sortList.forEach(d -> sequenceList.add(d.getSequence()));\n          Collections.sort(sequenceList);\n          List<DocumentCatalog> needUpdate = new LinkedList<>();\n          for (int i = 0; i < sortList.size(); i++) {\n              DocumentSort document = sortList.get(i);\n              DocumentCatalog catalog = new DocumentCatalog();\n              catalog.setId(document.getId());\n              catalog.setSequence(sequenceList.get(i));\n              needUpdate.add(catalog);\n          }\n          if(0 != needUpdate.size()) {\n              documentCatalogMapper.batchUpdate(needUpdate);\n      }\n      ```  ","slug":"drag-order-thinking","published":1,"updated":"2018-03-25T14:44:19.452Z","_id":"cjf6wl6q5001q2gtptwv7tzjd","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"需求\"><a href=\"#需求\" class=\"headerlink\" title=\"需求\"></a>需求</h2><p>实现类似<a href=\"http://www.jq22.com/yanshi1680\" target=\"_blank\" rel=\"noopener\">这个</a>的排序后台逻辑</p>\n<h2 id=\"思考\"><a href=\"#思考\" class=\"headerlink\" title=\"思考\"></a>思考</h2><ul>\n<li>必要字段主键<code>id</code>，<code>sequence</code></li>\n<li>前端传递最后的值直接保存?<ul>\n<li>如果这个不是管理员使用的话，可能被注入错乱的相同排序序号，就无法正确的排序了。</li>\n<li>时间比较紧急，前端需要去查找插件的使用方法等。</li>\n<li>通常前端是实现页面效果和简单的控制，复杂的逻辑还是后端实现。</li>\n</ul>\n</li>\n<li><p>排序逻辑思考</p>\n<ul>\n<li><p>最简单的情况 <br><br>初始值如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">id   -   sequence</span><br><span class=\"line\">A    -      1</span><br><span class=\"line\">B    -      2</span><br><span class=\"line\">C    -      3</span><br><span class=\"line\">D    -      4</span><br></pre></td></tr></table></figure>\n<p>现在将<code>D-4</code>和<code>C-3</code>调换位置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">id   -   sequence</span><br><span class=\"line\">A    -      1</span><br><span class=\"line\">B    -      2</span><br><span class=\"line\">D    -      4</span><br><span class=\"line\">C    -      3</span><br></pre></td></tr></table></figure>\n<p>想要保存这个结果必须修正<code>C</code>和<code>D</code>的<code>sequence</code> <br><br>结果如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">id   -   sequence</span><br><span class=\"line\">A    -      1</span><br><span class=\"line\">B    -      2</span><br><span class=\"line\">D    -      3</span><br><span class=\"line\">C    -      4</span><br></pre></td></tr></table></figure>\n<p>那么这个过程中只是调换了<code>C</code>和<code>D</code>的<code>sequence</code></p>\n<ul>\n<li><p>最复杂的情况如下<br>初始值如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">id   -   sequence</span><br><span class=\"line\">A    -      1</span><br><span class=\"line\">B    -      2</span><br><span class=\"line\">C    -      3</span><br><span class=\"line\">D    -      4</span><br></pre></td></tr></table></figure>\n<p>现在将<code>D-4</code>拖动到顶层</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">id   -   sequence</span><br><span class=\"line\">D    -      4</span><br><span class=\"line\">A    -      1</span><br><span class=\"line\">B    -      2</span><br><span class=\"line\">C    -      3</span><br></pre></td></tr></table></figure>\n<p>想要保存这个结果必须修正所有的<code>sequence</code><br>结果如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">id   -   sequence</span><br><span class=\"line\">D    -      1</span><br><span class=\"line\">A    -      2</span><br><span class=\"line\">B    -      3</span><br><span class=\"line\">C    -      4</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>小结：这个排序其实就是把<code>sequence</code>重新分配，只要将所有的<code>sequence</code>重新排序，然后按照顺序分配即可。</p>\n<h2 id=\"解决方案\"><a href=\"#解决方案\" class=\"headerlink\" title=\"解决方案\"></a>解决方案</h2></li>\n<li><p>前端传递id数据库自关联修改 <code>sequence</code></p>\n<ul>\n<li><p>问题：数据库不会简单的根据传递的参数来排序</p>\n<ul>\n<li><p>传递参数 <code>D,A,B,C</code> <br><br>期望:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">id   -   sequence</span><br><span class=\"line\">D    -      4</span><br><span class=\"line\">A    -      1</span><br><span class=\"line\">B    -      2</span><br><span class=\"line\">C    -      3</span><br></pre></td></tr></table></figure>\n<p>实际情况：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">id   -   sequence</span><br><span class=\"line\">A    -      1</span><br><span class=\"line\">B    -      2</span><br><span class=\"line\">C    -      3</span><br><span class=\"line\">D    -      4</span><br></pre></td></tr></table></figure>\n<p>通过查询查询资料这个需要写复杂的函数来解决，sql中不宜写复杂的函数，难以维护。</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>在<code>java</code>中排序然后批量更新(逐条更新会有并发问题的可能性)。</p>\n  <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> BaseResp&lt;Void&gt; <span class=\"title\">sort</span><span class=\"params\">(List&lt;DocumentSort&gt; sortList)</span> </span>&#123;</span><br><span class=\"line\"> List&lt;Integer&gt; sequenceList = <span class=\"keyword\">new</span> ArrayList&lt;&gt;(sortList.size());</span><br><span class=\"line\">    sortList.forEach(d -&gt; sequenceList.add(d.getSequence()));</span><br><span class=\"line\">    Collections.sort(sequenceList);</span><br><span class=\"line\">    List&lt;DocumentCatalog&gt; needUpdate = <span class=\"keyword\">new</span> LinkedList&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; sortList.size(); i++) &#123;</span><br><span class=\"line\">        DocumentSort document = sortList.get(i);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(Objects.equals(document.getSequence(), sequenceList.get(i)))&#123;</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        DocumentCatalog catalog = <span class=\"keyword\">new</span> DocumentCatalog();</span><br><span class=\"line\">        catalog.setId(document.getId());</span><br><span class=\"line\">        catalog.setSequence(sequenceList.get(i));</span><br><span class=\"line\">        needUpdate.add(catalog);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"number\">0</span> != needUpdate.size()) &#123;</span><br><span class=\"line\">        documentCatalogMapper.batchUpdate(needUpdate);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>通过测试这段代码还是存在问题：</p>\n<ul>\n<li>当前端拖动的速度过快，数据<code>sequence</code>重复了！！！<ul>\n<li>java并发问题?<ul>\n<li>这个方法没有共享变量</li>\n<li><code>Collections.sort(sequenceList)</code>调用的是自身的排序，排查并发问题</li>\n<li>这个是批量更新</li>\n</ul>\n</li>\n<li>核查了前端传递的数据，不存在传递相同的<code>sequence</code></li>\n<li>偶然发生<code>debug</code>不合适</li>\n</ul>\n</li>\n<li><p>详细日志，重现问题</p>\n<ol>\n<li><p>初始值</p>\n<pre>\nid   -   sequence  db-sequence\nA    -      1           1\nB    -      2           2\nC    -      3           3\nD    -      4           4\n</pre>\n</li>\n<li><p>将<code>D</code>移至第一个</p>\n<pre>\nid   -   sequence  db-sequence\nD    -      1           1\nA    -      2           2\nB    -      3           3\nC    -      4           4\n</pre>\n</li>\n<li><p>将<code>A</code>和<code>B</code>调换  此时前端传递的<code>sequence</code>没变</p>\n<pre>\nid   -   sequence  db-sequence\nD    -      4           1\nB    -      2           3\nA    -      1           2\nC    -      3           4\n</pre>\n</li>\n<li><p>重排后结果：</p>\n<pre>\nid   -   sequence  db-sequence\nD    -      1           1\nB    -      2           3\nA    -      3           2\nC    -      4           4\n</pre>          \n</li>\n<li><p>增量更新就不会更新<code>B</code>的<code>sequence</code><br>最后结果数据库</p>\n<pre>\nid   -   sequence  db-sequence\nD    -      1           1\nB    -      2           3\nA    -      3           3\nC    -      4           4\n</pre>          \n</li>\n<li><p>此时出现了2个<code>3</code></p>\n</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>最终代码全量更新得到正确结果：       <pre><code class=\"java\"><span class=\"function\"><span class=\"keyword\">public</span> BaseResp&lt;Void&gt; <span class=\"title\">sort</span><span class=\"params\">(List&lt;DocumentSort&gt; sortList)</span> </span>{\n List&lt;Integer&gt; sequenceList = <span class=\"keyword\">new</span> ArrayList&lt;&gt;(sortList.size());\n    sortList.forEach(d -&gt; sequenceList.add(d.getSequence()));\n    Collections.sort(sequenceList);\n    List&lt;DocumentCatalog&gt; needUpdate = <span class=\"keyword\">new</span> LinkedList&lt;&gt;();\n    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; sortList.size(); i++) {\n        DocumentSort document = sortList.get(i);\n        DocumentCatalog catalog = <span class=\"keyword\">new</span> DocumentCatalog();\n        catalog.setId(document.getId());\n        catalog.setSequence(sequenceList.get(i));\n        needUpdate.add(catalog);\n    }\n    <span class=\"keyword\">if</span>(<span class=\"number\">0</span> != needUpdate.size()) {\n        documentCatalogMapper.batchUpdate(needUpdate);\n}\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"需求\"><a href=\"#需求\" class=\"headerlink\" title=\"需求\"></a>需求</h2><p>实现类似<a href=\"http://www.jq22.com/yanshi1680\" target=\"_blank\" rel=\"noopener\">这个</a>的排序后台逻辑</p>\n<h2 id=\"思考\"><a href=\"#思考\" class=\"headerlink\" title=\"思考\"></a>思考</h2><ul>\n<li>必要字段主键<code>id</code>，<code>sequence</code></li>\n<li>前端传递最后的值直接保存?<ul>\n<li>如果这个不是管理员使用的话，可能被注入错乱的相同排序序号，就无法正确的排序了。</li>\n<li>时间比较紧急，前端需要去查找插件的使用方法等。</li>\n<li>通常前端是实现页面效果和简单的控制，复杂的逻辑还是后端实现。</li>\n</ul>\n</li>\n<li><p>排序逻辑思考</p>\n<ul>\n<li><p>最简单的情况 <br><br>初始值如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">id   -   sequence</span><br><span class=\"line\">A    -      1</span><br><span class=\"line\">B    -      2</span><br><span class=\"line\">C    -      3</span><br><span class=\"line\">D    -      4</span><br></pre></td></tr></table></figure>\n<p>现在将<code>D-4</code>和<code>C-3</code>调换位置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">id   -   sequence</span><br><span class=\"line\">A    -      1</span><br><span class=\"line\">B    -      2</span><br><span class=\"line\">D    -      4</span><br><span class=\"line\">C    -      3</span><br></pre></td></tr></table></figure>\n<p>想要保存这个结果必须修正<code>C</code>和<code>D</code>的<code>sequence</code> <br><br>结果如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">id   -   sequence</span><br><span class=\"line\">A    -      1</span><br><span class=\"line\">B    -      2</span><br><span class=\"line\">D    -      3</span><br><span class=\"line\">C    -      4</span><br></pre></td></tr></table></figure>\n<p>那么这个过程中只是调换了<code>C</code>和<code>D</code>的<code>sequence</code></p>\n<ul>\n<li><p>最复杂的情况如下<br>初始值如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">id   -   sequence</span><br><span class=\"line\">A    -      1</span><br><span class=\"line\">B    -      2</span><br><span class=\"line\">C    -      3</span><br><span class=\"line\">D    -      4</span><br></pre></td></tr></table></figure>\n<p>现在将<code>D-4</code>拖动到顶层</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">id   -   sequence</span><br><span class=\"line\">D    -      4</span><br><span class=\"line\">A    -      1</span><br><span class=\"line\">B    -      2</span><br><span class=\"line\">C    -      3</span><br></pre></td></tr></table></figure>\n<p>想要保存这个结果必须修正所有的<code>sequence</code><br>结果如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">id   -   sequence</span><br><span class=\"line\">D    -      1</span><br><span class=\"line\">A    -      2</span><br><span class=\"line\">B    -      3</span><br><span class=\"line\">C    -      4</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>小结：这个排序其实就是把<code>sequence</code>重新分配，只要将所有的<code>sequence</code>重新排序，然后按照顺序分配即可。</p>\n<h2 id=\"解决方案\"><a href=\"#解决方案\" class=\"headerlink\" title=\"解决方案\"></a>解决方案</h2></li>\n<li><p>前端传递id数据库自关联修改 <code>sequence</code></p>\n<ul>\n<li><p>问题：数据库不会简单的根据传递的参数来排序</p>\n<ul>\n<li><p>传递参数 <code>D,A,B,C</code> <br><br>期望:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">id   -   sequence</span><br><span class=\"line\">D    -      4</span><br><span class=\"line\">A    -      1</span><br><span class=\"line\">B    -      2</span><br><span class=\"line\">C    -      3</span><br></pre></td></tr></table></figure>\n<p>实际情况：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">id   -   sequence</span><br><span class=\"line\">A    -      1</span><br><span class=\"line\">B    -      2</span><br><span class=\"line\">C    -      3</span><br><span class=\"line\">D    -      4</span><br></pre></td></tr></table></figure>\n<p>通过查询查询资料这个需要写复杂的函数来解决，sql中不宜写复杂的函数，难以维护。</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>在<code>java</code>中排序然后批量更新(逐条更新会有并发问题的可能性)。</p>\n  <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> BaseResp&lt;Void&gt; <span class=\"title\">sort</span><span class=\"params\">(List&lt;DocumentSort&gt; sortList)</span> </span>&#123;</span><br><span class=\"line\"> List&lt;Integer&gt; sequenceList = <span class=\"keyword\">new</span> ArrayList&lt;&gt;(sortList.size());</span><br><span class=\"line\">    sortList.forEach(d -&gt; sequenceList.add(d.getSequence()));</span><br><span class=\"line\">    Collections.sort(sequenceList);</span><br><span class=\"line\">    List&lt;DocumentCatalog&gt; needUpdate = <span class=\"keyword\">new</span> LinkedList&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; sortList.size(); i++) &#123;</span><br><span class=\"line\">        DocumentSort document = sortList.get(i);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(Objects.equals(document.getSequence(), sequenceList.get(i)))&#123;</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        DocumentCatalog catalog = <span class=\"keyword\">new</span> DocumentCatalog();</span><br><span class=\"line\">        catalog.setId(document.getId());</span><br><span class=\"line\">        catalog.setSequence(sequenceList.get(i));</span><br><span class=\"line\">        needUpdate.add(catalog);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"number\">0</span> != needUpdate.size()) &#123;</span><br><span class=\"line\">        documentCatalogMapper.batchUpdate(needUpdate);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>通过测试这段代码还是存在问题：</p>\n<ul>\n<li>当前端拖动的速度过快，数据<code>sequence</code>重复了！！！<ul>\n<li>java并发问题?<ul>\n<li>这个方法没有共享变量</li>\n<li><code>Collections.sort(sequenceList)</code>调用的是自身的排序，排查并发问题</li>\n<li>这个是批量更新</li>\n</ul>\n</li>\n<li>核查了前端传递的数据，不存在传递相同的<code>sequence</code></li>\n<li>偶然发生<code>debug</code>不合适</li>\n</ul>\n</li>\n<li><p>详细日志，重现问题</p>\n<ol>\n<li><p>初始值</p>\n<pre>\nid   -   sequence  db-sequence\nA    -      1           1\nB    -      2           2\nC    -      3           3\nD    -      4           4\n</pre>\n</li>\n<li><p>将<code>D</code>移至第一个</p>\n<pre>\nid   -   sequence  db-sequence\nD    -      1           1\nA    -      2           2\nB    -      3           3\nC    -      4           4\n</pre>\n</li>\n<li><p>将<code>A</code>和<code>B</code>调换  此时前端传递的<code>sequence</code>没变</p>\n<pre>\nid   -   sequence  db-sequence\nD    -      4           1\nB    -      2           3\nA    -      1           2\nC    -      3           4\n</pre>\n</li>\n<li><p>重排后结果：</p>\n<pre>\nid   -   sequence  db-sequence\nD    -      1           1\nB    -      2           3\nA    -      3           2\nC    -      4           4\n</pre>          \n</li>\n<li><p>增量更新就不会更新<code>B</code>的<code>sequence</code><br>最后结果数据库</p>\n<pre>\nid   -   sequence  db-sequence\nD    -      1           1\nB    -      2           3\nA    -      3           3\nC    -      4           4\n</pre>          \n</li>\n<li><p>此时出现了2个<code>3</code></p>\n</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>最终代码全量更新得到正确结果：       <pre><code class=\"java\"><span class=\"function\"><span class=\"keyword\">public</span> BaseResp&lt;Void&gt; <span class=\"title\">sort</span><span class=\"params\">(List&lt;DocumentSort&gt; sortList)</span> </span>{\n List&lt;Integer&gt; sequenceList = <span class=\"keyword\">new</span> ArrayList&lt;&gt;(sortList.size());\n    sortList.forEach(d -&gt; sequenceList.add(d.getSequence()));\n    Collections.sort(sequenceList);\n    List&lt;DocumentCatalog&gt; needUpdate = <span class=\"keyword\">new</span> LinkedList&lt;&gt;();\n    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; sortList.size(); i++) {\n        DocumentSort document = sortList.get(i);\n        DocumentCatalog catalog = <span class=\"keyword\">new</span> DocumentCatalog();\n        catalog.setId(document.getId());\n        catalog.setSequence(sequenceList.get(i));\n        needUpdate.add(catalog);\n    }\n    <span class=\"keyword\">if</span>(<span class=\"number\">0</span> != needUpdate.size()) {\n        documentCatalogMapper.batchUpdate(needUpdate);\n}\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n"},{"title":"程序员","date":"2017-10-22T03:09:07.000Z","_content":"&ensp;&ensp;&ensp;&ensp;公司最值钱的东西是产品，如果要问比产品更有价值的是什么？我认为是实实在在做事情的程序员们。\n\n&ensp;&ensp;&ensp;&ensp;他们虽然工资不高，每天坐在位置上敲着代码，在很多人眼中被称为“屌丝”或“宅男”，但我认为恰恰就是这些人，他们才是公司最有价值的人。\n\n&ensp;&ensp;&ensp;&ensp;他们有自己的理想，希望能够通过自己的努力，从中得到那一点点所谓的成就感。\n他们需要理解产品经理真正的意图，把想法变成现实，让产品真正落地。\n他们更容易把握细节，而这些细节往往决定着产品的命运与成败。\n他们突如其来的跳槽，对我们的项目的交付有直接的影响。\n他们在一起工作的气氛，能体现技术公司的文化与底蕴。\n由此看来，对程序员的重视是相当有必要的，我们需要关心每一位程序员的职业发展，让他们在团队里能够充分地发挥出自己的能力。\n\n&ensp;&ensp;&ensp;&ensp;我们也需要对他们倍加关注，挖掘出有能力、肯吃苦、敢担当的人，给他们更多的机会，让他们成为技术领袖。\n\n&ensp;&ensp;&ensp;&ensp;互联网技术公司需要大量这样的程序员：\n\n- 他们是一群有着技术信仰的人，他们是一群热爱编程的人，他们是一群不解决问题睡不好觉的人。\n- 他们不是打杂的，不是外包，更不是工具。\n- 他们不喜欢被忽悠，不喜欢被冷落，更不喜欢被驱动。\n- 他们需要尊重，需要培养，更需要激情！\n\n转载自 [开源社区](https://www.oschina.net/) [黄勇](https://my.oschina.net/huangyong/blog/387709)的博客\n","source":"_posts/程序员.md","raw":"---\ntitle: 程序员\npermalink: programer\ntags:\n  - 程序员\n  - 转载\ncategories: 其他\ndate: 2017-10-22 11:09:07\n---\n&ensp;&ensp;&ensp;&ensp;公司最值钱的东西是产品，如果要问比产品更有价值的是什么？我认为是实实在在做事情的程序员们。\n\n&ensp;&ensp;&ensp;&ensp;他们虽然工资不高，每天坐在位置上敲着代码，在很多人眼中被称为“屌丝”或“宅男”，但我认为恰恰就是这些人，他们才是公司最有价值的人。\n\n&ensp;&ensp;&ensp;&ensp;他们有自己的理想，希望能够通过自己的努力，从中得到那一点点所谓的成就感。\n他们需要理解产品经理真正的意图，把想法变成现实，让产品真正落地。\n他们更容易把握细节，而这些细节往往决定着产品的命运与成败。\n他们突如其来的跳槽，对我们的项目的交付有直接的影响。\n他们在一起工作的气氛，能体现技术公司的文化与底蕴。\n由此看来，对程序员的重视是相当有必要的，我们需要关心每一位程序员的职业发展，让他们在团队里能够充分地发挥出自己的能力。\n\n&ensp;&ensp;&ensp;&ensp;我们也需要对他们倍加关注，挖掘出有能力、肯吃苦、敢担当的人，给他们更多的机会，让他们成为技术领袖。\n\n&ensp;&ensp;&ensp;&ensp;互联网技术公司需要大量这样的程序员：\n\n- 他们是一群有着技术信仰的人，他们是一群热爱编程的人，他们是一群不解决问题睡不好觉的人。\n- 他们不是打杂的，不是外包，更不是工具。\n- 他们不喜欢被忽悠，不喜欢被冷落，更不喜欢被驱动。\n- 他们需要尊重，需要培养，更需要激情！\n\n转载自 [开源社区](https://www.oschina.net/) [黄勇](https://my.oschina.net/huangyong/blog/387709)的博客\n","slug":"programer","published":1,"updated":"2018-03-25T13:41:10.292Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjf6wl6q9001u2gtpgdnu3gja","content":"<p>&ensp;&ensp;&ensp;&ensp;公司最值钱的东西是产品，如果要问比产品更有价值的是什么？我认为是实实在在做事情的程序员们。</p>\n<p>&ensp;&ensp;&ensp;&ensp;他们虽然工资不高，每天坐在位置上敲着代码，在很多人眼中被称为“屌丝”或“宅男”，但我认为恰恰就是这些人，他们才是公司最有价值的人。</p>\n<p>&ensp;&ensp;&ensp;&ensp;他们有自己的理想，希望能够通过自己的努力，从中得到那一点点所谓的成就感。<br>他们需要理解产品经理真正的意图，把想法变成现实，让产品真正落地。<br>他们更容易把握细节，而这些细节往往决定着产品的命运与成败。<br>他们突如其来的跳槽，对我们的项目的交付有直接的影响。<br>他们在一起工作的气氛，能体现技术公司的文化与底蕴。<br>由此看来，对程序员的重视是相当有必要的，我们需要关心每一位程序员的职业发展，让他们在团队里能够充分地发挥出自己的能力。</p>\n<p>&ensp;&ensp;&ensp;&ensp;我们也需要对他们倍加关注，挖掘出有能力、肯吃苦、敢担当的人，给他们更多的机会，让他们成为技术领袖。</p>\n<p>&ensp;&ensp;&ensp;&ensp;互联网技术公司需要大量这样的程序员：</p>\n<ul>\n<li>他们是一群有着技术信仰的人，他们是一群热爱编程的人，他们是一群不解决问题睡不好觉的人。</li>\n<li>他们不是打杂的，不是外包，更不是工具。</li>\n<li>他们不喜欢被忽悠，不喜欢被冷落，更不喜欢被驱动。</li>\n<li>他们需要尊重，需要培养，更需要激情！</li>\n</ul>\n<p>转载自 <a href=\"https://www.oschina.net/\" target=\"_blank\" rel=\"noopener\">开源社区</a> <a href=\"https://my.oschina.net/huangyong/blog/387709\" target=\"_blank\" rel=\"noopener\">黄勇</a>的博客</p>\n","site":{"data":{}},"excerpt":"","more":"<p>&ensp;&ensp;&ensp;&ensp;公司最值钱的东西是产品，如果要问比产品更有价值的是什么？我认为是实实在在做事情的程序员们。</p>\n<p>&ensp;&ensp;&ensp;&ensp;他们虽然工资不高，每天坐在位置上敲着代码，在很多人眼中被称为“屌丝”或“宅男”，但我认为恰恰就是这些人，他们才是公司最有价值的人。</p>\n<p>&ensp;&ensp;&ensp;&ensp;他们有自己的理想，希望能够通过自己的努力，从中得到那一点点所谓的成就感。<br>他们需要理解产品经理真正的意图，把想法变成现实，让产品真正落地。<br>他们更容易把握细节，而这些细节往往决定着产品的命运与成败。<br>他们突如其来的跳槽，对我们的项目的交付有直接的影响。<br>他们在一起工作的气氛，能体现技术公司的文化与底蕴。<br>由此看来，对程序员的重视是相当有必要的，我们需要关心每一位程序员的职业发展，让他们在团队里能够充分地发挥出自己的能力。</p>\n<p>&ensp;&ensp;&ensp;&ensp;我们也需要对他们倍加关注，挖掘出有能力、肯吃苦、敢担当的人，给他们更多的机会，让他们成为技术领袖。</p>\n<p>&ensp;&ensp;&ensp;&ensp;互联网技术公司需要大量这样的程序员：</p>\n<ul>\n<li>他们是一群有着技术信仰的人，他们是一群热爱编程的人，他们是一群不解决问题睡不好觉的人。</li>\n<li>他们不是打杂的，不是外包，更不是工具。</li>\n<li>他们不喜欢被忽悠，不喜欢被冷落，更不喜欢被驱动。</li>\n<li>他们需要尊重，需要培养，更需要激情！</li>\n</ul>\n<p>转载自 <a href=\"https://www.oschina.net/\" target=\"_blank\" rel=\"noopener\">开源社区</a> <a href=\"https://my.oschina.net/huangyong/blog/387709\" target=\"_blank\" rel=\"noopener\">黄勇</a>的博客</p>\n"},{"title":"错误的使用了时间戳","date":"2018-01-27T03:08:12.000Z","_content":"\n\n## 症状如下：\n- 用户上传的证件日期确定填写的`2015-02-24`，我们在后台查询了日志和数据库确定是这个值。\n- 在用户员管理审核时显示`2015-02-23`\n- 我们本地无法重现这个问题，显示的是`2015-02-24`\n\n## 过程\n- 管理员身在泰国曼谷（东七区）与我们不在一个时间区（东八区），于是我们将本地的时间调整为东七区，问题重现了。\n- 发现日期是后端传递的时间戳，到前端调试下发现，时间戳转换成日期是`2015-02-23 23:00 00`,格式化只取日期就是显示的`2015-02-23`\n \n## 解决\n- 传递时间字符串\n\n## 其他关联\n- 需要国际化的系统设计\n  - `header`传递`lang`语言标示\n  - 后端返回提示需要配置多语言，采用统一错误编码匹配。","source":"_posts/错误的使用了时间戳.md","raw":"---\ntitle: 错误的使用了时间戳\ntags:\n  - timestamp\ncategories: QA\npermalink: wrong-timestamp-used\ndate: 2018-01-27 11:08:12\n---\n\n\n## 症状如下：\n- 用户上传的证件日期确定填写的`2015-02-24`，我们在后台查询了日志和数据库确定是这个值。\n- 在用户员管理审核时显示`2015-02-23`\n- 我们本地无法重现这个问题，显示的是`2015-02-24`\n\n## 过程\n- 管理员身在泰国曼谷（东七区）与我们不在一个时间区（东八区），于是我们将本地的时间调整为东七区，问题重现了。\n- 发现日期是后端传递的时间戳，到前端调试下发现，时间戳转换成日期是`2015-02-23 23:00 00`,格式化只取日期就是显示的`2015-02-23`\n \n## 解决\n- 传递时间字符串\n\n## 其他关联\n- 需要国际化的系统设计\n  - `header`传递`lang`语言标示\n  - 后端返回提示需要配置多语言，采用统一错误编码匹配。","slug":"wrong-timestamp-used","published":1,"updated":"2018-03-25T13:41:10.563Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjf6wl6qb001x2gtpn6batox8","content":"<h2 id=\"症状如下：\"><a href=\"#症状如下：\" class=\"headerlink\" title=\"症状如下：\"></a>症状如下：</h2><ul>\n<li>用户上传的证件日期确定填写的<code>2015-02-24</code>，我们在后台查询了日志和数据库确定是这个值。</li>\n<li>在用户员管理审核时显示<code>2015-02-23</code></li>\n<li>我们本地无法重现这个问题，显示的是<code>2015-02-24</code></li>\n</ul>\n<h2 id=\"过程\"><a href=\"#过程\" class=\"headerlink\" title=\"过程\"></a>过程</h2><ul>\n<li>管理员身在泰国曼谷（东七区）与我们不在一个时间区（东八区），于是我们将本地的时间调整为东七区，问题重现了。</li>\n<li>发现日期是后端传递的时间戳，到前端调试下发现，时间戳转换成日期是<code>2015-02-23 23:00 00</code>,格式化只取日期就是显示的<code>2015-02-23</code></li>\n</ul>\n<h2 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h2><ul>\n<li>传递时间字符串</li>\n</ul>\n<h2 id=\"其他关联\"><a href=\"#其他关联\" class=\"headerlink\" title=\"其他关联\"></a>其他关联</h2><ul>\n<li>需要国际化的系统设计<ul>\n<li><code>header</code>传递<code>lang</code>语言标示</li>\n<li>后端返回提示需要配置多语言，采用统一错误编码匹配。</li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"症状如下：\"><a href=\"#症状如下：\" class=\"headerlink\" title=\"症状如下：\"></a>症状如下：</h2><ul>\n<li>用户上传的证件日期确定填写的<code>2015-02-24</code>，我们在后台查询了日志和数据库确定是这个值。</li>\n<li>在用户员管理审核时显示<code>2015-02-23</code></li>\n<li>我们本地无法重现这个问题，显示的是<code>2015-02-24</code></li>\n</ul>\n<h2 id=\"过程\"><a href=\"#过程\" class=\"headerlink\" title=\"过程\"></a>过程</h2><ul>\n<li>管理员身在泰国曼谷（东七区）与我们不在一个时间区（东八区），于是我们将本地的时间调整为东七区，问题重现了。</li>\n<li>发现日期是后端传递的时间戳，到前端调试下发现，时间戳转换成日期是<code>2015-02-23 23:00 00</code>,格式化只取日期就是显示的<code>2015-02-23</code></li>\n</ul>\n<h2 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h2><ul>\n<li>传递时间字符串</li>\n</ul>\n<h2 id=\"其他关联\"><a href=\"#其他关联\" class=\"headerlink\" title=\"其他关联\"></a>其他关联</h2><ul>\n<li>需要国际化的系统设计<ul>\n<li><code>header</code>传递<code>lang</code>语言标示</li>\n<li>后端返回提示需要配置多语言，采用统一错误编码匹配。</li>\n</ul>\n</li>\n</ul>\n"},{"title":"插件或主题修改记录","date":"2017-11-06T12:57:12.000Z","_content":"- 短路径利于Seo\n>修改文章默认路径原来是`YYYY`改为`YY`文件路径`%HEXO_HOME%lib\\plugins\\filter\\post_permalink.js`,方法`postPermalinkFilter`中的`meta`的`year`属性.\n- 代码块颜色不够显眼\n>修改默认的灰色为红色,文件路径`\\themes\\next\\source\\css\\_variables\\base.styl`\n - 150 行  `$code-foreground                = $black-light` 改为  `$code-foreground                = $red`\n - 151 行  `$code-background                = $gainsboro`   改为  `$code-background                = $gray-lighter` \n- 持续更新中...","source":"_posts/插件或主题修改记录.md","raw":"---\ntitle: 插件或主题修改记录\ntags:\n  - 插件\n  - 主题\n  - Hexo\ncategories: Hexo\npermalink: plug-in-or-topic-modification-records\ndate: 2017-11-06 20:57:12\n---\n- 短路径利于Seo\n>修改文章默认路径原来是`YYYY`改为`YY`文件路径`%HEXO_HOME%lib\\plugins\\filter\\post_permalink.js`,方法`postPermalinkFilter`中的`meta`的`year`属性.\n- 代码块颜色不够显眼\n>修改默认的灰色为红色,文件路径`\\themes\\next\\source\\css\\_variables\\base.styl`\n - 150 行  `$code-foreground                = $black-light` 改为  `$code-foreground                = $red`\n - 151 行  `$code-background                = $gainsboro`   改为  `$code-background                = $gray-lighter` \n- 持续更新中...","slug":"plug-in-or-topic-modification-records","published":1,"updated":"2018-03-25T13:41:09.998Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjf6wl6qe00222gtpw57ev4cy","content":"<ul>\n<li>短路径利于Seo<blockquote>\n<p>修改文章默认路径原来是<code>YYYY</code>改为<code>YY</code>文件路径<code>%HEXO_HOME%lib\\plugins\\filter\\post_permalink.js</code>,方法<code>postPermalinkFilter</code>中的<code>meta</code>的<code>year</code>属性.</p>\n</blockquote>\n</li>\n<li>代码块颜色不够显眼<blockquote>\n<p>修改默认的灰色为红色,文件路径<code>\\themes\\next\\source\\css\\_variables\\base.styl</code></p>\n<ul>\n<li>150 行  <code>$code-foreground                = $black-light</code> 改为  <code>$code-foreground                = $red</code></li>\n<li>151 行  <code>$code-background                = $gainsboro</code>   改为  <code>$code-background                = $gray-lighter</code> </li>\n</ul>\n</blockquote>\n</li>\n<li>持续更新中…</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li>短路径利于Seo<blockquote>\n<p>修改文章默认路径原来是<code>YYYY</code>改为<code>YY</code>文件路径<code>%HEXO_HOME%lib\\plugins\\filter\\post_permalink.js</code>,方法<code>postPermalinkFilter</code>中的<code>meta</code>的<code>year</code>属性.</p>\n</blockquote>\n</li>\n<li>代码块颜色不够显眼<blockquote>\n<p>修改默认的灰色为红色,文件路径<code>\\themes\\next\\source\\css\\_variables\\base.styl</code></p>\n<ul>\n<li>150 行  <code>$code-foreground                = $black-light</code> 改为  <code>$code-foreground                = $red</code></li>\n<li>151 行  <code>$code-background                = $gainsboro</code>   改为  <code>$code-background                = $gray-lighter</code> </li>\n</ul>\n</blockquote>\n</li>\n<li>持续更新中…</li>\n</ul>\n"},{"title":"高房价背后的真实逻辑（深度长篇分析）","date":"2017-11-05T06:21:58.000Z","_content":"![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_01.jpg)\n>这篇文章不做好和坏的价值判断，只谈现象背后的逻辑和规律。\n>我会向你表达我真实的看法，但文章的结论可能会有点残酷。\n>要不要往下读，取决于你自己。\n>但我相信，尽早看清现实，早做打算，能够帮助你在人生的关键路口做出正确的判断。\n#### 01\n马太效应（强者愈强，弱者愈弱）是世间最冰冷的规则，却又无处不在。\n2015年，公众号“城市数据团”发表了一篇爆文《逃离你终将衰落的家乡》。文章以各省人口流动的大数据（2005年-2010年）为依据，得出了一个残酷的结论：\n\n**大都市就像抽水机，不停地从落后省份抽取劳动力，或许将来的某一天，我们就会像今天的日本一样，无数村庄和城镇凋零衰败，但东京和大阪都市圈繁华依旧。**\n\n大都市将毫不留情地吸干周边地区的血液，以便自己能够生存。残酷吗？不，因为这是年轻劳动力自己用脚（投票）投出的结果。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_02.jpg)\n（图片来自“城市数据团”）\n\n而由人口迁徙引申出来的推论，则更加触目惊心：\n\n你还能在这些选择（逃离北上广还是逃回北上广）中犹豫，说明你无比幸福，因为你们的下一代和下下一代可能不会再有任何选择的机会。假如你最终选择留在了一个生活安逸风景如画的小城镇上，你也许会幸福地过完一生；但在你的子女到了你这个年纪的时候，很可能他们有且只有一个选择，那就是——逃离他们终将衰落的家乡。\n\n我曾在《社会即将分层，你将会在第几层？》一文中引用了“城市数据团”的分析结论。\n\n当时有一些人对结论持怀疑和反对态度，因为他们相信政府调控的力量。\n\n政府一边限定了特大城市的常驻人口指标，一边强调要引导中心城市人口向周边转移（如某部委印发了《全国国土规划纲要》）。\n\n控制特大城市规模，让各个区域平衡发展是政府调控的目标。\n\n那么，现实情况又是怎样？\n\n揭开答案前，先来看看日本的情况。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_03.jpg)\n日本有三个地方GDP特别高，那就是东京、名古屋和大阪，这三个地方的GDP加起来，占全日本GDP总量的80%以上，所以这三个地方又被称为日本的三大都市圈。\n\n根据日本总务省2014年公布的数据，三大都市圈人口总数高达6439.33万人，占日本全国总人口的50.93%，\n\n到了2017年，这个数据变成了6453.26万人，人口数占比达到了51.38%。\n\n也就是说，哪怕是在人口负增长的国家，人们依然在源源不断地向发达地区聚集。\n\n这就是人口的聚集效应。\n\n中国聚集效应则更加明显。\n\n今年年初，“城市数据团”发布了文章《曾经熟悉的家乡终将成为倍感孤独的地方》。文章根据2014年-2016年春运大数据，再次揭示了这个残酷的事实：\n\n**相比于2005-2010年期间的数据，最近3年全国人口流动的集聚程度仍然在进一步地提高。**\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_04.jpg)\n\n**大城市的人口抽血能力并没有减缓，反而在持续地加强。**\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_05.jpg)\n\n**更多地方的人们愿意跋涉更远的距离，承担更高的成本，以逃离他们的家乡。**\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_06.jpg)\n\n（一线城市从全国人口抽血盛况）\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_07.jpg)\n\n（准一线城市抽血地图）\n\n为什么会这样？\n\n有网友给出了这样的答案：\n\n人向大城市集中，因为大城市有更多的就业机会，有更好的发展，比如做IT的，就要往北上杭深走；但是，很少有大城市的人走向小城市去，因为小城市有的，大城市基本也有。另外，交通的发展也导致了大城市对小城市人员的吸引，在前些年高铁热的时候，基本所有的地方政府都认为高铁来了，钱就到了，但更多的是，高铁来了，人就走了。具体到我们家来说，县里只有几家大企业，能做的是制造业、商业这些，但这些需要的工人较多，走出去的大学生很少去做这个；另一方面，你在外读书期间习惯了大城市的生活，读书馆、电影院、博物馆、书店、游乐场，县里没有啊。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_08.jpg)\n\n很多人误以为政府的调控是无所不能的，他们错了。\n\n社会运行自有其内在规律。\n\n**人口迁移遵循聚集效应，社会发展遵循马太效应。**\n\n大都市拥有优质的政治资源、商业资源、教育资源、人力资源……这些优质资源吸引着无数优秀的年轻人，而优秀的年轻人将推动大都市的繁荣发展，从而让大都市获取更多的资源，于是形成了一个优势迭代的良性循环，这就是马太效应中的强者愈强。\n\n然而，大都市在攫取优秀人才的同时，也在用高额的房价和户籍制度将千千万万的普通人挤到繁华都市的边缘，将他们赶到逼仄的地下室，脏乱的出租房，直到他们梦碎的那一天，收起行囊，滚回家乡，然后他们的下一代再背起行囊，逃离家乡。\n\n这就是马太效应的另一面，弱者愈弱。\n\n这听起来非常残酷，却又无比现实。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_09.jpg)\n\n#### 02\n前几天我发起了关于房价的意见征集，有一位读者给我留言说：\n\n我们在北京的时候年收入近50万买不起房子，后果就是举家撤离，再也无法享受北京的生活便利、以及包括医疗和教育在内的各种资源。离开北京一年了，和其他地方相比，感觉北京除了房子贵，其他都是相当便宜的！现在后悔得很，买不起房直接导致我和孩子们命运轨迹的改变！所以，在北京，只要有预估能力，就应该贷款买房！\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_10.jpg)\n\n这条留言指出了房子的真正价值。\n\n**当你买房的时候，买的并不仅仅是一个遮风避雨的居住场所，还包括周边提供的医疗、教育、交通、娱乐、公用服务以及发展机遇。**\n\n比如说，北大的很多课程都是对外开放的，如果你住在北大边上，你可以免费享受中国最顶尖的教育资源。\n\n再拿学区房为例。\n\n很多人说，天价学区房是国人的焦虑感和功利性心态造就的，但他们不知道，学区房的概念其实起源于美国。\n\n吴军老师在他的专栏写过一篇文章《怎么看名校毕业生在北京买不起学区房》，里面有这样一段介绍：\n\n美国好学区的房价和差学区的房价差别比中国要厉害得多，很多时候，隔着一条街，房价可以差几倍。在硅谷中心的帕罗阿图市（Palo Alto虽然叫做城市，但它只有两万人，相当于中国的一个小镇），处于中值水平的独栋房房价在300万美元以上，而和它只隔着一条马路的东帕罗阿图中位数房价只有60-80万美元左右。\n\n这两个区的差别有多大呢？一边住着拉里·佩奇、扎克伯格，以及很多斯坦福的教授，过去乔布斯也在那里，另一边是很多中低收入的墨西哥裔居民，包括不少非法移民。\n\n在美国，没有人觉得这种划分学区的方法有什么不好，因为大家习惯了。但是久而久之，学区好的地方聚集着比较体面、富有的一些家庭，不好的学区，整个条件都比较差，这是一个事实，而且很长时间几乎没有改变过。\n\n万维钢老师在《美国教育各阶层分析》一文中也提到了类似的观点：\n\n美国是个有严重阶层区分的国家，各社区按房价自然分开，在某种意义上是事实上的种族和贫富隔离。公立中小学的经费主要由所在学区的房产税而来，这意味着两点：第一，富人区的学校更有钱，可以请更好的老师、用更好的设备、有更高的教学水平；第二，学生们其实是在跟自己同阶层的人一起上学。\n\n教育资源不是标注品，必定有高下之分，而优质的教育资源永远是稀缺的。\n\n**学区房的出现，本质上是一种教育资源的分配方案。**\n\n当你买下学区房的时候，买的是下一代接受良好教育的入场券。\n\n\n\n#### 03\n\n**“房子是用来住的，不是用来炒的。”**\n\n今年的大会，这句话非常鼓舞人心。\n\n但有太多人误解了这句话。\n\n其完全的表述是：\n\n“坚持房子是用来住的、不是用来炒的定位，加快建立多主体供给、多渠道保障、租购并举的住房制度，让全体人民住有所居。”\n\n什么叫多渠道保障？\n\n什么叫租购并举？\n\n什么叫让你住有所居？\n\n**大会只承诺了房子的居住功能，并没有承诺你可以轻易地拥有房屋的产权，更没有承诺你能拥有房子背后的隐性价值。**\n\n其实早在去年3月的时候，发改委主任就曾提出：现在我国租房比例太低，购和租要并举。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_11.jpg)\n\n政策的大方向是要推广房屋租赁，而不是让你买得起房。\n\n是政府不重视民生问题吗？\n\n并不是。\n\n先来看看国外的情况。\n\n根据欧盟统计局2014年的数据，欧盟28国的所有人口中，有近三成(29.9%)的人是租房子住的，其中德国的租房比例达到了47.5%，仅52.5%的人居住在自有住房内。\n\n也就是说，将近一半的德国人都是租房的。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_12.jpg)\n\n美国的情况也是类似。\n\n根据皮尤研究中心的一项调查显示，2006年，57%的35岁以下家庭是租房子居住的。到了2016年，这个比例已经提高到了65%\n\n把年龄放宽一点，35至44岁的美国家庭中，租房的比例依然高达41%。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_13.jpg)\n\n这还只是平均数据，如果把目光聚焦到全球范围内的一线城市，当地人拥有住房的比例更低。\n\n比如德国的首都柏林，住房拥有率只有15.6%，有将近85%的人都只能租房子住。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_14.jpg)\n\n（图片来自公众号“财经连环话”）\n\n再来看看我们的春运人口迁移图你就会明白：\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_15.jpg)\n\n中国的人口基数太大了，但大城市的土地资源是有限的。\n\n在有限的土地上，怎么可能满足所有人在大城市买房的需求？\n\n唯有加快推广租赁。\n\n从这一点来讲，租售并举的政策大方向是没错的。\n\n但连带提出的“租售同权”则纯粹是在画大饼了。\n\n\n\n#### 04\n\n今年7月，一篇名为《突发，楼市巨变！广州宣布：租售同权》的文章突然刷屏了，原因是广州出台了《关于印发广州市加快发展住房租赁市场工作方案的通知》，通知里有这么一句话：\n\n“赋予符合条件的承租人子女享有就近入学等公共服务权益，保障租购同权。”\n\n于是那篇爆文的作者这样解读道：\n\n从今天开始，中国的买房终于和教育资源脱钩了，没有房，小孩照样可以上学了。\n\n这绝对是一次历史创举，具体未来的影响可能远超我们的想象，但绝对是我们现在无法估量的。\n\n但就像我在前面说了，**学区房的本质是一种教育资源的分配方案。**\n\n在教育资源没有变多，而大城市人口还在不断聚集的情况下，“租售同权”完全是个伪概念。\n\n当适龄的报名儿童超过学校招生计划时，学校会怎么做？\n\n杭州就有关于“一表生”、“二表生”的录取规则。\n\n即学校应该根据学龄儿童户籍和家庭住宅情况，按照“住、户一致”优先原则，按下面四种先后顺序录取：\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_16.jpg)\n\n#### 05\n\n楼市有泡沫吗？\n\n有啊，但不在一线城市，而是在三四五六线城市。\n\n2016年和2017年经历了两波房价的暴涨，但这两波的性质是不同的。\n\n**2016年的那波暴涨，是因为实业资本转移到了一二线城市的楼市，推高了房价，随后炒房团涌入，再次推高房价，但钱都是流向大城市的。**\n\n但2017年这一波就不一样了。\n\n因为2016年的这波暴涨，政府开始调控了。\n\n42个大城市（截止9月23日）先后出台了限售、限购等政策，炒房团买不了房了，于是纷纷涌向了三四线城市。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_17.jpg)\n\n但是，在三四线城市：\n\n有优质的教育资源吗？\n\n有优质的医疗服务吗？\n\n有丰富的娱乐场所吗？\n\n有良好的公共服务吗？\n\n有广阔的发展机遇吗？\n\n都没有。\n\n这不过是一场击鼓传花的游戏。\n\n最后接盘的那些投机客，他们将会为自己炒高房价的行为付出代价。\n\n\n\n#### 06\n\n经济学家马光远提出过楼市的后视镜原理：\n\n从房价的基本规律看，在一个国家城市的人口净增加，一个国家的人口转折点没有到来，以及一个国家的人均GDP尚未超越中等收入水平的情况下，资产价格长期的趋势仍然是向上的，无一例外。今天看到的资产价格的高点，明天很可能只是半山腰而已。\n\n回顾过去20年中国房价，站在当时的时空下，每年都觉得房价很高，但回过头看，那些以前认为高不可攀的价格，现在看起来是不是很便宜？\n\n这就是房价的“后视镜”原理。\n\n只要中国的经济持续向前发展，大城市的房子就依然会升值。\n\n**这里的大城市，是指四个一线城市及杭州、南京、苏州等几个重点二线城市。**\n\n这些大城市的房价中，包含了教育、医疗、交通、娱乐、公共服务、发展机遇等隐性价值，正是这些隐性价值支撑着其高昂的房价。\n\n要记住一点：**优质的资源永远是稀缺的，稀缺的资源永远是昂贵的。**\n\n土地的总量是有限的，而想要定居大城市的人是源源不断的。\n\n大城市好地段的房子是有形且有限的资源，买房的本质就是占有资源。\n\n还要记住的一点是：**财富是以家庭为单位的。**\n\n我以前写过这么一段话：\n\n年轻人可以不靠父母在大城市买房吗？\n\n对于70后而言，这样的想法叫志气；对于80后而言，想要实现靠机遇；对于90后而言，如果还抱着这样的想法，只能说是学生气。\n\n如果你的家庭有足够的实力，我强烈建议你们尽早在一线城市买房。\n\n如果负担太大，也可以退而求其次，在重点二线城市买。\n\n**中国未来的房价地图也会围绕三大都市圈和个别的交通枢纽城市展开。或许短期内房价会波动，但从长期看，依然会升值。**\n\n这是我的判断，并且我对自己的判断很有信心。\n\n如果你的家庭无法支撑起你在一二线城市买房，你也可以有两种选择：\n\n在大城市租房打拼，我知道这样会很辛苦，但多少会给你带来改一点变命运的机会。\n\n回到你的家乡，那里有你童年的记忆和年迈的父母亲戚，但可能没有你孩子的未来（原因见人口的流动）。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_18.jpg)\n\n（有网友说，这就像一群没核的红细胞从肢体末端蜂拥至心脏）\n\n**这两个选择没有对错，但每种选择都有其代价，而人生，则是一个又一个选择叠加起来的总和。**\n\n十年后你所站立的地方，你下一代所站立的起点，都是你今天的选择所带来的结果。\n\n\n\nP.s\n\n关于房价，其实还有很多因素可以讲，比如土地供应、货币超发等等，但这些都不是决定性因素，而且这篇文章已经快6000字了，就不再多说了。\n\n关于中国的三大都市圈和个别的交通枢纽城市，我会另写一篇。\n\n再P.s\n\n**总有人问，为什么每次越调控房价涨得越快。\n\n其实他们是把因果关系搞反了。\n\n并不是因为调控导致房价上涨，而是房价本来就要往上涨，但政府通过各种手段（限价、限售等）强行暂停了房价的上涨。所以一旦调控放开之后，房价立即就会补涨。**\n\n对于房价的管制，北大的薛兆丰老师有一个比喻：\n\n你仅仅按住价格，并不能改变价格背后的现实。这好比你管不住温度，却非要去管温度计一样荒唐。\n\n再再P.s\n\n《魔鬼经济学》中有一句话我印象非常深刻：\n\n“如果说伦理道德代表了我们心目中理想的社会运行模式的话，那么经济学就是在向我们描述这个社会到底是如何运行的。”\n\n很多时候，我们乐于相信生活应该是什么样子的，但沉溺在自己的理想世界并不能解决任何问题，看清现实，早做打算，才是对自己的人生负责。\n\n这篇文章虽然一点也不温暖，甚至有点冷漠，但我相信看完后它会对你有所帮助。\n\n转载自 [雪球](https://xueqiu.com/) [资本x时代](https://xueqiu.com/3862764140/94861157?from=timeline&isappinstalled=0)","source":"_posts/高房价背后的真实逻辑（深度长篇分析）.md","raw":"---\ntitle: 高房价背后的真实逻辑（深度长篇分析）\npermalink: the-real-logic-behind-the-high-house-price-(a-long-analysis-of-the-depth)\ntags:\n  - 生活\n  - 房子\n  - 转载\ncategories: 其他\ndate: 2017-11-05 14:21:58\n---\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_01.jpg)\n>这篇文章不做好和坏的价值判断，只谈现象背后的逻辑和规律。\n>我会向你表达我真实的看法，但文章的结论可能会有点残酷。\n>要不要往下读，取决于你自己。\n>但我相信，尽早看清现实，早做打算，能够帮助你在人生的关键路口做出正确的判断。\n#### 01\n马太效应（强者愈强，弱者愈弱）是世间最冰冷的规则，却又无处不在。\n2015年，公众号“城市数据团”发表了一篇爆文《逃离你终将衰落的家乡》。文章以各省人口流动的大数据（2005年-2010年）为依据，得出了一个残酷的结论：\n\n**大都市就像抽水机，不停地从落后省份抽取劳动力，或许将来的某一天，我们就会像今天的日本一样，无数村庄和城镇凋零衰败，但东京和大阪都市圈繁华依旧。**\n\n大都市将毫不留情地吸干周边地区的血液，以便自己能够生存。残酷吗？不，因为这是年轻劳动力自己用脚（投票）投出的结果。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_02.jpg)\n（图片来自“城市数据团”）\n\n而由人口迁徙引申出来的推论，则更加触目惊心：\n\n你还能在这些选择（逃离北上广还是逃回北上广）中犹豫，说明你无比幸福，因为你们的下一代和下下一代可能不会再有任何选择的机会。假如你最终选择留在了一个生活安逸风景如画的小城镇上，你也许会幸福地过完一生；但在你的子女到了你这个年纪的时候，很可能他们有且只有一个选择，那就是——逃离他们终将衰落的家乡。\n\n我曾在《社会即将分层，你将会在第几层？》一文中引用了“城市数据团”的分析结论。\n\n当时有一些人对结论持怀疑和反对态度，因为他们相信政府调控的力量。\n\n政府一边限定了特大城市的常驻人口指标，一边强调要引导中心城市人口向周边转移（如某部委印发了《全国国土规划纲要》）。\n\n控制特大城市规模，让各个区域平衡发展是政府调控的目标。\n\n那么，现实情况又是怎样？\n\n揭开答案前，先来看看日本的情况。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_03.jpg)\n日本有三个地方GDP特别高，那就是东京、名古屋和大阪，这三个地方的GDP加起来，占全日本GDP总量的80%以上，所以这三个地方又被称为日本的三大都市圈。\n\n根据日本总务省2014年公布的数据，三大都市圈人口总数高达6439.33万人，占日本全国总人口的50.93%，\n\n到了2017年，这个数据变成了6453.26万人，人口数占比达到了51.38%。\n\n也就是说，哪怕是在人口负增长的国家，人们依然在源源不断地向发达地区聚集。\n\n这就是人口的聚集效应。\n\n中国聚集效应则更加明显。\n\n今年年初，“城市数据团”发布了文章《曾经熟悉的家乡终将成为倍感孤独的地方》。文章根据2014年-2016年春运大数据，再次揭示了这个残酷的事实：\n\n**相比于2005-2010年期间的数据，最近3年全国人口流动的集聚程度仍然在进一步地提高。**\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_04.jpg)\n\n**大城市的人口抽血能力并没有减缓，反而在持续地加强。**\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_05.jpg)\n\n**更多地方的人们愿意跋涉更远的距离，承担更高的成本，以逃离他们的家乡。**\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_06.jpg)\n\n（一线城市从全国人口抽血盛况）\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_07.jpg)\n\n（准一线城市抽血地图）\n\n为什么会这样？\n\n有网友给出了这样的答案：\n\n人向大城市集中，因为大城市有更多的就业机会，有更好的发展，比如做IT的，就要往北上杭深走；但是，很少有大城市的人走向小城市去，因为小城市有的，大城市基本也有。另外，交通的发展也导致了大城市对小城市人员的吸引，在前些年高铁热的时候，基本所有的地方政府都认为高铁来了，钱就到了，但更多的是，高铁来了，人就走了。具体到我们家来说，县里只有几家大企业，能做的是制造业、商业这些，但这些需要的工人较多，走出去的大学生很少去做这个；另一方面，你在外读书期间习惯了大城市的生活，读书馆、电影院、博物馆、书店、游乐场，县里没有啊。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_08.jpg)\n\n很多人误以为政府的调控是无所不能的，他们错了。\n\n社会运行自有其内在规律。\n\n**人口迁移遵循聚集效应，社会发展遵循马太效应。**\n\n大都市拥有优质的政治资源、商业资源、教育资源、人力资源……这些优质资源吸引着无数优秀的年轻人，而优秀的年轻人将推动大都市的繁荣发展，从而让大都市获取更多的资源，于是形成了一个优势迭代的良性循环，这就是马太效应中的强者愈强。\n\n然而，大都市在攫取优秀人才的同时，也在用高额的房价和户籍制度将千千万万的普通人挤到繁华都市的边缘，将他们赶到逼仄的地下室，脏乱的出租房，直到他们梦碎的那一天，收起行囊，滚回家乡，然后他们的下一代再背起行囊，逃离家乡。\n\n这就是马太效应的另一面，弱者愈弱。\n\n这听起来非常残酷，却又无比现实。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_09.jpg)\n\n#### 02\n前几天我发起了关于房价的意见征集，有一位读者给我留言说：\n\n我们在北京的时候年收入近50万买不起房子，后果就是举家撤离，再也无法享受北京的生活便利、以及包括医疗和教育在内的各种资源。离开北京一年了，和其他地方相比，感觉北京除了房子贵，其他都是相当便宜的！现在后悔得很，买不起房直接导致我和孩子们命运轨迹的改变！所以，在北京，只要有预估能力，就应该贷款买房！\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_10.jpg)\n\n这条留言指出了房子的真正价值。\n\n**当你买房的时候，买的并不仅仅是一个遮风避雨的居住场所，还包括周边提供的医疗、教育、交通、娱乐、公用服务以及发展机遇。**\n\n比如说，北大的很多课程都是对外开放的，如果你住在北大边上，你可以免费享受中国最顶尖的教育资源。\n\n再拿学区房为例。\n\n很多人说，天价学区房是国人的焦虑感和功利性心态造就的，但他们不知道，学区房的概念其实起源于美国。\n\n吴军老师在他的专栏写过一篇文章《怎么看名校毕业生在北京买不起学区房》，里面有这样一段介绍：\n\n美国好学区的房价和差学区的房价差别比中国要厉害得多，很多时候，隔着一条街，房价可以差几倍。在硅谷中心的帕罗阿图市（Palo Alto虽然叫做城市，但它只有两万人，相当于中国的一个小镇），处于中值水平的独栋房房价在300万美元以上，而和它只隔着一条马路的东帕罗阿图中位数房价只有60-80万美元左右。\n\n这两个区的差别有多大呢？一边住着拉里·佩奇、扎克伯格，以及很多斯坦福的教授，过去乔布斯也在那里，另一边是很多中低收入的墨西哥裔居民，包括不少非法移民。\n\n在美国，没有人觉得这种划分学区的方法有什么不好，因为大家习惯了。但是久而久之，学区好的地方聚集着比较体面、富有的一些家庭，不好的学区，整个条件都比较差，这是一个事实，而且很长时间几乎没有改变过。\n\n万维钢老师在《美国教育各阶层分析》一文中也提到了类似的观点：\n\n美国是个有严重阶层区分的国家，各社区按房价自然分开，在某种意义上是事实上的种族和贫富隔离。公立中小学的经费主要由所在学区的房产税而来，这意味着两点：第一，富人区的学校更有钱，可以请更好的老师、用更好的设备、有更高的教学水平；第二，学生们其实是在跟自己同阶层的人一起上学。\n\n教育资源不是标注品，必定有高下之分，而优质的教育资源永远是稀缺的。\n\n**学区房的出现，本质上是一种教育资源的分配方案。**\n\n当你买下学区房的时候，买的是下一代接受良好教育的入场券。\n\n\n\n#### 03\n\n**“房子是用来住的，不是用来炒的。”**\n\n今年的大会，这句话非常鼓舞人心。\n\n但有太多人误解了这句话。\n\n其完全的表述是：\n\n“坚持房子是用来住的、不是用来炒的定位，加快建立多主体供给、多渠道保障、租购并举的住房制度，让全体人民住有所居。”\n\n什么叫多渠道保障？\n\n什么叫租购并举？\n\n什么叫让你住有所居？\n\n**大会只承诺了房子的居住功能，并没有承诺你可以轻易地拥有房屋的产权，更没有承诺你能拥有房子背后的隐性价值。**\n\n其实早在去年3月的时候，发改委主任就曾提出：现在我国租房比例太低，购和租要并举。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_11.jpg)\n\n政策的大方向是要推广房屋租赁，而不是让你买得起房。\n\n是政府不重视民生问题吗？\n\n并不是。\n\n先来看看国外的情况。\n\n根据欧盟统计局2014年的数据，欧盟28国的所有人口中，有近三成(29.9%)的人是租房子住的，其中德国的租房比例达到了47.5%，仅52.5%的人居住在自有住房内。\n\n也就是说，将近一半的德国人都是租房的。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_12.jpg)\n\n美国的情况也是类似。\n\n根据皮尤研究中心的一项调查显示，2006年，57%的35岁以下家庭是租房子居住的。到了2016年，这个比例已经提高到了65%\n\n把年龄放宽一点，35至44岁的美国家庭中，租房的比例依然高达41%。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_13.jpg)\n\n这还只是平均数据，如果把目光聚焦到全球范围内的一线城市，当地人拥有住房的比例更低。\n\n比如德国的首都柏林，住房拥有率只有15.6%，有将近85%的人都只能租房子住。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_14.jpg)\n\n（图片来自公众号“财经连环话”）\n\n再来看看我们的春运人口迁移图你就会明白：\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_15.jpg)\n\n中国的人口基数太大了，但大城市的土地资源是有限的。\n\n在有限的土地上，怎么可能满足所有人在大城市买房的需求？\n\n唯有加快推广租赁。\n\n从这一点来讲，租售并举的政策大方向是没错的。\n\n但连带提出的“租售同权”则纯粹是在画大饼了。\n\n\n\n#### 04\n\n今年7月，一篇名为《突发，楼市巨变！广州宣布：租售同权》的文章突然刷屏了，原因是广州出台了《关于印发广州市加快发展住房租赁市场工作方案的通知》，通知里有这么一句话：\n\n“赋予符合条件的承租人子女享有就近入学等公共服务权益，保障租购同权。”\n\n于是那篇爆文的作者这样解读道：\n\n从今天开始，中国的买房终于和教育资源脱钩了，没有房，小孩照样可以上学了。\n\n这绝对是一次历史创举，具体未来的影响可能远超我们的想象，但绝对是我们现在无法估量的。\n\n但就像我在前面说了，**学区房的本质是一种教育资源的分配方案。**\n\n在教育资源没有变多，而大城市人口还在不断聚集的情况下，“租售同权”完全是个伪概念。\n\n当适龄的报名儿童超过学校招生计划时，学校会怎么做？\n\n杭州就有关于“一表生”、“二表生”的录取规则。\n\n即学校应该根据学龄儿童户籍和家庭住宅情况，按照“住、户一致”优先原则，按下面四种先后顺序录取：\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_16.jpg)\n\n#### 05\n\n楼市有泡沫吗？\n\n有啊，但不在一线城市，而是在三四五六线城市。\n\n2016年和2017年经历了两波房价的暴涨，但这两波的性质是不同的。\n\n**2016年的那波暴涨，是因为实业资本转移到了一二线城市的楼市，推高了房价，随后炒房团涌入，再次推高房价，但钱都是流向大城市的。**\n\n但2017年这一波就不一样了。\n\n因为2016年的这波暴涨，政府开始调控了。\n\n42个大城市（截止9月23日）先后出台了限售、限购等政策，炒房团买不了房了，于是纷纷涌向了三四线城市。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_17.jpg)\n\n但是，在三四线城市：\n\n有优质的教育资源吗？\n\n有优质的医疗服务吗？\n\n有丰富的娱乐场所吗？\n\n有良好的公共服务吗？\n\n有广阔的发展机遇吗？\n\n都没有。\n\n这不过是一场击鼓传花的游戏。\n\n最后接盘的那些投机客，他们将会为自己炒高房价的行为付出代价。\n\n\n\n#### 06\n\n经济学家马光远提出过楼市的后视镜原理：\n\n从房价的基本规律看，在一个国家城市的人口净增加，一个国家的人口转折点没有到来，以及一个国家的人均GDP尚未超越中等收入水平的情况下，资产价格长期的趋势仍然是向上的，无一例外。今天看到的资产价格的高点，明天很可能只是半山腰而已。\n\n回顾过去20年中国房价，站在当时的时空下，每年都觉得房价很高，但回过头看，那些以前认为高不可攀的价格，现在看起来是不是很便宜？\n\n这就是房价的“后视镜”原理。\n\n只要中国的经济持续向前发展，大城市的房子就依然会升值。\n\n**这里的大城市，是指四个一线城市及杭州、南京、苏州等几个重点二线城市。**\n\n这些大城市的房价中，包含了教育、医疗、交通、娱乐、公共服务、发展机遇等隐性价值，正是这些隐性价值支撑着其高昂的房价。\n\n要记住一点：**优质的资源永远是稀缺的，稀缺的资源永远是昂贵的。**\n\n土地的总量是有限的，而想要定居大城市的人是源源不断的。\n\n大城市好地段的房子是有形且有限的资源，买房的本质就是占有资源。\n\n还要记住的一点是：**财富是以家庭为单位的。**\n\n我以前写过这么一段话：\n\n年轻人可以不靠父母在大城市买房吗？\n\n对于70后而言，这样的想法叫志气；对于80后而言，想要实现靠机遇；对于90后而言，如果还抱着这样的想法，只能说是学生气。\n\n如果你的家庭有足够的实力，我强烈建议你们尽早在一线城市买房。\n\n如果负担太大，也可以退而求其次，在重点二线城市买。\n\n**中国未来的房价地图也会围绕三大都市圈和个别的交通枢纽城市展开。或许短期内房价会波动，但从长期看，依然会升值。**\n\n这是我的判断，并且我对自己的判断很有信心。\n\n如果你的家庭无法支撑起你在一二线城市买房，你也可以有两种选择：\n\n在大城市租房打拼，我知道这样会很辛苦，但多少会给你带来改一点变命运的机会。\n\n回到你的家乡，那里有你童年的记忆和年迈的父母亲戚，但可能没有你孩子的未来（原因见人口的流动）。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_18.jpg)\n\n（有网友说，这就像一群没核的红细胞从肢体末端蜂拥至心脏）\n\n**这两个选择没有对错，但每种选择都有其代价，而人生，则是一个又一个选择叠加起来的总和。**\n\n十年后你所站立的地方，你下一代所站立的起点，都是你今天的选择所带来的结果。\n\n\n\nP.s\n\n关于房价，其实还有很多因素可以讲，比如土地供应、货币超发等等，但这些都不是决定性因素，而且这篇文章已经快6000字了，就不再多说了。\n\n关于中国的三大都市圈和个别的交通枢纽城市，我会另写一篇。\n\n再P.s\n\n**总有人问，为什么每次越调控房价涨得越快。\n\n其实他们是把因果关系搞反了。\n\n并不是因为调控导致房价上涨，而是房价本来就要往上涨，但政府通过各种手段（限价、限售等）强行暂停了房价的上涨。所以一旦调控放开之后，房价立即就会补涨。**\n\n对于房价的管制，北大的薛兆丰老师有一个比喻：\n\n你仅仅按住价格，并不能改变价格背后的现实。这好比你管不住温度，却非要去管温度计一样荒唐。\n\n再再P.s\n\n《魔鬼经济学》中有一句话我印象非常深刻：\n\n“如果说伦理道德代表了我们心目中理想的社会运行模式的话，那么经济学就是在向我们描述这个社会到底是如何运行的。”\n\n很多时候，我们乐于相信生活应该是什么样子的，但沉溺在自己的理想世界并不能解决任何问题，看清现实，早做打算，才是对自己的人生负责。\n\n这篇文章虽然一点也不温暖，甚至有点冷漠，但我相信看完后它会对你有所帮助。\n\n转载自 [雪球](https://xueqiu.com/) [资本x时代](https://xueqiu.com/3862764140/94861157?from=timeline&isappinstalled=0)","slug":"the-real-logic-behind-the-high-house-price-(a-long-analysis-of-the-depth)","published":1,"updated":"2018-03-25T13:41:10.852Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjf6wl6qg00242gtpbltnv9no","content":"<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_01.jpg\" alt=\"image\"></p>\n<blockquote>\n<p>这篇文章不做好和坏的价值判断，只谈现象背后的逻辑和规律。<br>我会向你表达我真实的看法，但文章的结论可能会有点残酷。<br>要不要往下读，取决于你自己。<br>但我相信，尽早看清现实，早做打算，能够帮助你在人生的关键路口做出正确的判断。</p>\n</blockquote>\n<h4 id=\"01\"><a href=\"#01\" class=\"headerlink\" title=\"01\"></a>01</h4><p>马太效应（强者愈强，弱者愈弱）是世间最冰冷的规则，却又无处不在。<br>2015年，公众号“城市数据团”发表了一篇爆文《逃离你终将衰落的家乡》。文章以各省人口流动的大数据（2005年-2010年）为依据，得出了一个残酷的结论：</p>\n<p><strong>大都市就像抽水机，不停地从落后省份抽取劳动力，或许将来的某一天，我们就会像今天的日本一样，无数村庄和城镇凋零衰败，但东京和大阪都市圈繁华依旧。</strong></p>\n<p>大都市将毫不留情地吸干周边地区的血液，以便自己能够生存。残酷吗？不，因为这是年轻劳动力自己用脚（投票）投出的结果。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_02.jpg\" alt=\"image\"><br>（图片来自“城市数据团”）</p>\n<p>而由人口迁徙引申出来的推论，则更加触目惊心：</p>\n<p>你还能在这些选择（逃离北上广还是逃回北上广）中犹豫，说明你无比幸福，因为你们的下一代和下下一代可能不会再有任何选择的机会。假如你最终选择留在了一个生活安逸风景如画的小城镇上，你也许会幸福地过完一生；但在你的子女到了你这个年纪的时候，很可能他们有且只有一个选择，那就是——逃离他们终将衰落的家乡。</p>\n<p>我曾在《社会即将分层，你将会在第几层？》一文中引用了“城市数据团”的分析结论。</p>\n<p>当时有一些人对结论持怀疑和反对态度，因为他们相信政府调控的力量。</p>\n<p>政府一边限定了特大城市的常驻人口指标，一边强调要引导中心城市人口向周边转移（如某部委印发了《全国国土规划纲要》）。</p>\n<p>控制特大城市规模，让各个区域平衡发展是政府调控的目标。</p>\n<p>那么，现实情况又是怎样？</p>\n<p>揭开答案前，先来看看日本的情况。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_03.jpg\" alt=\"image\"><br>日本有三个地方GDP特别高，那就是东京、名古屋和大阪，这三个地方的GDP加起来，占全日本GDP总量的80%以上，所以这三个地方又被称为日本的三大都市圈。</p>\n<p>根据日本总务省2014年公布的数据，三大都市圈人口总数高达6439.33万人，占日本全国总人口的50.93%，</p>\n<p>到了2017年，这个数据变成了6453.26万人，人口数占比达到了51.38%。</p>\n<p>也就是说，哪怕是在人口负增长的国家，人们依然在源源不断地向发达地区聚集。</p>\n<p>这就是人口的聚集效应。</p>\n<p>中国聚集效应则更加明显。</p>\n<p>今年年初，“城市数据团”发布了文章《曾经熟悉的家乡终将成为倍感孤独的地方》。文章根据2014年-2016年春运大数据，再次揭示了这个残酷的事实：</p>\n<p><strong>相比于2005-2010年期间的数据，最近3年全国人口流动的集聚程度仍然在进一步地提高。</strong></p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_04.jpg\" alt=\"image\"></p>\n<p><strong>大城市的人口抽血能力并没有减缓，反而在持续地加强。</strong></p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_05.jpg\" alt=\"image\"></p>\n<p><strong>更多地方的人们愿意跋涉更远的距离，承担更高的成本，以逃离他们的家乡。</strong></p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_06.jpg\" alt=\"image\"></p>\n<p>（一线城市从全国人口抽血盛况）</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_07.jpg\" alt=\"image\"></p>\n<p>（准一线城市抽血地图）</p>\n<p>为什么会这样？</p>\n<p>有网友给出了这样的答案：</p>\n<p>人向大城市集中，因为大城市有更多的就业机会，有更好的发展，比如做IT的，就要往北上杭深走；但是，很少有大城市的人走向小城市去，因为小城市有的，大城市基本也有。另外，交通的发展也导致了大城市对小城市人员的吸引，在前些年高铁热的时候，基本所有的地方政府都认为高铁来了，钱就到了，但更多的是，高铁来了，人就走了。具体到我们家来说，县里只有几家大企业，能做的是制造业、商业这些，但这些需要的工人较多，走出去的大学生很少去做这个；另一方面，你在外读书期间习惯了大城市的生活，读书馆、电影院、博物馆、书店、游乐场，县里没有啊。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_08.jpg\" alt=\"image\"></p>\n<p>很多人误以为政府的调控是无所不能的，他们错了。</p>\n<p>社会运行自有其内在规律。</p>\n<p><strong>人口迁移遵循聚集效应，社会发展遵循马太效应。</strong></p>\n<p>大都市拥有优质的政治资源、商业资源、教育资源、人力资源……这些优质资源吸引着无数优秀的年轻人，而优秀的年轻人将推动大都市的繁荣发展，从而让大都市获取更多的资源，于是形成了一个优势迭代的良性循环，这就是马太效应中的强者愈强。</p>\n<p>然而，大都市在攫取优秀人才的同时，也在用高额的房价和户籍制度将千千万万的普通人挤到繁华都市的边缘，将他们赶到逼仄的地下室，脏乱的出租房，直到他们梦碎的那一天，收起行囊，滚回家乡，然后他们的下一代再背起行囊，逃离家乡。</p>\n<p>这就是马太效应的另一面，弱者愈弱。</p>\n<p>这听起来非常残酷，却又无比现实。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_09.jpg\" alt=\"image\"></p>\n<h4 id=\"02\"><a href=\"#02\" class=\"headerlink\" title=\"02\"></a>02</h4><p>前几天我发起了关于房价的意见征集，有一位读者给我留言说：</p>\n<p>我们在北京的时候年收入近50万买不起房子，后果就是举家撤离，再也无法享受北京的生活便利、以及包括医疗和教育在内的各种资源。离开北京一年了，和其他地方相比，感觉北京除了房子贵，其他都是相当便宜的！现在后悔得很，买不起房直接导致我和孩子们命运轨迹的改变！所以，在北京，只要有预估能力，就应该贷款买房！</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_10.jpg\" alt=\"image\"></p>\n<p>这条留言指出了房子的真正价值。</p>\n<p><strong>当你买房的时候，买的并不仅仅是一个遮风避雨的居住场所，还包括周边提供的医疗、教育、交通、娱乐、公用服务以及发展机遇。</strong></p>\n<p>比如说，北大的很多课程都是对外开放的，如果你住在北大边上，你可以免费享受中国最顶尖的教育资源。</p>\n<p>再拿学区房为例。</p>\n<p>很多人说，天价学区房是国人的焦虑感和功利性心态造就的，但他们不知道，学区房的概念其实起源于美国。</p>\n<p>吴军老师在他的专栏写过一篇文章《怎么看名校毕业生在北京买不起学区房》，里面有这样一段介绍：</p>\n<p>美国好学区的房价和差学区的房价差别比中国要厉害得多，很多时候，隔着一条街，房价可以差几倍。在硅谷中心的帕罗阿图市（Palo Alto虽然叫做城市，但它只有两万人，相当于中国的一个小镇），处于中值水平的独栋房房价在300万美元以上，而和它只隔着一条马路的东帕罗阿图中位数房价只有60-80万美元左右。</p>\n<p>这两个区的差别有多大呢？一边住着拉里·佩奇、扎克伯格，以及很多斯坦福的教授，过去乔布斯也在那里，另一边是很多中低收入的墨西哥裔居民，包括不少非法移民。</p>\n<p>在美国，没有人觉得这种划分学区的方法有什么不好，因为大家习惯了。但是久而久之，学区好的地方聚集着比较体面、富有的一些家庭，不好的学区，整个条件都比较差，这是一个事实，而且很长时间几乎没有改变过。</p>\n<p>万维钢老师在《美国教育各阶层分析》一文中也提到了类似的观点：</p>\n<p>美国是个有严重阶层区分的国家，各社区按房价自然分开，在某种意义上是事实上的种族和贫富隔离。公立中小学的经费主要由所在学区的房产税而来，这意味着两点：第一，富人区的学校更有钱，可以请更好的老师、用更好的设备、有更高的教学水平；第二，学生们其实是在跟自己同阶层的人一起上学。</p>\n<p>教育资源不是标注品，必定有高下之分，而优质的教育资源永远是稀缺的。</p>\n<p><strong>学区房的出现，本质上是一种教育资源的分配方案。</strong></p>\n<p>当你买下学区房的时候，买的是下一代接受良好教育的入场券。</p>\n<h4 id=\"03\"><a href=\"#03\" class=\"headerlink\" title=\"03\"></a>03</h4><p><strong>“房子是用来住的，不是用来炒的。”</strong></p>\n<p>今年的大会，这句话非常鼓舞人心。</p>\n<p>但有太多人误解了这句话。</p>\n<p>其完全的表述是：</p>\n<p>“坚持房子是用来住的、不是用来炒的定位，加快建立多主体供给、多渠道保障、租购并举的住房制度，让全体人民住有所居。”</p>\n<p>什么叫多渠道保障？</p>\n<p>什么叫租购并举？</p>\n<p>什么叫让你住有所居？</p>\n<p><strong>大会只承诺了房子的居住功能，并没有承诺你可以轻易地拥有房屋的产权，更没有承诺你能拥有房子背后的隐性价值。</strong></p>\n<p>其实早在去年3月的时候，发改委主任就曾提出：现在我国租房比例太低，购和租要并举。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_11.jpg\" alt=\"image\"></p>\n<p>政策的大方向是要推广房屋租赁，而不是让你买得起房。</p>\n<p>是政府不重视民生问题吗？</p>\n<p>并不是。</p>\n<p>先来看看国外的情况。</p>\n<p>根据欧盟统计局2014年的数据，欧盟28国的所有人口中，有近三成(29.9%)的人是租房子住的，其中德国的租房比例达到了47.5%，仅52.5%的人居住在自有住房内。</p>\n<p>也就是说，将近一半的德国人都是租房的。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_12.jpg\" alt=\"image\"></p>\n<p>美国的情况也是类似。</p>\n<p>根据皮尤研究中心的一项调查显示，2006年，57%的35岁以下家庭是租房子居住的。到了2016年，这个比例已经提高到了65%</p>\n<p>把年龄放宽一点，35至44岁的美国家庭中，租房的比例依然高达41%。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_13.jpg\" alt=\"image\"></p>\n<p>这还只是平均数据，如果把目光聚焦到全球范围内的一线城市，当地人拥有住房的比例更低。</p>\n<p>比如德国的首都柏林，住房拥有率只有15.6%，有将近85%的人都只能租房子住。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_14.jpg\" alt=\"image\"></p>\n<p>（图片来自公众号“财经连环话”）</p>\n<p>再来看看我们的春运人口迁移图你就会明白：</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_15.jpg\" alt=\"image\"></p>\n<p>中国的人口基数太大了，但大城市的土地资源是有限的。</p>\n<p>在有限的土地上，怎么可能满足所有人在大城市买房的需求？</p>\n<p>唯有加快推广租赁。</p>\n<p>从这一点来讲，租售并举的政策大方向是没错的。</p>\n<p>但连带提出的“租售同权”则纯粹是在画大饼了。</p>\n<h4 id=\"04\"><a href=\"#04\" class=\"headerlink\" title=\"04\"></a>04</h4><p>今年7月，一篇名为《突发，楼市巨变！广州宣布：租售同权》的文章突然刷屏了，原因是广州出台了《关于印发广州市加快发展住房租赁市场工作方案的通知》，通知里有这么一句话：</p>\n<p>“赋予符合条件的承租人子女享有就近入学等公共服务权益，保障租购同权。”</p>\n<p>于是那篇爆文的作者这样解读道：</p>\n<p>从今天开始，中国的买房终于和教育资源脱钩了，没有房，小孩照样可以上学了。</p>\n<p>这绝对是一次历史创举，具体未来的影响可能远超我们的想象，但绝对是我们现在无法估量的。</p>\n<p>但就像我在前面说了，<strong>学区房的本质是一种教育资源的分配方案。</strong></p>\n<p>在教育资源没有变多，而大城市人口还在不断聚集的情况下，“租售同权”完全是个伪概念。</p>\n<p>当适龄的报名儿童超过学校招生计划时，学校会怎么做？</p>\n<p>杭州就有关于“一表生”、“二表生”的录取规则。</p>\n<p>即学校应该根据学龄儿童户籍和家庭住宅情况，按照“住、户一致”优先原则，按下面四种先后顺序录取：</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_16.jpg\" alt=\"image\"></p>\n<h4 id=\"05\"><a href=\"#05\" class=\"headerlink\" title=\"05\"></a>05</h4><p>楼市有泡沫吗？</p>\n<p>有啊，但不在一线城市，而是在三四五六线城市。</p>\n<p>2016年和2017年经历了两波房价的暴涨，但这两波的性质是不同的。</p>\n<p><strong>2016年的那波暴涨，是因为实业资本转移到了一二线城市的楼市，推高了房价，随后炒房团涌入，再次推高房价，但钱都是流向大城市的。</strong></p>\n<p>但2017年这一波就不一样了。</p>\n<p>因为2016年的这波暴涨，政府开始调控了。</p>\n<p>42个大城市（截止9月23日）先后出台了限售、限购等政策，炒房团买不了房了，于是纷纷涌向了三四线城市。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_17.jpg\" alt=\"image\"></p>\n<p>但是，在三四线城市：</p>\n<p>有优质的教育资源吗？</p>\n<p>有优质的医疗服务吗？</p>\n<p>有丰富的娱乐场所吗？</p>\n<p>有良好的公共服务吗？</p>\n<p>有广阔的发展机遇吗？</p>\n<p>都没有。</p>\n<p>这不过是一场击鼓传花的游戏。</p>\n<p>最后接盘的那些投机客，他们将会为自己炒高房价的行为付出代价。</p>\n<h4 id=\"06\"><a href=\"#06\" class=\"headerlink\" title=\"06\"></a>06</h4><p>经济学家马光远提出过楼市的后视镜原理：</p>\n<p>从房价的基本规律看，在一个国家城市的人口净增加，一个国家的人口转折点没有到来，以及一个国家的人均GDP尚未超越中等收入水平的情况下，资产价格长期的趋势仍然是向上的，无一例外。今天看到的资产价格的高点，明天很可能只是半山腰而已。</p>\n<p>回顾过去20年中国房价，站在当时的时空下，每年都觉得房价很高，但回过头看，那些以前认为高不可攀的价格，现在看起来是不是很便宜？</p>\n<p>这就是房价的“后视镜”原理。</p>\n<p>只要中国的经济持续向前发展，大城市的房子就依然会升值。</p>\n<p><strong>这里的大城市，是指四个一线城市及杭州、南京、苏州等几个重点二线城市。</strong></p>\n<p>这些大城市的房价中，包含了教育、医疗、交通、娱乐、公共服务、发展机遇等隐性价值，正是这些隐性价值支撑着其高昂的房价。</p>\n<p>要记住一点：<strong>优质的资源永远是稀缺的，稀缺的资源永远是昂贵的。</strong></p>\n<p>土地的总量是有限的，而想要定居大城市的人是源源不断的。</p>\n<p>大城市好地段的房子是有形且有限的资源，买房的本质就是占有资源。</p>\n<p>还要记住的一点是：<strong>财富是以家庭为单位的。</strong></p>\n<p>我以前写过这么一段话：</p>\n<p>年轻人可以不靠父母在大城市买房吗？</p>\n<p>对于70后而言，这样的想法叫志气；对于80后而言，想要实现靠机遇；对于90后而言，如果还抱着这样的想法，只能说是学生气。</p>\n<p>如果你的家庭有足够的实力，我强烈建议你们尽早在一线城市买房。</p>\n<p>如果负担太大，也可以退而求其次，在重点二线城市买。</p>\n<p><strong>中国未来的房价地图也会围绕三大都市圈和个别的交通枢纽城市展开。或许短期内房价会波动，但从长期看，依然会升值。</strong></p>\n<p>这是我的判断，并且我对自己的判断很有信心。</p>\n<p>如果你的家庭无法支撑起你在一二线城市买房，你也可以有两种选择：</p>\n<p>在大城市租房打拼，我知道这样会很辛苦，但多少会给你带来改一点变命运的机会。</p>\n<p>回到你的家乡，那里有你童年的记忆和年迈的父母亲戚，但可能没有你孩子的未来（原因见人口的流动）。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_18.jpg\" alt=\"image\"></p>\n<p>（有网友说，这就像一群没核的红细胞从肢体末端蜂拥至心脏）</p>\n<p><strong>这两个选择没有对错，但每种选择都有其代价，而人生，则是一个又一个选择叠加起来的总和。</strong></p>\n<p>十年后你所站立的地方，你下一代所站立的起点，都是你今天的选择所带来的结果。</p>\n<p>P.s</p>\n<p>关于房价，其实还有很多因素可以讲，比如土地供应、货币超发等等，但这些都不是决定性因素，而且这篇文章已经快6000字了，就不再多说了。</p>\n<p>关于中国的三大都市圈和个别的交通枢纽城市，我会另写一篇。</p>\n<p>再P.s</p>\n<p>**总有人问，为什么每次越调控房价涨得越快。</p>\n<p>其实他们是把因果关系搞反了。</p>\n<p>并不是因为调控导致房价上涨，而是房价本来就要往上涨，但政府通过各种手段（限价、限售等）强行暂停了房价的上涨。所以一旦调控放开之后，房价立即就会补涨。**</p>\n<p>对于房价的管制，北大的薛兆丰老师有一个比喻：</p>\n<p>你仅仅按住价格，并不能改变价格背后的现实。这好比你管不住温度，却非要去管温度计一样荒唐。</p>\n<p>再再P.s</p>\n<p>《魔鬼经济学》中有一句话我印象非常深刻：</p>\n<p>“如果说伦理道德代表了我们心目中理想的社会运行模式的话，那么经济学就是在向我们描述这个社会到底是如何运行的。”</p>\n<p>很多时候，我们乐于相信生活应该是什么样子的，但沉溺在自己的理想世界并不能解决任何问题，看清现实，早做打算，才是对自己的人生负责。</p>\n<p>这篇文章虽然一点也不温暖，甚至有点冷漠，但我相信看完后它会对你有所帮助。</p>\n<p>转载自 <a href=\"https://xueqiu.com/\" target=\"_blank\" rel=\"noopener\">雪球</a> <a href=\"https://xueqiu.com/3862764140/94861157?from=timeline&amp;isappinstalled=0\" target=\"_blank\" rel=\"noopener\">资本x时代</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_01.jpg\" alt=\"image\"></p>\n<blockquote>\n<p>这篇文章不做好和坏的价值判断，只谈现象背后的逻辑和规律。<br>我会向你表达我真实的看法，但文章的结论可能会有点残酷。<br>要不要往下读，取决于你自己。<br>但我相信，尽早看清现实，早做打算，能够帮助你在人生的关键路口做出正确的判断。</p>\n</blockquote>\n<h4 id=\"01\"><a href=\"#01\" class=\"headerlink\" title=\"01\"></a>01</h4><p>马太效应（强者愈强，弱者愈弱）是世间最冰冷的规则，却又无处不在。<br>2015年，公众号“城市数据团”发表了一篇爆文《逃离你终将衰落的家乡》。文章以各省人口流动的大数据（2005年-2010年）为依据，得出了一个残酷的结论：</p>\n<p><strong>大都市就像抽水机，不停地从落后省份抽取劳动力，或许将来的某一天，我们就会像今天的日本一样，无数村庄和城镇凋零衰败，但东京和大阪都市圈繁华依旧。</strong></p>\n<p>大都市将毫不留情地吸干周边地区的血液，以便自己能够生存。残酷吗？不，因为这是年轻劳动力自己用脚（投票）投出的结果。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_02.jpg\" alt=\"image\"><br>（图片来自“城市数据团”）</p>\n<p>而由人口迁徙引申出来的推论，则更加触目惊心：</p>\n<p>你还能在这些选择（逃离北上广还是逃回北上广）中犹豫，说明你无比幸福，因为你们的下一代和下下一代可能不会再有任何选择的机会。假如你最终选择留在了一个生活安逸风景如画的小城镇上，你也许会幸福地过完一生；但在你的子女到了你这个年纪的时候，很可能他们有且只有一个选择，那就是——逃离他们终将衰落的家乡。</p>\n<p>我曾在《社会即将分层，你将会在第几层？》一文中引用了“城市数据团”的分析结论。</p>\n<p>当时有一些人对结论持怀疑和反对态度，因为他们相信政府调控的力量。</p>\n<p>政府一边限定了特大城市的常驻人口指标，一边强调要引导中心城市人口向周边转移（如某部委印发了《全国国土规划纲要》）。</p>\n<p>控制特大城市规模，让各个区域平衡发展是政府调控的目标。</p>\n<p>那么，现实情况又是怎样？</p>\n<p>揭开答案前，先来看看日本的情况。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_03.jpg\" alt=\"image\"><br>日本有三个地方GDP特别高，那就是东京、名古屋和大阪，这三个地方的GDP加起来，占全日本GDP总量的80%以上，所以这三个地方又被称为日本的三大都市圈。</p>\n<p>根据日本总务省2014年公布的数据，三大都市圈人口总数高达6439.33万人，占日本全国总人口的50.93%，</p>\n<p>到了2017年，这个数据变成了6453.26万人，人口数占比达到了51.38%。</p>\n<p>也就是说，哪怕是在人口负增长的国家，人们依然在源源不断地向发达地区聚集。</p>\n<p>这就是人口的聚集效应。</p>\n<p>中国聚集效应则更加明显。</p>\n<p>今年年初，“城市数据团”发布了文章《曾经熟悉的家乡终将成为倍感孤独的地方》。文章根据2014年-2016年春运大数据，再次揭示了这个残酷的事实：</p>\n<p><strong>相比于2005-2010年期间的数据，最近3年全国人口流动的集聚程度仍然在进一步地提高。</strong></p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_04.jpg\" alt=\"image\"></p>\n<p><strong>大城市的人口抽血能力并没有减缓，反而在持续地加强。</strong></p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_05.jpg\" alt=\"image\"></p>\n<p><strong>更多地方的人们愿意跋涉更远的距离，承担更高的成本，以逃离他们的家乡。</strong></p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_06.jpg\" alt=\"image\"></p>\n<p>（一线城市从全国人口抽血盛况）</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_07.jpg\" alt=\"image\"></p>\n<p>（准一线城市抽血地图）</p>\n<p>为什么会这样？</p>\n<p>有网友给出了这样的答案：</p>\n<p>人向大城市集中，因为大城市有更多的就业机会，有更好的发展，比如做IT的，就要往北上杭深走；但是，很少有大城市的人走向小城市去，因为小城市有的，大城市基本也有。另外，交通的发展也导致了大城市对小城市人员的吸引，在前些年高铁热的时候，基本所有的地方政府都认为高铁来了，钱就到了，但更多的是，高铁来了，人就走了。具体到我们家来说，县里只有几家大企业，能做的是制造业、商业这些，但这些需要的工人较多，走出去的大学生很少去做这个；另一方面，你在外读书期间习惯了大城市的生活，读书馆、电影院、博物馆、书店、游乐场，县里没有啊。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_08.jpg\" alt=\"image\"></p>\n<p>很多人误以为政府的调控是无所不能的，他们错了。</p>\n<p>社会运行自有其内在规律。</p>\n<p><strong>人口迁移遵循聚集效应，社会发展遵循马太效应。</strong></p>\n<p>大都市拥有优质的政治资源、商业资源、教育资源、人力资源……这些优质资源吸引着无数优秀的年轻人，而优秀的年轻人将推动大都市的繁荣发展，从而让大都市获取更多的资源，于是形成了一个优势迭代的良性循环，这就是马太效应中的强者愈强。</p>\n<p>然而，大都市在攫取优秀人才的同时，也在用高额的房价和户籍制度将千千万万的普通人挤到繁华都市的边缘，将他们赶到逼仄的地下室，脏乱的出租房，直到他们梦碎的那一天，收起行囊，滚回家乡，然后他们的下一代再背起行囊，逃离家乡。</p>\n<p>这就是马太效应的另一面，弱者愈弱。</p>\n<p>这听起来非常残酷，却又无比现实。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_09.jpg\" alt=\"image\"></p>\n<h4 id=\"02\"><a href=\"#02\" class=\"headerlink\" title=\"02\"></a>02</h4><p>前几天我发起了关于房价的意见征集，有一位读者给我留言说：</p>\n<p>我们在北京的时候年收入近50万买不起房子，后果就是举家撤离，再也无法享受北京的生活便利、以及包括医疗和教育在内的各种资源。离开北京一年了，和其他地方相比，感觉北京除了房子贵，其他都是相当便宜的！现在后悔得很，买不起房直接导致我和孩子们命运轨迹的改变！所以，在北京，只要有预估能力，就应该贷款买房！</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_10.jpg\" alt=\"image\"></p>\n<p>这条留言指出了房子的真正价值。</p>\n<p><strong>当你买房的时候，买的并不仅仅是一个遮风避雨的居住场所，还包括周边提供的医疗、教育、交通、娱乐、公用服务以及发展机遇。</strong></p>\n<p>比如说，北大的很多课程都是对外开放的，如果你住在北大边上，你可以免费享受中国最顶尖的教育资源。</p>\n<p>再拿学区房为例。</p>\n<p>很多人说，天价学区房是国人的焦虑感和功利性心态造就的，但他们不知道，学区房的概念其实起源于美国。</p>\n<p>吴军老师在他的专栏写过一篇文章《怎么看名校毕业生在北京买不起学区房》，里面有这样一段介绍：</p>\n<p>美国好学区的房价和差学区的房价差别比中国要厉害得多，很多时候，隔着一条街，房价可以差几倍。在硅谷中心的帕罗阿图市（Palo Alto虽然叫做城市，但它只有两万人，相当于中国的一个小镇），处于中值水平的独栋房房价在300万美元以上，而和它只隔着一条马路的东帕罗阿图中位数房价只有60-80万美元左右。</p>\n<p>这两个区的差别有多大呢？一边住着拉里·佩奇、扎克伯格，以及很多斯坦福的教授，过去乔布斯也在那里，另一边是很多中低收入的墨西哥裔居民，包括不少非法移民。</p>\n<p>在美国，没有人觉得这种划分学区的方法有什么不好，因为大家习惯了。但是久而久之，学区好的地方聚集着比较体面、富有的一些家庭，不好的学区，整个条件都比较差，这是一个事实，而且很长时间几乎没有改变过。</p>\n<p>万维钢老师在《美国教育各阶层分析》一文中也提到了类似的观点：</p>\n<p>美国是个有严重阶层区分的国家，各社区按房价自然分开，在某种意义上是事实上的种族和贫富隔离。公立中小学的经费主要由所在学区的房产税而来，这意味着两点：第一，富人区的学校更有钱，可以请更好的老师、用更好的设备、有更高的教学水平；第二，学生们其实是在跟自己同阶层的人一起上学。</p>\n<p>教育资源不是标注品，必定有高下之分，而优质的教育资源永远是稀缺的。</p>\n<p><strong>学区房的出现，本质上是一种教育资源的分配方案。</strong></p>\n<p>当你买下学区房的时候，买的是下一代接受良好教育的入场券。</p>\n<h4 id=\"03\"><a href=\"#03\" class=\"headerlink\" title=\"03\"></a>03</h4><p><strong>“房子是用来住的，不是用来炒的。”</strong></p>\n<p>今年的大会，这句话非常鼓舞人心。</p>\n<p>但有太多人误解了这句话。</p>\n<p>其完全的表述是：</p>\n<p>“坚持房子是用来住的、不是用来炒的定位，加快建立多主体供给、多渠道保障、租购并举的住房制度，让全体人民住有所居。”</p>\n<p>什么叫多渠道保障？</p>\n<p>什么叫租购并举？</p>\n<p>什么叫让你住有所居？</p>\n<p><strong>大会只承诺了房子的居住功能，并没有承诺你可以轻易地拥有房屋的产权，更没有承诺你能拥有房子背后的隐性价值。</strong></p>\n<p>其实早在去年3月的时候，发改委主任就曾提出：现在我国租房比例太低，购和租要并举。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_11.jpg\" alt=\"image\"></p>\n<p>政策的大方向是要推广房屋租赁，而不是让你买得起房。</p>\n<p>是政府不重视民生问题吗？</p>\n<p>并不是。</p>\n<p>先来看看国外的情况。</p>\n<p>根据欧盟统计局2014年的数据，欧盟28国的所有人口中，有近三成(29.9%)的人是租房子住的，其中德国的租房比例达到了47.5%，仅52.5%的人居住在自有住房内。</p>\n<p>也就是说，将近一半的德国人都是租房的。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_12.jpg\" alt=\"image\"></p>\n<p>美国的情况也是类似。</p>\n<p>根据皮尤研究中心的一项调查显示，2006年，57%的35岁以下家庭是租房子居住的。到了2016年，这个比例已经提高到了65%</p>\n<p>把年龄放宽一点，35至44岁的美国家庭中，租房的比例依然高达41%。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_13.jpg\" alt=\"image\"></p>\n<p>这还只是平均数据，如果把目光聚焦到全球范围内的一线城市，当地人拥有住房的比例更低。</p>\n<p>比如德国的首都柏林，住房拥有率只有15.6%，有将近85%的人都只能租房子住。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_14.jpg\" alt=\"image\"></p>\n<p>（图片来自公众号“财经连环话”）</p>\n<p>再来看看我们的春运人口迁移图你就会明白：</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_15.jpg\" alt=\"image\"></p>\n<p>中国的人口基数太大了，但大城市的土地资源是有限的。</p>\n<p>在有限的土地上，怎么可能满足所有人在大城市买房的需求？</p>\n<p>唯有加快推广租赁。</p>\n<p>从这一点来讲，租售并举的政策大方向是没错的。</p>\n<p>但连带提出的“租售同权”则纯粹是在画大饼了。</p>\n<h4 id=\"04\"><a href=\"#04\" class=\"headerlink\" title=\"04\"></a>04</h4><p>今年7月，一篇名为《突发，楼市巨变！广州宣布：租售同权》的文章突然刷屏了，原因是广州出台了《关于印发广州市加快发展住房租赁市场工作方案的通知》，通知里有这么一句话：</p>\n<p>“赋予符合条件的承租人子女享有就近入学等公共服务权益，保障租购同权。”</p>\n<p>于是那篇爆文的作者这样解读道：</p>\n<p>从今天开始，中国的买房终于和教育资源脱钩了，没有房，小孩照样可以上学了。</p>\n<p>这绝对是一次历史创举，具体未来的影响可能远超我们的想象，但绝对是我们现在无法估量的。</p>\n<p>但就像我在前面说了，<strong>学区房的本质是一种教育资源的分配方案。</strong></p>\n<p>在教育资源没有变多，而大城市人口还在不断聚集的情况下，“租售同权”完全是个伪概念。</p>\n<p>当适龄的报名儿童超过学校招生计划时，学校会怎么做？</p>\n<p>杭州就有关于“一表生”、“二表生”的录取规则。</p>\n<p>即学校应该根据学龄儿童户籍和家庭住宅情况，按照“住、户一致”优先原则，按下面四种先后顺序录取：</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_16.jpg\" alt=\"image\"></p>\n<h4 id=\"05\"><a href=\"#05\" class=\"headerlink\" title=\"05\"></a>05</h4><p>楼市有泡沫吗？</p>\n<p>有啊，但不在一线城市，而是在三四五六线城市。</p>\n<p>2016年和2017年经历了两波房价的暴涨，但这两波的性质是不同的。</p>\n<p><strong>2016年的那波暴涨，是因为实业资本转移到了一二线城市的楼市，推高了房价，随后炒房团涌入，再次推高房价，但钱都是流向大城市的。</strong></p>\n<p>但2017年这一波就不一样了。</p>\n<p>因为2016年的这波暴涨，政府开始调控了。</p>\n<p>42个大城市（截止9月23日）先后出台了限售、限购等政策，炒房团买不了房了，于是纷纷涌向了三四线城市。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_17.jpg\" alt=\"image\"></p>\n<p>但是，在三四线城市：</p>\n<p>有优质的教育资源吗？</p>\n<p>有优质的医疗服务吗？</p>\n<p>有丰富的娱乐场所吗？</p>\n<p>有良好的公共服务吗？</p>\n<p>有广阔的发展机遇吗？</p>\n<p>都没有。</p>\n<p>这不过是一场击鼓传花的游戏。</p>\n<p>最后接盘的那些投机客，他们将会为自己炒高房价的行为付出代价。</p>\n<h4 id=\"06\"><a href=\"#06\" class=\"headerlink\" title=\"06\"></a>06</h4><p>经济学家马光远提出过楼市的后视镜原理：</p>\n<p>从房价的基本规律看，在一个国家城市的人口净增加，一个国家的人口转折点没有到来，以及一个国家的人均GDP尚未超越中等收入水平的情况下，资产价格长期的趋势仍然是向上的，无一例外。今天看到的资产价格的高点，明天很可能只是半山腰而已。</p>\n<p>回顾过去20年中国房价，站在当时的时空下，每年都觉得房价很高，但回过头看，那些以前认为高不可攀的价格，现在看起来是不是很便宜？</p>\n<p>这就是房价的“后视镜”原理。</p>\n<p>只要中国的经济持续向前发展，大城市的房子就依然会升值。</p>\n<p><strong>这里的大城市，是指四个一线城市及杭州、南京、苏州等几个重点二线城市。</strong></p>\n<p>这些大城市的房价中，包含了教育、医疗、交通、娱乐、公共服务、发展机遇等隐性价值，正是这些隐性价值支撑着其高昂的房价。</p>\n<p>要记住一点：<strong>优质的资源永远是稀缺的，稀缺的资源永远是昂贵的。</strong></p>\n<p>土地的总量是有限的，而想要定居大城市的人是源源不断的。</p>\n<p>大城市好地段的房子是有形且有限的资源，买房的本质就是占有资源。</p>\n<p>还要记住的一点是：<strong>财富是以家庭为单位的。</strong></p>\n<p>我以前写过这么一段话：</p>\n<p>年轻人可以不靠父母在大城市买房吗？</p>\n<p>对于70后而言，这样的想法叫志气；对于80后而言，想要实现靠机遇；对于90后而言，如果还抱着这样的想法，只能说是学生气。</p>\n<p>如果你的家庭有足够的实力，我强烈建议你们尽早在一线城市买房。</p>\n<p>如果负担太大，也可以退而求其次，在重点二线城市买。</p>\n<p><strong>中国未来的房价地图也会围绕三大都市圈和个别的交通枢纽城市展开。或许短期内房价会波动，但从长期看，依然会升值。</strong></p>\n<p>这是我的判断，并且我对自己的判断很有信心。</p>\n<p>如果你的家庭无法支撑起你在一二线城市买房，你也可以有两种选择：</p>\n<p>在大城市租房打拼，我知道这样会很辛苦，但多少会给你带来改一点变命运的机会。</p>\n<p>回到你的家乡，那里有你童年的记忆和年迈的父母亲戚，但可能没有你孩子的未来（原因见人口的流动）。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_18.jpg\" alt=\"image\"></p>\n<p>（有网友说，这就像一群没核的红细胞从肢体末端蜂拥至心脏）</p>\n<p><strong>这两个选择没有对错，但每种选择都有其代价，而人生，则是一个又一个选择叠加起来的总和。</strong></p>\n<p>十年后你所站立的地方，你下一代所站立的起点，都是你今天的选择所带来的结果。</p>\n<p>P.s</p>\n<p>关于房价，其实还有很多因素可以讲，比如土地供应、货币超发等等，但这些都不是决定性因素，而且这篇文章已经快6000字了，就不再多说了。</p>\n<p>关于中国的三大都市圈和个别的交通枢纽城市，我会另写一篇。</p>\n<p>再P.s</p>\n<p>**总有人问，为什么每次越调控房价涨得越快。</p>\n<p>其实他们是把因果关系搞反了。</p>\n<p>并不是因为调控导致房价上涨，而是房价本来就要往上涨，但政府通过各种手段（限价、限售等）强行暂停了房价的上涨。所以一旦调控放开之后，房价立即就会补涨。**</p>\n<p>对于房价的管制，北大的薛兆丰老师有一个比喻：</p>\n<p>你仅仅按住价格，并不能改变价格背后的现实。这好比你管不住温度，却非要去管温度计一样荒唐。</p>\n<p>再再P.s</p>\n<p>《魔鬼经济学》中有一句话我印象非常深刻：</p>\n<p>“如果说伦理道德代表了我们心目中理想的社会运行模式的话，那么经济学就是在向我们描述这个社会到底是如何运行的。”</p>\n<p>很多时候，我们乐于相信生活应该是什么样子的，但沉溺在自己的理想世界并不能解决任何问题，看清现实，早做打算，才是对自己的人生负责。</p>\n<p>这篇文章虽然一点也不温暖，甚至有点冷漠，但我相信看完后它会对你有所帮助。</p>\n<p>转载自 <a href=\"https://xueqiu.com/\" target=\"_blank\" rel=\"noopener\">雪球</a> <a href=\"https://xueqiu.com/3862764140/94861157?from=timeline&amp;isappinstalled=0\" target=\"_blank\" rel=\"noopener\">资本x时代</a></p>\n"},{"title":"属性的处理","date":"2017-11-30T15:22:20.000Z","_content":"\n# 属性的处理(初步校对)\n---\n*Martin Fowler* (《重构：改善既有代码的设计》作者)  <P>\nfowler@acm.org\n\n---\n[<span id=\"1\">你创建的每个对象几乎都需要属性：关于对象的一些声明。一个人可能有一个身高属性，一个公司可能有一个CEO，一个航班可能有一个航班号。有很多方法来创建属性。在这篇文章中，我将探讨其中一些你经常需要用到的方法。我经常看到涉及到这个话题的图案，但他们通常只涉及一部分。在这里，我想更广泛地讨论这个问题，以便更好地讨论这些选项。</span>](#1 \"Almost every object you create needs properties: some statement about the object. A person may have a height, a company may have a CEO, a flight may have a flight number. There are a number of ways to model properties. In this article I will explore some of these ways and when you may want to use them. I’ve often seen patterns touch on  this subject, but they usually only cover part of the picture. Here I want to cover the issue  more broadly to give a better discussion of the options.\")\n\n[<span id=\"2\">最常见和最简单的情况是使用`固定属性`，即只声明类的属性。在绝大多数情况下，你只需要使用`固定属性`。在有大量固定属性或者需要频繁修改时，使用`固定属性`容易出错。这种情况下你可能会使用`动态属性`。所有的`动态属性`都有一个参数化属性的特性：你需要一个带参的方法来查询一个属性。当参数只是一个字符串,最简单的是`灵活的动态属性`。这样定义和使用属性会比较容易，但难以控制。如果你需要使用`动态属性`，在你的参数必须是一个类的实例的情况下。使用类型`动态属性`来增强对`动态属性`的控制。</span>](#2 \"The most common, and the simplest case is to use a Fixed Property , that is just declare the attribute on the class. In the vast majority of cases that is all you need to do. Fixed properties begin to fail when you have a large amount of them, or you need to change them frequently, possibly at run time. These forces lead you to the varieties of Dynamic Property . All dynamic properties have the quality of a parameterized attribute where to query a property you need to use a query method with a parameter. The simplest of these is the Flexible Dynamic Property where the parameter is just a string. This makes it easy to define and use properties, but is difficult to control. If you need that control you can use a Defined  Dynamic  Property  where  your parameters must be instances of some class. A further step of control allows you to strongly type your dynamic property with a Typed Dynamic Property .\")\n\n[<span id=\"3\">随着您的属性结构变得越来越复杂，您应该考虑将它们设置为“单独属性”，把一些属性综合起来创建一个对象。如果你需要多值属性，你可以考虑集合。在这篇文章中最复杂的例子是你想要规则来控制什么类型的对象具有什么样的属性 - 这需要一定的`动态属性`知识水平。</span>](#3 \"As your property structures get more involved, you should consider making them Separate Properties , which makes the property an object in its own right. If you need multi-valued properties you can consider a Typed Relationship . The most complex example in this theme is where you want rules to control what kinds of objects have what kinds of properties – this needs a Dynamic Property Knowledge Level .\")\n\n[<span id=\"4\">另一种属性完全是`外部属性`（Extrinsic Property），如果你想使用接口给一个对象创建一个属性，那么这就是你需要使用的一种模式。<span>](#4 \"Another variety of property entirely is the Extrinsic Property , a pattern you use if you want to give an object a property, but not alter its interface to support it.\")\n\n[<span id=\"5\">问题</span>](#5 \"Problem\")\t|[<span id=\"5\">答案</span>](#5 \"Solution\")\t|[<span id=\"5\">名称</span>](#5 \"name\")\t|[<span id=\"5\">页码</span>](#5 \"page\")\n--- | --- | --- | ---\n &nbsp;  |[<span id=\"6\">在编程语言里，当使用一个特定的属性，它需要查询或者更新。<span>](#6 \"Give it a specific attribute for that fact. This will translate to a query method and probably an update method in a programming language.\")|[`固定属性`](#固定属性 \"Fixed Property\")|4\n &nbsp;  |[<span id=\"7\">提供可参数化的属性，可以根据参数表示不同的属性</span>](#7 \"Provide a parameterizable attribute which can represent different properties depending on the parameter\")|[`动态属性`](#动态属性 \"Dynamic Property\")|4\n &nbsp;  |[<span id=\"8\">提供一个用字符串参数化的属性。声明一个属性只是使用字符串.](#8 \"Provide an attribute parameterized with a string. To declare a property just use the string.\")|[`灵活的动态属性`](#灵活的动态属性 \"Flexible Dynamic Property\")|5\n &nbsp;  |[<span id=\"9\">提供用某种类型的实例参数化的属性。要声明属性，请创建该类型的新实例</span>](#9 \"Provide an attribute parameterized with an instance of some type. To declare a property create a new instance of that type\")|[`定义动态属性`](#定义动态属性 \"Defined Dynamic Property\")|7\n &nbsp;  |[<span id=\"10\">提供使用某种类型的实例进行参数化的属性。要声明属性，请创建该类型的新实例并指定该属性的值类型.</span>](#10 \"Provide an attribute parameterized with a instance of some type. To declare a property create a new instance of the type and specify the value type of the property.\")|[`类型动态属性`](#类型动态属性 \"Typed Dynamic Property\")|9\n[<span id=\"11\">你如何表示一个对象的属性，并允许对象的属性也具有属性</span>](#11 \"How do you represent a fact about an object, and allow facts to be recorded about that fact\")|[<span id=\"11\">为每个属性创建一个单独的对象。 关于那个属性的详细可以作为这个对象的的属性.<span>](#11 \"Create a separate object for each property. Facts about that property can then be made properties of that object.\")|[`分离属性`](#分离属性 \"Separate Properties\")\t|10\n[<span id=\"12\">你如何表示两个对象之间的关系（如何表示多个值动态属性？）</span>](#12 \"How do you represent a relationship between two objects?(How do you represent multi-valued dynamic properties?)\")|[<span id=\"12\">为两个对象之间的每个链接创建一个关系对象。 给关系对象一个类型对象来表示关系的含义。 （类型对象是多值属性的名称。）<span>](#12 \"Create a relationship object for each link between the two objects. Give the relationship object a type object to indicate the meaning of the relationship. (The type object is the name of the multi-valued property.)\")|[`类型关系`](#类型关系 \"Typed Relationship\")| 14\n[<span id=\"13\">当你使用动态属性时，你如何强制某些类型的对象具有某些属性？</span>](#13 \"How do you enforce that certain kinds of objects have certain properties when you use dynamic properties?\") |[<span id=\"13\">创建知识级别以包含哪些类型的对象使用哪些类型的属性的规则](#13 \"Create a knowledge level to contain the rules of what types of objects use which types of properties\") |[`动态属性知识水平`](#动态属性知识水平 \"Dynamic Property Knowledge Level\")| 16\n[<span id=\"14\">你如何给一个对象新增一个属性而不改变它的接口？</span>](#14 \"How do you give an object a property without changing its interface?\")|[使用另一个对象负责属性](#14  \"Make another object responsible for knowing about the property\")| [`外在性质`](#外在性质 \"Extrinsic Property\")| 18\n\n\n---\n## 什么是属性\n\n\n[<span id=\"15\">这不是一个愚蠢的问题。当人们使用“属性”这个词时，他们可能有很多不同的含义。对某些属性来说，是一个类的实例变量或数据成员。对于其他人来说，它们就像`UML`图中的一个盒子一样。所以在我开始这篇文章之前，我必须定义这个词的用法。</span>](#15 \"This is not a silly question. When people bandy around the term ‘property’ they can mean many different things. To some a property is an instance variable or data member of a class. To others they are kind of thing that goes in a box in a UML diagram. So before I start this article I have to define my usage of the word.\")\n\n\n[<span id=\"16\">为了我的目的，一个属性是关于一个可以通过查询方法获得的对象的一些信息。它可能是一个值类型（如`Java`中的`int`）或一个类的实例。您可能能够修改该属性，但不一定。您可以在创建对象时设置属性，但不一定。该属性可以作为实例变量或数据成员存储，但不一定是。班级可能会从另一个班级获得值，或者经过一些进一步的计算。因此，我采用属性的接口视图而不是实现视图。这是我在设计中经常使用的习惯：对于我来说，面向对象的本质是将接口与实现分开，并使接口更加重要。</span>](#16 \"For my purposes a property is some information about an object that you can obtain by a query method. It may be a value type (such as int in Java) or an instance of a class. You may be able to update the property, but not necessarily. You may set the property when you create the object, but again not necessarily. The property may be stored as an instance variable or data member, but it does not have to be. The class may get the value from another class, or go through some further calculation. I am, therefore, taking an interface view of properties rather than an implementation view. This is a regular habit of mine in design: for me the essence of object-orientation is that you separate interface from implementation, and make interface more important.\")\n\n---\n\n## <span id = \"固定属性\">固定属性</span>\n[<span id=\"17\">`固定属性`是我们使用的最常见的属性。 固定属性在类型的接口中声明。 它给出了属性的名称和返回类型。 图1显示了使用`UML`建模的属性，示例1显示了这些属性的查询方法如何在`Java`中使用。 我已经选择了这个例子来说明这个讨论同样适用于`UML`属性和`UML`关联。 它也适用于计算值（年龄）以及那些合理存储的数据（出生日期）。](#17 \"Fixed properties are by far the most common kind of properties that we use. A Fixed Property is declared in the interface of the type. It gives the name and the return type for the property. Figure 1 shows properties modeled in UML, Listing 1 shows how the query methods for these properties would show up in Java. I’ve picked the example to show that this discussion applies equally well to UML attributes as well as UML associations. It also applies to calculated values (age) as well as those that are reasonably stored data (date of birth).\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/3_1.png)\n> 图1.使用`固定属性`建模的人员\n```java\nclass Person {\n    public Date getDateOfBirth();\n    public int getAge();\n    public Quantity getHeight();\n    public Company getEmployer();\n    public void setDateOfBirth (Date newDateOfBirth);\n    public void setEmployer (Company newEmployer);\n```\n> 列举,图1的`java`操作\n\n[<span id=\"18\">查询操作通常遵循一些命名约定。在`程序语言`中，您总是在属性名称（`dateOfBirth`）之后命名查询。 `C++`从来没有一个固定的约定，有些人只是在属性后面命名，而另一些人则使用`get`约定（`getDateOfBirth`）。 `Java`从没有特别的约定开始，但现在大多数人都采用`get`约定。就我个人而言，当您阅读代码时，我发现`get`令人恼火，所以我宁愿忽略它，但`Java`风格是使用`get`，所以现在就使用它。无论您使用的是存储值还是派生值，都应确保遵循相同的约定。使用`Person`的客户端不应该知道或关心年龄是否存储或派生。](#18 \"Query operations usually follow some naming convention. In smalltalk you always name the query after the name of the property (dateOfBirth). C++ never had a fixed convention, some people just named it after the property, others used the 'get' convention (getDateOfBirth). Java started with no particular convention but now most people adopt the get convention. Personally I find the ‘get’ irritating when you read code so I would prefer to leave it out, but the Java style is to use the get, so I use it now. You should ensure that you follow the same convention whether you are using stored or derived values. Clients of the person class should not know or care whether age is stored or derived.\")\n\n[<span id=\"19\">`修饰符`操作的存在取决于您是否希望直接修改值。如果你这样做，那么你会根据一些命名方案，例如`setDateOfBirth`（`Date`）提供一个修饰符操作。对于`返回值`存在不同的约定。你可以返回属性的新值（`Date`），被修改的对象（`Person`），或者什么都没有（`void`）。我更愿意在修饰符上返回`void`，以帮助明确修饰符和查询之间的区别。](#19 \"The presence of modifier operations depends on whether you want the values to be directly modified. If you do then you will provide a modifier operation according to some naming scheme, eg setDateOfBirth(Date). Different conventions exist as to the return value. You can return the new value of the property (Date), the object being modified (Person), or nothing (void). I prefer to return void on modifiers, to help make clear the difference between a modifier and a query.\")\n\n---\n### 固定属性\n  [<span id=\"20\">你如何代表一个对象的事实？</span>](#20 \"How do you represent a fact about an object?\")\n  -  [<span id=\"20\">给它一个这个事实的特定属性。这将转化为查询方法，并可能是一种编程语言的更新方法。</span>](#20 \"Give it a specific attribute for that fact. This will translate to a query method and probably an update method in a programming language.\")</br>\n    [<span id=\"20\">接口很清晰明确</span>](#20 \"Clear and explicit interface\")</br>\n    [<span id=\"20\"><font color=\"red\">只能在设计时添加属性</font></span>](#20 \"Can only add properties at design time\")</br>\n---\n  \n[<span id=\"21\">您可能希望为属性的`构造函数`提供参数。通常，您要在`构造函数`中设置足够的属性，以便构建格式良好的类。</span>](#21 \"You may wish to provide arguments to the constructor for properties. Typically you want to set enough properties in the constructor so that you construct a well-formed class.\")\n\n[<span id=\"22\">不想直接修改的属性不应该有`修饰符`操作。如果您只希望从出生之日起计算，那么年龄属性可能就是这种情况。对于一个不可改变的`属性`也是如此：一个在类的生命周期中不会改变的`属性`。当你想使`属性`不可改变时，请记住考虑到人为错误。虽然出生日期对于现实世界中的人类来说是不可改变的`属性`，但是您可能会在输入到计算机系统时出现错误，从而使其变得可变。软件常常模拟我们所知道的世界，而不是世界本身。</span>](#22 \"Properties that you don’t want to be modified directly should not have a modifier operation.This might be the case for the age property, if you only want that determined by calculation from the date of birth. It also would be the case for an immutable property: one that does not change for the lifetime of the class. When you think of making a property immutable, remember to take human error into account. While the date of birth is an immutable property for humans in the real world, you might make a mistake typing into a computer system, and thus make it mutable. Software often models what we know of the world, rather than the world itself.\")\n\n[<span id=\"23\">`固定属性`是迄今为止您将遇到的最常见的`属性`形式。他们这样做是有原因的：他们使用简单方便。您应该使用固定属性作为表示属性的第一个也是最常见的选择。在本文中，我将给出许多固定属性的替代方案。在某些情况下，这些替代品更好，但大多数情况下不是。请记住，当我们经历的选择。我99％的时间使用固定的属性。其他品种更为复杂，这就是为什么我把这篇论文的大部分花费在他们身上 - 也是为什么我不愿意使用它们！</span>](#23 \"Fixed properties are by far the most common form of properties that you will come across.They are that way for good reasons: they are simple and convenient to use. You should use fixed properties as your first and most common choice for representing properties. In this paper I am going to give a lot of alternatives to fixed properties. For certain situations these alternatives are better, but most of the time they are not. Remember that as we go through the alternatives. I use fixed properties 99% of the time. Other varieties are more complex, which is why I'm spending most of this paper on them — and also why I prefer not to use them!\")\n\n## <span id = \"动态属性\">动态属性</span>\n[<span id=\"24\">`固定属性`的关键在于您在设计时修复了这些属性，并且所有实例在运行时都必须遵循该决定。 对于一些问题，这是一个尴尬的限制。 想象一下，我们正在建立一个复杂的联络系统。 有一些东西是固定的：家庭住址，家庭和工作电话，电子邮件。 但他们是各种各样的小变化。 对于需要记录父母地址的人，另一个人有白天工作和晚上工作号码。 事先很难预测所有这些事情，每次更改系统时都必须经过编译，测试和分发。 要处理这个问题，你需要使用动态属性。</span>](#24 \"The key thing about fixed properties is that you fix them at design time, and all instances at run time must follow that decision. For some problems this is an awkward restriction. Imagine we are building a sophisticated contact system. There are some things that are fixed: home address, home and work phone, email. But they’re all sorts of little variations. For someone you need to record their parent’s address, another has a day work and evening work numbers.It’s hard to predict all these things in advance, and each time you change the system you have to go through compiling, testing, and distribution. To deal with this you need to use dynamic properties.\")\n\n---\n### 动态属性\n  [<span id=\"25\">你如何代表一个对象的事实？</span>](#25 \"How do you represent a fact about an object?\")</br>\n  [<span id=\"25\">提供可参数化的属性，可以根据参数表示不同的属性</span>](#25 \"Provide a parameterizable attribute which can represent different properties depending on the parameter\") </br>\n   - [<span id=\"25\"> 可以在运行时添加属性</span>](#25 \"Can add properties at run time\")\n   - [<span id=\"25\"><font color=\"red\">接口不清晰</font></span>](#25 \"Unclear interface\")\n---\n  \n[<span id=\"26\">`动态属性`有多种变化，每种变化都会在`灵活性`和`安全性`之间做出不同的选择。 最简单的方法是`灵活动态属性`。 这种模式的本质是为键值为简单值的人（通常是字符串）添加一个合格的关联（参见图2和示例2）。 如果您想为某人Kent添加休假地址，则只需使用清单3中的代码即可。您不需要重新编译人员类。 你甚至可以建立一个图形用户界面（`GUI`）或者文件读取器来添加属性，而不用重新编译客户端。</span>](#26 \"There are several variations on dynamic properties, each of which make different trade-offs between flexibility and safety. The simplest approach is Flexible Dynamic Properties. The essence of this pattern is that you add a qualified association to the person whose key is a simple value, usually a string (see Figure 2 and Listing 2). If you want to add a vacation address to a person Kent, you just use the code in Listing 3. You don’t need to recompile the person class. You could even build a GUI or a file reader that would add properties without recompiling the client either.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/5_1.png)\n> 图2.使用动态属性建模的人员\n```java\nclass Person {\n    public Object getValueOf(String key);\n    public void setValueOf(String key, Object value);\n```\n> 列举2,图2的`java`方法\n```java\nkent.setValueOf(“VacationAddress”, anAddress);\nAddress kentVactation = (Address) kent.getValueOf(“VacationAddress”)\n```\n> 列举3,使用动态属性\n[<span id=\"27\">这样说，你可能想知道为什么有人会使用固定的属性，因为动态的像这样的属性给了你更多的灵活性。当然有一个成本，它在于软件各部分之间依赖关系的清晰度降低。这一切都非常好给一个人增加一个度假地址属性，但是你怎么知道把它重新取回呢？有了固定的属性，你可以看看人的界面，看看属性。该编译器可以检查不要求对象做不理解的事情。 用一个动态属性，你不能做任何设计时检查。此外的界面人很难看。不只是你看`Person`的声明接口 -你也必须找到不会出现在类接口中的动态属性。你必须找到那些设置属性的代码部分（通常不会在`Person`类中）提现出来。</span>](# \"Said like that, you might wonder why anyone would ever use fixed properties, since dynamic properties such as this give you so much more flexibility. Of course there is a cost, and it lies in the reduction of the clarity of the dependencies between parts of the software. It is all very well adding a vacation address property to a person, but how do you know to get it back again? With fixed properties you can just look at the interface of person and see the properties. The compiler can check that don’t ask an object to do something it doesn’t understand. With a dynamic property you cannot do any design-time checking. Furthermore the interface of person is harder to see. Not just do you look at Person’s declared interface – you also have to find the dynamic properties, which will not be present in the class interface. You have to find that part of the code that sets the property (which usually will not be in the Person class at all) and dig it out.\")\n\n---\n### 灵活动态属性\n  - [<span id=\"28\">你如何代表一个对象的事实？</span>](#28 \"How do you represent a fact about an object?\")</br>\n  - [<span id=\"28\">提供一个用字符串参数化的属性。只声明一个属性使用字符串。</span>](#28 \"Provide an attribute parameterized with a string. To declare a property just use the string.\") </br> \n---\n\n[<span id=\"30\">不仅是属性很难找到，它的依赖也是一个噩梦。随着固定属性的客户端代码有一个依赖于人类 - 一个依赖是难以跟踪。如果你改变属性的名字，编译器会让你知道，并告诉你需要改变什么代码才能解决问题。但灵活的动态属性创建一个依赖于任意一段代码。它可能是属于一个类的代码甚至不能被客户端看到。如果有人更改密钥字符串会发生什么？如果有人改变他们把键入字符串的对象的类型会发生？不仅仅是编译器没法帮助你，你甚至不知道从哪里开始查找变化。</span>](#30 \"Not just is the property hard to find, it also creates a nightmare dependency. With fixed properties the client code has a dependency to the person class – a dependency that is easy to keep track of. If you change the name of the property the compiler will let you know, and tell you what code you need to change to fix things. But the Flexible Dynamic Property creates a dependency into some arbitrary piece of code. It could be code that belongs to a class that is not even visible to the client. What happens if someone changes the key string? What happens if someone changes the type of object they put into the key string? Not just can the compiler do nothing to help you, you don’t even know where to start looking for potential changes.\")\n\n[<span id=\"31\">`灵活的动态属性`在最极端的情况下显示了这个问题。 该属性可能是`Person`的任何客户端在设计时创建。 如果另一个人的客户端使用同一个属性，那么你就很难找到两个类之间的依赖关系。 此外属性可以在运行时通过读取文件或通过`GUI`添加。 即使在运行时，不可能发现一个人的哪些动态属性是合法的。 当然，你可以问一个人，如果它有一个度假地址的属性 - 但如果没有一个这是否意味着这一点人没有假期地址，或者是否意味着没有这样的度假地址属性？ 而如果现在没有这样的属性，那并不意味着它几秒钟后不会有。</span>](#31 \"Flexible Dynamic Properties show this problem at it’s most extreme. The property could be created at design time by any client of Person. If another client of person uses that same property you have a dependency between two classes that is very hard to find. Furthermore properties can be added at run time by reading a file or by a GUI. It is impossible to find out, even at run time, what are the legal dynamic properties for a person. True you can ask a person if it has a property for vacation address – but if there isn’t one does that mean that that person does not have a vacation address, or does it mean that there is no such property as vacation address? And if it has no such property now, that doesn’t mean it won’t have one a few seconds later.\")\n\n[<span id=\"32\">灵活动态特性的另一个关键缺点是很难替代它们进行操作。封装的一个关键优势是使用属性的客户端无法分辨它是作为对象数据的一部分存储的，还是通过方法来计算的。这是一个对象方法非常重要的一部分。它可以让你不只是一个普通的接口实现，而且在客户端不知情的情况下改变你期望的值。当存在子类型，你甚至可以有一个超类型存储属性和子类计算，反之亦然。但是，如果要使用动态属性，则只能更改存储的数据一个计算就是在通用访问器中为`动态属性`设置一个特定的数值,清单4中的代码。这个代码可能很脆弱，难以维护。</span>](#32 \"Another key disadvantage of flexible dynamic properties is that it is difficult to substitute them for operations. One of the key advantages of encapsulation is that a client that uses a property cannot tell whether it is stored as part of an object’s data, or computed by a method. This is a very important part of the object approach. It allows you not just a regular interface for both purposes, but also to change your mind without the client knowing. In the presence of subtyping you can even have a supertype store the property and subclasses compute or vice versa. However if you want to use dynamic properties the only way you can change stored data to a calculation is to put a specific trap in the general accessor for the dynamic property along the lines of Listing 4. This code is likely to be brittle and awkward to maintain.\")\n\n```java\nclass Person {\n    public Object getValueOf (String key) {\n        if (key = “vacationAddress”) \n            return calculatedVacationAddress();\n        if (key = “vacationPhone”) \n            return getVacationPhone();\n        // else return stored value…\n```\n> 列举4,用操作替换`动态属性`\n\n[<span id=\"33\">其他形式的动态属性可以帮助您解决其中一些问题，但不是全部。该`动态属性`的最大的缺点是：你失去了清晰的接口和所有的设计时间检查。`动态属性`的不同方法会让你额外写不同的检查方法。如果你需要`动态属性`，并且当然有确定的情况你这样做，那么你只需要放弃设计时间检查和明确的设计时间接口。唯一的问题是如何明确接口和有多少运行时检查。使用灵活的动态属性也会有同样的问题。</span>](#33 \"Other forms of dynamic property help you solve some of these problems but not all. The essential disadvantage of a dynamic property is that you lose the clear interface and all designtime checking. Different approaches to dynamic properties give you different abilities to do run-time checking. If you need dynamic properties, and there are certainly situations when you do, then you just have to give up design time checking and a explicit design time interface. The only question is how explicit an interface and how much checking you can do at run time. With Flexible Dynamic Properties you don’t get any of either.\")\n\n[<span id=\"34\">你经常在数据库中发现动态属性，因为改变它通常是一个痛苦数据库模式，特别是如果有大量的数据迁移。分布式的接口例如在`CORBA`中的组件也经常因为相似的原因而使用动态属性。那里是很多使用界面的远程客户，所以你不愿意改变它。在这两种情况下，编译时和运行时间之间的区别并不是设计时和生产之间的区别。</span>](#34 \"You find dynamic properties often in databases because it is often a pain to change the database schema, especially if there would be a lot of data to migrate. Interfaces of distributed components, such as in CORBA, also often use dynamic properties for a similar reason. There are a lot of distant clients using the interface, so you are reluctant to change it. In both of these cases it is not so much a distinction between compile-time and run-time, as much as a distinction between design-time and production.\") \n\n[<span id=\"35\">如果你正在做的是通过`GUI`显示和更新信息，而代码永远不会对键进行固定的引用（即，你永远不会看到像清单3那样的代码），那么使用灵活`动态属性`就非常安全。这是因为你没有设置一个任意字符串作为一个关键的讨厌的依赖。 否则，你应该考虑`动态属性`的其他方法之一。</span>](#35 \"If all you are doing is displaying and updating information via a GUI, and the code never makes a fixed reference to the keys (i.e. you never see code like Listing 3), then you are pretty safe with a Flexible Dynamic Property. This is because you have not set up a nasty dependency to some arbitrary string as a key. Otherwise you should consider one of the other approaches to dynamic properties.\")\n\n[<span id=\"36\">更多运行时检查的第一步是定义的动态属性。与`灵活动态属性`相反，定义的关键区别在于`动态属性`使用的关键字不再是一些任意的字符串，而是现在某个类的一个实例（图3）。</span>](#36 \"The first step towards more run-time checking is the Defined Dynamic Property. The key difference between a defined as opposed to a flexible dynamic property is that the key used by the dynamic property is no longer some arbitrary string, but is now an instance of some class (Figure 3).\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/7_1.png)\n\n> 图3.定义的`动态属性`\n\n[<span id=\"37\">在它的表面上使用定义的`动态属性`并没有太大的改变。事实上，代码界面几乎完全相同（清单5和清单6）。但是现在，关键字的选择不再是完全随意的，而是受到接触`类型`的限制。当然，这仍然允许您在运行时添加`属性`-只需创建一个新的关联`类型`。不过现在至少在某个地方可以找到一个潜在的`键`列表，而无需浏览程序`代码`。 在设计时添加的任何键都可以在关联类型类的加载程序中收集。您可以轻松地提供服务，以在运行时查找合法的`键`。</span>](#37 \"On the face of it using defined dynamic property does not change much. Indeed the code interface is almost identical (Listing 5 and Listing 6). But now the choice of keys is no longer entirely arbitrary, it is limited by the instances of contact type. Of course this still allows you to add properties at run time – you just create a new contact type. However now there is at least somewhere someone can look to get a list of potential keys without having to trawl through the program text. Any keys added at design time can be collected in a loader routine in the contact type class. You can easily provide services to find out the legal keys at run time.\")\n\n```java\nclass Person {\n    public Object getValueOf(ContactType key);\n    public void setValueOf(ContactType key, Object value);\n```\n> 列举5, 图3的Java接口\n```java\nclass ContactType {\n    public static Enumeration instances();\n    public static boolean hasInstanceNamed(String name);\n    public static ContactType get(String name);\n```\n> 列举6,为定义的属性类型提供的服务\n\n[<span id=\"38\">你现在可以设置一些检查来防止由于某人要求一个不存在的`动态属性`而导致的错误。我在这里抛出一个未经检查的`异常`，因为我认为`get（）`的前提条件是`客户端`为联系人类型提供合法名称。客户端总是可以通过使用`hasInstanceNamed（）`来执行这个检查，但是大多数情况下客户端使用的是类型而不是字符串。</span>](#38 \"In particular you can now set up some checking to prevent errors due to someone asking for a dynamic property that does not exist as in Listing 7. I’m throwing an unchecked exception here because I consider that the precondition for get() is that the client provides a legal name for a contact type. The client can always fulfill this responsibility by using hasInstanceNamed(), but most of the time client software will hang on to contact type objects, not strings.\")\n\n---\n\n### 定义动态属性\n- [<span id=\"39\">你如何代表一个对象的事实？</span>](#39 \"How do you represent a fact about an object?\")\n- [<span id=\"39\">提供用某种类型的实例参数化的属性。声明一个属性创建一个新类型的实例</span>](#39 \"Provide an attribute parameterized with an instance of some type. To declare a property create a new instance of that type\") \n\n---\n\n[<span id=\"40\">通常，联系人类型将保存在字典中，通常由字符串索引。这个字典可能是一个静态的联系人类型的字段，但是我更愿意把它作为注册服务器上的字段。</span>](#40 \"Usually the contact types will be held in a dictionary, usually indexed by a string. This dictionary could be a static field of contact type, but I prefer to make it a field on a Registrar.\")\n\n[<span id=\"41\">删除联系人类型仍然具有尴尬的后果。在`java`中的`动态属性`仍然会出现在那些拥有它们的对象上，除非你写了一些复杂的东西清理代码。我通常会规定永远不要删除动态属性的键。如果你想使用一个新的名字，你可以通过给它一个其他名字，但是把它放置在定义的字典中几次，很容易地为联系类型添加别名。</span>](#41 \"Removing a contact type still has awkward consequences. In java the dynamic properties would still be present on those objects that had them, unless you write some complicated clean up code. I usually make it a rule to never delete the keys for a Defined Dynamic Property. If you want to use a new name you can easily alias the contact type by giving it one name but placing it in the defining dictionary several times.\")\n\n```java\nclass ContactType {\n    public static ContactType get(String name) {\n        if (! hasInstanceNamed (name)) throw new IllegalArgumentException(“No such contact type);\n        // return the contact type\n}\n// use with\nAddress kentVactation = (Address)kent.getValueOf(ContactType.get(“VacationAddress”));\n```\n> 列举7, 检查使用合法合同类型\n\n[<span id=\"42\">在这一点上，您可能想知道这与概念建模有什么关系，毕竟我写了很多代码并讨论了设计的权衡。这是一个重要的概念问题，因为您所做的概念选择会影响您的实现选择。如果你选择在你的概念模型中使用`灵活动态属性`，你很难在你的实现中使用定义的`动态属性`或`固定属性`。你做概念模型的原因之一是探索你的用户的概念是什么固定的，什么是可变的。如果全面的灵活性是我唯一的目标，那么我会总是使用图4.通过这个，我可以模拟世界上的任何情况。但是这个模型不是很有用。它在现实项目中是没用的，它不表示什么是固定的。什么时候你正在做一个概念模型，你需要知道你的选择如何影响项目实施-否则你失去了作为建模者的作用。</span>](#42 \"At this point you might be wondering about what this has to do with conceptual modeling,after all I am writing a lot of code and discussing design trade-offs. This is an important conceptual issue because the conceptual choice you make affects the implementation options you have. If you choose to use flexible dynamic attributes in your conceptual model, you are making it pretty hard to use either defined dynamic attributes or fixed attributes in your implementation. One of the reasons you do conceptual models is to explore what is fixed and what is changeable in your users’ concepts. If total flexibility was my only goal then I would always use Figure 4. With this I can model any situation in the world. But this model is not very useful. Its uselessness comes from the fact that it does not indicate what is fixed. When you are doing a conceptual model you need to be aware of how your choices affect things in implementation – otherwise you are abdicating your responsibility as a modeler.\")\n\n[<span id=\"43\">我经常发现人们发现`动态属性`，然后想要在任何地方使用它们。灵活性如此之大，他们获得了所有的可扩展性。是的，有时候你需要`动态属性`。但永远不会忘记有一个标准。只有当你真的使用它们需要他们才用。毕竟，如果必须使用，以后很容易添加它们。</span>](#43 \"I often find that people discover dynamic properties, and then want to use them everywhere. The flexibility is so great, they get all the extendibility they ever want. Yes sometimes you need dynamic properties. but never forget there is a price. Only use them when you really need them. After all it is easy to add them later if you have to.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/8_1.png)\n> 图4.一个可以无用建模任何域的模型\n\n[<span id=\"44\">`定义动态属性`允许您更多地指出你拥有的属性。这些属性仍然是无类型的。您不能强制图3中休假地址的值是一个地址。 你可以通过使用`类型动态属性`来做些什么。</span>](#44 \"The Defined Dynamic Property allows you to indicate rather more about what properties you have. These properties are still untyped. You cannot enforce that the value of the vacation address in Figure 3 is an address. You can do something about that by using a Typed Dynamic Property.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/9_1.png)\n> 图5.为使用限定关联的类型化动态属性建模\n\n[<span id=\"45\">`类型动态属性`将类型信息添加到定义的`动态属性`（图6和6）图5）。这里的联系人类型的实例不只是指出该人是什么合适的人有，他们也表示每个`属性`的类型。 类型约束的值，沿线清单9。</span>](#45 \"A typed dynamic property adds type information to the defined dynamic property (Figure 6 and Figure 5 ). Here the instances of contact type do not just indicate what properites the person has, they also indicate the type of each property. The type constrains the value, along the lines of Listing 9.\")\n\n```java\nclass Person {\n    public Object getValueOf(ContactType key);\n    public void setValueOf(ContactType key, Object value);\nclass ContactType {\n    public Class getValueType();\n    public ContactType (String name, Class valueType);\n```\n> 列举8, 键入动态属性的操作\n\n```java\nclass Person {\n    public void setValueOf(ContactType key, Object value) {\n        if (! key.getValueType().isInstance(value))\n            throw IllegalArgumentException (“Incorrect type for property”);\n        // set the value\n```\n> 列举9, 做类型检查\n\n[<span id=\"46\">这样做类型检查可以帮助避免错误，但它仍然不像固定属性那样清晰。 检查是在运行时，而不是在设计时，因此不是有效的。但还是比没有检查好，特别是如果你习惯于强类型的环境时。</span>](#46 \"Doing type checking like this can help to avoid errors, but it still is not as clear as fixed properties. The checking is at run time, not at design time, and is therefore not as effective. Still it is better than no checking at all, particularly if you are used to a strongly typed environment.\")\n\n---\n### 类型动态属性\n- [<span id=\"47\">你如何代表一个对象的事实？</span>](#47 \"How do you represent a fact about an object?\")</br>\n- [<span id=\"47\">提供使用某种类型的实例进行参数化的属性。声明一个属性创建一个新类型的实例并指定值的类型属性。</span>](#47 \"\")\n---\n\n[<span id=\"48\">当我们深入研究`动态属性`时，我们会发现更丰富的`反射`示例，这是一种架构模式，当我们获得能够描述自身的运行时对象时，就会出现这种模式。 \\[POSA\\]比我打算在这里更详细地讨论反思。</span>](#48 \"As we delve deeper into dynamic properties, we find richer examples of reflection, an architectural pattern which appears when we get runtime objects that are able to describe themselves. [POSA] discusses reflection in much more detail than I intend to go into here.\")\n\n[<span id=\"49\">动态属性提供反射功能，即使在那些不支持反射的语言中。即使使用了一种能够提供一些反射的语言，`动态属性`的反射也更加集中 - 所以您可以提供更易于使用的接口。</span>](#49 \"Dynamic properties provide a reflective capability, even in those languages that don’t support reflection themselves. Even with a language that does provide some reflection, the reflection of dynamic properties is more focused – so you can provide an easier to use interface.\")\n\n[<span id=\"50\">使用所有这些合格的关联可能会很难遵循。另一种方式提供`类型动态属性`是使用单独的属性模式。独立属性模式的本质是它使属性成为一个对象（图6和清单10）。 你可以获得一个人的属性，然后与每个属性获得值和类型信息。</span>](#50 \"Using all of those qualified associations can get rather hard to follow. Another way of providing typed dynamic properties is to use the separate property pattern. The essence of the separate property pattern is that it makes the property an object in its own right (Figure 6 and Listing 10). You can get hold of the properties of a person, and then with each property get value and type information.\")\n\n\n---\n### 分离属性\n- [<span id=\"51\">你如何代表一个对象的属性，并允许属性记录这个属性<span>](#51 \"How do you represent a fact about an object, and allow facts to be recorded about that fact\")\n- [<span id=\"51\">为每个属性创建一个单独的对象。有关该属性的子属性可以然后被做成那个对象的属性。<span>](#51 \"Create a separate object for each property. Facts about that property can then be made properties of that object.\")\n---\n\n[<span id=\"52\">`独立属性`和限定的关联`动态属性`总是可用的两种选择。 到目前为止，我已经用限定的关联描述了灵活的和定义好的`动态属性`，因为合格的关联提供了一个更容易使用的接口。如果你愿意的话，你可以使用灵活和定义的具有单独属性的`动态属性`，尽管我不打算进入在这里。当我们了解类型化`动态属性`的复杂性时，`分离属性`风格变得更有优势。<span>](#52 \"Separate properties and qualified associations are two alternatives that are always available for dynamic properties. So far I’ve described flexible and defined dynamic properties with qualified associations because the qualified association presents a much easier interface to use.You can use flexible and defined dynamic properties with separate properties if you wish, although I’m not going to go into that here. As we get to the complexity of typed dynamic properties and onwards the separate property style becomes more of an advantage.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/10_1.png)\n> 图6.为分类的动态属性建模，使用单独的属性\n\n```java\nclass Person {\n    public Enumeration getProperties();\nclass ContactProperty {\n    public Object getValue();\n    public Class getType();\n    public ContactType getIndex();\n```\n> 列举10, 使用单独属性的类型化动态属性的操作\n\n[<span id=\"53\">`分离属性`和有限的关联不是相互排斥的。您可以轻松地同时提供两个接口。 这样你就得到了两者的优点。当然这会使接口更加复杂，所以先考虑一下用户的需求。给他们提供他们需要的接口，不要让接口变得复杂。但是，如果他们需要合格的关联和`分离属性`，那么这是一个合理的选择。我通常会使用合格的关联来获得值，但是这种类型可能没有多大意义。<span>](#52 \"Separate properties and qualified associations are not mutually exclusive. You can easily provide both interfaces at the same time. This way you get the advantages of both. Of course that makes the interface more complex, so think first about what the clients of person need.Give them the interface they need, don’t make it over complex. But if they need both qualified associations and separate properties, then that is a reasonable option. I would normally always use qualified associations for the value, but it may not make as much sense for the type.\")\n\n[<span id=\"54\">您也可以在这里考虑接口/实现的差异。在本文中，我想集中在概念上 - 它映射到软件的接口而不是实现。但值得一提的是，您可以在实现中使用单独的对象时提供合格的关联接口。如果人的客户端可以获取联系人属性对象，则只能在接口中使用单独的属性。通常隐藏`分离属性`以简化客户端的接口是有用的。</span>](# \"You can also consider the interface/implementation differences here. In this paper I want to concentrate on the conceptual – which maps to the interface of software rather than its implementation. But it is worth mentioning that you can provide a qualified association interface while using separate object in the implementation. You are only using separate properties in the interface if a client of person can obtain a contact property object. Often it is useful to hide the separate property to simplify the interface for the client.\")\n\n[<span id=\"55\">`分离属性`的一大优势是它可以让你把属性的信息放在属性中。 这些信息可能包括谁确定了属性，什么时候确定了属性等。 \\[Fowler AP§3.5\\]中的观察模式基于这个主题进行了深入的研究。如果您需要单独的属性，我在观察者模式所描述的大部分内容都值得思考。（我将观察模式看作是使用不同的属性。）</span>](#55 \"One of the big advantages of the Separate Properties is that it allows you put information about the property in the property. Such information might include who determined the property, when it was determined, and the like. The Observation pattern in \\[Fowler AP §3.5\\] build upon this theme in some depth. Much of what I’ve described there in terms of observations is worth considering if you need separate properties. \\(I see the observation pattern as a use of separate properties.\\)\")\n\n[<span id=\"56\">您可能想知道`分离属性`（模式）和限定关联（`UML`建模结构）之间的对比。 你也可以把合格的关联看作一种模式，一种联想模式。确实，我在\\[Fowler AP §15.2\\]中做了这个。我发现为设计创建模型考虑是有帮助的，因为它帮助我思考使用它们的权衡。当你将它们的模型比较清楚，如`分离属性`，这是特别有用的。当然，以模式开始的事情可以转化为建模结构，特别是如果使用`UML`构造型。历史映射模式\\[FowlerAP§15.3\\]就是一个很好的例子。我表示使用这种模式非常刻版。这是一个模式或建模？也许这是一个地板蜡和一个沙漠顶部。</span>](#56 \"You might be wondering at the contrast between separate properties \\(a pattern\\) and qualified associations \\(a UML modeling construct\\). You can also think of qualified associations as a pattern, a pattern of association. Indeed I did do this in \\[Fowler AP §15.2\\]. I have found it helpful to think of modeling constructs as patterns, for it helps me think about the trade-offs in using them. This is particularly useful when you are comparing them to something that is more clearly a pattern, such as separate property. Of course things that begin as patterns can be turned into modeling constructs, particularly if you use UML stereotypes. The historic mapping pattern \\[Fowler AP §15.3\\] is a good example of that. I represent that using the «history» stereotype. Is it a pattern or a modeling construction? Maybe it’s a floor wax and a desert topping too.\")\n\n---\n## [<span id=\"57\">具有多值关联的动态属性</span>](#57 \"Dynamic Properties with Multi-valued associations\")\n\n[<span id=\"58\">我上面的例子集中讨论了`动态属性`中每个键都有一个单一值的情况。 但是，您也可以在`动态属性`中有多个事件的情况。与人相处时，你可能会考虑一个多值的友好属性。处理这个问题有两种方法，一种简单而不令人满意，另一种令人满意，但（太）复杂。</span>](#58 \"My examples above have concentrated on cases where there is a single value for each key in the dynamic properties. But you can also have cases where there are multiple items in the dynamic properties. With Person you might consider a friends property which is multi-valued.There are two ways to deal with this, one that is simple and unsatisfying, another that is satisfying but (too) complex.\")\n\n\n[<span id=\"59\">简单的方法就是说`动态属性`的值可以是一个集合。然后我们可以像使用相同接口的其他对象一样操作它（清单11）。这很好，很简单，因为我们不需要对基本的`动态属性`模式做任何事情（这里的例子是一个类型化的`动态属性`，但是它可以和所有的模式一起工作）。然而，这并不令人满意，因为它不是真的是我们想要处理多值属性的方式。如果朋友是一个固定的属性，我们需要一个接口，如清单12所示。我不喜欢在这些情况下暴露集合。通过这样做，人员班级在我们添加或移除元素时就失去了应对的能力。这也消除了我们改变我们正在使用的集合类型的能力。</span>](#59 \"The simple approach is just to say that the value of a dynamic property can be a collection.We can then manipulate it like any other object with the same interface (Listing 11). This is nice and simple, since we don’t have to do anything to the basic dynamic property pattern.(The example here is with a typed dynamic property, but it will work with all of them.) It’s unsatisfying however because it is not really the way we would like to deal with multi-valued properties. If friends were a fixed property, we would want an interface along the lines of Listing 12. I don’t like exposing the vector in these cases. By doing so the person class loses the ability to react when we add or remove elements. It also removes our ability to change the type of collection we are using.\")\n\n```java\nPerson aPerson = new Person();\nContactType friends = new ContactType(“Friends”, Class.forName(“Vector”));\nPerson martin = new Person(“Martin”);\nmartin.setValueOf(“Friends”, new Vector());\nPerson kent = new Person(“Kent”);\nmartin.getValueOf(“Friends”).addElement(“Kent”);\nEnumeration friends = martin.getValueOf(“Friends”).elements();\n```\n> 列举11, 在类型化动态属性中使用集合值\n```java\nclass Person {\n    public Enumeration getFriends();\n    public void addFriend(Person arg);\n    public void removeFriend(Person arg);\n```\n> 列举12, 一个固定的多值属性的运作\n\n[<span id=\"60\">那么当我们有`动态属性`的时候，我们可以按照清单12的方式获得一个接口吗？ 那么，如果我们努力工作，就可以如图7所示。但这是一个复杂的模型。 通过一些巧妙的编码，我们可以隐藏接口（清单13和清单14）背后的大部分复杂性，并且使用起来相当方便（清单15）。但客户端仍然需要知道哪些属性是单值的，哪些属性是多值的，并且只有在运行时才能检查正确的使用情况。所有这些复杂性都是痛苦的-比使用`固定属性`更痛苦。我会非常不愿走这么远。</span>](#60 \"So can we get an interface along the lines of Listing 12, when we have dynamic properties? Well if we try hard enough we can, as you can see in Figure 7. But it is a complex model. With some clever coding we can hide much of that complexity behind the interface (Listing 13 and Listing 14) and make it reasonably convenient to use (Listing 15). But the client still needs to know which properties are single valued and which are multi-valued and all the checking for the right usage can only occur at run time. All this complexity is painful – a lot more painful than using fixed properties. I would be very reluctant to go this far.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/12_1.png)\n\n> 图7.满足对多值动态属性的过度支持\n\n```\nclass Person\n    public Object getValueOf(ContactType key);\n    public Enumeration getValuesOf(ContactType key);\n    public void setValueOf(ContactType key, Object newValue);\n    public void addValueTo(ContactType key, Object newValue);\n    public void removeValueFrom(ContactType key, Object newValue);\n    \nclass ContactType\n    public Class getValueType();\n    public boolean isMultiValued();\n    public boolean isSingleValued();\n    public ContactType(String name, Class valueType, boolean isMultiValued);\n```\n> 列举13, 图7的操作\n\n```java\nclass Person\n    public Object getValueOf(ContactType key) {\n        if (key.isMultiValued())\n            throw IllegalArgumentException(“should use getValuesOf()”)\n        //return the value\n    }\n    \n    public void addValueTo(ContactType key, Object newValue) {\n        if (key.isSingleValued())\n            throw IllegalArgumentException(“should use setValueOf”);\n        if (! key.getValueType().isInstance(newValue))\n            throw IllegalArgumentException (“Incorrect type for property”);\n        //add the value to the collection\n```\n> 列举14, 检查清单13的操作的使用情况\n\n```java\nfax = new ContactType(“fax”, Class.forName(“PhoneNumber”), false);\nPerson martin = new Person(“martin”);\nmartin.setValueOf(“fax”, new PhoneNumber(“123 1234”);\nmartinFax = martin.getValueOf(“fax”);\nfriends = new ContactType (“friends”, Class.forName(“Person”), true);\nmartin.addValueTo(“friends”, new Person(“Kent”));\n```\n> 列举15, 使用清单13的操作\n\n[<span id=\"61\">这种复杂性似乎是因为我们既有多值也有单值的`属性`。处理这些复杂性有一个内在的不同的接口，因此复杂性也是如此。当然，我们可以得到只有多值属性的情况。一个常见的模式是类型关系模式（图8）。在这里，一个人可能与许多不同公司有不同的雇佣关系（甚至与同一家公司有多个）。</span>](#61 \"This complexity appears because we have both multi valued and single-valued properties.There is an inherently different interface to dealing with these, hence the complexity. Of course we can get situations with only multi-valued properties. A common pattern for this is the Typed Relation ship pattern \\(Figure 8\\). Here a person may have number of different employment relationships with a number of different companies \\(or even several with the same company\\).\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/13_1.png)\n> 图8.类型关系的一个例子\n\n```java\nclass Employment {\n    public Employment (Person person, Company company, Employment Type type);\n    public void terminate()\n    …\n}\nclass Person {\n    public Enumeration getEmployments();\n    public void addEmployment (Company company, EmploymentType type);\n```\n> 列举16, 图8的`Java`接口\n\n[<span id=\"62\">正如我们想到的那样，很快就会发现，这与使用多值的`定义动态属性`非常类似，但是使用`分离属性`而不是合适的关联来表示。（或者说这句话太过分了？）实际上，图9显示了在这种情况下如何使用`定义动态属性`接口。这种事物的观点是真实的，所以一个类型化的关系不会添加任何新的模式语言。 但是类型化关系在建模圈子中是一种非常普遍的模式，很多人可能没有意识到它与`动态属性`模式的联系。</span>](#62 \"As we think of this, it should soon occur to you that this is really very similar as using a Defined Dynamic Property that is multi-valued, but expressed using a Separate Property rather than a Qualified Association. (Or is that sentence just too much of a mouthful?) Indeed Figure 9 shows how you can use a Defined Dynamic Property interface in this situation. This view of things is true, and so a typed relationship doesn’t add anything that new to this pattern language. But typed relationship is a very common pattern in modeling circles, and many may not realize its connection with the dynamic properties patterns.\")\n\n---\n### 类型关系\n- [<span id=\"63\">你如何表示两个对象之间的关系？（你如何表示多值动态属性？）</span>](#63 \"How do you represent a relationship between two objects?(How do you represent multi-valued dynamic properties?)\")\n- [<span id=\"63\">为两个对象之间的每个链接创建一个关系对象。 给关系对象一个类型对象来表示关系的含义。（类型对象是多值属性的名称。）</span>](#63 \"Create a relationship object for each link between the two objects. Give the relationship object a type object to indicate the meaning of the relationship.(The type object is the name of the multi-valued property.)\")\n---\n\n[<span id=\"64\">类型化关系的优势在于它可以很好地处理双向关系，并且为关系添加属性提供了一个简单的点。（当然，后者是一个`分离属性`的特征。）你可以在这个模式中添加一个复杂的知识级别，跟类型化的`动态属性`一样。但是，您应该考虑接口的影响。类型化关系迫使用户意识到雇佣对象，因为确实使用`分离属性`。事实上，人们倾向于将属性客体本身看作完全成熟的客体，而不是人（或公司）的一些属性。 但是合格的关联通常可以为许多目的提供更简单的接口。所以每当你看到，或者你正在考虑使用，一个类型的关系;你还应该考虑合格的关联形式。您可以在任何一个方向或两个方向上使用它，也可以将其用于除了键入的关系之外，或者除此之外。。</span>](#64 \"The strengths of typed relationship are that it works well with bi-directional relationships, and that it provides a simple point to add properties to the relationship. (The latter, of course, is a feature of separate properties.) You can add a sophisticated knowledge level to this pattern,along much the same lines as typed dynamic properties. However you should consider the interface implications. Typed relationships force users to be aware of the employment object,as indeed does any use of separate properties. Indeed people tend to see the property object as a full fledged object in its own right, rather as some property of the person (or company). But the qualified association can often provide a simpler interface for many purposes. So whenever you see, or you are considering using, a typed relationship; you should also consider the qualified association form. You can use it in either or both directions, and use it either in addition to the typed relationship, or in addition to it.\")\n\n[<span id=\"65\">但是这两种模式并不完全相同。如果使用图9，则表示雇主只能是某种特定工种的雇主。图8在图表中没有这样的约束，尽管大多数建模者会暗示这样的约束，除非雇用具有附加属性。当然，就业通常具有附加属性。一个常见的例子是日期范围（如问责制\\[Fowler，AP§2.4\\]）。</span>](#65 \"The two models are not quite identical however. If you use Figure 9 you are indicating that an employer can only be an employer once for a particular employment type. Figure 8 has no such constraint in the diagram as it stands, although most modelers would imply such a constraint,unless the employment had additional attributes. Often, of course, the employment does have the additional attributes. A common example is a date range (as in accountability \\[Fowler, AP §2.4\\].\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/14_1.png)\n> 图9.使用与图8相同情况的合格关联\n\n```java\npublic Person {\n    public void addEmployer (Company company, EmploymentType type);\n    public Enumeration getEmployersOfType (EmploymentType type);\n```\n> 列举17, 图9的接口\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/15_1.png)\n> 图10.键入的关系，显示通常假定的约束\n\n---\n## 不同种类的人\n[<span id=\"66\">到目前为止，我们假设我们只有一种人，我们为一个人定义的任何属性都是所有人的有效属性。但是，您确实会遇到不同类型的情况，以及不同类型的不同属性。管理人员可能需要一个管理部门的属性，执行人员可能需要一个属性作为高管卫生间的关键号码（在一个不是90年代的公司）。</span>](# \"So far we are assuming we only have one kind of person, and any properties we define for a person are valid properties for all people. However you do get situations where you have different types, and different properties for different types. A manager may need a property for department managed, an executive may need a property for executive washroom key number (in a not very 90’s company).\")\n\n[<span id=\"67\">别担心，我听到“使用继承愚蠢”的呼声。事实上，这是常用于分类的情况之一。实际上，这个过程比这个要复杂得多，特别是当你开始思考一个人可能扮演的角色时。我已经写了关于建模角色\\[Fowler roles\\]的主题的全文。角色模式考虑了我们对操作变化和`固定属性`变化感兴趣的情况。但在这种情况下，我想探索不同类型的对象与`动态属性`的概念的重叠。这种重叠会导致`动态属性知识级别模式`（一个对我的品味有点太大的名字）。</span>](#67 \"Don’t worry, I hear the cries of “use inheritance stupid”. Indeed this is one of the situations that is often used for subtyping. Actually it gets rather more involved than that, particularly when you start thinking of the various roles a person may play. I’ve written a whole paper on the subject of modeling roles \\[Fowler roles\\]. The roles patterns consider cases where we are interested in variations in operations and in variations of fixed properties. But in this case I want to explore the overlap of different kinds of object with the notion of dynamic properties. This overlap begets the dynamic properties knowledge level pattern \\(a name that is getting a little too large for my taste\\).\")\n\n[<span id=\"68\">为了使用这个模式，我们给`Person`一个`Person`类型的`类型对象`。然后，我们可以说，人物类型与联系人类型的关联指示哪些人物拥有该人物类型可用的属性。 如果我们尝试使用或要求某人的属性，则可以使用人员类型来检查使用情况是否正确。</span>](#68 \"To use the pattern we give the Person a type object of Person Type. We can then say that the person type’s association to contact type indicates which properties are available for people who have that person type. If we try to use, or ask for, a property on a person the person type can be used to check that the usage is correct.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/16_1.png)\n> 图11.动态属性知识水平\n\n```java\nclass Person {\n    public Object getValueOf(ContactProperty key);\n    public boolean hasProperty(ContactProperty key);\n    public void setValueOf(ContactProperty key, Object newValue);\nclass PersonType {\n    public boolean hasProperty(ContactProperty key);\n    public Enumeration getProperties();\n```\n> 列举18, 图11的操作\n```java\nclass Person {\n    public Object getValueOf (ContactProperty key) {\n        if (!hasProperty(key))\n            throw IllegalArgumentException(“Innapropriate key”);\n            //return the value\n```\n> 列举19, 检查具有动态属性知识级别的适当的密钥\n\n[<span id=\"69\">当我们开始使用这样的知识水平时，单独的属性变得越来越重要。 在这种情况下，我们很快就会开始停止将其视为一种属性，而不是把它作为一个对象。 什么是属性和什么是非属性之间的分界线是非常模糊的，这实际上取决于你对事物的看法。</span>](#69 \"As we start to use a knowledge level like this, the separate property becomes more and more important. In this case we soon start to stop thinking of it as a property, rather as some object in its own right. The dividing line between what is a property and what isn’t is very blurred,and it really depends upon your view of things.\")\n\n---\n### 动态属性知识水平\n- [<span id=\"70\">你如何执行某些类型的对象具有某些特性使用动态属性？</span>](#70 \"How do you enforce that certain kinds of objects have certain properties when you use dynamic properties?\")\n- [<span id=\"70\">创建一个知识级别来包含什么类型的对象使用的规则哪些类型的属性</span>](#70 \"Create a knowledge level to contain the rules of what types of objects use which types of properties\")\n---\n\n---\n\n## [<span id=\"71\">动态属性的几个小结</span>](#71 \"Some Summary Points on Dynamic Properties\")\n\n[<span id=\"72\">各种各样的`动态属性`构成了本文的大部分内容。但我必须重申，`动态属性`是我想要尽可能避免的。`动态属性`带来了很大的负担：接口不够清晰，使用操作而不是存储数据的困难。只是有时你别无选择，只能使用它们，在这种情况下，这篇论文应该有用的给你提供一些替代方案和之间的权衡。<span>](#72 \"Various kinds of dynamic properties make up the bulk of this paper. But I have to reiterate that dynamic properties are something I like to avoid if at all possible. Dynamic properties carry a heavy burden of disadvantage: the lack of clarity of the interface, the difficulty in using operations instead of stored data. It is just that sometimes you have little choice but to use them, and it is on these occasions that this paper should come in useful to give you some alternatives and the trade-offs between then.\")\n\n[<span id=\"73\">`动态属性`出现在改变接口有困难的地方。那些使用像他们这样的分布式对象系统的人，至少在原则上是这样，因为它允许他们在不改变客户端的情况下改变接口 - 而在分布式系统中，可能很难找到你的客户端。但是你仍然应该警惕这样做。每当你为`动态属性`添加一个新的键到你的键上，你都在有效地改变接口。所有的`动态属性`都在替换运行时检查的编译时间检查。你仍然有同样的问题保持你的客户端最新。</span>](#73 \"Dynamic properties appear most where there are difficulties in changing the interface. People who work with distributed object systems like them, at least in principle, because it allows them to alter an interface without compromising clients – and in a distributed system it may be very difficult to find who your clients are. But you should still be wary of doing this. Any time you add a new key to your keys for the dynamic properties you are effectively changing the interface. All the dynamic properties are doing is replacing a compile time check for a runtime check. You still have the same issues of keeping your clients up to date.\")\n\n[<span id=\"74\">`动态属性`的另一个常见用途是在数据库中。这里不仅仅是由于接口的问题，而且由于数据迁移的问题（如果不是主要的话）。更改数据库模式不仅会导致对使用该模式的程序进行潜在更改，还可能会强制您执行复杂的数据转换练习。同样，`动态属性`允许您在不更改数据库模式的情况下更改内容，从而不需要进行任何数据转换。在大型数据库中，这可能是一个引人注目的优势。</span>](#74 \"Another common use of dynamic properties is in databases. Here it is not just due to the problem of interface, but also (if not primarily) due to problems of data migration. Changing a database schema does not only cause a potential change to programs using the schema, it also may force you to do a complicated data conversion exercise. Again dynamic properties allow you to change things without changing the database schema, and thus not needing to do any data conversion. In large databases this can be a compelling advantage.\")\n\n---\n\n## [<span id=\"75\">一个你不知道的有关于属性的](#75 \"A property you don’t know about\")\n\n[<span id=\"76\">我想在本文中添加一个最后一个重要的属性。这是一个没有意识到属性的对象的情况。当属性被另一个对象所隐含，以及与有关的方式时，就会发生这种情况。</span>](#76 \"There is a last but important kind of property that I want to add to this paper. This is the case of an object having a property without realizing it. This occurs when the property is implied by another object and the way it relates to you.\")\n\n[<span id=\"77\">考虑一个管理数据库连接的对象。它会创建一堆数据库连接，并在请求时将它们传递给其他对象。当一个客户端连接完成后，可以将其返回给管理员，以供其他人使用。您可以通过向连接添加`isBusy`属性来完成此操作。图12显示了一个使用外部属性的替代方案。连接是空闲的还是繁忙的是由连接管理器中的哪个集合决定的。如果你有一个连接，你不能问它是空闲的还是忙的，而是你必须要求连接管理器是否特定的连接空闲或忙碌。你可以这样说，因为组合关联是一种方式。连接不知道连接管理器。 从某种意义上来说，空闲/忙碌状态根本不是连接的属性。但至少从某种意义上来说，这就是我提到它的原因。</span>](#77 \"Consider an object that manages database connections. It creates a bunch of database connections and hands them out to other objects when requested. When a client is done with the connection it can return it to the manager to be available for someone else. You could do this by adding an isBusy property to the connection. Figure 12 shows an alternative using an extrinsic property. Whether the connection is free or busy is determined by which collection in the connection manager it lies in. If you had a connection, you could not ask it whether it is free or busy, instead you would have to ask the connection manager whether a particular connection is free or busy. You can tell this because the composition associations are one way.The connection has no knowledge of the connection manager. In a sense the free/busy status isn’t a property of connection at all. Yet at least in some sense it is, which is why I mention it.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/17_1.png)\n> 图12.使用外部收集属性\n\n[<span id=\"78\">在纯粹的概念模型意义上，这种模式没有多大意义。但是，为什么你可能想要使用它，有实际的实施原因。如果您希望对此属性进行的所有更改都通过连接管理器进行，则此方法可以清楚地说明这一点。特别是当你想让连接管理器给你一个自由的连接，而你不关心哪一个时，这是一种自然的风格。</span>](#78 \"In a pure conceptual modeling sense this pattern does not make much sense. But there are practical implementation reasons why you may want to use it. If you want all changes to this property to go through a connection manager, then this approach makes this clear. In particular this is a natural style when you want the connection manager to give you a free connection and you don’t care which one.\")。\n\n[<span id=\"79\">使用外部属性的另一个原因是如果连接类是由其他人提供的，并且您不能更改其接口。 你可以添加新的属性而不用改变连接类。</span>](#79 \"Another reason to use an extrinsic property is if the connection class is provided by someone else and you can’t change its interface. You can add the new property without changing the connection class at all.\")\n\n---\n### 外在属性\n- [<span id=\"80\">你如何给对象一个属性而不改变它的接口？</span>](#80 \"How do you give an object a property without changing its interface?\")\n- [<span id=\"80\">让另一个对象负责知道这个属性。</span>](#80 \"Make another object responsible for knowing about the property.\")\n\n---\n[<span id=\"81\">`外在属性`的一个大问题是它会导致一个尴尬和不自然的接口。通常如果你想知道一些东西，你只要找到合适的对象并提出问题。在这里您需要找到保存外部集合的对象，并询问有关适当的对象。在某些情况下，比如这个，似乎是合理的。但大多数情况下，我宁愿让对象了解自己的属性（在这种情况下，我称之为`内在属性`）。</span>](#81 \"The big problem with the extrinsic property is that it leads to an awkward and unnatural interface. Usually if you want to know something, you just find the appropriate object and ask it. Here you need to find the object that holds the external collection, and ask it about the appropriate object. In some circumstances, such as this one, it seems reasonable. But most of the time I would prefer to let objects know about their own properties (in which case I call them intrinsic properties).\")\n\n---\n\n## 最后的想法\n\n[<span id=\"82\">当我完成本文时，我觉得需要再次敦促你不要使用我在这里写的东西，除非你真的需要它。`固定属性`的好处是伟大的。如果你需要别的东西，那么我希望这篇文章能给你一些想法和一些指导。但`固定属性`永远是你的第一选择。</span>](#82 \"As I finish this paper, I feel the need again to urge you not to use what I’ve been writing about here unless you really do need it. The advantages of fixed properties are great. If you need something else, then I hope this paper gives you some ideas and some guidance. But fixed properties are always your first choice.\")\n\n---\n\n## 参考\n\n[Fowler, AP] Fowler, Martin. Analysis Patterns: Reusable Object Models, Addison-1997\n[Fowler, roles] Fowler, Martin. Dealing with Roles,http://www.awl.com/cseng/titles/89542-0/awweb.htm\n[POSA] Buschman et al, Pattern Oriented Software Architecture, Wiley 1997\n\n\n----\n## 原文地址：http://martinfowler.com/apsupp/properties.pdf","source":"_posts/属性的行为.md","raw":"---\ntitle: 属性的处理\ntags:\n  - 属性\n  - 设计\ncategories: 译文\npermalink: dealing-with-properties\ndate: 2017-11-30 23:22:20\n---\n\n# 属性的处理(初步校对)\n---\n*Martin Fowler* (《重构：改善既有代码的设计》作者)  <P>\nfowler@acm.org\n\n---\n[<span id=\"1\">你创建的每个对象几乎都需要属性：关于对象的一些声明。一个人可能有一个身高属性，一个公司可能有一个CEO，一个航班可能有一个航班号。有很多方法来创建属性。在这篇文章中，我将探讨其中一些你经常需要用到的方法。我经常看到涉及到这个话题的图案，但他们通常只涉及一部分。在这里，我想更广泛地讨论这个问题，以便更好地讨论这些选项。</span>](#1 \"Almost every object you create needs properties: some statement about the object. A person may have a height, a company may have a CEO, a flight may have a flight number. There are a number of ways to model properties. In this article I will explore some of these ways and when you may want to use them. I’ve often seen patterns touch on  this subject, but they usually only cover part of the picture. Here I want to cover the issue  more broadly to give a better discussion of the options.\")\n\n[<span id=\"2\">最常见和最简单的情况是使用`固定属性`，即只声明类的属性。在绝大多数情况下，你只需要使用`固定属性`。在有大量固定属性或者需要频繁修改时，使用`固定属性`容易出错。这种情况下你可能会使用`动态属性`。所有的`动态属性`都有一个参数化属性的特性：你需要一个带参的方法来查询一个属性。当参数只是一个字符串,最简单的是`灵活的动态属性`。这样定义和使用属性会比较容易，但难以控制。如果你需要使用`动态属性`，在你的参数必须是一个类的实例的情况下。使用类型`动态属性`来增强对`动态属性`的控制。</span>](#2 \"The most common, and the simplest case is to use a Fixed Property , that is just declare the attribute on the class. In the vast majority of cases that is all you need to do. Fixed properties begin to fail when you have a large amount of them, or you need to change them frequently, possibly at run time. These forces lead you to the varieties of Dynamic Property . All dynamic properties have the quality of a parameterized attribute where to query a property you need to use a query method with a parameter. The simplest of these is the Flexible Dynamic Property where the parameter is just a string. This makes it easy to define and use properties, but is difficult to control. If you need that control you can use a Defined  Dynamic  Property  where  your parameters must be instances of some class. A further step of control allows you to strongly type your dynamic property with a Typed Dynamic Property .\")\n\n[<span id=\"3\">随着您的属性结构变得越来越复杂，您应该考虑将它们设置为“单独属性”，把一些属性综合起来创建一个对象。如果你需要多值属性，你可以考虑集合。在这篇文章中最复杂的例子是你想要规则来控制什么类型的对象具有什么样的属性 - 这需要一定的`动态属性`知识水平。</span>](#3 \"As your property structures get more involved, you should consider making them Separate Properties , which makes the property an object in its own right. If you need multi-valued properties you can consider a Typed Relationship . The most complex example in this theme is where you want rules to control what kinds of objects have what kinds of properties – this needs a Dynamic Property Knowledge Level .\")\n\n[<span id=\"4\">另一种属性完全是`外部属性`（Extrinsic Property），如果你想使用接口给一个对象创建一个属性，那么这就是你需要使用的一种模式。<span>](#4 \"Another variety of property entirely is the Extrinsic Property , a pattern you use if you want to give an object a property, but not alter its interface to support it.\")\n\n[<span id=\"5\">问题</span>](#5 \"Problem\")\t|[<span id=\"5\">答案</span>](#5 \"Solution\")\t|[<span id=\"5\">名称</span>](#5 \"name\")\t|[<span id=\"5\">页码</span>](#5 \"page\")\n--- | --- | --- | ---\n &nbsp;  |[<span id=\"6\">在编程语言里，当使用一个特定的属性，它需要查询或者更新。<span>](#6 \"Give it a specific attribute for that fact. This will translate to a query method and probably an update method in a programming language.\")|[`固定属性`](#固定属性 \"Fixed Property\")|4\n &nbsp;  |[<span id=\"7\">提供可参数化的属性，可以根据参数表示不同的属性</span>](#7 \"Provide a parameterizable attribute which can represent different properties depending on the parameter\")|[`动态属性`](#动态属性 \"Dynamic Property\")|4\n &nbsp;  |[<span id=\"8\">提供一个用字符串参数化的属性。声明一个属性只是使用字符串.](#8 \"Provide an attribute parameterized with a string. To declare a property just use the string.\")|[`灵活的动态属性`](#灵活的动态属性 \"Flexible Dynamic Property\")|5\n &nbsp;  |[<span id=\"9\">提供用某种类型的实例参数化的属性。要声明属性，请创建该类型的新实例</span>](#9 \"Provide an attribute parameterized with an instance of some type. To declare a property create a new instance of that type\")|[`定义动态属性`](#定义动态属性 \"Defined Dynamic Property\")|7\n &nbsp;  |[<span id=\"10\">提供使用某种类型的实例进行参数化的属性。要声明属性，请创建该类型的新实例并指定该属性的值类型.</span>](#10 \"Provide an attribute parameterized with a instance of some type. To declare a property create a new instance of the type and specify the value type of the property.\")|[`类型动态属性`](#类型动态属性 \"Typed Dynamic Property\")|9\n[<span id=\"11\">你如何表示一个对象的属性，并允许对象的属性也具有属性</span>](#11 \"How do you represent a fact about an object, and allow facts to be recorded about that fact\")|[<span id=\"11\">为每个属性创建一个单独的对象。 关于那个属性的详细可以作为这个对象的的属性.<span>](#11 \"Create a separate object for each property. Facts about that property can then be made properties of that object.\")|[`分离属性`](#分离属性 \"Separate Properties\")\t|10\n[<span id=\"12\">你如何表示两个对象之间的关系（如何表示多个值动态属性？）</span>](#12 \"How do you represent a relationship between two objects?(How do you represent multi-valued dynamic properties?)\")|[<span id=\"12\">为两个对象之间的每个链接创建一个关系对象。 给关系对象一个类型对象来表示关系的含义。 （类型对象是多值属性的名称。）<span>](#12 \"Create a relationship object for each link between the two objects. Give the relationship object a type object to indicate the meaning of the relationship. (The type object is the name of the multi-valued property.)\")|[`类型关系`](#类型关系 \"Typed Relationship\")| 14\n[<span id=\"13\">当你使用动态属性时，你如何强制某些类型的对象具有某些属性？</span>](#13 \"How do you enforce that certain kinds of objects have certain properties when you use dynamic properties?\") |[<span id=\"13\">创建知识级别以包含哪些类型的对象使用哪些类型的属性的规则](#13 \"Create a knowledge level to contain the rules of what types of objects use which types of properties\") |[`动态属性知识水平`](#动态属性知识水平 \"Dynamic Property Knowledge Level\")| 16\n[<span id=\"14\">你如何给一个对象新增一个属性而不改变它的接口？</span>](#14 \"How do you give an object a property without changing its interface?\")|[使用另一个对象负责属性](#14  \"Make another object responsible for knowing about the property\")| [`外在性质`](#外在性质 \"Extrinsic Property\")| 18\n\n\n---\n## 什么是属性\n\n\n[<span id=\"15\">这不是一个愚蠢的问题。当人们使用“属性”这个词时，他们可能有很多不同的含义。对某些属性来说，是一个类的实例变量或数据成员。对于其他人来说，它们就像`UML`图中的一个盒子一样。所以在我开始这篇文章之前，我必须定义这个词的用法。</span>](#15 \"This is not a silly question. When people bandy around the term ‘property’ they can mean many different things. To some a property is an instance variable or data member of a class. To others they are kind of thing that goes in a box in a UML diagram. So before I start this article I have to define my usage of the word.\")\n\n\n[<span id=\"16\">为了我的目的，一个属性是关于一个可以通过查询方法获得的对象的一些信息。它可能是一个值类型（如`Java`中的`int`）或一个类的实例。您可能能够修改该属性，但不一定。您可以在创建对象时设置属性，但不一定。该属性可以作为实例变量或数据成员存储，但不一定是。班级可能会从另一个班级获得值，或者经过一些进一步的计算。因此，我采用属性的接口视图而不是实现视图。这是我在设计中经常使用的习惯：对于我来说，面向对象的本质是将接口与实现分开，并使接口更加重要。</span>](#16 \"For my purposes a property is some information about an object that you can obtain by a query method. It may be a value type (such as int in Java) or an instance of a class. You may be able to update the property, but not necessarily. You may set the property when you create the object, but again not necessarily. The property may be stored as an instance variable or data member, but it does not have to be. The class may get the value from another class, or go through some further calculation. I am, therefore, taking an interface view of properties rather than an implementation view. This is a regular habit of mine in design: for me the essence of object-orientation is that you separate interface from implementation, and make interface more important.\")\n\n---\n\n## <span id = \"固定属性\">固定属性</span>\n[<span id=\"17\">`固定属性`是我们使用的最常见的属性。 固定属性在类型的接口中声明。 它给出了属性的名称和返回类型。 图1显示了使用`UML`建模的属性，示例1显示了这些属性的查询方法如何在`Java`中使用。 我已经选择了这个例子来说明这个讨论同样适用于`UML`属性和`UML`关联。 它也适用于计算值（年龄）以及那些合理存储的数据（出生日期）。](#17 \"Fixed properties are by far the most common kind of properties that we use. A Fixed Property is declared in the interface of the type. It gives the name and the return type for the property. Figure 1 shows properties modeled in UML, Listing 1 shows how the query methods for these properties would show up in Java. I’ve picked the example to show that this discussion applies equally well to UML attributes as well as UML associations. It also applies to calculated values (age) as well as those that are reasonably stored data (date of birth).\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/3_1.png)\n> 图1.使用`固定属性`建模的人员\n```java\nclass Person {\n    public Date getDateOfBirth();\n    public int getAge();\n    public Quantity getHeight();\n    public Company getEmployer();\n    public void setDateOfBirth (Date newDateOfBirth);\n    public void setEmployer (Company newEmployer);\n```\n> 列举,图1的`java`操作\n\n[<span id=\"18\">查询操作通常遵循一些命名约定。在`程序语言`中，您总是在属性名称（`dateOfBirth`）之后命名查询。 `C++`从来没有一个固定的约定，有些人只是在属性后面命名，而另一些人则使用`get`约定（`getDateOfBirth`）。 `Java`从没有特别的约定开始，但现在大多数人都采用`get`约定。就我个人而言，当您阅读代码时，我发现`get`令人恼火，所以我宁愿忽略它，但`Java`风格是使用`get`，所以现在就使用它。无论您使用的是存储值还是派生值，都应确保遵循相同的约定。使用`Person`的客户端不应该知道或关心年龄是否存储或派生。](#18 \"Query operations usually follow some naming convention. In smalltalk you always name the query after the name of the property (dateOfBirth). C++ never had a fixed convention, some people just named it after the property, others used the 'get' convention (getDateOfBirth). Java started with no particular convention but now most people adopt the get convention. Personally I find the ‘get’ irritating when you read code so I would prefer to leave it out, but the Java style is to use the get, so I use it now. You should ensure that you follow the same convention whether you are using stored or derived values. Clients of the person class should not know or care whether age is stored or derived.\")\n\n[<span id=\"19\">`修饰符`操作的存在取决于您是否希望直接修改值。如果你这样做，那么你会根据一些命名方案，例如`setDateOfBirth`（`Date`）提供一个修饰符操作。对于`返回值`存在不同的约定。你可以返回属性的新值（`Date`），被修改的对象（`Person`），或者什么都没有（`void`）。我更愿意在修饰符上返回`void`，以帮助明确修饰符和查询之间的区别。](#19 \"The presence of modifier operations depends on whether you want the values to be directly modified. If you do then you will provide a modifier operation according to some naming scheme, eg setDateOfBirth(Date). Different conventions exist as to the return value. You can return the new value of the property (Date), the object being modified (Person), or nothing (void). I prefer to return void on modifiers, to help make clear the difference between a modifier and a query.\")\n\n---\n### 固定属性\n  [<span id=\"20\">你如何代表一个对象的事实？</span>](#20 \"How do you represent a fact about an object?\")\n  -  [<span id=\"20\">给它一个这个事实的特定属性。这将转化为查询方法，并可能是一种编程语言的更新方法。</span>](#20 \"Give it a specific attribute for that fact. This will translate to a query method and probably an update method in a programming language.\")</br>\n    [<span id=\"20\">接口很清晰明确</span>](#20 \"Clear and explicit interface\")</br>\n    [<span id=\"20\"><font color=\"red\">只能在设计时添加属性</font></span>](#20 \"Can only add properties at design time\")</br>\n---\n  \n[<span id=\"21\">您可能希望为属性的`构造函数`提供参数。通常，您要在`构造函数`中设置足够的属性，以便构建格式良好的类。</span>](#21 \"You may wish to provide arguments to the constructor for properties. Typically you want to set enough properties in the constructor so that you construct a well-formed class.\")\n\n[<span id=\"22\">不想直接修改的属性不应该有`修饰符`操作。如果您只希望从出生之日起计算，那么年龄属性可能就是这种情况。对于一个不可改变的`属性`也是如此：一个在类的生命周期中不会改变的`属性`。当你想使`属性`不可改变时，请记住考虑到人为错误。虽然出生日期对于现实世界中的人类来说是不可改变的`属性`，但是您可能会在输入到计算机系统时出现错误，从而使其变得可变。软件常常模拟我们所知道的世界，而不是世界本身。</span>](#22 \"Properties that you don’t want to be modified directly should not have a modifier operation.This might be the case for the age property, if you only want that determined by calculation from the date of birth. It also would be the case for an immutable property: one that does not change for the lifetime of the class. When you think of making a property immutable, remember to take human error into account. While the date of birth is an immutable property for humans in the real world, you might make a mistake typing into a computer system, and thus make it mutable. Software often models what we know of the world, rather than the world itself.\")\n\n[<span id=\"23\">`固定属性`是迄今为止您将遇到的最常见的`属性`形式。他们这样做是有原因的：他们使用简单方便。您应该使用固定属性作为表示属性的第一个也是最常见的选择。在本文中，我将给出许多固定属性的替代方案。在某些情况下，这些替代品更好，但大多数情况下不是。请记住，当我们经历的选择。我99％的时间使用固定的属性。其他品种更为复杂，这就是为什么我把这篇论文的大部分花费在他们身上 - 也是为什么我不愿意使用它们！</span>](#23 \"Fixed properties are by far the most common form of properties that you will come across.They are that way for good reasons: they are simple and convenient to use. You should use fixed properties as your first and most common choice for representing properties. In this paper I am going to give a lot of alternatives to fixed properties. For certain situations these alternatives are better, but most of the time they are not. Remember that as we go through the alternatives. I use fixed properties 99% of the time. Other varieties are more complex, which is why I'm spending most of this paper on them — and also why I prefer not to use them!\")\n\n## <span id = \"动态属性\">动态属性</span>\n[<span id=\"24\">`固定属性`的关键在于您在设计时修复了这些属性，并且所有实例在运行时都必须遵循该决定。 对于一些问题，这是一个尴尬的限制。 想象一下，我们正在建立一个复杂的联络系统。 有一些东西是固定的：家庭住址，家庭和工作电话，电子邮件。 但他们是各种各样的小变化。 对于需要记录父母地址的人，另一个人有白天工作和晚上工作号码。 事先很难预测所有这些事情，每次更改系统时都必须经过编译，测试和分发。 要处理这个问题，你需要使用动态属性。</span>](#24 \"The key thing about fixed properties is that you fix them at design time, and all instances at run time must follow that decision. For some problems this is an awkward restriction. Imagine we are building a sophisticated contact system. There are some things that are fixed: home address, home and work phone, email. But they’re all sorts of little variations. For someone you need to record their parent’s address, another has a day work and evening work numbers.It’s hard to predict all these things in advance, and each time you change the system you have to go through compiling, testing, and distribution. To deal with this you need to use dynamic properties.\")\n\n---\n### 动态属性\n  [<span id=\"25\">你如何代表一个对象的事实？</span>](#25 \"How do you represent a fact about an object?\")</br>\n  [<span id=\"25\">提供可参数化的属性，可以根据参数表示不同的属性</span>](#25 \"Provide a parameterizable attribute which can represent different properties depending on the parameter\") </br>\n   - [<span id=\"25\"> 可以在运行时添加属性</span>](#25 \"Can add properties at run time\")\n   - [<span id=\"25\"><font color=\"red\">接口不清晰</font></span>](#25 \"Unclear interface\")\n---\n  \n[<span id=\"26\">`动态属性`有多种变化，每种变化都会在`灵活性`和`安全性`之间做出不同的选择。 最简单的方法是`灵活动态属性`。 这种模式的本质是为键值为简单值的人（通常是字符串）添加一个合格的关联（参见图2和示例2）。 如果您想为某人Kent添加休假地址，则只需使用清单3中的代码即可。您不需要重新编译人员类。 你甚至可以建立一个图形用户界面（`GUI`）或者文件读取器来添加属性，而不用重新编译客户端。</span>](#26 \"There are several variations on dynamic properties, each of which make different trade-offs between flexibility and safety. The simplest approach is Flexible Dynamic Properties. The essence of this pattern is that you add a qualified association to the person whose key is a simple value, usually a string (see Figure 2 and Listing 2). If you want to add a vacation address to a person Kent, you just use the code in Listing 3. You don’t need to recompile the person class. You could even build a GUI or a file reader that would add properties without recompiling the client either.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/5_1.png)\n> 图2.使用动态属性建模的人员\n```java\nclass Person {\n    public Object getValueOf(String key);\n    public void setValueOf(String key, Object value);\n```\n> 列举2,图2的`java`方法\n```java\nkent.setValueOf(“VacationAddress”, anAddress);\nAddress kentVactation = (Address) kent.getValueOf(“VacationAddress”)\n```\n> 列举3,使用动态属性\n[<span id=\"27\">这样说，你可能想知道为什么有人会使用固定的属性，因为动态的像这样的属性给了你更多的灵活性。当然有一个成本，它在于软件各部分之间依赖关系的清晰度降低。这一切都非常好给一个人增加一个度假地址属性，但是你怎么知道把它重新取回呢？有了固定的属性，你可以看看人的界面，看看属性。该编译器可以检查不要求对象做不理解的事情。 用一个动态属性，你不能做任何设计时检查。此外的界面人很难看。不只是你看`Person`的声明接口 -你也必须找到不会出现在类接口中的动态属性。你必须找到那些设置属性的代码部分（通常不会在`Person`类中）提现出来。</span>](# \"Said like that, you might wonder why anyone would ever use fixed properties, since dynamic properties such as this give you so much more flexibility. Of course there is a cost, and it lies in the reduction of the clarity of the dependencies between parts of the software. It is all very well adding a vacation address property to a person, but how do you know to get it back again? With fixed properties you can just look at the interface of person and see the properties. The compiler can check that don’t ask an object to do something it doesn’t understand. With a dynamic property you cannot do any design-time checking. Furthermore the interface of person is harder to see. Not just do you look at Person’s declared interface – you also have to find the dynamic properties, which will not be present in the class interface. You have to find that part of the code that sets the property (which usually will not be in the Person class at all) and dig it out.\")\n\n---\n### 灵活动态属性\n  - [<span id=\"28\">你如何代表一个对象的事实？</span>](#28 \"How do you represent a fact about an object?\")</br>\n  - [<span id=\"28\">提供一个用字符串参数化的属性。只声明一个属性使用字符串。</span>](#28 \"Provide an attribute parameterized with a string. To declare a property just use the string.\") </br> \n---\n\n[<span id=\"30\">不仅是属性很难找到，它的依赖也是一个噩梦。随着固定属性的客户端代码有一个依赖于人类 - 一个依赖是难以跟踪。如果你改变属性的名字，编译器会让你知道，并告诉你需要改变什么代码才能解决问题。但灵活的动态属性创建一个依赖于任意一段代码。它可能是属于一个类的代码甚至不能被客户端看到。如果有人更改密钥字符串会发生什么？如果有人改变他们把键入字符串的对象的类型会发生？不仅仅是编译器没法帮助你，你甚至不知道从哪里开始查找变化。</span>](#30 \"Not just is the property hard to find, it also creates a nightmare dependency. With fixed properties the client code has a dependency to the person class – a dependency that is easy to keep track of. If you change the name of the property the compiler will let you know, and tell you what code you need to change to fix things. But the Flexible Dynamic Property creates a dependency into some arbitrary piece of code. It could be code that belongs to a class that is not even visible to the client. What happens if someone changes the key string? What happens if someone changes the type of object they put into the key string? Not just can the compiler do nothing to help you, you don’t even know where to start looking for potential changes.\")\n\n[<span id=\"31\">`灵活的动态属性`在最极端的情况下显示了这个问题。 该属性可能是`Person`的任何客户端在设计时创建。 如果另一个人的客户端使用同一个属性，那么你就很难找到两个类之间的依赖关系。 此外属性可以在运行时通过读取文件或通过`GUI`添加。 即使在运行时，不可能发现一个人的哪些动态属性是合法的。 当然，你可以问一个人，如果它有一个度假地址的属性 - 但如果没有一个这是否意味着这一点人没有假期地址，或者是否意味着没有这样的度假地址属性？ 而如果现在没有这样的属性，那并不意味着它几秒钟后不会有。</span>](#31 \"Flexible Dynamic Properties show this problem at it’s most extreme. The property could be created at design time by any client of Person. If another client of person uses that same property you have a dependency between two classes that is very hard to find. Furthermore properties can be added at run time by reading a file or by a GUI. It is impossible to find out, even at run time, what are the legal dynamic properties for a person. True you can ask a person if it has a property for vacation address – but if there isn’t one does that mean that that person does not have a vacation address, or does it mean that there is no such property as vacation address? And if it has no such property now, that doesn’t mean it won’t have one a few seconds later.\")\n\n[<span id=\"32\">灵活动态特性的另一个关键缺点是很难替代它们进行操作。封装的一个关键优势是使用属性的客户端无法分辨它是作为对象数据的一部分存储的，还是通过方法来计算的。这是一个对象方法非常重要的一部分。它可以让你不只是一个普通的接口实现，而且在客户端不知情的情况下改变你期望的值。当存在子类型，你甚至可以有一个超类型存储属性和子类计算，反之亦然。但是，如果要使用动态属性，则只能更改存储的数据一个计算就是在通用访问器中为`动态属性`设置一个特定的数值,清单4中的代码。这个代码可能很脆弱，难以维护。</span>](#32 \"Another key disadvantage of flexible dynamic properties is that it is difficult to substitute them for operations. One of the key advantages of encapsulation is that a client that uses a property cannot tell whether it is stored as part of an object’s data, or computed by a method. This is a very important part of the object approach. It allows you not just a regular interface for both purposes, but also to change your mind without the client knowing. In the presence of subtyping you can even have a supertype store the property and subclasses compute or vice versa. However if you want to use dynamic properties the only way you can change stored data to a calculation is to put a specific trap in the general accessor for the dynamic property along the lines of Listing 4. This code is likely to be brittle and awkward to maintain.\")\n\n```java\nclass Person {\n    public Object getValueOf (String key) {\n        if (key = “vacationAddress”) \n            return calculatedVacationAddress();\n        if (key = “vacationPhone”) \n            return getVacationPhone();\n        // else return stored value…\n```\n> 列举4,用操作替换`动态属性`\n\n[<span id=\"33\">其他形式的动态属性可以帮助您解决其中一些问题，但不是全部。该`动态属性`的最大的缺点是：你失去了清晰的接口和所有的设计时间检查。`动态属性`的不同方法会让你额外写不同的检查方法。如果你需要`动态属性`，并且当然有确定的情况你这样做，那么你只需要放弃设计时间检查和明确的设计时间接口。唯一的问题是如何明确接口和有多少运行时检查。使用灵活的动态属性也会有同样的问题。</span>](#33 \"Other forms of dynamic property help you solve some of these problems but not all. The essential disadvantage of a dynamic property is that you lose the clear interface and all designtime checking. Different approaches to dynamic properties give you different abilities to do run-time checking. If you need dynamic properties, and there are certainly situations when you do, then you just have to give up design time checking and a explicit design time interface. The only question is how explicit an interface and how much checking you can do at run time. With Flexible Dynamic Properties you don’t get any of either.\")\n\n[<span id=\"34\">你经常在数据库中发现动态属性，因为改变它通常是一个痛苦数据库模式，特别是如果有大量的数据迁移。分布式的接口例如在`CORBA`中的组件也经常因为相似的原因而使用动态属性。那里是很多使用界面的远程客户，所以你不愿意改变它。在这两种情况下，编译时和运行时间之间的区别并不是设计时和生产之间的区别。</span>](#34 \"You find dynamic properties often in databases because it is often a pain to change the database schema, especially if there would be a lot of data to migrate. Interfaces of distributed components, such as in CORBA, also often use dynamic properties for a similar reason. There are a lot of distant clients using the interface, so you are reluctant to change it. In both of these cases it is not so much a distinction between compile-time and run-time, as much as a distinction between design-time and production.\") \n\n[<span id=\"35\">如果你正在做的是通过`GUI`显示和更新信息，而代码永远不会对键进行固定的引用（即，你永远不会看到像清单3那样的代码），那么使用灵活`动态属性`就非常安全。这是因为你没有设置一个任意字符串作为一个关键的讨厌的依赖。 否则，你应该考虑`动态属性`的其他方法之一。</span>](#35 \"If all you are doing is displaying and updating information via a GUI, and the code never makes a fixed reference to the keys (i.e. you never see code like Listing 3), then you are pretty safe with a Flexible Dynamic Property. This is because you have not set up a nasty dependency to some arbitrary string as a key. Otherwise you should consider one of the other approaches to dynamic properties.\")\n\n[<span id=\"36\">更多运行时检查的第一步是定义的动态属性。与`灵活动态属性`相反，定义的关键区别在于`动态属性`使用的关键字不再是一些任意的字符串，而是现在某个类的一个实例（图3）。</span>](#36 \"The first step towards more run-time checking is the Defined Dynamic Property. The key difference between a defined as opposed to a flexible dynamic property is that the key used by the dynamic property is no longer some arbitrary string, but is now an instance of some class (Figure 3).\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/7_1.png)\n\n> 图3.定义的`动态属性`\n\n[<span id=\"37\">在它的表面上使用定义的`动态属性`并没有太大的改变。事实上，代码界面几乎完全相同（清单5和清单6）。但是现在，关键字的选择不再是完全随意的，而是受到接触`类型`的限制。当然，这仍然允许您在运行时添加`属性`-只需创建一个新的关联`类型`。不过现在至少在某个地方可以找到一个潜在的`键`列表，而无需浏览程序`代码`。 在设计时添加的任何键都可以在关联类型类的加载程序中收集。您可以轻松地提供服务，以在运行时查找合法的`键`。</span>](#37 \"On the face of it using defined dynamic property does not change much. Indeed the code interface is almost identical (Listing 5 and Listing 6). But now the choice of keys is no longer entirely arbitrary, it is limited by the instances of contact type. Of course this still allows you to add properties at run time – you just create a new contact type. However now there is at least somewhere someone can look to get a list of potential keys without having to trawl through the program text. Any keys added at design time can be collected in a loader routine in the contact type class. You can easily provide services to find out the legal keys at run time.\")\n\n```java\nclass Person {\n    public Object getValueOf(ContactType key);\n    public void setValueOf(ContactType key, Object value);\n```\n> 列举5, 图3的Java接口\n```java\nclass ContactType {\n    public static Enumeration instances();\n    public static boolean hasInstanceNamed(String name);\n    public static ContactType get(String name);\n```\n> 列举6,为定义的属性类型提供的服务\n\n[<span id=\"38\">你现在可以设置一些检查来防止由于某人要求一个不存在的`动态属性`而导致的错误。我在这里抛出一个未经检查的`异常`，因为我认为`get（）`的前提条件是`客户端`为联系人类型提供合法名称。客户端总是可以通过使用`hasInstanceNamed（）`来执行这个检查，但是大多数情况下客户端使用的是类型而不是字符串。</span>](#38 \"In particular you can now set up some checking to prevent errors due to someone asking for a dynamic property that does not exist as in Listing 7. I’m throwing an unchecked exception here because I consider that the precondition for get() is that the client provides a legal name for a contact type. The client can always fulfill this responsibility by using hasInstanceNamed(), but most of the time client software will hang on to contact type objects, not strings.\")\n\n---\n\n### 定义动态属性\n- [<span id=\"39\">你如何代表一个对象的事实？</span>](#39 \"How do you represent a fact about an object?\")\n- [<span id=\"39\">提供用某种类型的实例参数化的属性。声明一个属性创建一个新类型的实例</span>](#39 \"Provide an attribute parameterized with an instance of some type. To declare a property create a new instance of that type\") \n\n---\n\n[<span id=\"40\">通常，联系人类型将保存在字典中，通常由字符串索引。这个字典可能是一个静态的联系人类型的字段，但是我更愿意把它作为注册服务器上的字段。</span>](#40 \"Usually the contact types will be held in a dictionary, usually indexed by a string. This dictionary could be a static field of contact type, but I prefer to make it a field on a Registrar.\")\n\n[<span id=\"41\">删除联系人类型仍然具有尴尬的后果。在`java`中的`动态属性`仍然会出现在那些拥有它们的对象上，除非你写了一些复杂的东西清理代码。我通常会规定永远不要删除动态属性的键。如果你想使用一个新的名字，你可以通过给它一个其他名字，但是把它放置在定义的字典中几次，很容易地为联系类型添加别名。</span>](#41 \"Removing a contact type still has awkward consequences. In java the dynamic properties would still be present on those objects that had them, unless you write some complicated clean up code. I usually make it a rule to never delete the keys for a Defined Dynamic Property. If you want to use a new name you can easily alias the contact type by giving it one name but placing it in the defining dictionary several times.\")\n\n```java\nclass ContactType {\n    public static ContactType get(String name) {\n        if (! hasInstanceNamed (name)) throw new IllegalArgumentException(“No such contact type);\n        // return the contact type\n}\n// use with\nAddress kentVactation = (Address)kent.getValueOf(ContactType.get(“VacationAddress”));\n```\n> 列举7, 检查使用合法合同类型\n\n[<span id=\"42\">在这一点上，您可能想知道这与概念建模有什么关系，毕竟我写了很多代码并讨论了设计的权衡。这是一个重要的概念问题，因为您所做的概念选择会影响您的实现选择。如果你选择在你的概念模型中使用`灵活动态属性`，你很难在你的实现中使用定义的`动态属性`或`固定属性`。你做概念模型的原因之一是探索你的用户的概念是什么固定的，什么是可变的。如果全面的灵活性是我唯一的目标，那么我会总是使用图4.通过这个，我可以模拟世界上的任何情况。但是这个模型不是很有用。它在现实项目中是没用的，它不表示什么是固定的。什么时候你正在做一个概念模型，你需要知道你的选择如何影响项目实施-否则你失去了作为建模者的作用。</span>](#42 \"At this point you might be wondering about what this has to do with conceptual modeling,after all I am writing a lot of code and discussing design trade-offs. This is an important conceptual issue because the conceptual choice you make affects the implementation options you have. If you choose to use flexible dynamic attributes in your conceptual model, you are making it pretty hard to use either defined dynamic attributes or fixed attributes in your implementation. One of the reasons you do conceptual models is to explore what is fixed and what is changeable in your users’ concepts. If total flexibility was my only goal then I would always use Figure 4. With this I can model any situation in the world. But this model is not very useful. Its uselessness comes from the fact that it does not indicate what is fixed. When you are doing a conceptual model you need to be aware of how your choices affect things in implementation – otherwise you are abdicating your responsibility as a modeler.\")\n\n[<span id=\"43\">我经常发现人们发现`动态属性`，然后想要在任何地方使用它们。灵活性如此之大，他们获得了所有的可扩展性。是的，有时候你需要`动态属性`。但永远不会忘记有一个标准。只有当你真的使用它们需要他们才用。毕竟，如果必须使用，以后很容易添加它们。</span>](#43 \"I often find that people discover dynamic properties, and then want to use them everywhere. The flexibility is so great, they get all the extendibility they ever want. Yes sometimes you need dynamic properties. but never forget there is a price. Only use them when you really need them. After all it is easy to add them later if you have to.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/8_1.png)\n> 图4.一个可以无用建模任何域的模型\n\n[<span id=\"44\">`定义动态属性`允许您更多地指出你拥有的属性。这些属性仍然是无类型的。您不能强制图3中休假地址的值是一个地址。 你可以通过使用`类型动态属性`来做些什么。</span>](#44 \"The Defined Dynamic Property allows you to indicate rather more about what properties you have. These properties are still untyped. You cannot enforce that the value of the vacation address in Figure 3 is an address. You can do something about that by using a Typed Dynamic Property.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/9_1.png)\n> 图5.为使用限定关联的类型化动态属性建模\n\n[<span id=\"45\">`类型动态属性`将类型信息添加到定义的`动态属性`（图6和6）图5）。这里的联系人类型的实例不只是指出该人是什么合适的人有，他们也表示每个`属性`的类型。 类型约束的值，沿线清单9。</span>](#45 \"A typed dynamic property adds type information to the defined dynamic property (Figure 6 and Figure 5 ). Here the instances of contact type do not just indicate what properites the person has, they also indicate the type of each property. The type constrains the value, along the lines of Listing 9.\")\n\n```java\nclass Person {\n    public Object getValueOf(ContactType key);\n    public void setValueOf(ContactType key, Object value);\nclass ContactType {\n    public Class getValueType();\n    public ContactType (String name, Class valueType);\n```\n> 列举8, 键入动态属性的操作\n\n```java\nclass Person {\n    public void setValueOf(ContactType key, Object value) {\n        if (! key.getValueType().isInstance(value))\n            throw IllegalArgumentException (“Incorrect type for property”);\n        // set the value\n```\n> 列举9, 做类型检查\n\n[<span id=\"46\">这样做类型检查可以帮助避免错误，但它仍然不像固定属性那样清晰。 检查是在运行时，而不是在设计时，因此不是有效的。但还是比没有检查好，特别是如果你习惯于强类型的环境时。</span>](#46 \"Doing type checking like this can help to avoid errors, but it still is not as clear as fixed properties. The checking is at run time, not at design time, and is therefore not as effective. Still it is better than no checking at all, particularly if you are used to a strongly typed environment.\")\n\n---\n### 类型动态属性\n- [<span id=\"47\">你如何代表一个对象的事实？</span>](#47 \"How do you represent a fact about an object?\")</br>\n- [<span id=\"47\">提供使用某种类型的实例进行参数化的属性。声明一个属性创建一个新类型的实例并指定值的类型属性。</span>](#47 \"\")\n---\n\n[<span id=\"48\">当我们深入研究`动态属性`时，我们会发现更丰富的`反射`示例，这是一种架构模式，当我们获得能够描述自身的运行时对象时，就会出现这种模式。 \\[POSA\\]比我打算在这里更详细地讨论反思。</span>](#48 \"As we delve deeper into dynamic properties, we find richer examples of reflection, an architectural pattern which appears when we get runtime objects that are able to describe themselves. [POSA] discusses reflection in much more detail than I intend to go into here.\")\n\n[<span id=\"49\">动态属性提供反射功能，即使在那些不支持反射的语言中。即使使用了一种能够提供一些反射的语言，`动态属性`的反射也更加集中 - 所以您可以提供更易于使用的接口。</span>](#49 \"Dynamic properties provide a reflective capability, even in those languages that don’t support reflection themselves. Even with a language that does provide some reflection, the reflection of dynamic properties is more focused – so you can provide an easier to use interface.\")\n\n[<span id=\"50\">使用所有这些合格的关联可能会很难遵循。另一种方式提供`类型动态属性`是使用单独的属性模式。独立属性模式的本质是它使属性成为一个对象（图6和清单10）。 你可以获得一个人的属性，然后与每个属性获得值和类型信息。</span>](#50 \"Using all of those qualified associations can get rather hard to follow. Another way of providing typed dynamic properties is to use the separate property pattern. The essence of the separate property pattern is that it makes the property an object in its own right (Figure 6 and Listing 10). You can get hold of the properties of a person, and then with each property get value and type information.\")\n\n\n---\n### 分离属性\n- [<span id=\"51\">你如何代表一个对象的属性，并允许属性记录这个属性<span>](#51 \"How do you represent a fact about an object, and allow facts to be recorded about that fact\")\n- [<span id=\"51\">为每个属性创建一个单独的对象。有关该属性的子属性可以然后被做成那个对象的属性。<span>](#51 \"Create a separate object for each property. Facts about that property can then be made properties of that object.\")\n---\n\n[<span id=\"52\">`独立属性`和限定的关联`动态属性`总是可用的两种选择。 到目前为止，我已经用限定的关联描述了灵活的和定义好的`动态属性`，因为合格的关联提供了一个更容易使用的接口。如果你愿意的话，你可以使用灵活和定义的具有单独属性的`动态属性`，尽管我不打算进入在这里。当我们了解类型化`动态属性`的复杂性时，`分离属性`风格变得更有优势。<span>](#52 \"Separate properties and qualified associations are two alternatives that are always available for dynamic properties. So far I’ve described flexible and defined dynamic properties with qualified associations because the qualified association presents a much easier interface to use.You can use flexible and defined dynamic properties with separate properties if you wish, although I’m not going to go into that here. As we get to the complexity of typed dynamic properties and onwards the separate property style becomes more of an advantage.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/10_1.png)\n> 图6.为分类的动态属性建模，使用单独的属性\n\n```java\nclass Person {\n    public Enumeration getProperties();\nclass ContactProperty {\n    public Object getValue();\n    public Class getType();\n    public ContactType getIndex();\n```\n> 列举10, 使用单独属性的类型化动态属性的操作\n\n[<span id=\"53\">`分离属性`和有限的关联不是相互排斥的。您可以轻松地同时提供两个接口。 这样你就得到了两者的优点。当然这会使接口更加复杂，所以先考虑一下用户的需求。给他们提供他们需要的接口，不要让接口变得复杂。但是，如果他们需要合格的关联和`分离属性`，那么这是一个合理的选择。我通常会使用合格的关联来获得值，但是这种类型可能没有多大意义。<span>](#52 \"Separate properties and qualified associations are not mutually exclusive. You can easily provide both interfaces at the same time. This way you get the advantages of both. Of course that makes the interface more complex, so think first about what the clients of person need.Give them the interface they need, don’t make it over complex. But if they need both qualified associations and separate properties, then that is a reasonable option. I would normally always use qualified associations for the value, but it may not make as much sense for the type.\")\n\n[<span id=\"54\">您也可以在这里考虑接口/实现的差异。在本文中，我想集中在概念上 - 它映射到软件的接口而不是实现。但值得一提的是，您可以在实现中使用单独的对象时提供合格的关联接口。如果人的客户端可以获取联系人属性对象，则只能在接口中使用单独的属性。通常隐藏`分离属性`以简化客户端的接口是有用的。</span>](# \"You can also consider the interface/implementation differences here. In this paper I want to concentrate on the conceptual – which maps to the interface of software rather than its implementation. But it is worth mentioning that you can provide a qualified association interface while using separate object in the implementation. You are only using separate properties in the interface if a client of person can obtain a contact property object. Often it is useful to hide the separate property to simplify the interface for the client.\")\n\n[<span id=\"55\">`分离属性`的一大优势是它可以让你把属性的信息放在属性中。 这些信息可能包括谁确定了属性，什么时候确定了属性等。 \\[Fowler AP§3.5\\]中的观察模式基于这个主题进行了深入的研究。如果您需要单独的属性，我在观察者模式所描述的大部分内容都值得思考。（我将观察模式看作是使用不同的属性。）</span>](#55 \"One of the big advantages of the Separate Properties is that it allows you put information about the property in the property. Such information might include who determined the property, when it was determined, and the like. The Observation pattern in \\[Fowler AP §3.5\\] build upon this theme in some depth. Much of what I’ve described there in terms of observations is worth considering if you need separate properties. \\(I see the observation pattern as a use of separate properties.\\)\")\n\n[<span id=\"56\">您可能想知道`分离属性`（模式）和限定关联（`UML`建模结构）之间的对比。 你也可以把合格的关联看作一种模式，一种联想模式。确实，我在\\[Fowler AP §15.2\\]中做了这个。我发现为设计创建模型考虑是有帮助的，因为它帮助我思考使用它们的权衡。当你将它们的模型比较清楚，如`分离属性`，这是特别有用的。当然，以模式开始的事情可以转化为建模结构，特别是如果使用`UML`构造型。历史映射模式\\[FowlerAP§15.3\\]就是一个很好的例子。我表示使用这种模式非常刻版。这是一个模式或建模？也许这是一个地板蜡和一个沙漠顶部。</span>](#56 \"You might be wondering at the contrast between separate properties \\(a pattern\\) and qualified associations \\(a UML modeling construct\\). You can also think of qualified associations as a pattern, a pattern of association. Indeed I did do this in \\[Fowler AP §15.2\\]. I have found it helpful to think of modeling constructs as patterns, for it helps me think about the trade-offs in using them. This is particularly useful when you are comparing them to something that is more clearly a pattern, such as separate property. Of course things that begin as patterns can be turned into modeling constructs, particularly if you use UML stereotypes. The historic mapping pattern \\[Fowler AP §15.3\\] is a good example of that. I represent that using the «history» stereotype. Is it a pattern or a modeling construction? Maybe it’s a floor wax and a desert topping too.\")\n\n---\n## [<span id=\"57\">具有多值关联的动态属性</span>](#57 \"Dynamic Properties with Multi-valued associations\")\n\n[<span id=\"58\">我上面的例子集中讨论了`动态属性`中每个键都有一个单一值的情况。 但是，您也可以在`动态属性`中有多个事件的情况。与人相处时，你可能会考虑一个多值的友好属性。处理这个问题有两种方法，一种简单而不令人满意，另一种令人满意，但（太）复杂。</span>](#58 \"My examples above have concentrated on cases where there is a single value for each key in the dynamic properties. But you can also have cases where there are multiple items in the dynamic properties. With Person you might consider a friends property which is multi-valued.There are two ways to deal with this, one that is simple and unsatisfying, another that is satisfying but (too) complex.\")\n\n\n[<span id=\"59\">简单的方法就是说`动态属性`的值可以是一个集合。然后我们可以像使用相同接口的其他对象一样操作它（清单11）。这很好，很简单，因为我们不需要对基本的`动态属性`模式做任何事情（这里的例子是一个类型化的`动态属性`，但是它可以和所有的模式一起工作）。然而，这并不令人满意，因为它不是真的是我们想要处理多值属性的方式。如果朋友是一个固定的属性，我们需要一个接口，如清单12所示。我不喜欢在这些情况下暴露集合。通过这样做，人员班级在我们添加或移除元素时就失去了应对的能力。这也消除了我们改变我们正在使用的集合类型的能力。</span>](#59 \"The simple approach is just to say that the value of a dynamic property can be a collection.We can then manipulate it like any other object with the same interface (Listing 11). This is nice and simple, since we don’t have to do anything to the basic dynamic property pattern.(The example here is with a typed dynamic property, but it will work with all of them.) It’s unsatisfying however because it is not really the way we would like to deal with multi-valued properties. If friends were a fixed property, we would want an interface along the lines of Listing 12. I don’t like exposing the vector in these cases. By doing so the person class loses the ability to react when we add or remove elements. It also removes our ability to change the type of collection we are using.\")\n\n```java\nPerson aPerson = new Person();\nContactType friends = new ContactType(“Friends”, Class.forName(“Vector”));\nPerson martin = new Person(“Martin”);\nmartin.setValueOf(“Friends”, new Vector());\nPerson kent = new Person(“Kent”);\nmartin.getValueOf(“Friends”).addElement(“Kent”);\nEnumeration friends = martin.getValueOf(“Friends”).elements();\n```\n> 列举11, 在类型化动态属性中使用集合值\n```java\nclass Person {\n    public Enumeration getFriends();\n    public void addFriend(Person arg);\n    public void removeFriend(Person arg);\n```\n> 列举12, 一个固定的多值属性的运作\n\n[<span id=\"60\">那么当我们有`动态属性`的时候，我们可以按照清单12的方式获得一个接口吗？ 那么，如果我们努力工作，就可以如图7所示。但这是一个复杂的模型。 通过一些巧妙的编码，我们可以隐藏接口（清单13和清单14）背后的大部分复杂性，并且使用起来相当方便（清单15）。但客户端仍然需要知道哪些属性是单值的，哪些属性是多值的，并且只有在运行时才能检查正确的使用情况。所有这些复杂性都是痛苦的-比使用`固定属性`更痛苦。我会非常不愿走这么远。</span>](#60 \"So can we get an interface along the lines of Listing 12, when we have dynamic properties? Well if we try hard enough we can, as you can see in Figure 7. But it is a complex model. With some clever coding we can hide much of that complexity behind the interface (Listing 13 and Listing 14) and make it reasonably convenient to use (Listing 15). But the client still needs to know which properties are single valued and which are multi-valued and all the checking for the right usage can only occur at run time. All this complexity is painful – a lot more painful than using fixed properties. I would be very reluctant to go this far.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/12_1.png)\n\n> 图7.满足对多值动态属性的过度支持\n\n```\nclass Person\n    public Object getValueOf(ContactType key);\n    public Enumeration getValuesOf(ContactType key);\n    public void setValueOf(ContactType key, Object newValue);\n    public void addValueTo(ContactType key, Object newValue);\n    public void removeValueFrom(ContactType key, Object newValue);\n    \nclass ContactType\n    public Class getValueType();\n    public boolean isMultiValued();\n    public boolean isSingleValued();\n    public ContactType(String name, Class valueType, boolean isMultiValued);\n```\n> 列举13, 图7的操作\n\n```java\nclass Person\n    public Object getValueOf(ContactType key) {\n        if (key.isMultiValued())\n            throw IllegalArgumentException(“should use getValuesOf()”)\n        //return the value\n    }\n    \n    public void addValueTo(ContactType key, Object newValue) {\n        if (key.isSingleValued())\n            throw IllegalArgumentException(“should use setValueOf”);\n        if (! key.getValueType().isInstance(newValue))\n            throw IllegalArgumentException (“Incorrect type for property”);\n        //add the value to the collection\n```\n> 列举14, 检查清单13的操作的使用情况\n\n```java\nfax = new ContactType(“fax”, Class.forName(“PhoneNumber”), false);\nPerson martin = new Person(“martin”);\nmartin.setValueOf(“fax”, new PhoneNumber(“123 1234”);\nmartinFax = martin.getValueOf(“fax”);\nfriends = new ContactType (“friends”, Class.forName(“Person”), true);\nmartin.addValueTo(“friends”, new Person(“Kent”));\n```\n> 列举15, 使用清单13的操作\n\n[<span id=\"61\">这种复杂性似乎是因为我们既有多值也有单值的`属性`。处理这些复杂性有一个内在的不同的接口，因此复杂性也是如此。当然，我们可以得到只有多值属性的情况。一个常见的模式是类型关系模式（图8）。在这里，一个人可能与许多不同公司有不同的雇佣关系（甚至与同一家公司有多个）。</span>](#61 \"This complexity appears because we have both multi valued and single-valued properties.There is an inherently different interface to dealing with these, hence the complexity. Of course we can get situations with only multi-valued properties. A common pattern for this is the Typed Relation ship pattern \\(Figure 8\\). Here a person may have number of different employment relationships with a number of different companies \\(or even several with the same company\\).\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/13_1.png)\n> 图8.类型关系的一个例子\n\n```java\nclass Employment {\n    public Employment (Person person, Company company, Employment Type type);\n    public void terminate()\n    …\n}\nclass Person {\n    public Enumeration getEmployments();\n    public void addEmployment (Company company, EmploymentType type);\n```\n> 列举16, 图8的`Java`接口\n\n[<span id=\"62\">正如我们想到的那样，很快就会发现，这与使用多值的`定义动态属性`非常类似，但是使用`分离属性`而不是合适的关联来表示。（或者说这句话太过分了？）实际上，图9显示了在这种情况下如何使用`定义动态属性`接口。这种事物的观点是真实的，所以一个类型化的关系不会添加任何新的模式语言。 但是类型化关系在建模圈子中是一种非常普遍的模式，很多人可能没有意识到它与`动态属性`模式的联系。</span>](#62 \"As we think of this, it should soon occur to you that this is really very similar as using a Defined Dynamic Property that is multi-valued, but expressed using a Separate Property rather than a Qualified Association. (Or is that sentence just too much of a mouthful?) Indeed Figure 9 shows how you can use a Defined Dynamic Property interface in this situation. This view of things is true, and so a typed relationship doesn’t add anything that new to this pattern language. But typed relationship is a very common pattern in modeling circles, and many may not realize its connection with the dynamic properties patterns.\")\n\n---\n### 类型关系\n- [<span id=\"63\">你如何表示两个对象之间的关系？（你如何表示多值动态属性？）</span>](#63 \"How do you represent a relationship between two objects?(How do you represent multi-valued dynamic properties?)\")\n- [<span id=\"63\">为两个对象之间的每个链接创建一个关系对象。 给关系对象一个类型对象来表示关系的含义。（类型对象是多值属性的名称。）</span>](#63 \"Create a relationship object for each link between the two objects. Give the relationship object a type object to indicate the meaning of the relationship.(The type object is the name of the multi-valued property.)\")\n---\n\n[<span id=\"64\">类型化关系的优势在于它可以很好地处理双向关系，并且为关系添加属性提供了一个简单的点。（当然，后者是一个`分离属性`的特征。）你可以在这个模式中添加一个复杂的知识级别，跟类型化的`动态属性`一样。但是，您应该考虑接口的影响。类型化关系迫使用户意识到雇佣对象，因为确实使用`分离属性`。事实上，人们倾向于将属性客体本身看作完全成熟的客体，而不是人（或公司）的一些属性。 但是合格的关联通常可以为许多目的提供更简单的接口。所以每当你看到，或者你正在考虑使用，一个类型的关系;你还应该考虑合格的关联形式。您可以在任何一个方向或两个方向上使用它，也可以将其用于除了键入的关系之外，或者除此之外。。</span>](#64 \"The strengths of typed relationship are that it works well with bi-directional relationships, and that it provides a simple point to add properties to the relationship. (The latter, of course, is a feature of separate properties.) You can add a sophisticated knowledge level to this pattern,along much the same lines as typed dynamic properties. However you should consider the interface implications. Typed relationships force users to be aware of the employment object,as indeed does any use of separate properties. Indeed people tend to see the property object as a full fledged object in its own right, rather as some property of the person (or company). But the qualified association can often provide a simpler interface for many purposes. So whenever you see, or you are considering using, a typed relationship; you should also consider the qualified association form. You can use it in either or both directions, and use it either in addition to the typed relationship, or in addition to it.\")\n\n[<span id=\"65\">但是这两种模式并不完全相同。如果使用图9，则表示雇主只能是某种特定工种的雇主。图8在图表中没有这样的约束，尽管大多数建模者会暗示这样的约束，除非雇用具有附加属性。当然，就业通常具有附加属性。一个常见的例子是日期范围（如问责制\\[Fowler，AP§2.4\\]）。</span>](#65 \"The two models are not quite identical however. If you use Figure 9 you are indicating that an employer can only be an employer once for a particular employment type. Figure 8 has no such constraint in the diagram as it stands, although most modelers would imply such a constraint,unless the employment had additional attributes. Often, of course, the employment does have the additional attributes. A common example is a date range (as in accountability \\[Fowler, AP §2.4\\].\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/14_1.png)\n> 图9.使用与图8相同情况的合格关联\n\n```java\npublic Person {\n    public void addEmployer (Company company, EmploymentType type);\n    public Enumeration getEmployersOfType (EmploymentType type);\n```\n> 列举17, 图9的接口\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/15_1.png)\n> 图10.键入的关系，显示通常假定的约束\n\n---\n## 不同种类的人\n[<span id=\"66\">到目前为止，我们假设我们只有一种人，我们为一个人定义的任何属性都是所有人的有效属性。但是，您确实会遇到不同类型的情况，以及不同类型的不同属性。管理人员可能需要一个管理部门的属性，执行人员可能需要一个属性作为高管卫生间的关键号码（在一个不是90年代的公司）。</span>](# \"So far we are assuming we only have one kind of person, and any properties we define for a person are valid properties for all people. However you do get situations where you have different types, and different properties for different types. A manager may need a property for department managed, an executive may need a property for executive washroom key number (in a not very 90’s company).\")\n\n[<span id=\"67\">别担心，我听到“使用继承愚蠢”的呼声。事实上，这是常用于分类的情况之一。实际上，这个过程比这个要复杂得多，特别是当你开始思考一个人可能扮演的角色时。我已经写了关于建模角色\\[Fowler roles\\]的主题的全文。角色模式考虑了我们对操作变化和`固定属性`变化感兴趣的情况。但在这种情况下，我想探索不同类型的对象与`动态属性`的概念的重叠。这种重叠会导致`动态属性知识级别模式`（一个对我的品味有点太大的名字）。</span>](#67 \"Don’t worry, I hear the cries of “use inheritance stupid”. Indeed this is one of the situations that is often used for subtyping. Actually it gets rather more involved than that, particularly when you start thinking of the various roles a person may play. I’ve written a whole paper on the subject of modeling roles \\[Fowler roles\\]. The roles patterns consider cases where we are interested in variations in operations and in variations of fixed properties. But in this case I want to explore the overlap of different kinds of object with the notion of dynamic properties. This overlap begets the dynamic properties knowledge level pattern \\(a name that is getting a little too large for my taste\\).\")\n\n[<span id=\"68\">为了使用这个模式，我们给`Person`一个`Person`类型的`类型对象`。然后，我们可以说，人物类型与联系人类型的关联指示哪些人物拥有该人物类型可用的属性。 如果我们尝试使用或要求某人的属性，则可以使用人员类型来检查使用情况是否正确。</span>](#68 \"To use the pattern we give the Person a type object of Person Type. We can then say that the person type’s association to contact type indicates which properties are available for people who have that person type. If we try to use, or ask for, a property on a person the person type can be used to check that the usage is correct.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/16_1.png)\n> 图11.动态属性知识水平\n\n```java\nclass Person {\n    public Object getValueOf(ContactProperty key);\n    public boolean hasProperty(ContactProperty key);\n    public void setValueOf(ContactProperty key, Object newValue);\nclass PersonType {\n    public boolean hasProperty(ContactProperty key);\n    public Enumeration getProperties();\n```\n> 列举18, 图11的操作\n```java\nclass Person {\n    public Object getValueOf (ContactProperty key) {\n        if (!hasProperty(key))\n            throw IllegalArgumentException(“Innapropriate key”);\n            //return the value\n```\n> 列举19, 检查具有动态属性知识级别的适当的密钥\n\n[<span id=\"69\">当我们开始使用这样的知识水平时，单独的属性变得越来越重要。 在这种情况下，我们很快就会开始停止将其视为一种属性，而不是把它作为一个对象。 什么是属性和什么是非属性之间的分界线是非常模糊的，这实际上取决于你对事物的看法。</span>](#69 \"As we start to use a knowledge level like this, the separate property becomes more and more important. In this case we soon start to stop thinking of it as a property, rather as some object in its own right. The dividing line between what is a property and what isn’t is very blurred,and it really depends upon your view of things.\")\n\n---\n### 动态属性知识水平\n- [<span id=\"70\">你如何执行某些类型的对象具有某些特性使用动态属性？</span>](#70 \"How do you enforce that certain kinds of objects have certain properties when you use dynamic properties?\")\n- [<span id=\"70\">创建一个知识级别来包含什么类型的对象使用的规则哪些类型的属性</span>](#70 \"Create a knowledge level to contain the rules of what types of objects use which types of properties\")\n---\n\n---\n\n## [<span id=\"71\">动态属性的几个小结</span>](#71 \"Some Summary Points on Dynamic Properties\")\n\n[<span id=\"72\">各种各样的`动态属性`构成了本文的大部分内容。但我必须重申，`动态属性`是我想要尽可能避免的。`动态属性`带来了很大的负担：接口不够清晰，使用操作而不是存储数据的困难。只是有时你别无选择，只能使用它们，在这种情况下，这篇论文应该有用的给你提供一些替代方案和之间的权衡。<span>](#72 \"Various kinds of dynamic properties make up the bulk of this paper. But I have to reiterate that dynamic properties are something I like to avoid if at all possible. Dynamic properties carry a heavy burden of disadvantage: the lack of clarity of the interface, the difficulty in using operations instead of stored data. It is just that sometimes you have little choice but to use them, and it is on these occasions that this paper should come in useful to give you some alternatives and the trade-offs between then.\")\n\n[<span id=\"73\">`动态属性`出现在改变接口有困难的地方。那些使用像他们这样的分布式对象系统的人，至少在原则上是这样，因为它允许他们在不改变客户端的情况下改变接口 - 而在分布式系统中，可能很难找到你的客户端。但是你仍然应该警惕这样做。每当你为`动态属性`添加一个新的键到你的键上，你都在有效地改变接口。所有的`动态属性`都在替换运行时检查的编译时间检查。你仍然有同样的问题保持你的客户端最新。</span>](#73 \"Dynamic properties appear most where there are difficulties in changing the interface. People who work with distributed object systems like them, at least in principle, because it allows them to alter an interface without compromising clients – and in a distributed system it may be very difficult to find who your clients are. But you should still be wary of doing this. Any time you add a new key to your keys for the dynamic properties you are effectively changing the interface. All the dynamic properties are doing is replacing a compile time check for a runtime check. You still have the same issues of keeping your clients up to date.\")\n\n[<span id=\"74\">`动态属性`的另一个常见用途是在数据库中。这里不仅仅是由于接口的问题，而且由于数据迁移的问题（如果不是主要的话）。更改数据库模式不仅会导致对使用该模式的程序进行潜在更改，还可能会强制您执行复杂的数据转换练习。同样，`动态属性`允许您在不更改数据库模式的情况下更改内容，从而不需要进行任何数据转换。在大型数据库中，这可能是一个引人注目的优势。</span>](#74 \"Another common use of dynamic properties is in databases. Here it is not just due to the problem of interface, but also (if not primarily) due to problems of data migration. Changing a database schema does not only cause a potential change to programs using the schema, it also may force you to do a complicated data conversion exercise. Again dynamic properties allow you to change things without changing the database schema, and thus not needing to do any data conversion. In large databases this can be a compelling advantage.\")\n\n---\n\n## [<span id=\"75\">一个你不知道的有关于属性的](#75 \"A property you don’t know about\")\n\n[<span id=\"76\">我想在本文中添加一个最后一个重要的属性。这是一个没有意识到属性的对象的情况。当属性被另一个对象所隐含，以及与有关的方式时，就会发生这种情况。</span>](#76 \"There is a last but important kind of property that I want to add to this paper. This is the case of an object having a property without realizing it. This occurs when the property is implied by another object and the way it relates to you.\")\n\n[<span id=\"77\">考虑一个管理数据库连接的对象。它会创建一堆数据库连接，并在请求时将它们传递给其他对象。当一个客户端连接完成后，可以将其返回给管理员，以供其他人使用。您可以通过向连接添加`isBusy`属性来完成此操作。图12显示了一个使用外部属性的替代方案。连接是空闲的还是繁忙的是由连接管理器中的哪个集合决定的。如果你有一个连接，你不能问它是空闲的还是忙的，而是你必须要求连接管理器是否特定的连接空闲或忙碌。你可以这样说，因为组合关联是一种方式。连接不知道连接管理器。 从某种意义上来说，空闲/忙碌状态根本不是连接的属性。但至少从某种意义上来说，这就是我提到它的原因。</span>](#77 \"Consider an object that manages database connections. It creates a bunch of database connections and hands them out to other objects when requested. When a client is done with the connection it can return it to the manager to be available for someone else. You could do this by adding an isBusy property to the connection. Figure 12 shows an alternative using an extrinsic property. Whether the connection is free or busy is determined by which collection in the connection manager it lies in. If you had a connection, you could not ask it whether it is free or busy, instead you would have to ask the connection manager whether a particular connection is free or busy. You can tell this because the composition associations are one way.The connection has no knowledge of the connection manager. In a sense the free/busy status isn’t a property of connection at all. Yet at least in some sense it is, which is why I mention it.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/17_1.png)\n> 图12.使用外部收集属性\n\n[<span id=\"78\">在纯粹的概念模型意义上，这种模式没有多大意义。但是，为什么你可能想要使用它，有实际的实施原因。如果您希望对此属性进行的所有更改都通过连接管理器进行，则此方法可以清楚地说明这一点。特别是当你想让连接管理器给你一个自由的连接，而你不关心哪一个时，这是一种自然的风格。</span>](#78 \"In a pure conceptual modeling sense this pattern does not make much sense. But there are practical implementation reasons why you may want to use it. If you want all changes to this property to go through a connection manager, then this approach makes this clear. In particular this is a natural style when you want the connection manager to give you a free connection and you don’t care which one.\")。\n\n[<span id=\"79\">使用外部属性的另一个原因是如果连接类是由其他人提供的，并且您不能更改其接口。 你可以添加新的属性而不用改变连接类。</span>](#79 \"Another reason to use an extrinsic property is if the connection class is provided by someone else and you can’t change its interface. You can add the new property without changing the connection class at all.\")\n\n---\n### 外在属性\n- [<span id=\"80\">你如何给对象一个属性而不改变它的接口？</span>](#80 \"How do you give an object a property without changing its interface?\")\n- [<span id=\"80\">让另一个对象负责知道这个属性。</span>](#80 \"Make another object responsible for knowing about the property.\")\n\n---\n[<span id=\"81\">`外在属性`的一个大问题是它会导致一个尴尬和不自然的接口。通常如果你想知道一些东西，你只要找到合适的对象并提出问题。在这里您需要找到保存外部集合的对象，并询问有关适当的对象。在某些情况下，比如这个，似乎是合理的。但大多数情况下，我宁愿让对象了解自己的属性（在这种情况下，我称之为`内在属性`）。</span>](#81 \"The big problem with the extrinsic property is that it leads to an awkward and unnatural interface. Usually if you want to know something, you just find the appropriate object and ask it. Here you need to find the object that holds the external collection, and ask it about the appropriate object. In some circumstances, such as this one, it seems reasonable. But most of the time I would prefer to let objects know about their own properties (in which case I call them intrinsic properties).\")\n\n---\n\n## 最后的想法\n\n[<span id=\"82\">当我完成本文时，我觉得需要再次敦促你不要使用我在这里写的东西，除非你真的需要它。`固定属性`的好处是伟大的。如果你需要别的东西，那么我希望这篇文章能给你一些想法和一些指导。但`固定属性`永远是你的第一选择。</span>](#82 \"As I finish this paper, I feel the need again to urge you not to use what I’ve been writing about here unless you really do need it. The advantages of fixed properties are great. If you need something else, then I hope this paper gives you some ideas and some guidance. But fixed properties are always your first choice.\")\n\n---\n\n## 参考\n\n[Fowler, AP] Fowler, Martin. Analysis Patterns: Reusable Object Models, Addison-1997\n[Fowler, roles] Fowler, Martin. Dealing with Roles,http://www.awl.com/cseng/titles/89542-0/awweb.htm\n[POSA] Buschman et al, Pattern Oriented Software Architecture, Wiley 1997\n\n\n----\n## 原文地址：http://martinfowler.com/apsupp/properties.pdf","slug":"dealing-with-properties","published":1,"updated":"2018-03-25T13:41:09.442Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjf6wl6s6004f2gtp3iwazyzf","content":"<h1 id=\"属性的处理-初步校对\"><a href=\"#属性的处理-初步校对\" class=\"headerlink\" title=\"属性的处理(初步校对)\"></a>属性的处理(初步校对)</h1><hr>\n<p><em>Martin Fowler</em> (《重构：改善既有代码的设计》作者)  </p><p><br><a href=\"mailto:fowler@acm.org\" target=\"_blank\" rel=\"noopener\">fowler@acm.org</a></p>\n<hr>\n<p><a href=\"#1\" title=\"Almost every object you create needs properties: some statement about the object. A person may have a height, a company may have a CEO, a flight may have a flight number. There are a number of ways to model properties. In this article I will explore some of these ways and when you may want to use them. I’ve often seen patterns touch on  this subject, but they usually only cover part of the picture. Here I want to cover the issue  more broadly to give a better discussion of the options.\"><span id=\"1\">你创建的每个对象几乎都需要属性：关于对象的一些声明。一个人可能有一个身高属性，一个公司可能有一个CEO，一个航班可能有一个航班号。有很多方法来创建属性。在这篇文章中，我将探讨其中一些你经常需要用到的方法。我经常看到涉及到这个话题的图案，但他们通常只涉及一部分。在这里，我想更广泛地讨论这个问题，以便更好地讨论这些选项。</span></a></p>\n<p><a href=\"#2\" title=\"The most common, and the simplest case is to use a Fixed Property , that is just declare the attribute on the class. In the vast majority of cases that is all you need to do. Fixed properties begin to fail when you have a large amount of them, or you need to change them frequently, possibly at run time. These forces lead you to the varieties of Dynamic Property . All dynamic properties have the quality of a parameterized attribute where to query a property you need to use a query method with a parameter. The simplest of these is the Flexible Dynamic Property where the parameter is just a string. This makes it easy to define and use properties, but is difficult to control. If you need that control you can use a Defined  Dynamic  Property  where  your parameters must be instances of some class. A further step of control allows you to strongly type your dynamic property with a Typed Dynamic Property .\"><span id=\"2\">最常见和最简单的情况是使用<code>固定属性</code>，即只声明类的属性。在绝大多数情况下，你只需要使用<code>固定属性</code>。在有大量固定属性或者需要频繁修改时，使用<code>固定属性</code>容易出错。这种情况下你可能会使用<code>动态属性</code>。所有的<code>动态属性</code>都有一个参数化属性的特性：你需要一个带参的方法来查询一个属性。当参数只是一个字符串,最简单的是<code>灵活的动态属性</code>。这样定义和使用属性会比较容易，但难以控制。如果你需要使用<code>动态属性</code>，在你的参数必须是一个类的实例的情况下。使用类型<code>动态属性</code>来增强对<code>动态属性</code>的控制。</span></a></p>\n<p><a href=\"#3\" title=\"As your property structures get more involved, you should consider making them Separate Properties , which makes the property an object in its own right. If you need multi-valued properties you can consider a Typed Relationship . The most complex example in this theme is where you want rules to control what kinds of objects have what kinds of properties – this needs a Dynamic Property Knowledge Level .\"><span id=\"3\">随着您的属性结构变得越来越复杂，您应该考虑将它们设置为“单独属性”，把一些属性综合起来创建一个对象。如果你需要多值属性，你可以考虑集合。在这篇文章中最复杂的例子是你想要规则来控制什么类型的对象具有什么样的属性 - 这需要一定的<code>动态属性</code>知识水平。</span></a></p>\n<p><a href=\"#4\" title=\"Another variety of property entirely is the Extrinsic Property , a pattern you use if you want to give an object a property, but not alter its interface to support it.\"><span id=\"4\">另一种属性完全是<code>外部属性</code>（Extrinsic Property），如果你想使用接口给一个对象创建一个属性，那么这就是你需要使用的一种模式。<span></span></span></a></p>\n<table>\n<thead>\n<tr>\n<th><a href=\"#5\" title=\"Problem\"><span id=\"5\">问题</span></a></th>\n<th><a href=\"#5\" title=\"Solution\"><span id=\"5\">答案</span></a></th>\n<th><a href=\"#5\" title=\"name\"><span id=\"5\">名称</span></a></th>\n<th><a href=\"#5\" title=\"page\"><span id=\"5\">页码</span></a></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td> &nbsp;</td>\n<td><a href=\"#6\" title=\"Give it a specific attribute for that fact. This will translate to a query method and probably an update method in a programming language.\"><span id=\"6\">在编程语言里，当使用一个特定的属性，它需要查询或者更新。<span></span></span></a></td>\n<td><a href=\"#固定属性\" title=\"Fixed Property\"><code>固定属性</code></a></td>\n<td>4</td>\n</tr>\n<tr>\n<td> &nbsp;</td>\n<td><a href=\"#7\" title=\"Provide a parameterizable attribute which can represent different properties depending on the parameter\"><span id=\"7\">提供可参数化的属性，可以根据参数表示不同的属性</span></a></td>\n<td><a href=\"#动态属性\" title=\"Dynamic Property\"><code>动态属性</code></a></td>\n<td>4</td>\n</tr>\n<tr>\n<td> &nbsp;</td>\n<td><a href=\"#8\" title=\"Provide an attribute parameterized with a string. To declare a property just use the string.\"><span id=\"8\">提供一个用字符串参数化的属性。声明一个属性只是使用字符串.</span></a></td>\n<td><a href=\"#灵活的动态属性\" title=\"Flexible Dynamic Property\"><code>灵活的动态属性</code></a></td>\n<td>5</td>\n</tr>\n<tr>\n<td> &nbsp;</td>\n<td><a href=\"#9\" title=\"Provide an attribute parameterized with an instance of some type. To declare a property create a new instance of that type\"><span id=\"9\">提供用某种类型的实例参数化的属性。要声明属性，请创建该类型的新实例</span></a></td>\n<td><a href=\"#定义动态属性\" title=\"Defined Dynamic Property\"><code>定义动态属性</code></a></td>\n<td>7</td>\n</tr>\n<tr>\n<td> &nbsp;</td>\n<td><a href=\"#10\" title=\"Provide an attribute parameterized with a instance of some type. To declare a property create a new instance of the type and specify the value type of the property.\"><span id=\"10\">提供使用某种类型的实例进行参数化的属性。要声明属性，请创建该类型的新实例并指定该属性的值类型.</span></a></td>\n<td><a href=\"#类型动态属性\" title=\"Typed Dynamic Property\"><code>类型动态属性</code></a></td>\n<td>9</td>\n</tr>\n<tr>\n<td><a href=\"#11\" title=\"How do you represent a fact about an object, and allow facts to be recorded about that fact\"><span id=\"11\">你如何表示一个对象的属性，并允许对象的属性也具有属性</span></a></td>\n<td><a href=\"#11\" title=\"Create a separate object for each property. Facts about that property can then be made properties of that object.\"><span id=\"11\">为每个属性创建一个单独的对象。 关于那个属性的详细可以作为这个对象的的属性.<span></span></span></a></td>\n<td><a href=\"#分离属性\" title=\"Separate Properties\"><code>分离属性</code></a></td>\n<td>10</td>\n</tr>\n<tr>\n<td><a href=\"#12\" title=\"How do you represent a relationship between two objects?(How do you represent multi-valued dynamic properties?)\"><span id=\"12\">你如何表示两个对象之间的关系（如何表示多个值动态属性？）</span></a></td>\n<td><a href=\"#12\" title=\"Create a relationship object for each link between the two objects. Give the relationship object a type object to indicate the meaning of the relationship. (The type object is the name of the multi-valued property.)\"><span id=\"12\">为两个对象之间的每个链接创建一个关系对象。 给关系对象一个类型对象来表示关系的含义。 （类型对象是多值属性的名称。）<span></span></span></a></td>\n<td><a href=\"#类型关系\" title=\"Typed Relationship\"><code>类型关系</code></a></td>\n<td>14</td>\n</tr>\n<tr>\n<td><a href=\"#13\" title=\"How do you enforce that certain kinds of objects have certain properties when you use dynamic properties?\"><span id=\"13\">当你使用动态属性时，你如何强制某些类型的对象具有某些属性？</span></a></td>\n<td><a href=\"#13\" title=\"Create a knowledge level to contain the rules of what types of objects use which types of properties\"><span id=\"13\">创建知识级别以包含哪些类型的对象使用哪些类型的属性的规则</span></a></td>\n<td><a href=\"#动态属性知识水平\" title=\"Dynamic Property Knowledge Level\"><code>动态属性知识水平</code></a></td>\n<td>16</td>\n</tr>\n<tr>\n<td><a href=\"#14\" title=\"How do you give an object a property without changing its interface?\"><span id=\"14\">你如何给一个对象新增一个属性而不改变它的接口？</span></a></td>\n<td><a href=\"#14\" title=\"Make another object responsible for knowing about the property\">使用另一个对象负责属性</a></td>\n<td><a href=\"#外在性质\" title=\"Extrinsic Property\"><code>外在性质</code></a></td>\n<td>18</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2 id=\"什么是属性\"><a href=\"#什么是属性\" class=\"headerlink\" title=\"什么是属性\"></a>什么是属性</h2><p><a href=\"#15\" title=\"This is not a silly question. When people bandy around the term ‘property’ they can mean many different things. To some a property is an instance variable or data member of a class. To others they are kind of thing that goes in a box in a UML diagram. So before I start this article I have to define my usage of the word.\"><span id=\"15\">这不是一个愚蠢的问题。当人们使用“属性”这个词时，他们可能有很多不同的含义。对某些属性来说，是一个类的实例变量或数据成员。对于其他人来说，它们就像<code>UML</code>图中的一个盒子一样。所以在我开始这篇文章之前，我必须定义这个词的用法。</span></a></p>\n<p><a href=\"#16\" title=\"For my purposes a property is some information about an object that you can obtain by a query method. It may be a value type (such as int in Java) or an instance of a class. You may be able to update the property, but not necessarily. You may set the property when you create the object, but again not necessarily. The property may be stored as an instance variable or data member, but it does not have to be. The class may get the value from another class, or go through some further calculation. I am, therefore, taking an interface view of properties rather than an implementation view. This is a regular habit of mine in design: for me the essence of object-orientation is that you separate interface from implementation, and make interface more important.\"><span id=\"16\">为了我的目的，一个属性是关于一个可以通过查询方法获得的对象的一些信息。它可能是一个值类型（如<code>Java</code>中的<code>int</code>）或一个类的实例。您可能能够修改该属性，但不一定。您可以在创建对象时设置属性，但不一定。该属性可以作为实例变量或数据成员存储，但不一定是。班级可能会从另一个班级获得值，或者经过一些进一步的计算。因此，我采用属性的接口视图而不是实现视图。这是我在设计中经常使用的习惯：对于我来说，面向对象的本质是将接口与实现分开，并使接口更加重要。</span></a></p>\n<hr>\n<h2 id=\"固定属性\"><a href=\"#固定属性\" class=\"headerlink\" title=\"固定属性\"></a><span id=\"固定属性\">固定属性</span></h2><p><a href=\"#17\" title=\"Fixed properties are by far the most common kind of properties that we use. A Fixed Property is declared in the interface of the type. It gives the name and the return type for the property. Figure 1 shows properties modeled in UML, Listing 1 shows how the query methods for these properties would show up in Java. I’ve picked the example to show that this discussion applies equally well to UML attributes as well as UML associations. It also applies to calculated values (age) as well as those that are reasonably stored data (date of birth).\"><span id=\"17\"><code>固定属性</code>是我们使用的最常见的属性。 固定属性在类型的接口中声明。 它给出了属性的名称和返回类型。 图1显示了使用<code>UML</code>建模的属性，示例1显示了这些属性的查询方法如何在<code>Java</code>中使用。 我已经选择了这个例子来说明这个讨论同样适用于<code>UML</code>属性和<code>UML</code>关联。 它也适用于计算值（年龄）以及那些合理存储的数据（出生日期）。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/3_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图1.使用<code>固定属性</code>建模的人员<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Date <span class=\"title\">getDateOfBirth</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getAge</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Quantity <span class=\"title\">getHeight</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Company <span class=\"title\">getEmployer</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setDateOfBirth</span> <span class=\"params\">(Date newDateOfBirth)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setEmployer</span> <span class=\"params\">(Company newEmployer)</span></span>;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>列举,图1的<code>java</code>操作</p>\n</blockquote>\n<p><a href=\"#18\" title=\"Query operations usually follow some naming convention. In smalltalk you always name the query after the name of the property (dateOfBirth). C++ never had a fixed convention, some people just named it after the property, others used the &#39;get&#39; convention (getDateOfBirth). Java started with no particular convention but now most people adopt the get convention. Personally I find the ‘get’ irritating when you read code so I would prefer to leave it out, but the Java style is to use the get, so I use it now. You should ensure that you follow the same convention whether you are using stored or derived values. Clients of the person class should not know or care whether age is stored or derived.\"><span id=\"18\">查询操作通常遵循一些命名约定。在<code>程序语言</code>中，您总是在属性名称（<code>dateOfBirth</code>）之后命名查询。 <code>C++</code>从来没有一个固定的约定，有些人只是在属性后面命名，而另一些人则使用<code>get</code>约定（<code>getDateOfBirth</code>）。 <code>Java</code>从没有特别的约定开始，但现在大多数人都采用<code>get</code>约定。就我个人而言，当您阅读代码时，我发现<code>get</code>令人恼火，所以我宁愿忽略它，但<code>Java</code>风格是使用<code>get</code>，所以现在就使用它。无论您使用的是存储值还是派生值，都应确保遵循相同的约定。使用<code>Person</code>的客户端不应该知道或关心年龄是否存储或派生。</span></a></p>\n<p><a href=\"#19\" title=\"The presence of modifier operations depends on whether you want the values to be directly modified. If you do then you will provide a modifier operation according to some naming scheme, eg setDateOfBirth(Date). Different conventions exist as to the return value. You can return the new value of the property (Date), the object being modified (Person), or nothing (void). I prefer to return void on modifiers, to help make clear the difference between a modifier and a query.\"><span id=\"19\"><code>修饰符</code>操作的存在取决于您是否希望直接修改值。如果你这样做，那么你会根据一些命名方案，例如<code>setDateOfBirth</code>（<code>Date</code>）提供一个修饰符操作。对于<code>返回值</code>存在不同的约定。你可以返回属性的新值（<code>Date</code>），被修改的对象（<code>Person</code>），或者什么都没有（<code>void</code>）。我更愿意在修饰符上返回<code>void</code>，以帮助明确修饰符和查询之间的区别。</span></a></p>\n<hr>\n<h3 id=\"固定属性-1\"><a href=\"#固定属性-1\" class=\"headerlink\" title=\"固定属性\"></a>固定属性</h3><p>  <a href=\"#20\" title=\"How do you represent a fact about an object?\"><span id=\"20\">你如何代表一个对象的事实？</span></a></p>\n<ul>\n<li><a href=\"#20\" title=\"Give it a specific attribute for that fact. This will translate to a query method and probably an update method in a programming language.\"><span id=\"20\">给它一个这个事实的特定属性。这将转化为查询方法，并可能是一种编程语言的更新方法。</span></a><br><br><a href=\"#20\" title=\"Clear and explicit interface\"><span id=\"20\">接口很清晰明确</span></a><br><br><a href=\"#20\" title=\"Can only add properties at design time\"><span id=\"20\"><font color=\"red\">只能在设计时添加属性</font></span></a><br></li>\n</ul>\n<hr>\n<p><a href=\"#21\" title=\"You may wish to provide arguments to the constructor for properties. Typically you want to set enough properties in the constructor so that you construct a well-formed class.\"><span id=\"21\">您可能希望为属性的<code>构造函数</code>提供参数。通常，您要在<code>构造函数</code>中设置足够的属性，以便构建格式良好的类。</span></a></p>\n<p><a href=\"#22\" title=\"Properties that you don’t want to be modified directly should not have a modifier operation.This might be the case for the age property, if you only want that determined by calculation from the date of birth. It also would be the case for an immutable property: one that does not change for the lifetime of the class. When you think of making a property immutable, remember to take human error into account. While the date of birth is an immutable property for humans in the real world, you might make a mistake typing into a computer system, and thus make it mutable. Software often models what we know of the world, rather than the world itself.\"><span id=\"22\">不想直接修改的属性不应该有<code>修饰符</code>操作。如果您只希望从出生之日起计算，那么年龄属性可能就是这种情况。对于一个不可改变的<code>属性</code>也是如此：一个在类的生命周期中不会改变的<code>属性</code>。当你想使<code>属性</code>不可改变时，请记住考虑到人为错误。虽然出生日期对于现实世界中的人类来说是不可改变的<code>属性</code>，但是您可能会在输入到计算机系统时出现错误，从而使其变得可变。软件常常模拟我们所知道的世界，而不是世界本身。</span></a></p>\n<p><a href=\"#23\" title=\"Fixed properties are by far the most common form of properties that you will come across.They are that way for good reasons: they are simple and convenient to use. You should use fixed properties as your first and most common choice for representing properties. In this paper I am going to give a lot of alternatives to fixed properties. For certain situations these alternatives are better, but most of the time they are not. Remember that as we go through the alternatives. I use fixed properties 99% of the time. Other varieties are more complex, which is why I&#39;m spending most of this paper on them — and also why I prefer not to use them!\"><span id=\"23\"><code>固定属性</code>是迄今为止您将遇到的最常见的<code>属性</code>形式。他们这样做是有原因的：他们使用简单方便。您应该使用固定属性作为表示属性的第一个也是最常见的选择。在本文中，我将给出许多固定属性的替代方案。在某些情况下，这些替代品更好，但大多数情况下不是。请记住，当我们经历的选择。我99％的时间使用固定的属性。其他品种更为复杂，这就是为什么我把这篇论文的大部分花费在他们身上 - 也是为什么我不愿意使用它们！</span></a></p>\n<h2 id=\"动态属性\"><a href=\"#动态属性\" class=\"headerlink\" title=\"动态属性\"></a><span id=\"动态属性\">动态属性</span></h2><p><a href=\"#24\" title=\"The key thing about fixed properties is that you fix them at design time, and all instances at run time must follow that decision. For some problems this is an awkward restriction. Imagine we are building a sophisticated contact system. There are some things that are fixed: home address, home and work phone, email. But they’re all sorts of little variations. For someone you need to record their parent’s address, another has a day work and evening work numbers.It’s hard to predict all these things in advance, and each time you change the system you have to go through compiling, testing, and distribution. To deal with this you need to use dynamic properties.\"><span id=\"24\"><code>固定属性</code>的关键在于您在设计时修复了这些属性，并且所有实例在运行时都必须遵循该决定。 对于一些问题，这是一个尴尬的限制。 想象一下，我们正在建立一个复杂的联络系统。 有一些东西是固定的：家庭住址，家庭和工作电话，电子邮件。 但他们是各种各样的小变化。 对于需要记录父母地址的人，另一个人有白天工作和晚上工作号码。 事先很难预测所有这些事情，每次更改系统时都必须经过编译，测试和分发。 要处理这个问题，你需要使用动态属性。</span></a></p>\n<hr>\n<h3 id=\"动态属性-1\"><a href=\"#动态属性-1\" class=\"headerlink\" title=\"动态属性\"></a>动态属性</h3><p>  <a href=\"#25\" title=\"How do you represent a fact about an object?\"><span id=\"25\">你如何代表一个对象的事实？</span></a><br><br>  <a href=\"#25\" title=\"Provide a parameterizable attribute which can represent different properties depending on the parameter\"><span id=\"25\">提供可参数化的属性，可以根据参数表示不同的属性</span></a> <br></p>\n<ul>\n<li><a href=\"#25\" title=\"Can add properties at run time\"><span id=\"25\"> 可以在运行时添加属性</span></a></li>\n<li><a href=\"#25\" title=\"Unclear interface\"><span id=\"25\"><font color=\"red\">接口不清晰</font></span></a></li>\n</ul>\n<hr>\n<p><a href=\"#26\" title=\"There are several variations on dynamic properties, each of which make different trade-offs between flexibility and safety. The simplest approach is Flexible Dynamic Properties. The essence of this pattern is that you add a qualified association to the person whose key is a simple value, usually a string (see Figure 2 and Listing 2). If you want to add a vacation address to a person Kent, you just use the code in Listing 3. You don’t need to recompile the person class. You could even build a GUI or a file reader that would add properties without recompiling the client either.\"><span id=\"26\"><code>动态属性</code>有多种变化，每种变化都会在<code>灵活性</code>和<code>安全性</code>之间做出不同的选择。 最简单的方法是<code>灵活动态属性</code>。 这种模式的本质是为键值为简单值的人（通常是字符串）添加一个合格的关联（参见图2和示例2）。 如果您想为某人Kent添加休假地址，则只需使用清单3中的代码即可。您不需要重新编译人员类。 你甚至可以建立一个图形用户界面（<code>GUI</code>）或者文件读取器来添加属性，而不用重新编译客户端。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/5_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图2.使用动态属性建模的人员<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span><span class=\"params\">(String key)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValueOf</span><span class=\"params\">(String key, Object value)</span></span>;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>列举2,图2的<code>java</code>方法<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kent.setValueOf(“VacationAddress”, anAddress);</span><br><span class=\"line\">Address kentVactation = (Address) kent.getValueOf(“VacationAddress”)</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>列举3,使用动态属性<br><a href=\"#\" title=\"Said like that, you might wonder why anyone would ever use fixed properties, since dynamic properties such as this give you so much more flexibility. Of course there is a cost, and it lies in the reduction of the clarity of the dependencies between parts of the software. It is all very well adding a vacation address property to a person, but how do you know to get it back again? With fixed properties you can just look at the interface of person and see the properties. The compiler can check that don’t ask an object to do something it doesn’t understand. With a dynamic property you cannot do any design-time checking. Furthermore the interface of person is harder to see. Not just do you look at Person’s declared interface – you also have to find the dynamic properties, which will not be present in the class interface. You have to find that part of the code that sets the property (which usually will not be in the Person class at all) and dig it out.\"><span id=\"27\">这样说，你可能想知道为什么有人会使用固定的属性，因为动态的像这样的属性给了你更多的灵活性。当然有一个成本，它在于软件各部分之间依赖关系的清晰度降低。这一切都非常好给一个人增加一个度假地址属性，但是你怎么知道把它重新取回呢？有了固定的属性，你可以看看人的界面，看看属性。该编译器可以检查不要求对象做不理解的事情。 用一个动态属性，你不能做任何设计时检查。此外的界面人很难看。不只是你看<code>Person</code>的声明接口 -你也必须找到不会出现在类接口中的动态属性。你必须找到那些设置属性的代码部分（通常不会在<code>Person</code>类中）提现出来。</span></a></p>\n</blockquote>\n<hr>\n<h3 id=\"灵活动态属性\"><a href=\"#灵活动态属性\" class=\"headerlink\" title=\"灵活动态属性\"></a>灵活动态属性</h3><ul>\n<li><a href=\"#28\" title=\"How do you represent a fact about an object?\"><span id=\"28\">你如何代表一个对象的事实？</span></a><br></li>\n<li><a href=\"#28\" title=\"Provide an attribute parameterized with a string. To declare a property just use the string.\"><span id=\"28\">提供一个用字符串参数化的属性。只声明一个属性使用字符串。</span></a> <br> </li>\n</ul>\n<hr>\n<p><a href=\"#30\" title=\"Not just is the property hard to find, it also creates a nightmare dependency. With fixed properties the client code has a dependency to the person class – a dependency that is easy to keep track of. If you change the name of the property the compiler will let you know, and tell you what code you need to change to fix things. But the Flexible Dynamic Property creates a dependency into some arbitrary piece of code. It could be code that belongs to a class that is not even visible to the client. What happens if someone changes the key string? What happens if someone changes the type of object they put into the key string? Not just can the compiler do nothing to help you, you don’t even know where to start looking for potential changes.\"><span id=\"30\">不仅是属性很难找到，它的依赖也是一个噩梦。随着固定属性的客户端代码有一个依赖于人类 - 一个依赖是难以跟踪。如果你改变属性的名字，编译器会让你知道，并告诉你需要改变什么代码才能解决问题。但灵活的动态属性创建一个依赖于任意一段代码。它可能是属于一个类的代码甚至不能被客户端看到。如果有人更改密钥字符串会发生什么？如果有人改变他们把键入字符串的对象的类型会发生？不仅仅是编译器没法帮助你，你甚至不知道从哪里开始查找变化。</span></a></p>\n<p><a href=\"#31\" title=\"Flexible Dynamic Properties show this problem at it’s most extreme. The property could be created at design time by any client of Person. If another client of person uses that same property you have a dependency between two classes that is very hard to find. Furthermore properties can be added at run time by reading a file or by a GUI. It is impossible to find out, even at run time, what are the legal dynamic properties for a person. True you can ask a person if it has a property for vacation address – but if there isn’t one does that mean that that person does not have a vacation address, or does it mean that there is no such property as vacation address? And if it has no such property now, that doesn’t mean it won’t have one a few seconds later.\"><span id=\"31\"><code>灵活的动态属性</code>在最极端的情况下显示了这个问题。 该属性可能是<code>Person</code>的任何客户端在设计时创建。 如果另一个人的客户端使用同一个属性，那么你就很难找到两个类之间的依赖关系。 此外属性可以在运行时通过读取文件或通过<code>GUI</code>添加。 即使在运行时，不可能发现一个人的哪些动态属性是合法的。 当然，你可以问一个人，如果它有一个度假地址的属性 - 但如果没有一个这是否意味着这一点人没有假期地址，或者是否意味着没有这样的度假地址属性？ 而如果现在没有这样的属性，那并不意味着它几秒钟后不会有。</span></a></p>\n<p><a href=\"#32\" title=\"Another key disadvantage of flexible dynamic properties is that it is difficult to substitute them for operations. One of the key advantages of encapsulation is that a client that uses a property cannot tell whether it is stored as part of an object’s data, or computed by a method. This is a very important part of the object approach. It allows you not just a regular interface for both purposes, but also to change your mind without the client knowing. In the presence of subtyping you can even have a supertype store the property and subclasses compute or vice versa. However if you want to use dynamic properties the only way you can change stored data to a calculation is to put a specific trap in the general accessor for the dynamic property along the lines of Listing 4. This code is likely to be brittle and awkward to maintain.\"><span id=\"32\">灵活动态特性的另一个关键缺点是很难替代它们进行操作。封装的一个关键优势是使用属性的客户端无法分辨它是作为对象数据的一部分存储的，还是通过方法来计算的。这是一个对象方法非常重要的一部分。它可以让你不只是一个普通的接口实现，而且在客户端不知情的情况下改变你期望的值。当存在子类型，你甚至可以有一个超类型存储属性和子类计算，反之亦然。但是，如果要使用动态属性，则只能更改存储的数据一个计算就是在通用访问器中为<code>动态属性</code>设置一个特定的数值,清单4中的代码。这个代码可能很脆弱，难以维护。</span></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span> <span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (key = “vacationAddress”) </span><br><span class=\"line\">            <span class=\"keyword\">return</span> calculatedVacationAddress();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (key = “vacationPhone”) </span><br><span class=\"line\">            <span class=\"keyword\">return</span> getVacationPhone();</span><br><span class=\"line\">        <span class=\"comment\">// else return stored value…</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举4,用操作替换<code>动态属性</code></p>\n</blockquote>\n<p><a href=\"#33\" title=\"Other forms of dynamic property help you solve some of these problems but not all. The essential disadvantage of a dynamic property is that you lose the clear interface and all designtime checking. Different approaches to dynamic properties give you different abilities to do run-time checking. If you need dynamic properties, and there are certainly situations when you do, then you just have to give up design time checking and a explicit design time interface. The only question is how explicit an interface and how much checking you can do at run time. With Flexible Dynamic Properties you don’t get any of either.\"><span id=\"33\">其他形式的动态属性可以帮助您解决其中一些问题，但不是全部。该<code>动态属性</code>的最大的缺点是：你失去了清晰的接口和所有的设计时间检查。<code>动态属性</code>的不同方法会让你额外写不同的检查方法。如果你需要<code>动态属性</code>，并且当然有确定的情况你这样做，那么你只需要放弃设计时间检查和明确的设计时间接口。唯一的问题是如何明确接口和有多少运行时检查。使用灵活的动态属性也会有同样的问题。</span></a></p>\n<p><a href=\"#34\" title=\"You find dynamic properties often in databases because it is often a pain to change the database schema, especially if there would be a lot of data to migrate. Interfaces of distributed components, such as in CORBA, also often use dynamic properties for a similar reason. There are a lot of distant clients using the interface, so you are reluctant to change it. In both of these cases it is not so much a distinction between compile-time and run-time, as much as a distinction between design-time and production.\"><span id=\"34\">你经常在数据库中发现动态属性，因为改变它通常是一个痛苦数据库模式，特别是如果有大量的数据迁移。分布式的接口例如在<code>CORBA</code>中的组件也经常因为相似的原因而使用动态属性。那里是很多使用界面的远程客户，所以你不愿意改变它。在这两种情况下，编译时和运行时间之间的区别并不是设计时和生产之间的区别。</span></a> </p>\n<p><a href=\"#35\" title=\"If all you are doing is displaying and updating information via a GUI, and the code never makes a fixed reference to the keys (i.e. you never see code like Listing 3), then you are pretty safe with a Flexible Dynamic Property. This is because you have not set up a nasty dependency to some arbitrary string as a key. Otherwise you should consider one of the other approaches to dynamic properties.\"><span id=\"35\">如果你正在做的是通过<code>GUI</code>显示和更新信息，而代码永远不会对键进行固定的引用（即，你永远不会看到像清单3那样的代码），那么使用灵活<code>动态属性</code>就非常安全。这是因为你没有设置一个任意字符串作为一个关键的讨厌的依赖。 否则，你应该考虑<code>动态属性</code>的其他方法之一。</span></a></p>\n<p><a href=\"#36\" title=\"The first step towards more run-time checking is the Defined Dynamic Property. The key difference between a defined as opposed to a flexible dynamic property is that the key used by the dynamic property is no longer some arbitrary string, but is now an instance of some class (Figure 3).\"><span id=\"36\">更多运行时检查的第一步是定义的动态属性。与<code>灵活动态属性</code>相反，定义的关键区别在于<code>动态属性</code>使用的关键字不再是一些任意的字符串，而是现在某个类的一个实例（图3）。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/7_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图3.定义的<code>动态属性</code></p>\n</blockquote>\n<p><a href=\"#37\" title=\"On the face of it using defined dynamic property does not change much. Indeed the code interface is almost identical (Listing 5 and Listing 6). But now the choice of keys is no longer entirely arbitrary, it is limited by the instances of contact type. Of course this still allows you to add properties at run time – you just create a new contact type. However now there is at least somewhere someone can look to get a list of potential keys without having to trawl through the program text. Any keys added at design time can be collected in a loader routine in the contact type class. You can easily provide services to find out the legal keys at run time.\"><span id=\"37\">在它的表面上使用定义的<code>动态属性</code>并没有太大的改变。事实上，代码界面几乎完全相同（清单5和清单6）。但是现在，关键字的选择不再是完全随意的，而是受到接触<code>类型</code>的限制。当然，这仍然允许您在运行时添加<code>属性</code>-只需创建一个新的关联<code>类型</code>。不过现在至少在某个地方可以找到一个潜在的<code>键</code>列表，而无需浏览程序<code>代码</code>。 在设计时添加的任何键都可以在关联类型类的加载程序中收集。您可以轻松地提供服务，以在运行时查找合法的<code>键</code>。</span></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span><span class=\"params\">(ContactType key)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValueOf</span><span class=\"params\">(ContactType key, Object value)</span></span>;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举5, 图3的Java接口<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ContactType</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Enumeration <span class=\"title\">instances</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasInstanceNamed</span><span class=\"params\">(String name)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ContactType <span class=\"title\">get</span><span class=\"params\">(String name)</span></span>;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>列举6,为定义的属性类型提供的服务</p>\n</blockquote>\n<p><a href=\"#38\" title=\"In particular you can now set up some checking to prevent errors due to someone asking for a dynamic property that does not exist as in Listing 7. I’m throwing an unchecked exception here because I consider that the precondition for get() is that the client provides a legal name for a contact type. The client can always fulfill this responsibility by using hasInstanceNamed(), but most of the time client software will hang on to contact type objects, not strings.\"><span id=\"38\">你现在可以设置一些检查来防止由于某人要求一个不存在的<code>动态属性</code>而导致的错误。我在这里抛出一个未经检查的<code>异常</code>，因为我认为<code>get（）</code>的前提条件是<code>客户端</code>为联系人类型提供合法名称。客户端总是可以通过使用<code>hasInstanceNamed（）</code>来执行这个检查，但是大多数情况下客户端使用的是类型而不是字符串。</span></a></p>\n<hr>\n<h3 id=\"定义动态属性\"><a href=\"#定义动态属性\" class=\"headerlink\" title=\"定义动态属性\"></a>定义动态属性</h3><ul>\n<li><a href=\"#39\" title=\"How do you represent a fact about an object?\"><span id=\"39\">你如何代表一个对象的事实？</span></a></li>\n<li><a href=\"#39\" title=\"Provide an attribute parameterized with an instance of some type. To declare a property create a new instance of that type\"><span id=\"39\">提供用某种类型的实例参数化的属性。声明一个属性创建一个新类型的实例</span></a> </li>\n</ul>\n<hr>\n<p><a href=\"#40\" title=\"Usually the contact types will be held in a dictionary, usually indexed by a string. This dictionary could be a static field of contact type, but I prefer to make it a field on a Registrar.\"><span id=\"40\">通常，联系人类型将保存在字典中，通常由字符串索引。这个字典可能是一个静态的联系人类型的字段，但是我更愿意把它作为注册服务器上的字段。</span></a></p>\n<p><a href=\"#41\" title=\"Removing a contact type still has awkward consequences. In java the dynamic properties would still be present on those objects that had them, unless you write some complicated clean up code. I usually make it a rule to never delete the keys for a Defined Dynamic Property. If you want to use a new name you can easily alias the contact type by giving it one name but placing it in the defining dictionary several times.\"><span id=\"41\">删除联系人类型仍然具有尴尬的后果。在<code>java</code>中的<code>动态属性</code>仍然会出现在那些拥有它们的对象上，除非你写了一些复杂的东西清理代码。我通常会规定永远不要删除动态属性的键。如果你想使用一个新的名字，你可以通过给它一个其他名字，但是把它放置在定义的字典中几次，很容易地为联系类型添加别名。</span></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ContactType</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ContactType <span class=\"title\">get</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (! hasInstanceNamed (name)) <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(“No such contact type);</span><br><span class=\"line\">        <span class=\"comment\">// return the contact type</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// use with</span></span><br><span class=\"line\">Address kentVactation = (Address)kent.getValueOf(ContactType.get(“VacationAddress”));</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举7, 检查使用合法合同类型</p>\n</blockquote>\n<p><a href=\"#42\" title=\"At this point you might be wondering about what this has to do with conceptual modeling,after all I am writing a lot of code and discussing design trade-offs. This is an important conceptual issue because the conceptual choice you make affects the implementation options you have. If you choose to use flexible dynamic attributes in your conceptual model, you are making it pretty hard to use either defined dynamic attributes or fixed attributes in your implementation. One of the reasons you do conceptual models is to explore what is fixed and what is changeable in your users’ concepts. If total flexibility was my only goal then I would always use Figure 4. With this I can model any situation in the world. But this model is not very useful. Its uselessness comes from the fact that it does not indicate what is fixed. When you are doing a conceptual model you need to be aware of how your choices affect things in implementation – otherwise you are abdicating your responsibility as a modeler.\"><span id=\"42\">在这一点上，您可能想知道这与概念建模有什么关系，毕竟我写了很多代码并讨论了设计的权衡。这是一个重要的概念问题，因为您所做的概念选择会影响您的实现选择。如果你选择在你的概念模型中使用<code>灵活动态属性</code>，你很难在你的实现中使用定义的<code>动态属性</code>或<code>固定属性</code>。你做概念模型的原因之一是探索你的用户的概念是什么固定的，什么是可变的。如果全面的灵活性是我唯一的目标，那么我会总是使用图4.通过这个，我可以模拟世界上的任何情况。但是这个模型不是很有用。它在现实项目中是没用的，它不表示什么是固定的。什么时候你正在做一个概念模型，你需要知道你的选择如何影响项目实施-否则你失去了作为建模者的作用。</span></a></p>\n<p><a href=\"#43\" title=\"I often find that people discover dynamic properties, and then want to use them everywhere. The flexibility is so great, they get all the extendibility they ever want. Yes sometimes you need dynamic properties. but never forget there is a price. Only use them when you really need them. After all it is easy to add them later if you have to.\"><span id=\"43\">我经常发现人们发现<code>动态属性</code>，然后想要在任何地方使用它们。灵活性如此之大，他们获得了所有的可扩展性。是的，有时候你需要<code>动态属性</code>。但永远不会忘记有一个标准。只有当你真的使用它们需要他们才用。毕竟，如果必须使用，以后很容易添加它们。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/8_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图4.一个可以无用建模任何域的模型</p>\n</blockquote>\n<p><a href=\"#44\" title=\"The Defined Dynamic Property allows you to indicate rather more about what properties you have. These properties are still untyped. You cannot enforce that the value of the vacation address in Figure 3 is an address. You can do something about that by using a Typed Dynamic Property.\"><span id=\"44\"><code>定义动态属性</code>允许您更多地指出你拥有的属性。这些属性仍然是无类型的。您不能强制图3中休假地址的值是一个地址。 你可以通过使用<code>类型动态属性</code>来做些什么。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/9_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图5.为使用限定关联的类型化动态属性建模</p>\n</blockquote>\n<p><a href=\"#45\" title=\"A typed dynamic property adds type information to the defined dynamic property (Figure 6 and Figure 5 ). Here the instances of contact type do not just indicate what properites the person has, they also indicate the type of each property. The type constrains the value, along the lines of Listing 9.\"><span id=\"45\"><code>类型动态属性</code>将类型信息添加到定义的<code>动态属性</code>（图6和6）图5）。这里的联系人类型的实例不只是指出该人是什么合适的人有，他们也表示每个<code>属性</code>的类型。 类型约束的值，沿线清单9。</span></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span><span class=\"params\">(ContactType key)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValueOf</span><span class=\"params\">(ContactType key, Object value)</span></span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ContactType</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Class <span class=\"title\">getValueType</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ContactType</span> <span class=\"params\">(String name, Class valueType)</span></span>;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举8, 键入动态属性的操作</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValueOf</span><span class=\"params\">(ContactType key, Object value)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (! key.getValueType().isInstance(value))</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> IllegalArgumentException (“Incorrect type <span class=\"keyword\">for</span> property”);</span><br><span class=\"line\">        <span class=\"comment\">// set the value</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举9, 做类型检查</p>\n</blockquote>\n<p><a href=\"#46\" title=\"Doing type checking like this can help to avoid errors, but it still is not as clear as fixed properties. The checking is at run time, not at design time, and is therefore not as effective. Still it is better than no checking at all, particularly if you are used to a strongly typed environment.\"><span id=\"46\">这样做类型检查可以帮助避免错误，但它仍然不像固定属性那样清晰。 检查是在运行时，而不是在设计时，因此不是有效的。但还是比没有检查好，特别是如果你习惯于强类型的环境时。</span></a></p>\n<hr>\n<h3 id=\"类型动态属性\"><a href=\"#类型动态属性\" class=\"headerlink\" title=\"类型动态属性\"></a>类型动态属性</h3><ul>\n<li><a href=\"#47\" title=\"How do you represent a fact about an object?\"><span id=\"47\">你如何代表一个对象的事实？</span></a><br></li>\n<li><a href=\"#47\"><span id=\"47\">提供使用某种类型的实例进行参数化的属性。声明一个属性创建一个新类型的实例并指定值的类型属性。</span></a></li>\n</ul>\n<hr>\n<p><a href=\"#48\" title=\"As we delve deeper into dynamic properties, we find richer examples of reflection, an architectural pattern which appears when we get runtime objects that are able to describe themselves. [POSA] discusses reflection in much more detail than I intend to go into here.\"><span id=\"48\">当我们深入研究<code>动态属性</code>时，我们会发现更丰富的<code>反射</code>示例，这是一种架构模式，当我们获得能够描述自身的运行时对象时，就会出现这种模式。 [POSA]比我打算在这里更详细地讨论反思。</span></a></p>\n<p><a href=\"#49\" title=\"Dynamic properties provide a reflective capability, even in those languages that don’t support reflection themselves. Even with a language that does provide some reflection, the reflection of dynamic properties is more focused – so you can provide an easier to use interface.\"><span id=\"49\">动态属性提供反射功能，即使在那些不支持反射的语言中。即使使用了一种能够提供一些反射的语言，<code>动态属性</code>的反射也更加集中 - 所以您可以提供更易于使用的接口。</span></a></p>\n<p><a href=\"#50\" title=\"Using all of those qualified associations can get rather hard to follow. Another way of providing typed dynamic properties is to use the separate property pattern. The essence of the separate property pattern is that it makes the property an object in its own right (Figure 6 and Listing 10). You can get hold of the properties of a person, and then with each property get value and type information.\"><span id=\"50\">使用所有这些合格的关联可能会很难遵循。另一种方式提供<code>类型动态属性</code>是使用单独的属性模式。独立属性模式的本质是它使属性成为一个对象（图6和清单10）。 你可以获得一个人的属性，然后与每个属性获得值和类型信息。</span></a></p>\n<hr>\n<h3 id=\"分离属性\"><a href=\"#分离属性\" class=\"headerlink\" title=\"分离属性\"></a>分离属性</h3><ul>\n<li><a href=\"#51\" title=\"How do you represent a fact about an object, and allow facts to be recorded about that fact\"><span id=\"51\">你如何代表一个对象的属性，并允许属性记录这个属性<span></span></span></a></li>\n<li><a href=\"#51\" title=\"Create a separate object for each property. Facts about that property can then be made properties of that object.\"><span id=\"51\">为每个属性创建一个单独的对象。有关该属性的子属性可以然后被做成那个对象的属性。<span></span></span></a></li>\n</ul>\n<hr>\n<p><a href=\"#52\" title=\"Separate properties and qualified associations are two alternatives that are always available for dynamic properties. So far I’ve described flexible and defined dynamic properties with qualified associations because the qualified association presents a much easier interface to use.You can use flexible and defined dynamic properties with separate properties if you wish, although I’m not going to go into that here. As we get to the complexity of typed dynamic properties and onwards the separate property style becomes more of an advantage.\"><span id=\"52\"><code>独立属性</code>和限定的关联<code>动态属性</code>总是可用的两种选择。 到目前为止，我已经用限定的关联描述了灵活的和定义好的<code>动态属性</code>，因为合格的关联提供了一个更容易使用的接口。如果你愿意的话，你可以使用灵活和定义的具有单独属性的<code>动态属性</code>，尽管我不打算进入在这里。当我们了解类型化<code>动态属性</code>的复杂性时，<code>分离属性</code>风格变得更有优势。<span></span></span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/10_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图6.为分类的动态属性建模，使用单独的属性</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Enumeration <span class=\"title\">getProperties</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ContactProperty</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValue</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Class <span class=\"title\">getType</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ContactType <span class=\"title\">getIndex</span><span class=\"params\">()</span></span>;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举10, 使用单独属性的类型化动态属性的操作</p>\n</blockquote>\n<p><a href=\"#52\" title=\"Separate properties and qualified associations are not mutually exclusive. You can easily provide both interfaces at the same time. This way you get the advantages of both. Of course that makes the interface more complex, so think first about what the clients of person need.Give them the interface they need, don’t make it over complex. But if they need both qualified associations and separate properties, then that is a reasonable option. I would normally always use qualified associations for the value, but it may not make as much sense for the type.\"><span id=\"53\"><code>分离属性</code>和有限的关联不是相互排斥的。您可以轻松地同时提供两个接口。 这样你就得到了两者的优点。当然这会使接口更加复杂，所以先考虑一下用户的需求。给他们提供他们需要的接口，不要让接口变得复杂。但是，如果他们需要合格的关联和<code>分离属性</code>，那么这是一个合理的选择。我通常会使用合格的关联来获得值，但是这种类型可能没有多大意义。<span></span></span></a></p>\n<p><a href=\"#\" title=\"You can also consider the interface/implementation differences here. In this paper I want to concentrate on the conceptual – which maps to the interface of software rather than its implementation. But it is worth mentioning that you can provide a qualified association interface while using separate object in the implementation. You are only using separate properties in the interface if a client of person can obtain a contact property object. Often it is useful to hide the separate property to simplify the interface for the client.\"><span id=\"54\">您也可以在这里考虑接口/实现的差异。在本文中，我想集中在概念上 - 它映射到软件的接口而不是实现。但值得一提的是，您可以在实现中使用单独的对象时提供合格的关联接口。如果人的客户端可以获取联系人属性对象，则只能在接口中使用单独的属性。通常隐藏<code>分离属性</code>以简化客户端的接口是有用的。</span></a></p>\n<p><a href=\"#55\" title=\"One of the big advantages of the Separate Properties is that it allows you put information about the property in the property. Such information might include who determined the property, when it was determined, and the like. The Observation pattern in \\[Fowler AP §3.5\\] build upon this theme in some depth. Much of what I’ve described there in terms of observations is worth considering if you need separate properties. \\(I see the observation pattern as a use of separate properties.\\)\"><span id=\"55\"><code>分离属性</code>的一大优势是它可以让你把属性的信息放在属性中。 这些信息可能包括谁确定了属性，什么时候确定了属性等。 [Fowler AP§3.5]中的观察模式基于这个主题进行了深入的研究。如果您需要单独的属性，我在观察者模式所描述的大部分内容都值得思考。（我将观察模式看作是使用不同的属性。）</span></a></p>\n<p><a href=\"#56\" title=\"You might be wondering at the contrast between separate properties \\(a pattern\\) and qualified associations \\(a UML modeling construct\\). You can also think of qualified associations as a pattern, a pattern of association. Indeed I did do this in \\[Fowler AP §15.2\\]. I have found it helpful to think of modeling constructs as patterns, for it helps me think about the trade-offs in using them. This is particularly useful when you are comparing them to something that is more clearly a pattern, such as separate property. Of course things that begin as patterns can be turned into modeling constructs, particularly if you use UML stereotypes. The historic mapping pattern \\[Fowler AP §15.3\\] is a good example of that. I represent that using the «history» stereotype. Is it a pattern or a modeling construction? Maybe it’s a floor wax and a desert topping too.\"><span id=\"56\">您可能想知道<code>分离属性</code>（模式）和限定关联（<code>UML</code>建模结构）之间的对比。 你也可以把合格的关联看作一种模式，一种联想模式。确实，我在[Fowler AP §15.2]中做了这个。我发现为设计创建模型考虑是有帮助的，因为它帮助我思考使用它们的权衡。当你将它们的模型比较清楚，如<code>分离属性</code>，这是特别有用的。当然，以模式开始的事情可以转化为建模结构，特别是如果使用<code>UML</code>构造型。历史映射模式[FowlerAP§15.3]就是一个很好的例子。我表示使用这种模式非常刻版。这是一个模式或建模？也许这是一个地板蜡和一个沙漠顶部。</span></a></p>\n<hr>\n<h2 id=\"具有多值关联的动态属性\"><a href=\"#具有多值关联的动态属性\" class=\"headerlink\" title=\"具有多值关联的动态属性\"></a><a href=\"#57\" title=\"Dynamic Properties with Multi-valued associations\"><span id=\"57\">具有多值关联的动态属性</span></a></h2><p><a href=\"#58\" title=\"My examples above have concentrated on cases where there is a single value for each key in the dynamic properties. But you can also have cases where there are multiple items in the dynamic properties. With Person you might consider a friends property which is multi-valued.There are two ways to deal with this, one that is simple and unsatisfying, another that is satisfying but (too) complex.\"><span id=\"58\">我上面的例子集中讨论了<code>动态属性</code>中每个键都有一个单一值的情况。 但是，您也可以在<code>动态属性</code>中有多个事件的情况。与人相处时，你可能会考虑一个多值的友好属性。处理这个问题有两种方法，一种简单而不令人满意，另一种令人满意，但（太）复杂。</span></a></p>\n<p><a href=\"#59\" title=\"The simple approach is just to say that the value of a dynamic property can be a collection.We can then manipulate it like any other object with the same interface (Listing 11). This is nice and simple, since we don’t have to do anything to the basic dynamic property pattern.(The example here is with a typed dynamic property, but it will work with all of them.) It’s unsatisfying however because it is not really the way we would like to deal with multi-valued properties. If friends were a fixed property, we would want an interface along the lines of Listing 12. I don’t like exposing the vector in these cases. By doing so the person class loses the ability to react when we add or remove elements. It also removes our ability to change the type of collection we are using.\"><span id=\"59\">简单的方法就是说<code>动态属性</code>的值可以是一个集合。然后我们可以像使用相同接口的其他对象一样操作它（清单11）。这很好，很简单，因为我们不需要对基本的<code>动态属性</code>模式做任何事情（这里的例子是一个类型化的<code>动态属性</code>，但是它可以和所有的模式一起工作）。然而，这并不令人满意，因为它不是真的是我们想要处理多值属性的方式。如果朋友是一个固定的属性，我们需要一个接口，如清单12所示。我不喜欢在这些情况下暴露集合。通过这样做，人员班级在我们添加或移除元素时就失去了应对的能力。这也消除了我们改变我们正在使用的集合类型的能力。</span></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Person aPerson = <span class=\"keyword\">new</span> Person();</span><br><span class=\"line\">ContactType friends = <span class=\"keyword\">new</span> ContactType(“Friends”, Class.forName(“Vector”));</span><br><span class=\"line\">Person martin = <span class=\"keyword\">new</span> Person(“Martin”);</span><br><span class=\"line\">martin.setValueOf(“Friends”, <span class=\"keyword\">new</span> Vector());</span><br><span class=\"line\">Person kent = <span class=\"keyword\">new</span> Person(“Kent”);</span><br><span class=\"line\">martin.getValueOf(“Friends”).addElement(“Kent”);</span><br><span class=\"line\">Enumeration friends = martin.getValueOf(“Friends”).elements();</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举11, 在类型化动态属性中使用集合值<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Enumeration <span class=\"title\">getFriends</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addFriend</span><span class=\"params\">(Person arg)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">removeFriend</span><span class=\"params\">(Person arg)</span></span>;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>列举12, 一个固定的多值属性的运作</p>\n</blockquote>\n<p><a href=\"#60\" title=\"So can we get an interface along the lines of Listing 12, when we have dynamic properties? Well if we try hard enough we can, as you can see in Figure 7. But it is a complex model. With some clever coding we can hide much of that complexity behind the interface (Listing 13 and Listing 14) and make it reasonably convenient to use (Listing 15). But the client still needs to know which properties are single valued and which are multi-valued and all the checking for the right usage can only occur at run time. All this complexity is painful – a lot more painful than using fixed properties. I would be very reluctant to go this far.\"><span id=\"60\">那么当我们有<code>动态属性</code>的时候，我们可以按照清单12的方式获得一个接口吗？ 那么，如果我们努力工作，就可以如图7所示。但这是一个复杂的模型。 通过一些巧妙的编码，我们可以隐藏接口（清单13和清单14）背后的大部分复杂性，并且使用起来相当方便（清单15）。但客户端仍然需要知道哪些属性是单值的，哪些属性是多值的，并且只有在运行时才能检查正确的使用情况。所有这些复杂性都是痛苦的-比使用<code>固定属性</code>更痛苦。我会非常不愿走这么远。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/12_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图7.满足对多值动态属性的过度支持</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class Person</span><br><span class=\"line\">    public Object getValueOf(ContactType key);</span><br><span class=\"line\">    public Enumeration getValuesOf(ContactType key);</span><br><span class=\"line\">    public void setValueOf(ContactType key, Object newValue);</span><br><span class=\"line\">    public void addValueTo(ContactType key, Object newValue);</span><br><span class=\"line\">    public void removeValueFrom(ContactType key, Object newValue);</span><br><span class=\"line\">    </span><br><span class=\"line\">class ContactType</span><br><span class=\"line\">    public Class getValueType();</span><br><span class=\"line\">    public boolean isMultiValued();</span><br><span class=\"line\">    public boolean isSingleValued();</span><br><span class=\"line\">    public ContactType(String name, Class valueType, boolean isMultiValued);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举13, 图7的操作</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span></span></span><br><span class=\"line\"><span class=\"class\">    <span class=\"title\">public</span> <span class=\"title\">Object</span> <span class=\"title\">getValueOf</span>(<span class=\"title\">ContactType</span> <span class=\"title\">key</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (key.isMultiValued())</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> IllegalArgumentException(“<span class=\"function\">should use <span class=\"title\">getValuesOf</span><span class=\"params\">()</span>”)</span></span><br><span class=\"line\"><span class=\"function\">        <span class=\"comment\">//return the value</span></span></span><br><span class=\"line\"><span class=\"function\">    &#125;</span></span><br><span class=\"line\"><span class=\"function\">    </span></span><br><span class=\"line\"><span class=\"function\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addValueTo</span><span class=\"params\">(ContactType key, Object newValue)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (key.isSingleValued())</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> IllegalArgumentException(“should use setValueOf”);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (! key.getValueType().isInstance(newValue))</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> IllegalArgumentException (“Incorrect type <span class=\"keyword\">for</span> property”);</span><br><span class=\"line\">        <span class=\"comment\">//add the value to the collection</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举14, 检查清单13的操作的使用情况</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fax = <span class=\"keyword\">new</span> ContactType(“fax”, Class.forName(“PhoneNumber”), <span class=\"keyword\">false</span>);</span><br><span class=\"line\">Person martin = <span class=\"keyword\">new</span> Person(“martin”);</span><br><span class=\"line\">martin.setValueOf(“fax”, <span class=\"keyword\">new</span> PhoneNumber(“<span class=\"number\">123</span> <span class=\"number\">1234</span>”);</span><br><span class=\"line\">martinFax = martin.getValueOf(“fax”);</span><br><span class=\"line\">friends = <span class=\"keyword\">new</span> ContactType (“friends”, Class.forName(“Person”), <span class=\"keyword\">true</span>);</span><br><span class=\"line\">martin.addValueTo(“friends”, <span class=\"keyword\">new</span> Person(“Kent”));</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举15, 使用清单13的操作</p>\n</blockquote>\n<p><a href=\"#61\" title=\"This complexity appears because we have both multi valued and single-valued properties.There is an inherently different interface to dealing with these, hence the complexity. Of course we can get situations with only multi-valued properties. A common pattern for this is the Typed Relation ship pattern \\(Figure 8\\). Here a person may have number of different employment relationships with a number of different companies \\(or even several with the same company\\).\"><span id=\"61\">这种复杂性似乎是因为我们既有多值也有单值的<code>属性</code>。处理这些复杂性有一个内在的不同的接口，因此复杂性也是如此。当然，我们可以得到只有多值属性的情况。一个常见的模式是类型关系模式（图8）。在这里，一个人可能与许多不同公司有不同的雇佣关系（甚至与同一家公司有多个）。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/13_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图8.类型关系的一个例子</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Employment</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Employment</span> <span class=\"params\">(Person person, Company company, Employment Type type)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">terminate</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    …</span></span><br><span class=\"line\"><span class=\"function\">&#125;</span></span><br><span class=\"line\"><span class=\"function\">class Person </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Enumeration <span class=\"title\">getEmployments</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addEmployment</span> <span class=\"params\">(Company company, EmploymentType type)</span></span>;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举16, 图8的<code>Java</code>接口</p>\n</blockquote>\n<p><a href=\"#62\" title=\"As we think of this, it should soon occur to you that this is really very similar as using a Defined Dynamic Property that is multi-valued, but expressed using a Separate Property rather than a Qualified Association. (Or is that sentence just too much of a mouthful?) Indeed Figure 9 shows how you can use a Defined Dynamic Property interface in this situation. This view of things is true, and so a typed relationship doesn’t add anything that new to this pattern language. But typed relationship is a very common pattern in modeling circles, and many may not realize its connection with the dynamic properties patterns.\"><span id=\"62\">正如我们想到的那样，很快就会发现，这与使用多值的<code>定义动态属性</code>非常类似，但是使用<code>分离属性</code>而不是合适的关联来表示。（或者说这句话太过分了？）实际上，图9显示了在这种情况下如何使用<code>定义动态属性</code>接口。这种事物的观点是真实的，所以一个类型化的关系不会添加任何新的模式语言。 但是类型化关系在建模圈子中是一种非常普遍的模式，很多人可能没有意识到它与<code>动态属性</code>模式的联系。</span></a></p>\n<hr>\n<h3 id=\"类型关系\"><a href=\"#类型关系\" class=\"headerlink\" title=\"类型关系\"></a>类型关系</h3><ul>\n<li><a href=\"#63\" title=\"How do you represent a relationship between two objects?(How do you represent multi-valued dynamic properties?)\"><span id=\"63\">你如何表示两个对象之间的关系？（你如何表示多值动态属性？）</span></a></li>\n<li><a href=\"#63\" title=\"Create a relationship object for each link between the two objects. Give the relationship object a type object to indicate the meaning of the relationship.(The type object is the name of the multi-valued property.)\"><span id=\"63\">为两个对象之间的每个链接创建一个关系对象。 给关系对象一个类型对象来表示关系的含义。（类型对象是多值属性的名称。）</span></a></li>\n</ul>\n<hr>\n<p><a href=\"#64\" title=\"The strengths of typed relationship are that it works well with bi-directional relationships, and that it provides a simple point to add properties to the relationship. (The latter, of course, is a feature of separate properties.) You can add a sophisticated knowledge level to this pattern,along much the same lines as typed dynamic properties. However you should consider the interface implications. Typed relationships force users to be aware of the employment object,as indeed does any use of separate properties. Indeed people tend to see the property object as a full fledged object in its own right, rather as some property of the person (or company). But the qualified association can often provide a simpler interface for many purposes. So whenever you see, or you are considering using, a typed relationship; you should also consider the qualified association form. You can use it in either or both directions, and use it either in addition to the typed relationship, or in addition to it.\"><span id=\"64\">类型化关系的优势在于它可以很好地处理双向关系，并且为关系添加属性提供了一个简单的点。（当然，后者是一个<code>分离属性</code>的特征。）你可以在这个模式中添加一个复杂的知识级别，跟类型化的<code>动态属性</code>一样。但是，您应该考虑接口的影响。类型化关系迫使用户意识到雇佣对象，因为确实使用<code>分离属性</code>。事实上，人们倾向于将属性客体本身看作完全成熟的客体，而不是人（或公司）的一些属性。 但是合格的关联通常可以为许多目的提供更简单的接口。所以每当你看到，或者你正在考虑使用，一个类型的关系;你还应该考虑合格的关联形式。您可以在任何一个方向或两个方向上使用它，也可以将其用于除了键入的关系之外，或者除此之外。。</span></a></p>\n<p><a href=\"#65\" title=\"The two models are not quite identical however. If you use Figure 9 you are indicating that an employer can only be an employer once for a particular employment type. Figure 8 has no such constraint in the diagram as it stands, although most modelers would imply such a constraint,unless the employment had additional attributes. Often, of course, the employment does have the additional attributes. A common example is a date range (as in accountability \\[Fowler, AP §2.4\\].\"><span id=\"65\">但是这两种模式并不完全相同。如果使用图9，则表示雇主只能是某种特定工种的雇主。图8在图表中没有这样的约束，尽管大多数建模者会暗示这样的约束，除非雇用具有附加属性。当然，就业通常具有附加属性。一个常见的例子是日期范围（如问责制[Fowler，AP§2.4]）。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/14_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图9.使用与图8相同情况的合格关联</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> Person &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addEmployer</span> <span class=\"params\">(Company company, EmploymentType type)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Enumeration <span class=\"title\">getEmployersOfType</span> <span class=\"params\">(EmploymentType type)</span></span>;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举17, 图9的接口</p>\n</blockquote>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/15_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图10.键入的关系，显示通常假定的约束</p>\n</blockquote>\n<hr>\n<h2 id=\"不同种类的人\"><a href=\"#不同种类的人\" class=\"headerlink\" title=\"不同种类的人\"></a>不同种类的人</h2><p><a href=\"#\" title=\"So far we are assuming we only have one kind of person, and any properties we define for a person are valid properties for all people. However you do get situations where you have different types, and different properties for different types. A manager may need a property for department managed, an executive may need a property for executive washroom key number (in a not very 90’s company).\"><span id=\"66\">到目前为止，我们假设我们只有一种人，我们为一个人定义的任何属性都是所有人的有效属性。但是，您确实会遇到不同类型的情况，以及不同类型的不同属性。管理人员可能需要一个管理部门的属性，执行人员可能需要一个属性作为高管卫生间的关键号码（在一个不是90年代的公司）。</span></a></p>\n<p><a href=\"#67\" title=\"Don’t worry, I hear the cries of “use inheritance stupid”. Indeed this is one of the situations that is often used for subtyping. Actually it gets rather more involved than that, particularly when you start thinking of the various roles a person may play. I’ve written a whole paper on the subject of modeling roles \\[Fowler roles\\]. The roles patterns consider cases where we are interested in variations in operations and in variations of fixed properties. But in this case I want to explore the overlap of different kinds of object with the notion of dynamic properties. This overlap begets the dynamic properties knowledge level pattern \\(a name that is getting a little too large for my taste\\).\"><span id=\"67\">别担心，我听到“使用继承愚蠢”的呼声。事实上，这是常用于分类的情况之一。实际上，这个过程比这个要复杂得多，特别是当你开始思考一个人可能扮演的角色时。我已经写了关于建模角色[Fowler roles]的主题的全文。角色模式考虑了我们对操作变化和<code>固定属性</code>变化感兴趣的情况。但在这种情况下，我想探索不同类型的对象与<code>动态属性</code>的概念的重叠。这种重叠会导致<code>动态属性知识级别模式</code>（一个对我的品味有点太大的名字）。</span></a></p>\n<p><a href=\"#68\" title=\"To use the pattern we give the Person a type object of Person Type. We can then say that the person type’s association to contact type indicates which properties are available for people who have that person type. If we try to use, or ask for, a property on a person the person type can be used to check that the usage is correct.\"><span id=\"68\">为了使用这个模式，我们给<code>Person</code>一个<code>Person</code>类型的<code>类型对象</code>。然后，我们可以说，人物类型与联系人类型的关联指示哪些人物拥有该人物类型可用的属性。 如果我们尝试使用或要求某人的属性，则可以使用人员类型来检查使用情况是否正确。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/16_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图11.动态属性知识水平</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span><span class=\"params\">(ContactProperty key)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasProperty</span><span class=\"params\">(ContactProperty key)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValueOf</span><span class=\"params\">(ContactProperty key, Object newValue)</span></span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PersonType</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasProperty</span><span class=\"params\">(ContactProperty key)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Enumeration <span class=\"title\">getProperties</span><span class=\"params\">()</span></span>;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举18, 图11的操作<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span> <span class=\"params\">(ContactProperty key)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!hasProperty(key))</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> IllegalArgumentException(“Innapropriate key”);</span><br><span class=\"line\">            <span class=\"comment\">//return the value</span></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>列举19, 检查具有动态属性知识级别的适当的密钥</p>\n</blockquote>\n<p><a href=\"#69\" title=\"As we start to use a knowledge level like this, the separate property becomes more and more important. In this case we soon start to stop thinking of it as a property, rather as some object in its own right. The dividing line between what is a property and what isn’t is very blurred,and it really depends upon your view of things.\"><span id=\"69\">当我们开始使用这样的知识水平时，单独的属性变得越来越重要。 在这种情况下，我们很快就会开始停止将其视为一种属性，而不是把它作为一个对象。 什么是属性和什么是非属性之间的分界线是非常模糊的，这实际上取决于你对事物的看法。</span></a></p>\n<hr>\n<h3 id=\"动态属性知识水平\"><a href=\"#动态属性知识水平\" class=\"headerlink\" title=\"动态属性知识水平\"></a>动态属性知识水平</h3><ul>\n<li><a href=\"#70\" title=\"How do you enforce that certain kinds of objects have certain properties when you use dynamic properties?\"><span id=\"70\">你如何执行某些类型的对象具有某些特性使用动态属性？</span></a></li>\n<li><a href=\"#70\" title=\"Create a knowledge level to contain the rules of what types of objects use which types of properties\"><span id=\"70\">创建一个知识级别来包含什么类型的对象使用的规则哪些类型的属性</span></a></li>\n</ul>\n<hr>\n<hr>\n<h2 id=\"动态属性的几个小结\"><a href=\"#动态属性的几个小结\" class=\"headerlink\" title=\"动态属性的几个小结\"></a><a href=\"#71\" title=\"Some Summary Points on Dynamic Properties\"><span id=\"71\">动态属性的几个小结</span></a></h2><p><a href=\"#72\" title=\"Various kinds of dynamic properties make up the bulk of this paper. But I have to reiterate that dynamic properties are something I like to avoid if at all possible. Dynamic properties carry a heavy burden of disadvantage: the lack of clarity of the interface, the difficulty in using operations instead of stored data. It is just that sometimes you have little choice but to use them, and it is on these occasions that this paper should come in useful to give you some alternatives and the trade-offs between then.\"><span id=\"72\">各种各样的<code>动态属性</code>构成了本文的大部分内容。但我必须重申，<code>动态属性</code>是我想要尽可能避免的。<code>动态属性</code>带来了很大的负担：接口不够清晰，使用操作而不是存储数据的困难。只是有时你别无选择，只能使用它们，在这种情况下，这篇论文应该有用的给你提供一些替代方案和之间的权衡。<span></span></span></a></p>\n<p><a href=\"#73\" title=\"Dynamic properties appear most where there are difficulties in changing the interface. People who work with distributed object systems like them, at least in principle, because it allows them to alter an interface without compromising clients – and in a distributed system it may be very difficult to find who your clients are. But you should still be wary of doing this. Any time you add a new key to your keys for the dynamic properties you are effectively changing the interface. All the dynamic properties are doing is replacing a compile time check for a runtime check. You still have the same issues of keeping your clients up to date.\"><span id=\"73\"><code>动态属性</code>出现在改变接口有困难的地方。那些使用像他们这样的分布式对象系统的人，至少在原则上是这样，因为它允许他们在不改变客户端的情况下改变接口 - 而在分布式系统中，可能很难找到你的客户端。但是你仍然应该警惕这样做。每当你为<code>动态属性</code>添加一个新的键到你的键上，你都在有效地改变接口。所有的<code>动态属性</code>都在替换运行时检查的编译时间检查。你仍然有同样的问题保持你的客户端最新。</span></a></p>\n<p><a href=\"#74\" title=\"Another common use of dynamic properties is in databases. Here it is not just due to the problem of interface, but also (if not primarily) due to problems of data migration. Changing a database schema does not only cause a potential change to programs using the schema, it also may force you to do a complicated data conversion exercise. Again dynamic properties allow you to change things without changing the database schema, and thus not needing to do any data conversion. In large databases this can be a compelling advantage.\"><span id=\"74\"><code>动态属性</code>的另一个常见用途是在数据库中。这里不仅仅是由于接口的问题，而且由于数据迁移的问题（如果不是主要的话）。更改数据库模式不仅会导致对使用该模式的程序进行潜在更改，还可能会强制您执行复杂的数据转换练习。同样，<code>动态属性</code>允许您在不更改数据库模式的情况下更改内容，从而不需要进行任何数据转换。在大型数据库中，这可能是一个引人注目的优势。</span></a></p>\n<hr>\n<h2 id=\"一个你不知道的有关于属性的\"><a href=\"#一个你不知道的有关于属性的\" class=\"headerlink\" title=\"一个你不知道的有关于属性的\"></a><a href=\"#75\" title=\"A property you don’t know about\"><span id=\"75\">一个你不知道的有关于属性的</span></a></h2><p><a href=\"#76\" title=\"There is a last but important kind of property that I want to add to this paper. This is the case of an object having a property without realizing it. This occurs when the property is implied by another object and the way it relates to you.\"><span id=\"76\">我想在本文中添加一个最后一个重要的属性。这是一个没有意识到属性的对象的情况。当属性被另一个对象所隐含，以及与有关的方式时，就会发生这种情况。</span></a></p>\n<p><a href=\"#77\" title=\"Consider an object that manages database connections. It creates a bunch of database connections and hands them out to other objects when requested. When a client is done with the connection it can return it to the manager to be available for someone else. You could do this by adding an isBusy property to the connection. Figure 12 shows an alternative using an extrinsic property. Whether the connection is free or busy is determined by which collection in the connection manager it lies in. If you had a connection, you could not ask it whether it is free or busy, instead you would have to ask the connection manager whether a particular connection is free or busy. You can tell this because the composition associations are one way.The connection has no knowledge of the connection manager. In a sense the free/busy status isn’t a property of connection at all. Yet at least in some sense it is, which is why I mention it.\"><span id=\"77\">考虑一个管理数据库连接的对象。它会创建一堆数据库连接，并在请求时将它们传递给其他对象。当一个客户端连接完成后，可以将其返回给管理员，以供其他人使用。您可以通过向连接添加<code>isBusy</code>属性来完成此操作。图12显示了一个使用外部属性的替代方案。连接是空闲的还是繁忙的是由连接管理器中的哪个集合决定的。如果你有一个连接，你不能问它是空闲的还是忙的，而是你必须要求连接管理器是否特定的连接空闲或忙碌。你可以这样说，因为组合关联是一种方式。连接不知道连接管理器。 从某种意义上来说，空闲/忙碌状态根本不是连接的属性。但至少从某种意义上来说，这就是我提到它的原因。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/17_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图12.使用外部收集属性</p>\n</blockquote>\n<p><a href=\"#78\" title=\"In a pure conceptual modeling sense this pattern does not make much sense. But there are practical implementation reasons why you may want to use it. If you want all changes to this property to go through a connection manager, then this approach makes this clear. In particular this is a natural style when you want the connection manager to give you a free connection and you don’t care which one.\"><span id=\"78\">在纯粹的概念模型意义上，这种模式没有多大意义。但是，为什么你可能想要使用它，有实际的实施原因。如果您希望对此属性进行的所有更改都通过连接管理器进行，则此方法可以清楚地说明这一点。特别是当你想让连接管理器给你一个自由的连接，而你不关心哪一个时，这是一种自然的风格。</span></a>。</p>\n<p><a href=\"#79\" title=\"Another reason to use an extrinsic property is if the connection class is provided by someone else and you can’t change its interface. You can add the new property without changing the connection class at all.\"><span id=\"79\">使用外部属性的另一个原因是如果连接类是由其他人提供的，并且您不能更改其接口。 你可以添加新的属性而不用改变连接类。</span></a></p>\n<hr>\n<h3 id=\"外在属性\"><a href=\"#外在属性\" class=\"headerlink\" title=\"外在属性\"></a>外在属性</h3><ul>\n<li><a href=\"#80\" title=\"How do you give an object a property without changing its interface?\"><span id=\"80\">你如何给对象一个属性而不改变它的接口？</span></a></li>\n<li><a href=\"#80\" title=\"Make another object responsible for knowing about the property.\"><span id=\"80\">让另一个对象负责知道这个属性。</span></a></li>\n</ul>\n<hr>\n<p><a href=\"#81\" title=\"The big problem with the extrinsic property is that it leads to an awkward and unnatural interface. Usually if you want to know something, you just find the appropriate object and ask it. Here you need to find the object that holds the external collection, and ask it about the appropriate object. In some circumstances, such as this one, it seems reasonable. But most of the time I would prefer to let objects know about their own properties (in which case I call them intrinsic properties).\"><span id=\"81\"><code>外在属性</code>的一个大问题是它会导致一个尴尬和不自然的接口。通常如果你想知道一些东西，你只要找到合适的对象并提出问题。在这里您需要找到保存外部集合的对象，并询问有关适当的对象。在某些情况下，比如这个，似乎是合理的。但大多数情况下，我宁愿让对象了解自己的属性（在这种情况下，我称之为<code>内在属性</code>）。</span></a></p>\n<hr>\n<h2 id=\"最后的想法\"><a href=\"#最后的想法\" class=\"headerlink\" title=\"最后的想法\"></a>最后的想法</h2><p><a href=\"#82\" title=\"As I finish this paper, I feel the need again to urge you not to use what I’ve been writing about here unless you really do need it. The advantages of fixed properties are great. If you need something else, then I hope this paper gives you some ideas and some guidance. But fixed properties are always your first choice.\"><span id=\"82\">当我完成本文时，我觉得需要再次敦促你不要使用我在这里写的东西，除非你真的需要它。<code>固定属性</code>的好处是伟大的。如果你需要别的东西，那么我希望这篇文章能给你一些想法和一些指导。但<code>固定属性</code>永远是你的第一选择。</span></a></p>\n<hr>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><p>[Fowler, AP] Fowler, Martin. Analysis Patterns: Reusable Object Models, Addison-1997<br>[Fowler, roles] Fowler, Martin. Dealing with Roles,<a href=\"http://www.awl.com/cseng/titles/89542-0/awweb.htm\" target=\"_blank\" rel=\"noopener\">http://www.awl.com/cseng/titles/89542-0/awweb.htm</a><br>[POSA] Buschman et al, Pattern Oriented Software Architecture, Wiley 1997</p>\n<hr>\n<h2 id=\"原文地址：http-martinfowler-com-apsupp-properties-pdf\"><a href=\"#原文地址：http-martinfowler-com-apsupp-properties-pdf\" class=\"headerlink\" title=\"原文地址：http://martinfowler.com/apsupp/properties.pdf\"></a>原文地址：<a href=\"http://martinfowler.com/apsupp/properties.pdf\" target=\"_blank\" rel=\"noopener\">http://martinfowler.com/apsupp/properties.pdf</a></h2>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"属性的处理-初步校对\"><a href=\"#属性的处理-初步校对\" class=\"headerlink\" title=\"属性的处理(初步校对)\"></a>属性的处理(初步校对)</h1><hr>\n<p><em>Martin Fowler</em> (《重构：改善既有代码的设计》作者)  </p><p><br><a href=\"mailto:fowler@acm.org\" target=\"_blank\" rel=\"noopener\">fowler@acm.org</a></p>\n<hr>\n<p><a href=\"#1\" title=\"Almost every object you create needs properties: some statement about the object. A person may have a height, a company may have a CEO, a flight may have a flight number. There are a number of ways to model properties. In this article I will explore some of these ways and when you may want to use them. I’ve often seen patterns touch on  this subject, but they usually only cover part of the picture. Here I want to cover the issue  more broadly to give a better discussion of the options.\"><span id=\"1\">你创建的每个对象几乎都需要属性：关于对象的一些声明。一个人可能有一个身高属性，一个公司可能有一个CEO，一个航班可能有一个航班号。有很多方法来创建属性。在这篇文章中，我将探讨其中一些你经常需要用到的方法。我经常看到涉及到这个话题的图案，但他们通常只涉及一部分。在这里，我想更广泛地讨论这个问题，以便更好地讨论这些选项。</span></a></p>\n<p><a href=\"#2\" title=\"The most common, and the simplest case is to use a Fixed Property , that is just declare the attribute on the class. In the vast majority of cases that is all you need to do. Fixed properties begin to fail when you have a large amount of them, or you need to change them frequently, possibly at run time. These forces lead you to the varieties of Dynamic Property . All dynamic properties have the quality of a parameterized attribute where to query a property you need to use a query method with a parameter. The simplest of these is the Flexible Dynamic Property where the parameter is just a string. This makes it easy to define and use properties, but is difficult to control. If you need that control you can use a Defined  Dynamic  Property  where  your parameters must be instances of some class. A further step of control allows you to strongly type your dynamic property with a Typed Dynamic Property .\"><span id=\"2\">最常见和最简单的情况是使用<code>固定属性</code>，即只声明类的属性。在绝大多数情况下，你只需要使用<code>固定属性</code>。在有大量固定属性或者需要频繁修改时，使用<code>固定属性</code>容易出错。这种情况下你可能会使用<code>动态属性</code>。所有的<code>动态属性</code>都有一个参数化属性的特性：你需要一个带参的方法来查询一个属性。当参数只是一个字符串,最简单的是<code>灵活的动态属性</code>。这样定义和使用属性会比较容易，但难以控制。如果你需要使用<code>动态属性</code>，在你的参数必须是一个类的实例的情况下。使用类型<code>动态属性</code>来增强对<code>动态属性</code>的控制。</span></a></p>\n<p><a href=\"#3\" title=\"As your property structures get more involved, you should consider making them Separate Properties , which makes the property an object in its own right. If you need multi-valued properties you can consider a Typed Relationship . The most complex example in this theme is where you want rules to control what kinds of objects have what kinds of properties – this needs a Dynamic Property Knowledge Level .\"><span id=\"3\">随着您的属性结构变得越来越复杂，您应该考虑将它们设置为“单独属性”，把一些属性综合起来创建一个对象。如果你需要多值属性，你可以考虑集合。在这篇文章中最复杂的例子是你想要规则来控制什么类型的对象具有什么样的属性 - 这需要一定的<code>动态属性</code>知识水平。</span></a></p>\n<p><a href=\"#4\" title=\"Another variety of property entirely is the Extrinsic Property , a pattern you use if you want to give an object a property, but not alter its interface to support it.\"><span id=\"4\">另一种属性完全是<code>外部属性</code>（Extrinsic Property），如果你想使用接口给一个对象创建一个属性，那么这就是你需要使用的一种模式。<span></span></span></a></p>\n<table>\n<thead>\n<tr>\n<th><a href=\"#5\" title=\"Problem\"><span id=\"5\">问题</span></a></th>\n<th><a href=\"#5\" title=\"Solution\"><span id=\"5\">答案</span></a></th>\n<th><a href=\"#5\" title=\"name\"><span id=\"5\">名称</span></a></th>\n<th><a href=\"#5\" title=\"page\"><span id=\"5\">页码</span></a></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td> &nbsp;</td>\n<td><a href=\"#6\" title=\"Give it a specific attribute for that fact. This will translate to a query method and probably an update method in a programming language.\"><span id=\"6\">在编程语言里，当使用一个特定的属性，它需要查询或者更新。<span></span></span></a></td>\n<td><a href=\"#固定属性\" title=\"Fixed Property\"><code>固定属性</code></a></td>\n<td>4</td>\n</tr>\n<tr>\n<td> &nbsp;</td>\n<td><a href=\"#7\" title=\"Provide a parameterizable attribute which can represent different properties depending on the parameter\"><span id=\"7\">提供可参数化的属性，可以根据参数表示不同的属性</span></a></td>\n<td><a href=\"#动态属性\" title=\"Dynamic Property\"><code>动态属性</code></a></td>\n<td>4</td>\n</tr>\n<tr>\n<td> &nbsp;</td>\n<td><a href=\"#8\" title=\"Provide an attribute parameterized with a string. To declare a property just use the string.\"><span id=\"8\">提供一个用字符串参数化的属性。声明一个属性只是使用字符串.</span></a></td>\n<td><a href=\"#灵活的动态属性\" title=\"Flexible Dynamic Property\"><code>灵活的动态属性</code></a></td>\n<td>5</td>\n</tr>\n<tr>\n<td> &nbsp;</td>\n<td><a href=\"#9\" title=\"Provide an attribute parameterized with an instance of some type. To declare a property create a new instance of that type\"><span id=\"9\">提供用某种类型的实例参数化的属性。要声明属性，请创建该类型的新实例</span></a></td>\n<td><a href=\"#定义动态属性\" title=\"Defined Dynamic Property\"><code>定义动态属性</code></a></td>\n<td>7</td>\n</tr>\n<tr>\n<td> &nbsp;</td>\n<td><a href=\"#10\" title=\"Provide an attribute parameterized with a instance of some type. To declare a property create a new instance of the type and specify the value type of the property.\"><span id=\"10\">提供使用某种类型的实例进行参数化的属性。要声明属性，请创建该类型的新实例并指定该属性的值类型.</span></a></td>\n<td><a href=\"#类型动态属性\" title=\"Typed Dynamic Property\"><code>类型动态属性</code></a></td>\n<td>9</td>\n</tr>\n<tr>\n<td><a href=\"#11\" title=\"How do you represent a fact about an object, and allow facts to be recorded about that fact\"><span id=\"11\">你如何表示一个对象的属性，并允许对象的属性也具有属性</span></a></td>\n<td><a href=\"#11\" title=\"Create a separate object for each property. Facts about that property can then be made properties of that object.\"><span id=\"11\">为每个属性创建一个单独的对象。 关于那个属性的详细可以作为这个对象的的属性.<span></span></span></a></td>\n<td><a href=\"#分离属性\" title=\"Separate Properties\"><code>分离属性</code></a></td>\n<td>10</td>\n</tr>\n<tr>\n<td><a href=\"#12\" title=\"How do you represent a relationship between two objects?(How do you represent multi-valued dynamic properties?)\"><span id=\"12\">你如何表示两个对象之间的关系（如何表示多个值动态属性？）</span></a></td>\n<td><a href=\"#12\" title=\"Create a relationship object for each link between the two objects. Give the relationship object a type object to indicate the meaning of the relationship. (The type object is the name of the multi-valued property.)\"><span id=\"12\">为两个对象之间的每个链接创建一个关系对象。 给关系对象一个类型对象来表示关系的含义。 （类型对象是多值属性的名称。）<span></span></span></a></td>\n<td><a href=\"#类型关系\" title=\"Typed Relationship\"><code>类型关系</code></a></td>\n<td>14</td>\n</tr>\n<tr>\n<td><a href=\"#13\" title=\"How do you enforce that certain kinds of objects have certain properties when you use dynamic properties?\"><span id=\"13\">当你使用动态属性时，你如何强制某些类型的对象具有某些属性？</span></a></td>\n<td><a href=\"#13\" title=\"Create a knowledge level to contain the rules of what types of objects use which types of properties\"><span id=\"13\">创建知识级别以包含哪些类型的对象使用哪些类型的属性的规则</span></a></td>\n<td><a href=\"#动态属性知识水平\" title=\"Dynamic Property Knowledge Level\"><code>动态属性知识水平</code></a></td>\n<td>16</td>\n</tr>\n<tr>\n<td><a href=\"#14\" title=\"How do you give an object a property without changing its interface?\"><span id=\"14\">你如何给一个对象新增一个属性而不改变它的接口？</span></a></td>\n<td><a href=\"#14\" title=\"Make another object responsible for knowing about the property\">使用另一个对象负责属性</a></td>\n<td><a href=\"#外在性质\" title=\"Extrinsic Property\"><code>外在性质</code></a></td>\n<td>18</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2 id=\"什么是属性\"><a href=\"#什么是属性\" class=\"headerlink\" title=\"什么是属性\"></a>什么是属性</h2><p><a href=\"#15\" title=\"This is not a silly question. When people bandy around the term ‘property’ they can mean many different things. To some a property is an instance variable or data member of a class. To others they are kind of thing that goes in a box in a UML diagram. So before I start this article I have to define my usage of the word.\"><span id=\"15\">这不是一个愚蠢的问题。当人们使用“属性”这个词时，他们可能有很多不同的含义。对某些属性来说，是一个类的实例变量或数据成员。对于其他人来说，它们就像<code>UML</code>图中的一个盒子一样。所以在我开始这篇文章之前，我必须定义这个词的用法。</span></a></p>\n<p><a href=\"#16\" title=\"For my purposes a property is some information about an object that you can obtain by a query method. It may be a value type (such as int in Java) or an instance of a class. You may be able to update the property, but not necessarily. You may set the property when you create the object, but again not necessarily. The property may be stored as an instance variable or data member, but it does not have to be. The class may get the value from another class, or go through some further calculation. I am, therefore, taking an interface view of properties rather than an implementation view. This is a regular habit of mine in design: for me the essence of object-orientation is that you separate interface from implementation, and make interface more important.\"><span id=\"16\">为了我的目的，一个属性是关于一个可以通过查询方法获得的对象的一些信息。它可能是一个值类型（如<code>Java</code>中的<code>int</code>）或一个类的实例。您可能能够修改该属性，但不一定。您可以在创建对象时设置属性，但不一定。该属性可以作为实例变量或数据成员存储，但不一定是。班级可能会从另一个班级获得值，或者经过一些进一步的计算。因此，我采用属性的接口视图而不是实现视图。这是我在设计中经常使用的习惯：对于我来说，面向对象的本质是将接口与实现分开，并使接口更加重要。</span></a></p>\n<hr>\n<h2 id=\"固定属性\"><a href=\"#固定属性\" class=\"headerlink\" title=\"固定属性\"></a><span id=\"固定属性\">固定属性</span></h2><p><a href=\"#17\" title=\"Fixed properties are by far the most common kind of properties that we use. A Fixed Property is declared in the interface of the type. It gives the name and the return type for the property. Figure 1 shows properties modeled in UML, Listing 1 shows how the query methods for these properties would show up in Java. I’ve picked the example to show that this discussion applies equally well to UML attributes as well as UML associations. It also applies to calculated values (age) as well as those that are reasonably stored data (date of birth).\"><span id=\"17\"><code>固定属性</code>是我们使用的最常见的属性。 固定属性在类型的接口中声明。 它给出了属性的名称和返回类型。 图1显示了使用<code>UML</code>建模的属性，示例1显示了这些属性的查询方法如何在<code>Java</code>中使用。 我已经选择了这个例子来说明这个讨论同样适用于<code>UML</code>属性和<code>UML</code>关联。 它也适用于计算值（年龄）以及那些合理存储的数据（出生日期）。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/3_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图1.使用<code>固定属性</code>建模的人员<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Date <span class=\"title\">getDateOfBirth</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getAge</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Quantity <span class=\"title\">getHeight</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Company <span class=\"title\">getEmployer</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setDateOfBirth</span> <span class=\"params\">(Date newDateOfBirth)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setEmployer</span> <span class=\"params\">(Company newEmployer)</span></span>;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>列举,图1的<code>java</code>操作</p>\n</blockquote>\n<p><a href=\"#18\" title=\"Query operations usually follow some naming convention. In smalltalk you always name the query after the name of the property (dateOfBirth). C++ never had a fixed convention, some people just named it after the property, others used the &#39;get&#39; convention (getDateOfBirth). Java started with no particular convention but now most people adopt the get convention. Personally I find the ‘get’ irritating when you read code so I would prefer to leave it out, but the Java style is to use the get, so I use it now. You should ensure that you follow the same convention whether you are using stored or derived values. Clients of the person class should not know or care whether age is stored or derived.\"><span id=\"18\">查询操作通常遵循一些命名约定。在<code>程序语言</code>中，您总是在属性名称（<code>dateOfBirth</code>）之后命名查询。 <code>C++</code>从来没有一个固定的约定，有些人只是在属性后面命名，而另一些人则使用<code>get</code>约定（<code>getDateOfBirth</code>）。 <code>Java</code>从没有特别的约定开始，但现在大多数人都采用<code>get</code>约定。就我个人而言，当您阅读代码时，我发现<code>get</code>令人恼火，所以我宁愿忽略它，但<code>Java</code>风格是使用<code>get</code>，所以现在就使用它。无论您使用的是存储值还是派生值，都应确保遵循相同的约定。使用<code>Person</code>的客户端不应该知道或关心年龄是否存储或派生。</span></a></p>\n<p><a href=\"#19\" title=\"The presence of modifier operations depends on whether you want the values to be directly modified. If you do then you will provide a modifier operation according to some naming scheme, eg setDateOfBirth(Date). Different conventions exist as to the return value. You can return the new value of the property (Date), the object being modified (Person), or nothing (void). I prefer to return void on modifiers, to help make clear the difference between a modifier and a query.\"><span id=\"19\"><code>修饰符</code>操作的存在取决于您是否希望直接修改值。如果你这样做，那么你会根据一些命名方案，例如<code>setDateOfBirth</code>（<code>Date</code>）提供一个修饰符操作。对于<code>返回值</code>存在不同的约定。你可以返回属性的新值（<code>Date</code>），被修改的对象（<code>Person</code>），或者什么都没有（<code>void</code>）。我更愿意在修饰符上返回<code>void</code>，以帮助明确修饰符和查询之间的区别。</span></a></p>\n<hr>\n<h3 id=\"固定属性-1\"><a href=\"#固定属性-1\" class=\"headerlink\" title=\"固定属性\"></a>固定属性</h3><p>  <a href=\"#20\" title=\"How do you represent a fact about an object?\"><span id=\"20\">你如何代表一个对象的事实？</span></a></p>\n<ul>\n<li><a href=\"#20\" title=\"Give it a specific attribute for that fact. This will translate to a query method and probably an update method in a programming language.\"><span id=\"20\">给它一个这个事实的特定属性。这将转化为查询方法，并可能是一种编程语言的更新方法。</span></a><br><br><a href=\"#20\" title=\"Clear and explicit interface\"><span id=\"20\">接口很清晰明确</span></a><br><br><a href=\"#20\" title=\"Can only add properties at design time\"><span id=\"20\"><font color=\"red\">只能在设计时添加属性</font></span></a><br></li>\n</ul>\n<hr>\n<p><a href=\"#21\" title=\"You may wish to provide arguments to the constructor for properties. Typically you want to set enough properties in the constructor so that you construct a well-formed class.\"><span id=\"21\">您可能希望为属性的<code>构造函数</code>提供参数。通常，您要在<code>构造函数</code>中设置足够的属性，以便构建格式良好的类。</span></a></p>\n<p><a href=\"#22\" title=\"Properties that you don’t want to be modified directly should not have a modifier operation.This might be the case for the age property, if you only want that determined by calculation from the date of birth. It also would be the case for an immutable property: one that does not change for the lifetime of the class. When you think of making a property immutable, remember to take human error into account. While the date of birth is an immutable property for humans in the real world, you might make a mistake typing into a computer system, and thus make it mutable. Software often models what we know of the world, rather than the world itself.\"><span id=\"22\">不想直接修改的属性不应该有<code>修饰符</code>操作。如果您只希望从出生之日起计算，那么年龄属性可能就是这种情况。对于一个不可改变的<code>属性</code>也是如此：一个在类的生命周期中不会改变的<code>属性</code>。当你想使<code>属性</code>不可改变时，请记住考虑到人为错误。虽然出生日期对于现实世界中的人类来说是不可改变的<code>属性</code>，但是您可能会在输入到计算机系统时出现错误，从而使其变得可变。软件常常模拟我们所知道的世界，而不是世界本身。</span></a></p>\n<p><a href=\"#23\" title=\"Fixed properties are by far the most common form of properties that you will come across.They are that way for good reasons: they are simple and convenient to use. You should use fixed properties as your first and most common choice for representing properties. In this paper I am going to give a lot of alternatives to fixed properties. For certain situations these alternatives are better, but most of the time they are not. Remember that as we go through the alternatives. I use fixed properties 99% of the time. Other varieties are more complex, which is why I&#39;m spending most of this paper on them — and also why I prefer not to use them!\"><span id=\"23\"><code>固定属性</code>是迄今为止您将遇到的最常见的<code>属性</code>形式。他们这样做是有原因的：他们使用简单方便。您应该使用固定属性作为表示属性的第一个也是最常见的选择。在本文中，我将给出许多固定属性的替代方案。在某些情况下，这些替代品更好，但大多数情况下不是。请记住，当我们经历的选择。我99％的时间使用固定的属性。其他品种更为复杂，这就是为什么我把这篇论文的大部分花费在他们身上 - 也是为什么我不愿意使用它们！</span></a></p>\n<h2 id=\"动态属性\"><a href=\"#动态属性\" class=\"headerlink\" title=\"动态属性\"></a><span id=\"动态属性\">动态属性</span></h2><p><a href=\"#24\" title=\"The key thing about fixed properties is that you fix them at design time, and all instances at run time must follow that decision. For some problems this is an awkward restriction. Imagine we are building a sophisticated contact system. There are some things that are fixed: home address, home and work phone, email. But they’re all sorts of little variations. For someone you need to record their parent’s address, another has a day work and evening work numbers.It’s hard to predict all these things in advance, and each time you change the system you have to go through compiling, testing, and distribution. To deal with this you need to use dynamic properties.\"><span id=\"24\"><code>固定属性</code>的关键在于您在设计时修复了这些属性，并且所有实例在运行时都必须遵循该决定。 对于一些问题，这是一个尴尬的限制。 想象一下，我们正在建立一个复杂的联络系统。 有一些东西是固定的：家庭住址，家庭和工作电话，电子邮件。 但他们是各种各样的小变化。 对于需要记录父母地址的人，另一个人有白天工作和晚上工作号码。 事先很难预测所有这些事情，每次更改系统时都必须经过编译，测试和分发。 要处理这个问题，你需要使用动态属性。</span></a></p>\n<hr>\n<h3 id=\"动态属性-1\"><a href=\"#动态属性-1\" class=\"headerlink\" title=\"动态属性\"></a>动态属性</h3><p>  <a href=\"#25\" title=\"How do you represent a fact about an object?\"><span id=\"25\">你如何代表一个对象的事实？</span></a><br><br>  <a href=\"#25\" title=\"Provide a parameterizable attribute which can represent different properties depending on the parameter\"><span id=\"25\">提供可参数化的属性，可以根据参数表示不同的属性</span></a> <br></p>\n<ul>\n<li><a href=\"#25\" title=\"Can add properties at run time\"><span id=\"25\"> 可以在运行时添加属性</span></a></li>\n<li><a href=\"#25\" title=\"Unclear interface\"><span id=\"25\"><font color=\"red\">接口不清晰</font></span></a></li>\n</ul>\n<hr>\n<p><a href=\"#26\" title=\"There are several variations on dynamic properties, each of which make different trade-offs between flexibility and safety. The simplest approach is Flexible Dynamic Properties. The essence of this pattern is that you add a qualified association to the person whose key is a simple value, usually a string (see Figure 2 and Listing 2). If you want to add a vacation address to a person Kent, you just use the code in Listing 3. You don’t need to recompile the person class. You could even build a GUI or a file reader that would add properties without recompiling the client either.\"><span id=\"26\"><code>动态属性</code>有多种变化，每种变化都会在<code>灵活性</code>和<code>安全性</code>之间做出不同的选择。 最简单的方法是<code>灵活动态属性</code>。 这种模式的本质是为键值为简单值的人（通常是字符串）添加一个合格的关联（参见图2和示例2）。 如果您想为某人Kent添加休假地址，则只需使用清单3中的代码即可。您不需要重新编译人员类。 你甚至可以建立一个图形用户界面（<code>GUI</code>）或者文件读取器来添加属性，而不用重新编译客户端。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/5_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图2.使用动态属性建模的人员<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span><span class=\"params\">(String key)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValueOf</span><span class=\"params\">(String key, Object value)</span></span>;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>列举2,图2的<code>java</code>方法<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kent.setValueOf(“VacationAddress”, anAddress);</span><br><span class=\"line\">Address kentVactation = (Address) kent.getValueOf(“VacationAddress”)</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>列举3,使用动态属性<br><a href=\"#\" title=\"Said like that, you might wonder why anyone would ever use fixed properties, since dynamic properties such as this give you so much more flexibility. Of course there is a cost, and it lies in the reduction of the clarity of the dependencies between parts of the software. It is all very well adding a vacation address property to a person, but how do you know to get it back again? With fixed properties you can just look at the interface of person and see the properties. The compiler can check that don’t ask an object to do something it doesn’t understand. With a dynamic property you cannot do any design-time checking. Furthermore the interface of person is harder to see. Not just do you look at Person’s declared interface – you also have to find the dynamic properties, which will not be present in the class interface. You have to find that part of the code that sets the property (which usually will not be in the Person class at all) and dig it out.\"><span id=\"27\">这样说，你可能想知道为什么有人会使用固定的属性，因为动态的像这样的属性给了你更多的灵活性。当然有一个成本，它在于软件各部分之间依赖关系的清晰度降低。这一切都非常好给一个人增加一个度假地址属性，但是你怎么知道把它重新取回呢？有了固定的属性，你可以看看人的界面，看看属性。该编译器可以检查不要求对象做不理解的事情。 用一个动态属性，你不能做任何设计时检查。此外的界面人很难看。不只是你看<code>Person</code>的声明接口 -你也必须找到不会出现在类接口中的动态属性。你必须找到那些设置属性的代码部分（通常不会在<code>Person</code>类中）提现出来。</span></a></p>\n</blockquote>\n<hr>\n<h3 id=\"灵活动态属性\"><a href=\"#灵活动态属性\" class=\"headerlink\" title=\"灵活动态属性\"></a>灵活动态属性</h3><ul>\n<li><a href=\"#28\" title=\"How do you represent a fact about an object?\"><span id=\"28\">你如何代表一个对象的事实？</span></a><br></li>\n<li><a href=\"#28\" title=\"Provide an attribute parameterized with a string. To declare a property just use the string.\"><span id=\"28\">提供一个用字符串参数化的属性。只声明一个属性使用字符串。</span></a> <br> </li>\n</ul>\n<hr>\n<p><a href=\"#30\" title=\"Not just is the property hard to find, it also creates a nightmare dependency. With fixed properties the client code has a dependency to the person class – a dependency that is easy to keep track of. If you change the name of the property the compiler will let you know, and tell you what code you need to change to fix things. But the Flexible Dynamic Property creates a dependency into some arbitrary piece of code. It could be code that belongs to a class that is not even visible to the client. What happens if someone changes the key string? What happens if someone changes the type of object they put into the key string? Not just can the compiler do nothing to help you, you don’t even know where to start looking for potential changes.\"><span id=\"30\">不仅是属性很难找到，它的依赖也是一个噩梦。随着固定属性的客户端代码有一个依赖于人类 - 一个依赖是难以跟踪。如果你改变属性的名字，编译器会让你知道，并告诉你需要改变什么代码才能解决问题。但灵活的动态属性创建一个依赖于任意一段代码。它可能是属于一个类的代码甚至不能被客户端看到。如果有人更改密钥字符串会发生什么？如果有人改变他们把键入字符串的对象的类型会发生？不仅仅是编译器没法帮助你，你甚至不知道从哪里开始查找变化。</span></a></p>\n<p><a href=\"#31\" title=\"Flexible Dynamic Properties show this problem at it’s most extreme. The property could be created at design time by any client of Person. If another client of person uses that same property you have a dependency between two classes that is very hard to find. Furthermore properties can be added at run time by reading a file or by a GUI. It is impossible to find out, even at run time, what are the legal dynamic properties for a person. True you can ask a person if it has a property for vacation address – but if there isn’t one does that mean that that person does not have a vacation address, or does it mean that there is no such property as vacation address? And if it has no such property now, that doesn’t mean it won’t have one a few seconds later.\"><span id=\"31\"><code>灵活的动态属性</code>在最极端的情况下显示了这个问题。 该属性可能是<code>Person</code>的任何客户端在设计时创建。 如果另一个人的客户端使用同一个属性，那么你就很难找到两个类之间的依赖关系。 此外属性可以在运行时通过读取文件或通过<code>GUI</code>添加。 即使在运行时，不可能发现一个人的哪些动态属性是合法的。 当然，你可以问一个人，如果它有一个度假地址的属性 - 但如果没有一个这是否意味着这一点人没有假期地址，或者是否意味着没有这样的度假地址属性？ 而如果现在没有这样的属性，那并不意味着它几秒钟后不会有。</span></a></p>\n<p><a href=\"#32\" title=\"Another key disadvantage of flexible dynamic properties is that it is difficult to substitute them for operations. One of the key advantages of encapsulation is that a client that uses a property cannot tell whether it is stored as part of an object’s data, or computed by a method. This is a very important part of the object approach. It allows you not just a regular interface for both purposes, but also to change your mind without the client knowing. In the presence of subtyping you can even have a supertype store the property and subclasses compute or vice versa. However if you want to use dynamic properties the only way you can change stored data to a calculation is to put a specific trap in the general accessor for the dynamic property along the lines of Listing 4. This code is likely to be brittle and awkward to maintain.\"><span id=\"32\">灵活动态特性的另一个关键缺点是很难替代它们进行操作。封装的一个关键优势是使用属性的客户端无法分辨它是作为对象数据的一部分存储的，还是通过方法来计算的。这是一个对象方法非常重要的一部分。它可以让你不只是一个普通的接口实现，而且在客户端不知情的情况下改变你期望的值。当存在子类型，你甚至可以有一个超类型存储属性和子类计算，反之亦然。但是，如果要使用动态属性，则只能更改存储的数据一个计算就是在通用访问器中为<code>动态属性</code>设置一个特定的数值,清单4中的代码。这个代码可能很脆弱，难以维护。</span></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span> <span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (key = “vacationAddress”) </span><br><span class=\"line\">            <span class=\"keyword\">return</span> calculatedVacationAddress();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (key = “vacationPhone”) </span><br><span class=\"line\">            <span class=\"keyword\">return</span> getVacationPhone();</span><br><span class=\"line\">        <span class=\"comment\">// else return stored value…</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举4,用操作替换<code>动态属性</code></p>\n</blockquote>\n<p><a href=\"#33\" title=\"Other forms of dynamic property help you solve some of these problems but not all. The essential disadvantage of a dynamic property is that you lose the clear interface and all designtime checking. Different approaches to dynamic properties give you different abilities to do run-time checking. If you need dynamic properties, and there are certainly situations when you do, then you just have to give up design time checking and a explicit design time interface. The only question is how explicit an interface and how much checking you can do at run time. With Flexible Dynamic Properties you don’t get any of either.\"><span id=\"33\">其他形式的动态属性可以帮助您解决其中一些问题，但不是全部。该<code>动态属性</code>的最大的缺点是：你失去了清晰的接口和所有的设计时间检查。<code>动态属性</code>的不同方法会让你额外写不同的检查方法。如果你需要<code>动态属性</code>，并且当然有确定的情况你这样做，那么你只需要放弃设计时间检查和明确的设计时间接口。唯一的问题是如何明确接口和有多少运行时检查。使用灵活的动态属性也会有同样的问题。</span></a></p>\n<p><a href=\"#34\" title=\"You find dynamic properties often in databases because it is often a pain to change the database schema, especially if there would be a lot of data to migrate. Interfaces of distributed components, such as in CORBA, also often use dynamic properties for a similar reason. There are a lot of distant clients using the interface, so you are reluctant to change it. In both of these cases it is not so much a distinction between compile-time and run-time, as much as a distinction between design-time and production.\"><span id=\"34\">你经常在数据库中发现动态属性，因为改变它通常是一个痛苦数据库模式，特别是如果有大量的数据迁移。分布式的接口例如在<code>CORBA</code>中的组件也经常因为相似的原因而使用动态属性。那里是很多使用界面的远程客户，所以你不愿意改变它。在这两种情况下，编译时和运行时间之间的区别并不是设计时和生产之间的区别。</span></a> </p>\n<p><a href=\"#35\" title=\"If all you are doing is displaying and updating information via a GUI, and the code never makes a fixed reference to the keys (i.e. you never see code like Listing 3), then you are pretty safe with a Flexible Dynamic Property. This is because you have not set up a nasty dependency to some arbitrary string as a key. Otherwise you should consider one of the other approaches to dynamic properties.\"><span id=\"35\">如果你正在做的是通过<code>GUI</code>显示和更新信息，而代码永远不会对键进行固定的引用（即，你永远不会看到像清单3那样的代码），那么使用灵活<code>动态属性</code>就非常安全。这是因为你没有设置一个任意字符串作为一个关键的讨厌的依赖。 否则，你应该考虑<code>动态属性</code>的其他方法之一。</span></a></p>\n<p><a href=\"#36\" title=\"The first step towards more run-time checking is the Defined Dynamic Property. The key difference between a defined as opposed to a flexible dynamic property is that the key used by the dynamic property is no longer some arbitrary string, but is now an instance of some class (Figure 3).\"><span id=\"36\">更多运行时检查的第一步是定义的动态属性。与<code>灵活动态属性</code>相反，定义的关键区别在于<code>动态属性</code>使用的关键字不再是一些任意的字符串，而是现在某个类的一个实例（图3）。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/7_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图3.定义的<code>动态属性</code></p>\n</blockquote>\n<p><a href=\"#37\" title=\"On the face of it using defined dynamic property does not change much. Indeed the code interface is almost identical (Listing 5 and Listing 6). But now the choice of keys is no longer entirely arbitrary, it is limited by the instances of contact type. Of course this still allows you to add properties at run time – you just create a new contact type. However now there is at least somewhere someone can look to get a list of potential keys without having to trawl through the program text. Any keys added at design time can be collected in a loader routine in the contact type class. You can easily provide services to find out the legal keys at run time.\"><span id=\"37\">在它的表面上使用定义的<code>动态属性</code>并没有太大的改变。事实上，代码界面几乎完全相同（清单5和清单6）。但是现在，关键字的选择不再是完全随意的，而是受到接触<code>类型</code>的限制。当然，这仍然允许您在运行时添加<code>属性</code>-只需创建一个新的关联<code>类型</code>。不过现在至少在某个地方可以找到一个潜在的<code>键</code>列表，而无需浏览程序<code>代码</code>。 在设计时添加的任何键都可以在关联类型类的加载程序中收集。您可以轻松地提供服务，以在运行时查找合法的<code>键</code>。</span></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span><span class=\"params\">(ContactType key)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValueOf</span><span class=\"params\">(ContactType key, Object value)</span></span>;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举5, 图3的Java接口<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ContactType</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Enumeration <span class=\"title\">instances</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasInstanceNamed</span><span class=\"params\">(String name)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ContactType <span class=\"title\">get</span><span class=\"params\">(String name)</span></span>;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>列举6,为定义的属性类型提供的服务</p>\n</blockquote>\n<p><a href=\"#38\" title=\"In particular you can now set up some checking to prevent errors due to someone asking for a dynamic property that does not exist as in Listing 7. I’m throwing an unchecked exception here because I consider that the precondition for get() is that the client provides a legal name for a contact type. The client can always fulfill this responsibility by using hasInstanceNamed(), but most of the time client software will hang on to contact type objects, not strings.\"><span id=\"38\">你现在可以设置一些检查来防止由于某人要求一个不存在的<code>动态属性</code>而导致的错误。我在这里抛出一个未经检查的<code>异常</code>，因为我认为<code>get（）</code>的前提条件是<code>客户端</code>为联系人类型提供合法名称。客户端总是可以通过使用<code>hasInstanceNamed（）</code>来执行这个检查，但是大多数情况下客户端使用的是类型而不是字符串。</span></a></p>\n<hr>\n<h3 id=\"定义动态属性\"><a href=\"#定义动态属性\" class=\"headerlink\" title=\"定义动态属性\"></a>定义动态属性</h3><ul>\n<li><a href=\"#39\" title=\"How do you represent a fact about an object?\"><span id=\"39\">你如何代表一个对象的事实？</span></a></li>\n<li><a href=\"#39\" title=\"Provide an attribute parameterized with an instance of some type. To declare a property create a new instance of that type\"><span id=\"39\">提供用某种类型的实例参数化的属性。声明一个属性创建一个新类型的实例</span></a> </li>\n</ul>\n<hr>\n<p><a href=\"#40\" title=\"Usually the contact types will be held in a dictionary, usually indexed by a string. This dictionary could be a static field of contact type, but I prefer to make it a field on a Registrar.\"><span id=\"40\">通常，联系人类型将保存在字典中，通常由字符串索引。这个字典可能是一个静态的联系人类型的字段，但是我更愿意把它作为注册服务器上的字段。</span></a></p>\n<p><a href=\"#41\" title=\"Removing a contact type still has awkward consequences. In java the dynamic properties would still be present on those objects that had them, unless you write some complicated clean up code. I usually make it a rule to never delete the keys for a Defined Dynamic Property. If you want to use a new name you can easily alias the contact type by giving it one name but placing it in the defining dictionary several times.\"><span id=\"41\">删除联系人类型仍然具有尴尬的后果。在<code>java</code>中的<code>动态属性</code>仍然会出现在那些拥有它们的对象上，除非你写了一些复杂的东西清理代码。我通常会规定永远不要删除动态属性的键。如果你想使用一个新的名字，你可以通过给它一个其他名字，但是把它放置在定义的字典中几次，很容易地为联系类型添加别名。</span></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ContactType</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ContactType <span class=\"title\">get</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (! hasInstanceNamed (name)) <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(“No such contact type);</span><br><span class=\"line\">        <span class=\"comment\">// return the contact type</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// use with</span></span><br><span class=\"line\">Address kentVactation = (Address)kent.getValueOf(ContactType.get(“VacationAddress”));</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举7, 检查使用合法合同类型</p>\n</blockquote>\n<p><a href=\"#42\" title=\"At this point you might be wondering about what this has to do with conceptual modeling,after all I am writing a lot of code and discussing design trade-offs. This is an important conceptual issue because the conceptual choice you make affects the implementation options you have. If you choose to use flexible dynamic attributes in your conceptual model, you are making it pretty hard to use either defined dynamic attributes or fixed attributes in your implementation. One of the reasons you do conceptual models is to explore what is fixed and what is changeable in your users’ concepts. If total flexibility was my only goal then I would always use Figure 4. With this I can model any situation in the world. But this model is not very useful. Its uselessness comes from the fact that it does not indicate what is fixed. When you are doing a conceptual model you need to be aware of how your choices affect things in implementation – otherwise you are abdicating your responsibility as a modeler.\"><span id=\"42\">在这一点上，您可能想知道这与概念建模有什么关系，毕竟我写了很多代码并讨论了设计的权衡。这是一个重要的概念问题，因为您所做的概念选择会影响您的实现选择。如果你选择在你的概念模型中使用<code>灵活动态属性</code>，你很难在你的实现中使用定义的<code>动态属性</code>或<code>固定属性</code>。你做概念模型的原因之一是探索你的用户的概念是什么固定的，什么是可变的。如果全面的灵活性是我唯一的目标，那么我会总是使用图4.通过这个，我可以模拟世界上的任何情况。但是这个模型不是很有用。它在现实项目中是没用的，它不表示什么是固定的。什么时候你正在做一个概念模型，你需要知道你的选择如何影响项目实施-否则你失去了作为建模者的作用。</span></a></p>\n<p><a href=\"#43\" title=\"I often find that people discover dynamic properties, and then want to use them everywhere. The flexibility is so great, they get all the extendibility they ever want. Yes sometimes you need dynamic properties. but never forget there is a price. Only use them when you really need them. After all it is easy to add them later if you have to.\"><span id=\"43\">我经常发现人们发现<code>动态属性</code>，然后想要在任何地方使用它们。灵活性如此之大，他们获得了所有的可扩展性。是的，有时候你需要<code>动态属性</code>。但永远不会忘记有一个标准。只有当你真的使用它们需要他们才用。毕竟，如果必须使用，以后很容易添加它们。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/8_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图4.一个可以无用建模任何域的模型</p>\n</blockquote>\n<p><a href=\"#44\" title=\"The Defined Dynamic Property allows you to indicate rather more about what properties you have. These properties are still untyped. You cannot enforce that the value of the vacation address in Figure 3 is an address. You can do something about that by using a Typed Dynamic Property.\"><span id=\"44\"><code>定义动态属性</code>允许您更多地指出你拥有的属性。这些属性仍然是无类型的。您不能强制图3中休假地址的值是一个地址。 你可以通过使用<code>类型动态属性</code>来做些什么。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/9_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图5.为使用限定关联的类型化动态属性建模</p>\n</blockquote>\n<p><a href=\"#45\" title=\"A typed dynamic property adds type information to the defined dynamic property (Figure 6 and Figure 5 ). Here the instances of contact type do not just indicate what properites the person has, they also indicate the type of each property. The type constrains the value, along the lines of Listing 9.\"><span id=\"45\"><code>类型动态属性</code>将类型信息添加到定义的<code>动态属性</code>（图6和6）图5）。这里的联系人类型的实例不只是指出该人是什么合适的人有，他们也表示每个<code>属性</code>的类型。 类型约束的值，沿线清单9。</span></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span><span class=\"params\">(ContactType key)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValueOf</span><span class=\"params\">(ContactType key, Object value)</span></span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ContactType</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Class <span class=\"title\">getValueType</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ContactType</span> <span class=\"params\">(String name, Class valueType)</span></span>;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举8, 键入动态属性的操作</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValueOf</span><span class=\"params\">(ContactType key, Object value)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (! key.getValueType().isInstance(value))</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> IllegalArgumentException (“Incorrect type <span class=\"keyword\">for</span> property”);</span><br><span class=\"line\">        <span class=\"comment\">// set the value</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举9, 做类型检查</p>\n</blockquote>\n<p><a href=\"#46\" title=\"Doing type checking like this can help to avoid errors, but it still is not as clear as fixed properties. The checking is at run time, not at design time, and is therefore not as effective. Still it is better than no checking at all, particularly if you are used to a strongly typed environment.\"><span id=\"46\">这样做类型检查可以帮助避免错误，但它仍然不像固定属性那样清晰。 检查是在运行时，而不是在设计时，因此不是有效的。但还是比没有检查好，特别是如果你习惯于强类型的环境时。</span></a></p>\n<hr>\n<h3 id=\"类型动态属性\"><a href=\"#类型动态属性\" class=\"headerlink\" title=\"类型动态属性\"></a>类型动态属性</h3><ul>\n<li><a href=\"#47\" title=\"How do you represent a fact about an object?\"><span id=\"47\">你如何代表一个对象的事实？</span></a><br></li>\n<li><a href=\"#47\"><span id=\"47\">提供使用某种类型的实例进行参数化的属性。声明一个属性创建一个新类型的实例并指定值的类型属性。</span></a></li>\n</ul>\n<hr>\n<p><a href=\"#48\" title=\"As we delve deeper into dynamic properties, we find richer examples of reflection, an architectural pattern which appears when we get runtime objects that are able to describe themselves. [POSA] discusses reflection in much more detail than I intend to go into here.\"><span id=\"48\">当我们深入研究<code>动态属性</code>时，我们会发现更丰富的<code>反射</code>示例，这是一种架构模式，当我们获得能够描述自身的运行时对象时，就会出现这种模式。 [POSA]比我打算在这里更详细地讨论反思。</span></a></p>\n<p><a href=\"#49\" title=\"Dynamic properties provide a reflective capability, even in those languages that don’t support reflection themselves. Even with a language that does provide some reflection, the reflection of dynamic properties is more focused – so you can provide an easier to use interface.\"><span id=\"49\">动态属性提供反射功能，即使在那些不支持反射的语言中。即使使用了一种能够提供一些反射的语言，<code>动态属性</code>的反射也更加集中 - 所以您可以提供更易于使用的接口。</span></a></p>\n<p><a href=\"#50\" title=\"Using all of those qualified associations can get rather hard to follow. Another way of providing typed dynamic properties is to use the separate property pattern. The essence of the separate property pattern is that it makes the property an object in its own right (Figure 6 and Listing 10). You can get hold of the properties of a person, and then with each property get value and type information.\"><span id=\"50\">使用所有这些合格的关联可能会很难遵循。另一种方式提供<code>类型动态属性</code>是使用单独的属性模式。独立属性模式的本质是它使属性成为一个对象（图6和清单10）。 你可以获得一个人的属性，然后与每个属性获得值和类型信息。</span></a></p>\n<hr>\n<h3 id=\"分离属性\"><a href=\"#分离属性\" class=\"headerlink\" title=\"分离属性\"></a>分离属性</h3><ul>\n<li><a href=\"#51\" title=\"How do you represent a fact about an object, and allow facts to be recorded about that fact\"><span id=\"51\">你如何代表一个对象的属性，并允许属性记录这个属性<span></span></span></a></li>\n<li><a href=\"#51\" title=\"Create a separate object for each property. Facts about that property can then be made properties of that object.\"><span id=\"51\">为每个属性创建一个单独的对象。有关该属性的子属性可以然后被做成那个对象的属性。<span></span></span></a></li>\n</ul>\n<hr>\n<p><a href=\"#52\" title=\"Separate properties and qualified associations are two alternatives that are always available for dynamic properties. So far I’ve described flexible and defined dynamic properties with qualified associations because the qualified association presents a much easier interface to use.You can use flexible and defined dynamic properties with separate properties if you wish, although I’m not going to go into that here. As we get to the complexity of typed dynamic properties and onwards the separate property style becomes more of an advantage.\"><span id=\"52\"><code>独立属性</code>和限定的关联<code>动态属性</code>总是可用的两种选择。 到目前为止，我已经用限定的关联描述了灵活的和定义好的<code>动态属性</code>，因为合格的关联提供了一个更容易使用的接口。如果你愿意的话，你可以使用灵活和定义的具有单独属性的<code>动态属性</code>，尽管我不打算进入在这里。当我们了解类型化<code>动态属性</code>的复杂性时，<code>分离属性</code>风格变得更有优势。<span></span></span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/10_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图6.为分类的动态属性建模，使用单独的属性</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Enumeration <span class=\"title\">getProperties</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ContactProperty</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValue</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Class <span class=\"title\">getType</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ContactType <span class=\"title\">getIndex</span><span class=\"params\">()</span></span>;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举10, 使用单独属性的类型化动态属性的操作</p>\n</blockquote>\n<p><a href=\"#52\" title=\"Separate properties and qualified associations are not mutually exclusive. You can easily provide both interfaces at the same time. This way you get the advantages of both. Of course that makes the interface more complex, so think first about what the clients of person need.Give them the interface they need, don’t make it over complex. But if they need both qualified associations and separate properties, then that is a reasonable option. I would normally always use qualified associations for the value, but it may not make as much sense for the type.\"><span id=\"53\"><code>分离属性</code>和有限的关联不是相互排斥的。您可以轻松地同时提供两个接口。 这样你就得到了两者的优点。当然这会使接口更加复杂，所以先考虑一下用户的需求。给他们提供他们需要的接口，不要让接口变得复杂。但是，如果他们需要合格的关联和<code>分离属性</code>，那么这是一个合理的选择。我通常会使用合格的关联来获得值，但是这种类型可能没有多大意义。<span></span></span></a></p>\n<p><a href=\"#\" title=\"You can also consider the interface/implementation differences here. In this paper I want to concentrate on the conceptual – which maps to the interface of software rather than its implementation. But it is worth mentioning that you can provide a qualified association interface while using separate object in the implementation. You are only using separate properties in the interface if a client of person can obtain a contact property object. Often it is useful to hide the separate property to simplify the interface for the client.\"><span id=\"54\">您也可以在这里考虑接口/实现的差异。在本文中，我想集中在概念上 - 它映射到软件的接口而不是实现。但值得一提的是，您可以在实现中使用单独的对象时提供合格的关联接口。如果人的客户端可以获取联系人属性对象，则只能在接口中使用单独的属性。通常隐藏<code>分离属性</code>以简化客户端的接口是有用的。</span></a></p>\n<p><a href=\"#55\" title=\"One of the big advantages of the Separate Properties is that it allows you put information about the property in the property. Such information might include who determined the property, when it was determined, and the like. The Observation pattern in \\[Fowler AP §3.5\\] build upon this theme in some depth. Much of what I’ve described there in terms of observations is worth considering if you need separate properties. \\(I see the observation pattern as a use of separate properties.\\)\"><span id=\"55\"><code>分离属性</code>的一大优势是它可以让你把属性的信息放在属性中。 这些信息可能包括谁确定了属性，什么时候确定了属性等。 [Fowler AP§3.5]中的观察模式基于这个主题进行了深入的研究。如果您需要单独的属性，我在观察者模式所描述的大部分内容都值得思考。（我将观察模式看作是使用不同的属性。）</span></a></p>\n<p><a href=\"#56\" title=\"You might be wondering at the contrast between separate properties \\(a pattern\\) and qualified associations \\(a UML modeling construct\\). You can also think of qualified associations as a pattern, a pattern of association. Indeed I did do this in \\[Fowler AP §15.2\\]. I have found it helpful to think of modeling constructs as patterns, for it helps me think about the trade-offs in using them. This is particularly useful when you are comparing them to something that is more clearly a pattern, such as separate property. Of course things that begin as patterns can be turned into modeling constructs, particularly if you use UML stereotypes. The historic mapping pattern \\[Fowler AP §15.3\\] is a good example of that. I represent that using the «history» stereotype. Is it a pattern or a modeling construction? Maybe it’s a floor wax and a desert topping too.\"><span id=\"56\">您可能想知道<code>分离属性</code>（模式）和限定关联（<code>UML</code>建模结构）之间的对比。 你也可以把合格的关联看作一种模式，一种联想模式。确实，我在[Fowler AP §15.2]中做了这个。我发现为设计创建模型考虑是有帮助的，因为它帮助我思考使用它们的权衡。当你将它们的模型比较清楚，如<code>分离属性</code>，这是特别有用的。当然，以模式开始的事情可以转化为建模结构，特别是如果使用<code>UML</code>构造型。历史映射模式[FowlerAP§15.3]就是一个很好的例子。我表示使用这种模式非常刻版。这是一个模式或建模？也许这是一个地板蜡和一个沙漠顶部。</span></a></p>\n<hr>\n<h2 id=\"具有多值关联的动态属性\"><a href=\"#具有多值关联的动态属性\" class=\"headerlink\" title=\"具有多值关联的动态属性\"></a><a href=\"#57\" title=\"Dynamic Properties with Multi-valued associations\"><span id=\"57\">具有多值关联的动态属性</span></a></h2><p><a href=\"#58\" title=\"My examples above have concentrated on cases where there is a single value for each key in the dynamic properties. But you can also have cases where there are multiple items in the dynamic properties. With Person you might consider a friends property which is multi-valued.There are two ways to deal with this, one that is simple and unsatisfying, another that is satisfying but (too) complex.\"><span id=\"58\">我上面的例子集中讨论了<code>动态属性</code>中每个键都有一个单一值的情况。 但是，您也可以在<code>动态属性</code>中有多个事件的情况。与人相处时，你可能会考虑一个多值的友好属性。处理这个问题有两种方法，一种简单而不令人满意，另一种令人满意，但（太）复杂。</span></a></p>\n<p><a href=\"#59\" title=\"The simple approach is just to say that the value of a dynamic property can be a collection.We can then manipulate it like any other object with the same interface (Listing 11). This is nice and simple, since we don’t have to do anything to the basic dynamic property pattern.(The example here is with a typed dynamic property, but it will work with all of them.) It’s unsatisfying however because it is not really the way we would like to deal with multi-valued properties. If friends were a fixed property, we would want an interface along the lines of Listing 12. I don’t like exposing the vector in these cases. By doing so the person class loses the ability to react when we add or remove elements. It also removes our ability to change the type of collection we are using.\"><span id=\"59\">简单的方法就是说<code>动态属性</code>的值可以是一个集合。然后我们可以像使用相同接口的其他对象一样操作它（清单11）。这很好，很简单，因为我们不需要对基本的<code>动态属性</code>模式做任何事情（这里的例子是一个类型化的<code>动态属性</code>，但是它可以和所有的模式一起工作）。然而，这并不令人满意，因为它不是真的是我们想要处理多值属性的方式。如果朋友是一个固定的属性，我们需要一个接口，如清单12所示。我不喜欢在这些情况下暴露集合。通过这样做，人员班级在我们添加或移除元素时就失去了应对的能力。这也消除了我们改变我们正在使用的集合类型的能力。</span></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Person aPerson = <span class=\"keyword\">new</span> Person();</span><br><span class=\"line\">ContactType friends = <span class=\"keyword\">new</span> ContactType(“Friends”, Class.forName(“Vector”));</span><br><span class=\"line\">Person martin = <span class=\"keyword\">new</span> Person(“Martin”);</span><br><span class=\"line\">martin.setValueOf(“Friends”, <span class=\"keyword\">new</span> Vector());</span><br><span class=\"line\">Person kent = <span class=\"keyword\">new</span> Person(“Kent”);</span><br><span class=\"line\">martin.getValueOf(“Friends”).addElement(“Kent”);</span><br><span class=\"line\">Enumeration friends = martin.getValueOf(“Friends”).elements();</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举11, 在类型化动态属性中使用集合值<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Enumeration <span class=\"title\">getFriends</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addFriend</span><span class=\"params\">(Person arg)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">removeFriend</span><span class=\"params\">(Person arg)</span></span>;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>列举12, 一个固定的多值属性的运作</p>\n</blockquote>\n<p><a href=\"#60\" title=\"So can we get an interface along the lines of Listing 12, when we have dynamic properties? Well if we try hard enough we can, as you can see in Figure 7. But it is a complex model. With some clever coding we can hide much of that complexity behind the interface (Listing 13 and Listing 14) and make it reasonably convenient to use (Listing 15). But the client still needs to know which properties are single valued and which are multi-valued and all the checking for the right usage can only occur at run time. All this complexity is painful – a lot more painful than using fixed properties. I would be very reluctant to go this far.\"><span id=\"60\">那么当我们有<code>动态属性</code>的时候，我们可以按照清单12的方式获得一个接口吗？ 那么，如果我们努力工作，就可以如图7所示。但这是一个复杂的模型。 通过一些巧妙的编码，我们可以隐藏接口（清单13和清单14）背后的大部分复杂性，并且使用起来相当方便（清单15）。但客户端仍然需要知道哪些属性是单值的，哪些属性是多值的，并且只有在运行时才能检查正确的使用情况。所有这些复杂性都是痛苦的-比使用<code>固定属性</code>更痛苦。我会非常不愿走这么远。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/12_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图7.满足对多值动态属性的过度支持</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class Person</span><br><span class=\"line\">    public Object getValueOf(ContactType key);</span><br><span class=\"line\">    public Enumeration getValuesOf(ContactType key);</span><br><span class=\"line\">    public void setValueOf(ContactType key, Object newValue);</span><br><span class=\"line\">    public void addValueTo(ContactType key, Object newValue);</span><br><span class=\"line\">    public void removeValueFrom(ContactType key, Object newValue);</span><br><span class=\"line\">    </span><br><span class=\"line\">class ContactType</span><br><span class=\"line\">    public Class getValueType();</span><br><span class=\"line\">    public boolean isMultiValued();</span><br><span class=\"line\">    public boolean isSingleValued();</span><br><span class=\"line\">    public ContactType(String name, Class valueType, boolean isMultiValued);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举13, 图7的操作</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span></span></span><br><span class=\"line\"><span class=\"class\">    <span class=\"title\">public</span> <span class=\"title\">Object</span> <span class=\"title\">getValueOf</span>(<span class=\"title\">ContactType</span> <span class=\"title\">key</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (key.isMultiValued())</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> IllegalArgumentException(“<span class=\"function\">should use <span class=\"title\">getValuesOf</span><span class=\"params\">()</span>”)</span></span><br><span class=\"line\"><span class=\"function\">        <span class=\"comment\">//return the value</span></span></span><br><span class=\"line\"><span class=\"function\">    &#125;</span></span><br><span class=\"line\"><span class=\"function\">    </span></span><br><span class=\"line\"><span class=\"function\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addValueTo</span><span class=\"params\">(ContactType key, Object newValue)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (key.isSingleValued())</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> IllegalArgumentException(“should use setValueOf”);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (! key.getValueType().isInstance(newValue))</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> IllegalArgumentException (“Incorrect type <span class=\"keyword\">for</span> property”);</span><br><span class=\"line\">        <span class=\"comment\">//add the value to the collection</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举14, 检查清单13的操作的使用情况</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fax = <span class=\"keyword\">new</span> ContactType(“fax”, Class.forName(“PhoneNumber”), <span class=\"keyword\">false</span>);</span><br><span class=\"line\">Person martin = <span class=\"keyword\">new</span> Person(“martin”);</span><br><span class=\"line\">martin.setValueOf(“fax”, <span class=\"keyword\">new</span> PhoneNumber(“<span class=\"number\">123</span> <span class=\"number\">1234</span>”);</span><br><span class=\"line\">martinFax = martin.getValueOf(“fax”);</span><br><span class=\"line\">friends = <span class=\"keyword\">new</span> ContactType (“friends”, Class.forName(“Person”), <span class=\"keyword\">true</span>);</span><br><span class=\"line\">martin.addValueTo(“friends”, <span class=\"keyword\">new</span> Person(“Kent”));</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举15, 使用清单13的操作</p>\n</blockquote>\n<p><a href=\"#61\" title=\"This complexity appears because we have both multi valued and single-valued properties.There is an inherently different interface to dealing with these, hence the complexity. Of course we can get situations with only multi-valued properties. A common pattern for this is the Typed Relation ship pattern \\(Figure 8\\). Here a person may have number of different employment relationships with a number of different companies \\(or even several with the same company\\).\"><span id=\"61\">这种复杂性似乎是因为我们既有多值也有单值的<code>属性</code>。处理这些复杂性有一个内在的不同的接口，因此复杂性也是如此。当然，我们可以得到只有多值属性的情况。一个常见的模式是类型关系模式（图8）。在这里，一个人可能与许多不同公司有不同的雇佣关系（甚至与同一家公司有多个）。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/13_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图8.类型关系的一个例子</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Employment</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Employment</span> <span class=\"params\">(Person person, Company company, Employment Type type)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">terminate</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    …</span></span><br><span class=\"line\"><span class=\"function\">&#125;</span></span><br><span class=\"line\"><span class=\"function\">class Person </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Enumeration <span class=\"title\">getEmployments</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addEmployment</span> <span class=\"params\">(Company company, EmploymentType type)</span></span>;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举16, 图8的<code>Java</code>接口</p>\n</blockquote>\n<p><a href=\"#62\" title=\"As we think of this, it should soon occur to you that this is really very similar as using a Defined Dynamic Property that is multi-valued, but expressed using a Separate Property rather than a Qualified Association. (Or is that sentence just too much of a mouthful?) Indeed Figure 9 shows how you can use a Defined Dynamic Property interface in this situation. This view of things is true, and so a typed relationship doesn’t add anything that new to this pattern language. But typed relationship is a very common pattern in modeling circles, and many may not realize its connection with the dynamic properties patterns.\"><span id=\"62\">正如我们想到的那样，很快就会发现，这与使用多值的<code>定义动态属性</code>非常类似，但是使用<code>分离属性</code>而不是合适的关联来表示。（或者说这句话太过分了？）实际上，图9显示了在这种情况下如何使用<code>定义动态属性</code>接口。这种事物的观点是真实的，所以一个类型化的关系不会添加任何新的模式语言。 但是类型化关系在建模圈子中是一种非常普遍的模式，很多人可能没有意识到它与<code>动态属性</code>模式的联系。</span></a></p>\n<hr>\n<h3 id=\"类型关系\"><a href=\"#类型关系\" class=\"headerlink\" title=\"类型关系\"></a>类型关系</h3><ul>\n<li><a href=\"#63\" title=\"How do you represent a relationship between two objects?(How do you represent multi-valued dynamic properties?)\"><span id=\"63\">你如何表示两个对象之间的关系？（你如何表示多值动态属性？）</span></a></li>\n<li><a href=\"#63\" title=\"Create a relationship object for each link between the two objects. Give the relationship object a type object to indicate the meaning of the relationship.(The type object is the name of the multi-valued property.)\"><span id=\"63\">为两个对象之间的每个链接创建一个关系对象。 给关系对象一个类型对象来表示关系的含义。（类型对象是多值属性的名称。）</span></a></li>\n</ul>\n<hr>\n<p><a href=\"#64\" title=\"The strengths of typed relationship are that it works well with bi-directional relationships, and that it provides a simple point to add properties to the relationship. (The latter, of course, is a feature of separate properties.) You can add a sophisticated knowledge level to this pattern,along much the same lines as typed dynamic properties. However you should consider the interface implications. Typed relationships force users to be aware of the employment object,as indeed does any use of separate properties. Indeed people tend to see the property object as a full fledged object in its own right, rather as some property of the person (or company). But the qualified association can often provide a simpler interface for many purposes. So whenever you see, or you are considering using, a typed relationship; you should also consider the qualified association form. You can use it in either or both directions, and use it either in addition to the typed relationship, or in addition to it.\"><span id=\"64\">类型化关系的优势在于它可以很好地处理双向关系，并且为关系添加属性提供了一个简单的点。（当然，后者是一个<code>分离属性</code>的特征。）你可以在这个模式中添加一个复杂的知识级别，跟类型化的<code>动态属性</code>一样。但是，您应该考虑接口的影响。类型化关系迫使用户意识到雇佣对象，因为确实使用<code>分离属性</code>。事实上，人们倾向于将属性客体本身看作完全成熟的客体，而不是人（或公司）的一些属性。 但是合格的关联通常可以为许多目的提供更简单的接口。所以每当你看到，或者你正在考虑使用，一个类型的关系;你还应该考虑合格的关联形式。您可以在任何一个方向或两个方向上使用它，也可以将其用于除了键入的关系之外，或者除此之外。。</span></a></p>\n<p><a href=\"#65\" title=\"The two models are not quite identical however. If you use Figure 9 you are indicating that an employer can only be an employer once for a particular employment type. Figure 8 has no such constraint in the diagram as it stands, although most modelers would imply such a constraint,unless the employment had additional attributes. Often, of course, the employment does have the additional attributes. A common example is a date range (as in accountability \\[Fowler, AP §2.4\\].\"><span id=\"65\">但是这两种模式并不完全相同。如果使用图9，则表示雇主只能是某种特定工种的雇主。图8在图表中没有这样的约束，尽管大多数建模者会暗示这样的约束，除非雇用具有附加属性。当然，就业通常具有附加属性。一个常见的例子是日期范围（如问责制[Fowler，AP§2.4]）。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/14_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图9.使用与图8相同情况的合格关联</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> Person &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addEmployer</span> <span class=\"params\">(Company company, EmploymentType type)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Enumeration <span class=\"title\">getEmployersOfType</span> <span class=\"params\">(EmploymentType type)</span></span>;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举17, 图9的接口</p>\n</blockquote>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/15_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图10.键入的关系，显示通常假定的约束</p>\n</blockquote>\n<hr>\n<h2 id=\"不同种类的人\"><a href=\"#不同种类的人\" class=\"headerlink\" title=\"不同种类的人\"></a>不同种类的人</h2><p><a href=\"#\" title=\"So far we are assuming we only have one kind of person, and any properties we define for a person are valid properties for all people. However you do get situations where you have different types, and different properties for different types. A manager may need a property for department managed, an executive may need a property for executive washroom key number (in a not very 90’s company).\"><span id=\"66\">到目前为止，我们假设我们只有一种人，我们为一个人定义的任何属性都是所有人的有效属性。但是，您确实会遇到不同类型的情况，以及不同类型的不同属性。管理人员可能需要一个管理部门的属性，执行人员可能需要一个属性作为高管卫生间的关键号码（在一个不是90年代的公司）。</span></a></p>\n<p><a href=\"#67\" title=\"Don’t worry, I hear the cries of “use inheritance stupid”. Indeed this is one of the situations that is often used for subtyping. Actually it gets rather more involved than that, particularly when you start thinking of the various roles a person may play. I’ve written a whole paper on the subject of modeling roles \\[Fowler roles\\]. The roles patterns consider cases where we are interested in variations in operations and in variations of fixed properties. But in this case I want to explore the overlap of different kinds of object with the notion of dynamic properties. This overlap begets the dynamic properties knowledge level pattern \\(a name that is getting a little too large for my taste\\).\"><span id=\"67\">别担心，我听到“使用继承愚蠢”的呼声。事实上，这是常用于分类的情况之一。实际上，这个过程比这个要复杂得多，特别是当你开始思考一个人可能扮演的角色时。我已经写了关于建模角色[Fowler roles]的主题的全文。角色模式考虑了我们对操作变化和<code>固定属性</code>变化感兴趣的情况。但在这种情况下，我想探索不同类型的对象与<code>动态属性</code>的概念的重叠。这种重叠会导致<code>动态属性知识级别模式</code>（一个对我的品味有点太大的名字）。</span></a></p>\n<p><a href=\"#68\" title=\"To use the pattern we give the Person a type object of Person Type. We can then say that the person type’s association to contact type indicates which properties are available for people who have that person type. If we try to use, or ask for, a property on a person the person type can be used to check that the usage is correct.\"><span id=\"68\">为了使用这个模式，我们给<code>Person</code>一个<code>Person</code>类型的<code>类型对象</code>。然后，我们可以说，人物类型与联系人类型的关联指示哪些人物拥有该人物类型可用的属性。 如果我们尝试使用或要求某人的属性，则可以使用人员类型来检查使用情况是否正确。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/16_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图11.动态属性知识水平</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span><span class=\"params\">(ContactProperty key)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasProperty</span><span class=\"params\">(ContactProperty key)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValueOf</span><span class=\"params\">(ContactProperty key, Object newValue)</span></span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PersonType</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasProperty</span><span class=\"params\">(ContactProperty key)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Enumeration <span class=\"title\">getProperties</span><span class=\"params\">()</span></span>;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>列举18, 图11的操作<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span> <span class=\"params\">(ContactProperty key)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!hasProperty(key))</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> IllegalArgumentException(“Innapropriate key”);</span><br><span class=\"line\">            <span class=\"comment\">//return the value</span></span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<blockquote>\n<p>列举19, 检查具有动态属性知识级别的适当的密钥</p>\n</blockquote>\n<p><a href=\"#69\" title=\"As we start to use a knowledge level like this, the separate property becomes more and more important. In this case we soon start to stop thinking of it as a property, rather as some object in its own right. The dividing line between what is a property and what isn’t is very blurred,and it really depends upon your view of things.\"><span id=\"69\">当我们开始使用这样的知识水平时，单独的属性变得越来越重要。 在这种情况下，我们很快就会开始停止将其视为一种属性，而不是把它作为一个对象。 什么是属性和什么是非属性之间的分界线是非常模糊的，这实际上取决于你对事物的看法。</span></a></p>\n<hr>\n<h3 id=\"动态属性知识水平\"><a href=\"#动态属性知识水平\" class=\"headerlink\" title=\"动态属性知识水平\"></a>动态属性知识水平</h3><ul>\n<li><a href=\"#70\" title=\"How do you enforce that certain kinds of objects have certain properties when you use dynamic properties?\"><span id=\"70\">你如何执行某些类型的对象具有某些特性使用动态属性？</span></a></li>\n<li><a href=\"#70\" title=\"Create a knowledge level to contain the rules of what types of objects use which types of properties\"><span id=\"70\">创建一个知识级别来包含什么类型的对象使用的规则哪些类型的属性</span></a></li>\n</ul>\n<hr>\n<hr>\n<h2 id=\"动态属性的几个小结\"><a href=\"#动态属性的几个小结\" class=\"headerlink\" title=\"动态属性的几个小结\"></a><a href=\"#71\" title=\"Some Summary Points on Dynamic Properties\"><span id=\"71\">动态属性的几个小结</span></a></h2><p><a href=\"#72\" title=\"Various kinds of dynamic properties make up the bulk of this paper. But I have to reiterate that dynamic properties are something I like to avoid if at all possible. Dynamic properties carry a heavy burden of disadvantage: the lack of clarity of the interface, the difficulty in using operations instead of stored data. It is just that sometimes you have little choice but to use them, and it is on these occasions that this paper should come in useful to give you some alternatives and the trade-offs between then.\"><span id=\"72\">各种各样的<code>动态属性</code>构成了本文的大部分内容。但我必须重申，<code>动态属性</code>是我想要尽可能避免的。<code>动态属性</code>带来了很大的负担：接口不够清晰，使用操作而不是存储数据的困难。只是有时你别无选择，只能使用它们，在这种情况下，这篇论文应该有用的给你提供一些替代方案和之间的权衡。<span></span></span></a></p>\n<p><a href=\"#73\" title=\"Dynamic properties appear most where there are difficulties in changing the interface. People who work with distributed object systems like them, at least in principle, because it allows them to alter an interface without compromising clients – and in a distributed system it may be very difficult to find who your clients are. But you should still be wary of doing this. Any time you add a new key to your keys for the dynamic properties you are effectively changing the interface. All the dynamic properties are doing is replacing a compile time check for a runtime check. You still have the same issues of keeping your clients up to date.\"><span id=\"73\"><code>动态属性</code>出现在改变接口有困难的地方。那些使用像他们这样的分布式对象系统的人，至少在原则上是这样，因为它允许他们在不改变客户端的情况下改变接口 - 而在分布式系统中，可能很难找到你的客户端。但是你仍然应该警惕这样做。每当你为<code>动态属性</code>添加一个新的键到你的键上，你都在有效地改变接口。所有的<code>动态属性</code>都在替换运行时检查的编译时间检查。你仍然有同样的问题保持你的客户端最新。</span></a></p>\n<p><a href=\"#74\" title=\"Another common use of dynamic properties is in databases. Here it is not just due to the problem of interface, but also (if not primarily) due to problems of data migration. Changing a database schema does not only cause a potential change to programs using the schema, it also may force you to do a complicated data conversion exercise. Again dynamic properties allow you to change things without changing the database schema, and thus not needing to do any data conversion. In large databases this can be a compelling advantage.\"><span id=\"74\"><code>动态属性</code>的另一个常见用途是在数据库中。这里不仅仅是由于接口的问题，而且由于数据迁移的问题（如果不是主要的话）。更改数据库模式不仅会导致对使用该模式的程序进行潜在更改，还可能会强制您执行复杂的数据转换练习。同样，<code>动态属性</code>允许您在不更改数据库模式的情况下更改内容，从而不需要进行任何数据转换。在大型数据库中，这可能是一个引人注目的优势。</span></a></p>\n<hr>\n<h2 id=\"一个你不知道的有关于属性的\"><a href=\"#一个你不知道的有关于属性的\" class=\"headerlink\" title=\"一个你不知道的有关于属性的\"></a><a href=\"#75\" title=\"A property you don’t know about\"><span id=\"75\">一个你不知道的有关于属性的</span></a></h2><p><a href=\"#76\" title=\"There is a last but important kind of property that I want to add to this paper. This is the case of an object having a property without realizing it. This occurs when the property is implied by another object and the way it relates to you.\"><span id=\"76\">我想在本文中添加一个最后一个重要的属性。这是一个没有意识到属性的对象的情况。当属性被另一个对象所隐含，以及与有关的方式时，就会发生这种情况。</span></a></p>\n<p><a href=\"#77\" title=\"Consider an object that manages database connections. It creates a bunch of database connections and hands them out to other objects when requested. When a client is done with the connection it can return it to the manager to be available for someone else. You could do this by adding an isBusy property to the connection. Figure 12 shows an alternative using an extrinsic property. Whether the connection is free or busy is determined by which collection in the connection manager it lies in. If you had a connection, you could not ask it whether it is free or busy, instead you would have to ask the connection manager whether a particular connection is free or busy. You can tell this because the composition associations are one way.The connection has no knowledge of the connection manager. In a sense the free/busy status isn’t a property of connection at all. Yet at least in some sense it is, which is why I mention it.\"><span id=\"77\">考虑一个管理数据库连接的对象。它会创建一堆数据库连接，并在请求时将它们传递给其他对象。当一个客户端连接完成后，可以将其返回给管理员，以供其他人使用。您可以通过向连接添加<code>isBusy</code>属性来完成此操作。图12显示了一个使用外部属性的替代方案。连接是空闲的还是繁忙的是由连接管理器中的哪个集合决定的。如果你有一个连接，你不能问它是空闲的还是忙的，而是你必须要求连接管理器是否特定的连接空闲或忙碌。你可以这样说，因为组合关联是一种方式。连接不知道连接管理器。 从某种意义上来说，空闲/忙碌状态根本不是连接的属性。但至少从某种意义上来说，这就是我提到它的原因。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/17_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图12.使用外部收集属性</p>\n</blockquote>\n<p><a href=\"#78\" title=\"In a pure conceptual modeling sense this pattern does not make much sense. But there are practical implementation reasons why you may want to use it. If you want all changes to this property to go through a connection manager, then this approach makes this clear. In particular this is a natural style when you want the connection manager to give you a free connection and you don’t care which one.\"><span id=\"78\">在纯粹的概念模型意义上，这种模式没有多大意义。但是，为什么你可能想要使用它，有实际的实施原因。如果您希望对此属性进行的所有更改都通过连接管理器进行，则此方法可以清楚地说明这一点。特别是当你想让连接管理器给你一个自由的连接，而你不关心哪一个时，这是一种自然的风格。</span></a>。</p>\n<p><a href=\"#79\" title=\"Another reason to use an extrinsic property is if the connection class is provided by someone else and you can’t change its interface. You can add the new property without changing the connection class at all.\"><span id=\"79\">使用外部属性的另一个原因是如果连接类是由其他人提供的，并且您不能更改其接口。 你可以添加新的属性而不用改变连接类。</span></a></p>\n<hr>\n<h3 id=\"外在属性\"><a href=\"#外在属性\" class=\"headerlink\" title=\"外在属性\"></a>外在属性</h3><ul>\n<li><a href=\"#80\" title=\"How do you give an object a property without changing its interface?\"><span id=\"80\">你如何给对象一个属性而不改变它的接口？</span></a></li>\n<li><a href=\"#80\" title=\"Make another object responsible for knowing about the property.\"><span id=\"80\">让另一个对象负责知道这个属性。</span></a></li>\n</ul>\n<hr>\n<p><a href=\"#81\" title=\"The big problem with the extrinsic property is that it leads to an awkward and unnatural interface. Usually if you want to know something, you just find the appropriate object and ask it. Here you need to find the object that holds the external collection, and ask it about the appropriate object. In some circumstances, such as this one, it seems reasonable. But most of the time I would prefer to let objects know about their own properties (in which case I call them intrinsic properties).\"><span id=\"81\"><code>外在属性</code>的一个大问题是它会导致一个尴尬和不自然的接口。通常如果你想知道一些东西，你只要找到合适的对象并提出问题。在这里您需要找到保存外部集合的对象，并询问有关适当的对象。在某些情况下，比如这个，似乎是合理的。但大多数情况下，我宁愿让对象了解自己的属性（在这种情况下，我称之为<code>内在属性</code>）。</span></a></p>\n<hr>\n<h2 id=\"最后的想法\"><a href=\"#最后的想法\" class=\"headerlink\" title=\"最后的想法\"></a>最后的想法</h2><p><a href=\"#82\" title=\"As I finish this paper, I feel the need again to urge you not to use what I’ve been writing about here unless you really do need it. The advantages of fixed properties are great. If you need something else, then I hope this paper gives you some ideas and some guidance. But fixed properties are always your first choice.\"><span id=\"82\">当我完成本文时，我觉得需要再次敦促你不要使用我在这里写的东西，除非你真的需要它。<code>固定属性</code>的好处是伟大的。如果你需要别的东西，那么我希望这篇文章能给你一些想法和一些指导。但<code>固定属性</code>永远是你的第一选择。</span></a></p>\n<hr>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><p>[Fowler, AP] Fowler, Martin. Analysis Patterns: Reusable Object Models, Addison-1997<br>[Fowler, roles] Fowler, Martin. Dealing with Roles,<a href=\"http://www.awl.com/cseng/titles/89542-0/awweb.htm\" target=\"_blank\" rel=\"noopener\">http://www.awl.com/cseng/titles/89542-0/awweb.htm</a><br>[POSA] Buschman et al, Pattern Oriented Software Architecture, Wiley 1997</p>\n<hr>\n<h2 id=\"原文地址：http-martinfowler-com-apsupp-properties-pdf\"><a href=\"#原文地址：http-martinfowler-com-apsupp-properties-pdf\" class=\"headerlink\" title=\"原文地址：http://martinfowler.com/apsupp/properties.pdf\"></a>原文地址：<a href=\"http://martinfowler.com/apsupp/properties.pdf\" target=\"_blank\" rel=\"noopener\">http://martinfowler.com/apsupp/properties.pdf</a></h2>"}],"PostAsset":[],"PostCategory":[{"post_id":"cjf6wl6ot00082gtpj2tpy7ln","category_id":"cjf6wl6oo00042gtp70h2zk7g","_id":"cjf6wl6p1000e2gtp59klxmib"},{"post_id":"cjf6wl6od00002gtp24o50xhh","category_id":"cjf6wl6oo00042gtp70h2zk7g","_id":"cjf6wl6p4000j2gtpnnzsdum3"},{"post_id":"cjf6wl6ou00092gtp91gzdtb7","category_id":"cjf6wl6oo00042gtp70h2zk7g","_id":"cjf6wl6p7000m2gtp3qf5e0uz"},{"post_id":"cjf6wl6oz000c2gtpokpx1yjk","category_id":"cjf6wl6oo00042gtp70h2zk7g","_id":"cjf6wl6pa000r2gtp9x4ory9k"},{"post_id":"cjf6wl6ok00022gtpid2q3k5v","category_id":"cjf6wl6oo00042gtp70h2zk7g","_id":"cjf6wl6pd000u2gtpzrr9mnup"},{"post_id":"cjf6wl6p3000i2gtppybb6pcn","category_id":"cjf6wl6oo00042gtp70h2zk7g","_id":"cjf6wl6pg000z2gtp234m1okd"},{"post_id":"cjf6wl6or00062gtpq36sc2zp","category_id":"cjf6wl6oo00042gtp70h2zk7g","_id":"cjf6wl6pi00122gtpxpg46ubc"},{"post_id":"cjf6wl6p0000d2gtp9lcvzvkt","category_id":"cjf6wl6p8000n2gtpkisslxh2","_id":"cjf6wl6pl00162gtpfmuv1jrj"},{"post_id":"cjf6wl6pb000t2gtp2svpi2x8","category_id":"cjf6wl6p8000n2gtpkisslxh2","_id":"cjf6wl6po00192gtpvm0o3h5x"},{"post_id":"cjf6wl6pi00112gtpq1c5jo00","category_id":"cjf6wl6p8000n2gtpkisslxh2","_id":"cjf6wl6pq001c2gtpxw37ge37"},{"post_id":"cjf6wl6p9000q2gtpsw4m2kt1","category_id":"cjf6wl6pe000w2gtpho6qzz3z","_id":"cjf6wl6pu001g2gtpvsxpc8ry"},{"post_id":"cjf6wl6ps001f2gtp8ln3ok7j","category_id":"cjf6wl6p8000n2gtpkisslxh2","_id":"cjf6wl6q4001p2gtpc6d77ijq"},{"post_id":"cjf6wl6pn00182gtpq4lzuide","category_id":"cjf6wl6pr001e2gtp27vakexs","_id":"cjf6wl6q7001s2gtph3pqgog2"},{"post_id":"cjf6wl6pz001l2gtp5hy1gl3j","category_id":"cjf6wl6pr001e2gtp27vakexs","_id":"cjf6wl6qa001v2gtp709nwica"},{"post_id":"cjf6wl6pp001b2gtp4ui6dogz","category_id":"cjf6wl6pr001e2gtp27vakexs","_id":"cjf6wl6qc001y2gtpaus92s85"},{"post_id":"cjf6wl6q9001u2gtpgdnu3gja","category_id":"cjf6wl6q6001r2gtprw3h08ip","_id":"cjf6wl6qh00252gtp232eunvo"},{"post_id":"cjf6wl6pw001j2gtpv74vtvdt","category_id":"cjf6wl6q6001r2gtprw3h08ip","_id":"cjf6wl6qk00292gtp30gblt36"},{"post_id":"cjf6wl6qe00222gtpw57ev4cy","category_id":"cjf6wl6pe000w2gtpho6qzz3z","_id":"cjf6wl6ql002b2gtpq5f02ogr"},{"post_id":"cjf6wl6q2001o2gtp1ck7269s","category_id":"cjf6wl6qd001z2gtpnfh7fl0u","_id":"cjf6wl6qn002e2gtpccb9lz3w"},{"post_id":"cjf6wl6qg00242gtpbltnv9no","category_id":"cjf6wl6q6001r2gtprw3h08ip","_id":"cjf6wl6qo002h2gtpgx6fy5rd"},{"post_id":"cjf6wl6qb001x2gtpn6batox8","category_id":"cjf6wl6qd001z2gtpnfh7fl0u","_id":"cjf6wl6qq002k2gtptqs33xv3"},{"post_id":"cjf6wl6s6004f2gtp3iwazyzf","category_id":"cjf6wl6s7004g2gtpda7kwt5l","_id":"cjf6wl6s8004j2gtp1a3ksvpd"},{"post_id":"cjf6wl6pk00152gtp6p0o1zuw","category_id":"cjf6wl6q6001r2gtprw3h08ip","_id":"cjf6wob550001qctpghox9sho"},{"post_id":"cjf6wl6q5001q2gtptwv7tzjd","category_id":"cjf6wl6qd001z2gtpnfh7fl0u","_id":"cjf6wzmaa0001a8tp4uhik0kw"},{"post_id":"cjf6wl6pf000y2gtpqbamuyj9","category_id":"cjf6wl6q6001r2gtprw3h08ip","_id":"cjf6wzprz0004a8tpxn1c5ge2"}],"PostTag":[{"post_id":"cjf6wl6oz000c2gtpokpx1yjk","tag_id":"cjf6wl6oq00052gtpiaxufjml","_id":"cjf6wl6p3000h2gtpgowb09dh"},{"post_id":"cjf6wl6oz000c2gtpokpx1yjk","tag_id":"cjf6wl6ox000b2gtpo2m8ptsi","_id":"cjf6wl6p5000k2gtpyysqocxe"},{"post_id":"cjf6wl6p3000i2gtppybb6pcn","tag_id":"cjf6wl6oq00052gtpiaxufjml","_id":"cjf6wl6p9000p2gtpsmuinqw6"},{"post_id":"cjf6wl6p3000i2gtppybb6pcn","tag_id":"cjf6wl6ox000b2gtpo2m8ptsi","_id":"cjf6wl6pb000s2gtp2cl7wqss"},{"post_id":"cjf6wl6p3000i2gtppybb6pcn","tag_id":"cjf6wl6p2000g2gtpm2s9o6rt","_id":"cjf6wl6pf000x2gtpeejtujfy"},{"post_id":"cjf6wl6od00002gtp24o50xhh","tag_id":"cjf6wl6oq00052gtpiaxufjml","_id":"cjf6wl6ph00102gtp5oa5bqcs"},{"post_id":"cjf6wl6od00002gtp24o50xhh","tag_id":"cjf6wl6ox000b2gtpo2m8ptsi","_id":"cjf6wl6pk00142gtp6by3svj3"},{"post_id":"cjf6wl6od00002gtp24o50xhh","tag_id":"cjf6wl6p2000g2gtpm2s9o6rt","_id":"cjf6wl6pm00172gtp121u1mok"},{"post_id":"cjf6wl6ok00022gtpid2q3k5v","tag_id":"cjf6wl6oq00052gtpiaxufjml","_id":"cjf6wl6pr001d2gtpza4ks8bu"},{"post_id":"cjf6wl6ok00022gtpid2q3k5v","tag_id":"cjf6wl6ox000b2gtpo2m8ptsi","_id":"cjf6wl6pv001h2gtpicaxjzzc"},{"post_id":"cjf6wl6ok00022gtpid2q3k5v","tag_id":"cjf6wl6p2000g2gtpm2s9o6rt","_id":"cjf6wl6py001k2gtp8eqy6lq2"},{"post_id":"cjf6wl6or00062gtpq36sc2zp","tag_id":"cjf6wl6oq00052gtpiaxufjml","_id":"cjf6wl6qa001w2gtp50lo3hv6"},{"post_id":"cjf6wl6or00062gtpq36sc2zp","tag_id":"cjf6wl6ox000b2gtpo2m8ptsi","_id":"cjf6wl6qd00202gtpiwajl4of"},{"post_id":"cjf6wl6or00062gtpq36sc2zp","tag_id":"cjf6wl6p2000g2gtpm2s9o6rt","_id":"cjf6wl6qf00232gtp1j1mmg6p"},{"post_id":"cjf6wl6ot00082gtpj2tpy7ln","tag_id":"cjf6wl6oq00052gtpiaxufjml","_id":"cjf6wl6qh00262gtp1fp6ra8x"},{"post_id":"cjf6wl6ot00082gtpj2tpy7ln","tag_id":"cjf6wl6q8001t2gtpha0mjyl7","_id":"cjf6wl6qk002a2gtpm1pvce3a"},{"post_id":"cjf6wl6ou00092gtp91gzdtb7","tag_id":"cjf6wl6oq00052gtpiaxufjml","_id":"cjf6wl6qm002c2gtpo6iuyegs"},{"post_id":"cjf6wl6ou00092gtp91gzdtb7","tag_id":"cjf6wl6ox000b2gtpo2m8ptsi","_id":"cjf6wl6qo002g2gtpx298j3bw"},{"post_id":"cjf6wl6p0000d2gtp9lcvzvkt","tag_id":"cjf6wl6qj00282gtprusr99mw","_id":"cjf6wl6qt002n2gtpnue5aewi"},{"post_id":"cjf6wl6p0000d2gtp9lcvzvkt","tag_id":"cjf6wl6qn002f2gtp1i576ql6","_id":"cjf6wl6qt002o2gtpzzsgvleh"},{"post_id":"cjf6wl6p0000d2gtp9lcvzvkt","tag_id":"cjf6wl6qp002j2gtpn4k64b1y","_id":"cjf6wl6qu002q2gtpd66bwvtg"},{"post_id":"cjf6wl6p0000d2gtp9lcvzvkt","tag_id":"cjf6wl6qq002l2gtp5df7ea0l","_id":"cjf6wl6qv002r2gtpsnk7qz98"},{"post_id":"cjf6wl6p9000q2gtpsw4m2kt1","tag_id":"cjf6wl6qs002m2gtpz7q7egyp","_id":"cjf6wl6qx002v2gtpw10rcrgw"},{"post_id":"cjf6wl6p9000q2gtpsw4m2kt1","tag_id":"cjf6wl6qu002p2gtpy3v289lo","_id":"cjf6wl6qy002w2gtpotwfvbxe"},{"post_id":"cjf6wl6p9000q2gtpsw4m2kt1","tag_id":"cjf6wl6qv002s2gtpxu1a983k","_id":"cjf6wl6qz002y2gtpu9oi6mxp"},{"post_id":"cjf6wl6p9000q2gtpsw4m2kt1","tag_id":"cjf6wl6qw002t2gtpyf7sb1z7","_id":"cjf6wl6qz002z2gtppkigxl8g"},{"post_id":"cjf6wl6pb000t2gtp2svpi2x8","tag_id":"cjf6wl6oq00052gtpiaxufjml","_id":"cjf6wl6r100312gtpbgggw3q8"},{"post_id":"cjf6wl6pb000t2gtp2svpi2x8","tag_id":"cjf6wl6qx002u2gtpyy6jl8dp","_id":"cjf6wl6r200322gtp6hz9lyw0"},{"post_id":"cjf6wl6pb000t2gtp2svpi2x8","tag_id":"cjf6wl6qy002x2gtpsxe82q8u","_id":"cjf6wl6r300342gtpr24jp3qt"},{"post_id":"cjf6wl6pi00112gtpq1c5jo00","tag_id":"cjf6wl6oq00052gtpiaxufjml","_id":"cjf6wl6r500362gtpupc3j3fc"},{"post_id":"cjf6wl6pi00112gtpq1c5jo00","tag_id":"cjf6wl6qx002u2gtpyy6jl8dp","_id":"cjf6wl6r600372gtpbp4rxbx8"},{"post_id":"cjf6wl6pi00112gtpq1c5jo00","tag_id":"cjf6wl6r200332gtpdzwytp5x","_id":"cjf6wl6r700392gtpu9e9bq4c"},{"post_id":"cjf6wl6pn00182gtpq4lzuide","tag_id":"cjf6wl6r400352gtpvl37eg7n","_id":"cjf6wl6r7003a2gtp07suj5s5"},{"post_id":"cjf6wl6pp001b2gtp4ui6dogz","tag_id":"cjf6wl6r400352gtpvl37eg7n","_id":"cjf6wl6r8003c2gtpw0tf9ake"},{"post_id":"cjf6wl6ps001f2gtp8ln3ok7j","tag_id":"cjf6wl6r8003b2gtp2impvmxd","_id":"cjf6wl6rb003g2gtpo3aogb9z"},{"post_id":"cjf6wl6ps001f2gtp8ln3ok7j","tag_id":"cjf6wl6oq00052gtpiaxufjml","_id":"cjf6wl6rc003h2gtpv56osast"},{"post_id":"cjf6wl6ps001f2gtp8ln3ok7j","tag_id":"cjf6wl6r9003d2gtpc69kuazt","_id":"cjf6wl6rd003j2gtpykh5gjlg"},{"post_id":"cjf6wl6ps001f2gtp8ln3ok7j","tag_id":"cjf6wl6ra003e2gtp8llafg7x","_id":"cjf6wl6rd003k2gtpclvi81pq"},{"post_id":"cjf6wl6pw001j2gtpv74vtvdt","tag_id":"cjf6wl6ra003f2gtprlb4je2o","_id":"cjf6wl6rf003m2gtps2tq8hm7"},{"post_id":"cjf6wl6pz001l2gtp5hy1gl3j","tag_id":"cjf6wl6r400352gtpvl37eg7n","_id":"cjf6wl6rf003n2gtpjqafqnw7"},{"post_id":"cjf6wl6q2001o2gtp1ck7269s","tag_id":"cjf6wl6re003l2gtp7x77x48h","_id":"cjf6wl6rj003s2gtpm15kgvmb"},{"post_id":"cjf6wl6q2001o2gtp1ck7269s","tag_id":"cjf6wl6rg003o2gtpunmxxxdx","_id":"cjf6wl6rj003t2gtpj4elelng"},{"post_id":"cjf6wl6q2001o2gtp1ck7269s","tag_id":"cjf6wl6rh003p2gtpi8nforfm","_id":"cjf6wl6rk003v2gtpqf35qht0"},{"post_id":"cjf6wl6q2001o2gtp1ck7269s","tag_id":"cjf6wl6rh003q2gtpt335dfx9","_id":"cjf6wl6rl003w2gtpvhrwqs4f"},{"post_id":"cjf6wl6q9001u2gtpgdnu3gja","tag_id":"cjf6wl6rk003u2gtp7hw1gfrc","_id":"cjf6wl6rm00402gtph3y1z91m"},{"post_id":"cjf6wl6q9001u2gtpgdnu3gja","tag_id":"cjf6wl6rl003x2gtpu78dttgl","_id":"cjf6wl6rn00412gtppjpb8k56"},{"post_id":"cjf6wl6qb001x2gtpn6batox8","tag_id":"cjf6wl6rm003z2gtpu2n05nkk","_id":"cjf6wl6ro00432gtp7jnqg8m2"},{"post_id":"cjf6wl6qe00222gtpw57ev4cy","tag_id":"cjf6wl6qs002m2gtpz7q7egyp","_id":"cjf6wl6rq00472gtpzzk3dx84"},{"post_id":"cjf6wl6qe00222gtpw57ev4cy","tag_id":"cjf6wl6ro00442gtpesuykbw8","_id":"cjf6wl6rq00482gtpcfze4t5s"},{"post_id":"cjf6wl6qe00222gtpw57ev4cy","tag_id":"cjf6wl6qv002s2gtpxu1a983k","_id":"cjf6wl6rr004a2gtpsmd89spt"},{"post_id":"cjf6wl6qg00242gtpbltnv9no","tag_id":"cjf6wl6rq00462gtpgtnsrrff","_id":"cjf6wl6rs004c2gtphxhyum29"},{"post_id":"cjf6wl6qg00242gtpbltnv9no","tag_id":"cjf6wl6rr00492gtpz3dlr4df","_id":"cjf6wl6rt004d2gtpn5yzsf4d"},{"post_id":"cjf6wl6qg00242gtpbltnv9no","tag_id":"cjf6wl6rl003x2gtpu78dttgl","_id":"cjf6wl6rt004e2gtp1h8zq93l"},{"post_id":"cjf6wl6s6004f2gtp3iwazyzf","tag_id":"cjf6wl6s7004h2gtpnjpx7i7c","_id":"cjf6wl6s9004k2gtpa6dvi23c"},{"post_id":"cjf6wl6s6004f2gtp3iwazyzf","tag_id":"cjf6wl6s8004i2gtpxijary96","_id":"cjf6wl6s9004l2gtpikgmmkdh"},{"post_id":"cjf6wl6pk00152gtp6p0o1zuw","tag_id":"cjf6wl6rl003x2gtpu78dttgl","_id":"cjf6wob510000qctptr52atgs"},{"post_id":"cjf6wl6q5001q2gtptwv7tzjd","tag_id":"cjf6wl6ri003r2gtpq7tktrup","_id":"cjf6wzma90000a8tpjygikn9o"},{"post_id":"cjf6wl6pf000y2gtpqbamuyj9","tag_id":"cjf6wl6rl003x2gtpu78dttgl","_id":"cjf6wzprv0002a8tpum3i2rmz"},{"post_id":"cjf6wl6pf000y2gtpqbamuyj9","tag_id":"cjf6wvkev00003stpwxbonuuk","_id":"cjf6wzpry0003a8tptma1s42i"}],"Tag":[{"name":"Java","_id":"cjf6wl6oq00052gtpiaxufjml"},{"name":"中级难度","_id":"cjf6wl6ox000b2gtpo2m8ptsi"},{"name":"译文","_id":"cjf6wl6p2000g2gtpm2s9o6rt"},{"name":"初级难度","_id":"cjf6wl6q8001t2gtpha0mjyl7"},{"name":"二维码","_id":"cjf6wl6qj00282gtprusr99mw"},{"name":"登陆","_id":"cjf6wl6qn002f2gtp1i576ql6"},{"name":"APP","_id":"cjf6wl6qp002j2gtpn4k64b1y"},{"name":"流程","_id":"cjf6wl6qq002l2gtp5df7ea0l"},{"name":"插件","_id":"cjf6wl6qs002m2gtpz7q7egyp"},{"name":"gitment","_id":"cjf6wl6qu002p2gtpy3v289lo"},{"name":"Hexo","_id":"cjf6wl6qv002s2gtpxu1a983k"},{"name":"规范","_id":"cjf6wl6qw002t2gtpyf7sb1z7"},{"name":"Spring Boot","_id":"cjf6wl6qx002u2gtpyy6jl8dp"},{"name":"Exception","_id":"cjf6wl6qy002x2gtpsxe82q8u"},{"name":"Spring Cloud","_id":"cjf6wl6r200332gtpdzwytp5x"},{"name":"java","_id":"cjf6wl6r400352gtpvl37eg7n"},{"name":"二进制","_id":"cjf6wl6r8003b2gtp2impvmxd"},{"name":"Java基础","_id":"cjf6wl6r9003d2gtpc69kuazt"},{"name":"位运算","_id":"cjf6wl6ra003e2gtp8llafg7x"},{"name":"其他","_id":"cjf6wl6ra003f2gtprlb4je2o"},{"name":"redis","_id":"cjf6wl6re003l2gtp7x77x48h"},{"name":"Resource","_id":"cjf6wl6rg003o2gtpunmxxxdx"},{"name":"Autowired","_id":"cjf6wl6rh003p2gtpi8nforfm"},{"name":"Spring","_id":"cjf6wl6rh003q2gtpt335dfx9"},{"name":"sort","_id":"cjf6wl6ri003r2gtpq7tktrup"},{"name":"程序员","_id":"cjf6wl6rk003u2gtp7hw1gfrc"},{"name":"转载","_id":"cjf6wl6rl003x2gtpu78dttgl"},{"name":"timestamp","_id":"cjf6wl6rm003z2gtpu2n05nkk"},{"name":"主题","_id":"cjf6wl6ro00442gtpesuykbw8"},{"name":"生活","_id":"cjf6wl6rq00462gtpgtnsrrff"},{"name":"房子","_id":"cjf6wl6rr00492gtpz3dlr4df"},{"name":"属性","_id":"cjf6wl6s7004h2gtpnjpx7i7c"},{"name":"设计","_id":"cjf6wl6s8004i2gtpxijary96"},{"name":"排版","_id":"cjf6wvkev00003stpwxbonuuk"}]}}